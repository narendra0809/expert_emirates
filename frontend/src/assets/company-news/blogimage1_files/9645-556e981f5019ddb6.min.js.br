"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f39d5754-b112-593b-b3d4-34e864e23a36")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[9645],{43931:(e,t,l)=>{l.d(t,{A7:()=>o,i4:()=>r,nt:()=>a});var n=l(925040),s=l(366485);let a=e=>e.library.localStyleSelection,r=(0,n.Mz)([a,(e,t)=>t],(e,t)=>e?.type===t?e:null),o=(0,n.Mz)([r,(e,t,l)=>l],(e,t)=>{if(!e)return null;let l=new Set,n=new Set;return e.folderNames.forEach(e=>{let a=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);a&&((0,s.KU)(a).forEach(e=>{l.add(e.name)}),(0,s.dm)(a).forEach(e=>{n.add(e.node_id)}))}),{type:e.type,folderNames:l,styleIds:n}})},919645:(e,t,l)=>{l.d(t,{Q:()=>eH});var n=l(848318),s=l(301168),a=l(660376),r=l(559389),o=l(376852),i=l(673786),d=l(186606),c=l(320953),y=l(580494),u=l(179507),m=l(325498),p=l(989232),f=l(865114),g=l(781239),E=l(608323),S=l(156137),w=l(967688),_=l(453370),h=l(244534),k=l(834428),C=l(438071),T=l(375694),b=l(67188),v=l(696786),L=l(303397),R=l(355755),N=l(730143),I=l(277454),A=l(555958),x=l(43931),M=l(88009),U=l(750892),D=l(341090),P=l(215148),O=l(614892),Y=l(773511),K=l(954703),F=l(808943),B=l(347701),W=l(150934),H=l(693108),X=l(401970),$=l(17753),G=l(536384),V=l.n(G),q=l(857607),j=l(27776);let z="styles--contextMenu--C-hVT",Z="styles--caret--DZmzh",Q="styles--rowSelectedExpanded--MGvUV",J="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function ee({childLeft:e,childRight:t,deleteSelectedItems:l,forceShowHoverBorder:s,hideStylePreview:a,index:r,inspectStyleSelected:o,isDragging:i,isEditable:d,isRenaming:c,isCollapsed:y=!0,isLastChildOfSelection:u=!1,isFirstChildOfSelection:m=!1,isFolder:p,level:f,name:E,nameRef:S,onContextMenu:w,onCreateFolder:_,onDoubleClick:h,onHoverChange:k,onMouseDown:C,onMouseMove:T,recordingKey:b,rowRef:R,secondaryName:N,selected:I,selectedSecondary:A,stopRenamingItem:x,tooltipData:M}){let[U,P]=n.useState(E),[Y,K]=n.useState(!1),F=(0,v.GS)(),B=n.useCallback(e=>{e?.select()},[]);n.useEffect(()=>{P(E)},[E]);let W=n.useCallback(e=>{""===e.trim()?(x(r,E),P(E)):x(r,e)},[r,E,x]),H=(0,g.AF)((0,g.Pt)(b,"text-input"),"change",n.useCallback(e=>{P(e.currentTarget.value)},[P])),X=(0,g.v_)((0,g.Pt)(b,"text-input"),"keydown",e=>{e.keyCode===q.Uz.ESCAPE?(x(r,E),P(E)):e.keyCode===q.Uz.ENTER&&W(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),$=(0,g.v_)(b,"keydown",e=>{d&&!c&&(e.keyCode===q.Uz.BACKSPACE||e.keyCode===q.Uz.DELETE)?l():d&&!c&&e.keyCode===q.Uz.G&&(0,q.Fo)(e)?(_(),e.preventDefault()):!c&&"Tab"!==e.key&&e.nativeEvent&&L.Y5.forwardKeyboardEvent(e.nativeEvent)}),G=n.useCallback(()=>{W(U)},[W,U]),z=(0,g.rf)(b,"contextmenu",e=>{w(e)}),Z=(0,g.rf)(b,"mousemove",e=>{T(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),ee=(0,g.rf)(b,"mousedown",e=>{C(e),a()}),et=(0,g.rf)(b,"mouseenter",n.useCallback(()=>{K(!0),k?.(!0)},[K,k])),el=n.useCallback(()=>{K(!1),k?.(!1)},[K,k]),en=(0,g.rf)(b,"dblclick",n.useCallback(e=>{h(e)},[h])),es=Math.min((f-1)*3,18),ea=j.jNX-4-es,er=ea-(F?7:5),eo=Y&&!c||o?er:ea,ei=I||A,ed=V()({[Q]:!y&&ei,"styles--folderSecondarySelected--SL0JY":A||I&&!m,[J]:A&&!F}),ec=V()({[J]:ei,[Q]:!u&&ei}),ey=V()("styles--rowWithBorder--bphZ-",{[ed]:p,[ec]:!p,"styles--rowWithHover--RWNMH":!ei&&(s||Y&&!i)}),eu=n.createElement("div",{className:c?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:E,style:F?{width:"100%"}:{gridColumnEnd:`span ${eo}`}},c?n.createElement(O.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",innerRef:B,onBlur:G,onChange:H,onKeyDown:X,spellCheck:!1,value:U}):n.createElement(n.Fragment,null,n.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:S,...M},E),N&&n.createElement("div",{className:"styles--textStyle--DiUv4"},N)));return n.createElement(D.e,{ref:R,className:ey,dragging:i,hideGrabber:!0,onContextMenu:z,onDoubleClick:en,onKeyDown:$,onMouseDown:ee,onMouseEnter:et,onMouseLeave:el,onMouseMove:Z,selected:I,selectedSecondary:!1,tabIndex:0},es>0&&n.createElement("span",{style:{gridColumnEnd:`span ${es}`}}),n.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:F?{gridColumnEnd:`span ${eo}`}:void 0},e,F&&eu),!F&&eu,t)}var et=l(523860),el=l(85206),en=l(954184),es=l(546131);function ea({deleteSelectedItems:e,folder:t,folderNameToNestUnder:l,hideStylePreview:a,index:r,isCollapsed:o,isDragging:i,isEditable:d,isRenaming:c,isTemporarilyExpanded:y,isFirstChildOfSelection:u,level:m,onContextMenu:p,onCreateFolder:f,onMouseDown:E,onMouseMove:S,onRenameItem:_,recordingKey:h,selected:k,selectedSecondary:C,stopRenamingItem:b,temporarilyExpandFolder:v,toggleFolder:L}){let R=(0,s.wA)(),[N,I]=n.useState(!1),x=n.useRef(null),M=n.useRef(null),U=N&&!c&&d,D=n.useCallback(()=>{L(!o)},[o,L]),P=n.useCallback(e=>{e.target!==M.current&&t.styleTypeSection&&_(t.name,!1,t.styleTypeSection)},[t.name,t.styleTypeSection,_]);n.useEffect(()=>{if(N&&i&&o){let e=setTimeout(()=>{v(t.name)},1e3);return()=>clearTimeout(e)}},[N,i,o,v,t]);let G=n.useCallback(()=>{let e=(0,H.Zk)(t.styleTypeSection),l=x.current?.getBoundingClientRect();e&&l&&R(T.Zs({rowLeft:l.left,rowTop:l.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[x,t.name,t.styleTypeSection,R]);return n.createElement(ee,{childLeft:n.createElement(Y.E,{onClick:D,className:"styles--caretContainer--4-dqw",ref:M},n.createElement(X.U,{svg:o&&!y?el.A:et.A,className:Z},o&&!y?n.createElement(F.k,{className:Z}):n.createElement(B.O,{className:Z}))),childRight:U&&n.createElement(O.$4,null,n.createElement(K.K,{recordingKey:g.Pt(h,"addButton"),"aria-label":(0,w.t)("design_systems.styles.tooltips.create"),onClick:G,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,w.t)("design_systems.styles.tooltips.create")}},n.createElement(X.U,{svg:en.A,fallbackSvg:es.A,children:n.createElement(W.x,null)}))),deleteSelectedItems:e,forceShowHoverBorder:l===t.name,hideStylePreview:a,index:r,isCollapsed:o,isDragging:i,isEditable:d,isFirstChildOfSelection:u,isFolder:!0,isRenaming:c,level:m,name:(0,A.kH)(t.name),onContextMenu:p,onCreateFolder:f,onDoubleClick:P,onHoverChange:I,onMouseDown:E,onMouseMove:S,onRenameItem:_,recordingKey:h,rowRef:x,selected:k,selectedSecondary:C,stopRenamingItem:b})}var er=l(62034),eo=l(361765),ei=l(410441),ed=l(360430),ec=l(526867),ey=l(888663),eu=l(375347),em=l(821561);function ep({deleteSelectedItems:e,hideStylePreview:t,index:l,isDragging:a,isEditable:r,isRenaming:o,isLastChildOfSelection:i,level:d,onContextMenu:c,onCreateFolder:y,onInspectStyle:u,onMouseDown:m,onMouseMove:p,onRenameItem:f,recordingKey:E,selected:S,selectedSecondary:_,stopRenamingItem:k,dsStyle:C,stylePreviewShown:L,updateContextMenuStyleRef:R,updateSelection:N,updateFocusRowRef:I}){let[x,M]=n.useState(!1),U=(0,s.wA)(),D=n.useRef(null),P=n.useRef(null),Y=(0,v.GS)(),K=n.useCallback(()=>{r&&f(C.node_id,!0,C.style_type)},[f,C.node_id,C.style_type,r]),F=L.isShown&&!L.isCreating&&L.style.node_id===C.node_id&&(0,ed.EF)(L.style,C),B=x&&!o||F,W=n.useCallback(function(){let e=P.current;if(e){let t=e.getBoundingClientRect();F?U(T.sw()):(U(T.rk({style:C,rowTop:t.top,rowLeft:t.left})),u(C),N({type:C.style_type,folderNames:new Set,styleIds:new Set(C.node_id)}))}U(h.XE())},[U,u,N,C,F]),H=n.useCallback(e=>{(2===e.button||e.ctrlKey)&&R(P.current),m(e),F&&W()},[W,m,F,R]),G=D.current,V=!!G&&G.offsetWidth<G.scrollWidth,q=n.useMemo(()=>!a&&C.description&&V?{"data-tooltip-type":$.Ib.SPECIAL,"data-tooltip":eu.Z,"data-tooltip-style-name":(0,A.kH)(C.name),"data-tooltip-style-description":C.description,"data-tooltip-max-width":j.jNX*(0,ei.hG)(j.dGl)}:null,[V,a,C.name,C.description]),z="TEXT"===C.style_type&&C.meta?.style_thumbnail?C.meta.style_thumbnail:null;return n.createElement(ee,{childLeft:n.createElement(n.Fragment,null,n.createElement(ey.zi,{dsStyle:C,disableTooltip:!0}),S&&"FILL"===C.style_type&&n.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:B&&n.createElement(O.$4,null,n.createElement("div",{style:{gridColumnEnd:"span 1"}}),Y?n.createElement(er.d,{recordingKey:g.Pt(E,"customButton"),"aria-expanded":F,onClick:W,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":r?(0,w.t)("design_systems.styles.edit_style"):(0,w.t)("design_systems.styles.view_style"),onMouseDown:b.dG},children:n.createElement(X.U,{svg:em.A},n.createElement(eo.A,null)),"aria-label":r?(0,w.t)("design_systems.styles.edit_style"):(0,w.t)("design_systems.styles.view_style")}):n.createElement(O.YW,{className:S?"styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT":"styles--showOnRowHover--OUqRT",recordingKey:g.Pt(E,"customButton"),"data-tooltip-type":$.Ib.TEXT,"data-tooltip":r?(0,w.t)("design_systems.styles.edit_style"):(0,w.t)("design_systems.styles.view_style"),selected:F,onMouseDown:b.dG,onClick:W},n.createElement(X.U,{svg:em.A},n.createElement(eo.A,null)))),deleteSelectedItems:e,hideStylePreview:t,index:l,inspectStyleSelected:F,isDragging:a,isEditable:r,isFolder:!1,isLastChildOfSelection:i,isRenaming:o,level:d,name:(0,A.kH)(C.name),nameRef:D,onContextMenu:c,onCreateFolder:y,onDoubleClick:K,onHoverChange:M,onMouseDown:H,onMouseMove:p,onRenameItem:f,recordingKey:E,rowRef:e=>{e&&(I?.(e),P.current=e)},secondaryName:z&&(0,ec.P$)(z),selected:S,selectedSecondary:_,stopRenamingItem:k,tooltipData:q})}function ef({styleType:e,setDefaultToolOnCreateStyle:t,children:l}){let s=!(0,R.p8)("isReadOnly");return n.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},s?n.createElement(eg,{styleType:e,recordingKey:`style-section-header-${e}`,setDefaultToolOnCreateStyle:t}):n.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,I.QT)(e)),l)}function eg({styleType:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let[a,r]=n.useState(!1),o=(0,s.wA)(),i=n.useRef(null),d=n.useCallback(()=>{t&&L.Y5.triggerAction("set-tool-default");let l=(0,H.Zk)(e),n=i.current?.getBoundingClientRect();l&&n&&o(T.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:l}))},[t,e,o]);return n.createElement("div",{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),ref:i},n.createElement(O.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,I.QT)(e)),n.createElement("div",{style:{visibility:a?"visible":"hidden"}},n.createElement(K.K,{recordingKey:g.Pt(l,"addButton"),"aria-label":(0,w.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,I.XV)(e).toLowerCase()}),onClick:d,htmlAttributes:{"data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,w.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,I.XV)(e).toLowerCase()})}},n.createElement(X.U,{svg:en.A,fallbackSvg:es.A,children:n.createElement(W.x,null)}))))}ef.displayName="StyleTypeSection";var eE=l(156974),eS=l(511067),ew=l(366485);let e_=eE.ms,eh=eE.c$,ek=eE.wv,eC="styles-by-type-context-menu",eT=.75*(0,ei.hG)(j.uj0);function eb({styleRowRef:e,onEditStyle:t,onRenameItem:l,onCreateFolder:a,onDeleteItems:r,onCutItems:o,onCopyItems:i,onDuplicateItems:d,onPasteItems:c,styleType:y}){let u=(0,eS.Um)(),m=(0,s.d4)(e=>e.library.localStyleSelection),p=n.useMemo(()=>m&&m.type===y&&u?.type===eC?(0,ew.QA)(m,u.data.uiList):[],[m,u,y]),f=n.useMemo(()=>(0,ew.Ug)(p).map(e=>e.node_id),[p]),g=f.length;return u&&f.length?n.createElement(ev,{dropdownShown:u,numStyles:g,onCopyItems:i,onCreateFolder:a,onCutItems:o,onDeleteItems:r,onDuplicateItems:d,onEditStyle:t,onPasteItems:c,onRenameItem:l,selectedItems:p,styleRowRef:e}):n.createElement("div",null)}function ev({styleRowRef:e,selectedItems:t,numStyles:l,dropdownShown:a,onEditStyle:r,onRenameItem:o,onCreateFolder:i,onDeleteItems:c,onCutItems:u,onCopyItems:m,onDuplicateItems:p,onPasteItems:f}){let g=(0,s.wA)();n.useEffect(()=>(d.glU.computePastableStyleCount(),()=>{d.glU.clearPastableStyleCount()}),[]);let E=(0,s.d4)(e=>e.mirror.appModel.pastableStyleCount),S=!!N.q5()?.canEdit,_=n.useCallback(()=>{if(!t.length||t[0].type!==M.PW.STYLE)return;let l=t[0];if(e){let t=e.getBoundingClientRect();g(T.rk({style:l,rowTop:t.top,rowLeft:t.left})),g(h.XE())}r(l)},[g,t,r,e]),k=n.useCallback(()=>{if(!t.length||t[0].type===M.PW.STYLE)return;let e=t[0];o(e.name,!1,e.styleTypeSection)},[o,t]);if(-1===E)return n.createElement("div",null);if(!S)return l>1?n.createElement("div",null):n.createElement(e_,{style:a.data.position,className:z},n.createElement(eh,{recordingKey:"edit-style-option",onClick:_},(0,w.tx)("design_systems.styles.view_style")));let C=1===l&&(t[0].type===M.PW.STYLE?n.createElement(eh,{recordingKey:"edit-style-option",onClick:_},(0,w.tx)("design_systems.styles.edit_style")):n.createElement(eh,{recordingKey:"rename-folder-option",onClick:k},(0,w.tx)("design_systems.styles.rename_folder")));return n.createElement(e_,{style:a.data.position,className:z},n.createElement(eh,{recordingKey:"create-folder-option",onClick:i},(0,w.tx)("design_systems.styles.add_new_folder")),C,n.createElement(eh,{recordingKey:"delete-style-option",onClick:c},(0,w.tx)("design_systems.styles.delete_styles",{numStyles:l})),n.createElement(ek,null),n.createElement(eh,{recordingKey:"cut-style-option",onClick:u},(0,w.tx)("design_systems.styles.cut_styles",{numStyles:l})),(0,y.k)().ds_qw_copy_duplicate_styles&&n.createElement(eh,{recordingKey:"copy-style-option",onClick:m},(0,w.tx)("design_systems.styles.copy_styles",{numStyles:l})),(0,y.k)().ds_qw_copy_duplicate_styles&&n.createElement(eh,{recordingKey:"duplicate-style-option",onClick:p},(0,w.tx)("design_systems.styles.duplicate_styles",{numStyles:l})),!!E&&n.createElement(eh,{recordingKey:"paste-style-option",onClick:f},(0,w.tx)("design_systems.styles.paste_styles",{numStyles:E})))}var eL=l(990140),eR=l(601021),eN=l(451657),eI=l(651756),eA=l(305886),ex=l(547011),eM=l(335744),eU=l(14850),eD=l(483157),eP=l(215707),eO=l(542373),eY=l(300048),eK=l(383109);let eF="local-style-creation-dropdown";function eB({setDefaultToolOnCreateStyle:e}){let t=(0,s.wA)(),l=(0,n.useContext)(eU.lk),r=!(0,R.p8)("isReadOnly"),o=n.useRef(null),i=n.useRef(null),d=o.current,c=(0,eS.Um)(),y=c?.type===eF,u=c?.data?.targetRect,m="localStyleHeader",f=0===(0,P.Bs)().length,E=(0,s.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),S=n.useMemo(()=>u||(y&&d?d.getBoundingClientRect():null),[u,d,y]),h=()=>{t(_.oB())},k=()=>{t(_.j7({type:eF}))},C=e=>{e.stopPropagation(),t(T.YG());let l=o.current;y?h():l&&((0,p.trackEvent)("editor-local-styles-dropdown-show"),k())},b=t=>{e&&L.Y5.triggerAction("set-tool-default"),h();let n=(0,H.Zk)(t),s=i.current?.getBoundingClientRect();n&&s&&l({styleType:t,inheritStyleKeyField:n,rowLeft:s.left,rowTop:s.top})},v=f&&!y&&!E;return n.createElement(O.fI,{className:v?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",ref:i},n.createElement(eD.x,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>v&&C(e),onClick:e=>e.stopPropagation()},(0,w.tx)("design_systems.styles.local_styles")),r&&n.createElement(n.Fragment,null,n.createElement(O.K0,{ref:o,onMouseDown:C,onClick:e=>e.stopPropagation(),className:y?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,w.t)("design_systems.create_style.create_style"),recordingKey:g.Pt(m,"addButton")},n.createElement(X.U,{svg:en.A,fallbackSvg:es.A},n.createElement(eL.e,null))),y&&S&&n.createElement(eM.Cf,{targetRect:S,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},I.og.map(e=>{let{icon:t,label:l}=function(e){switch(e){case"TEXT":return{icon:n.createElement(X.U,{svg:eK.A},n.createElement(eR.e,null)),label:(0,w.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:n.createElement(X.U,{svg:eO.A},n.createElement(eN.G,null)),label:(0,w.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:n.createElement(X.U,{svg:eY.A},n.createElement(eI.E,null)),label:(0,w.t)("design_systems.styles.dropdown.guide")};case"EFFECT":return{icon:n.createElement(X.U,{svg:eP.A},n.createElement(eA.n,null)),label:(0,w.t)("design_systems.styles.dropdown.effect")};default:throw(0,a.j)(e),Error(`Invalid style type: ${e}`)}}(e),s=t=>{t.stopPropagation(),b(e)};return n.createElement(eE.c$,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:s,onPointerUp:s,recordingKey:g.Pt(m,`dropdown-option-${e}`)},n.createElement(ex.Nu,null,t),l)}))))}let eW="collapsed-style-folders";function eH({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let s=(0,P.Bs)(),a=(0,R.p8)("isReadOnly");return 0===s.length&&a?null:n.createElement(S.k,{name:"local_styles_panel"},n.createElement(O.Zk,null,n.createElement(eX,{scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l})))}function eX({scrollContainer:e,setDefaultToolOnCreateStyle:t,recordingKey:l}){let r=(0,s.wA)(),o=(0,s.d4)(e=>e.stylePreviewShown),y=(0,s.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),u=(0,s.d4)(e=>e.mirror.appModel.currentTool),m=n.useRef(null),f=(0,P.Bs)(),E=(0,s.d4)(e=>e.library.localStyleSelection),[S,w]=n.useState(null),[h,C]=n.useState(null),v=n.useRef(null),[R,N]=n.useState(!1),x=y===d.m1T.GRADIENT||y===d.m1T.RASTER||u===d.NLJ.DROPPER_COLOR;n.useEffect(()=>{let e=()=>{!x&&(r(k.Bn(null)),o.isShown&&(r(T.sw()),d.glU.selectStyle(i.n3.INVALID,i.IA.INVALID)))},t=(0,b.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[r,o.isShown,x]);let{stylesByType:U,foldersAndStylesByType:D}=n.useMemo(()=>{let e=(0,I.Kw)(f),t=new Map;return I.og.map(l=>{let n=e.get(l);if(n){(0,I.LX)(n);let e=(0,ew.lM)(n,l),s=(0,ew.l0)(e);t.set(l,s)}}),{stylesByType:e,foldersAndStylesByType:t}},[f]),O=n.useCallback(e=>{(0,a.KF)(null!=e.content_hash,"style does not have a hash"),d.glU.selectStyleByGuid(e.node_id),r(k.ay({isRenaming:!1})),(0,p.trackEvent)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[r]),Y=n.useCallback((e,t,l)=>{w(t?e:null),C(t?null:{name:e,styleTypeSection:l})},[]),K=n.useCallback(e=>{if(!e){r(k.Bn(null));return}let t=new Set;e.styleIds.forEach(l=>{let n=f.find(e=>e.type===M.PW.STYLE&&e.node_id===l);if(!n)return;let s=(0,A.In)(n.name);e.folderNames.has(s)||t.add(l)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};r(k.Bn(l))},[r,f]),F=n.useCallback((e,t,l)=>{if(!E)return;let n=e[t],s=(e,t)=>{let n=(0,A.ke)(e.name),s=null!=t?t:n.length-1;n[s]=l;let a=(0,ew.Pc)(n.join("/"));c.l7.user("rename-style",()=>d.glU.renameNode(e.node_id,a))};if(n.name!==l){if(n.type===M.PW.STYLE)s(n);else{(0,ew.mx)(t,e).forEach(t=>{let l=e[t];l.type===M.PW.STYLE&&s(l,n.level-1)});let a=new Set(E.folderNames);a.delete(n.name);let r=(0,A.In)(n.name)+"/"+l;a.add(r),K({type:E.type,folderNames:a,styleIds:E.styleIds})}}L.Y5.triggerAction("commit"),w(null),C(null)},[E,K]),B=n.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),r(_.j7({type:eC,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-eT)}}}))},[r]),W=n.useCallback(e=>{v.current=e},[]),H=n.useCallback(()=>{N(!0)},[]),X=n.useCallback(()=>{N(!1)},[]);return n.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:m},n.createElement(eB,{setDefaultToolOnCreateStyle:t}),I.og.map(s=>{let a=U.get(s);if(!a)return;let r=D.get(s);if(r)return n.createElement(e$,{key:s,isDragging:R,onContextMenu:B,onDragEnd:X,onDragStart:H,onEditStyle:O,onInspectStyle:O,onRenameItem:Y,recordingKey:g.Pt(l,`style-section-${s}`),renamingFolder:h,renamingStyleID:S,scrollContainer:e,setDefaultToolOnCreateStyle:t,stopRenamingItem:F,storedStyleList:a,styleList:r,styleRowRef:v.current,styleType:s,updateContextMenuStyleRef:W,updateSelection:K})}))}function e$({styleType:e,storedStyleList:t,styleList:l,renamingStyleID:p,renamingFolder:S,onRenameItem:_,stopRenamingItem:k,onDragStart:b,onDragEnd:I,onInspectStyle:D,onContextMenu:P,updateContextMenuStyleRef:O,updateSelection:Y,styleRowRef:K,scrollContainer:F,setDefaultToolOnCreateStyle:B,recordingKey:W}){let H=(0,N.q5)(),X=!(0,R.p8)("isReadOnly"),$=(0,s.wA)(),G=(0,s.d4)(e=>e.stylePreviewShown),V=(0,v.GS)(),q=(0,s.d4)(t=>(0,x.i4)(t,e)),j=(0,s.d4)(t=>(0,x.A7)(t,e,l)),[z,Z]=n.useState(()=>{if(m.x4&&H){let t=JSON.parse(m.x4.getItem(eW)||"{}");if(H.key in t){let l=t[H.key];if(e in l)return new Set(l[e])}else t[H.key]={},m.x4.setItem(eW,JSON.stringify(t))}return new Set(l.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[Q,J]=n.useState([]),[ee,et]=n.useState(null),[el,en]=n.useState(null),es=n.useMemo(()=>(0,r.s)(()=>{$(C.GT({styleType:e}))},200),[$,e]);n.useEffect(()=>{es()},[es,l]);let er=(0,f.ZC)(z);n.useEffect(()=>{if(!er||!m.x4||!H||(0,E._f)(er,z))return;let t=JSON.parse(m.x4.getItem(eW)||"{}"),l=t[H.key];l&&(l[e]=[...z],m.x4.setItem(eW,JSON.stringify(t)))},[z,H,er,e]);let eo=n.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),ei=n.useCallback((e,t)=>{let n=new Set(e),s=[];l.forEach((e,t)=>{if(n.has(e)&&(s.push(t),"STYLE_FOLDER"===e.type)){let e=(0,ew.mx)(t,l);s.push(...e)}});let a=new Set(s),r=t?l.indexOf(t):l.length,i=[...(0,o.y1)(r).filter(e=>!a.has(e)),...s,...(0,o.y1)(r,l.length).filter(e=>!a.has(e))],d=new Map;return i.forEach((e,t)=>{e!==t&&d.set(e,t)}),d},[l]),ed=n.useCallback(()=>{G.isShown&&($(T.sw()),$(h.XE()),d.glU.selectStyle(i.n3.INVALID,i.IA.INVALID))},[$,G.isShown]),ec=n.useMemo(()=>{if(!ee)return null;if("in"===ee.type){let e=l[ee.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==ee.index||null==el||!q)return null;let e=(0,ew.QA)(q,l),t=e[0],n=null,s=null;if(0===ee.index?s=l[ee.index]:ee.index===l.length?n=l[ee.index-1]:(n=l[ee.index-1],s=l[ee.index]),n?.type==="STYLE_FOLDER"&&z.has(n.name)&&-1===Q.indexOf(n.name))return{folderNameToNestUnder:n.name,dividerStyles:{display:"none"}};if(n?.type===M.PW.STYLE){let e=(0,A.In)(n.name).split("/");for(let l=0;l<e.length;l++){let n=e.slice(0,l+1).join("/");if(z.has(n)&&-1===Q.indexOf(n)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:n,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,A.In)(n),dividerStyles:{marginLeft:24*Math.min((0,A.ke)(n).length,8)-8}}}}}let r=0,o=null,i=n?(0,ew.rM)(n):0,d=s?(0,ew.rM)(s):0;if(i<=d)r=d,o=n?n.type===M.PW.STYLE?(0,A.In)(n.name):n.name:"";else if((0,a.KF)(null!=n,"Dragging after an item that doesn't exist"),t.type===M.PW.STYLE||el>=.5)r=i,o=(0,A.In)(n.name);else{let e=Math.floor(el/.5*(0,ew.rM)(n));e=Math.max(d-1,e),o=(0,A.ke)((0,A.In)(n.name)).slice(0,e).join("/"),r=e+1}let c={marginLeft:24*Math.min(r,8)-8};return n&&e.includes(n)||!(0,ew.Md)(n,t,s)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:o,dividerStyles:c}},[z,el,q,ee,l,Q]),ey=n.useCallback((n,s,a,r)=>{if(!t||!s&&!a||!ec)return;let o=ec.folderNameToNestUnder;if(null===o)return;let i=[],d=[];n.forEach(e=>{(0,ew.Md)(s,e,a,o)&&("STYLE_FOLDER"===e.type?d.push(e):i.push(e))});let y=i.concat(d);if(!y.length)return;let u=c.l7.user("reorder-styles",()=>(0,ew.VB)(y,s,a,o,l,t,r||!1)),m=new Set,p=new Set;y.forEach(e=>{let t=(0,ew.t_)(e),l=u?.get(t);l&&("STYLE_FOLDER"===e.type?m.add(l):p.add(t))}),Y({type:e,folderNames:m,styleIds:p});let f=new Set;return z.forEach(e=>{if(o.startsWith(e))return;let t=u?.get(e);t?f.add(t):f.add(e)}),Z(f),ed(),r||L.Y5.triggerAction("commit"),ei(y,a)},[Y,z,ec,ei,ed,t,l,e]),eu=n.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let n=l.indexOf(t),s=(0,ew.dm)(t).filter(e=>(0,A.In)(e.name)===t.name);if(!s.length)return ey(e,t,l[n+1]);{let t=s[s.length-1],n=l.indexOf(t);return ey(e,t,l[n+1])}},[ey,l]),em=(0,u.xx)((e,t)=>{let n=new Map,s=t.map(e=>e.type===M.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let a=s.indexOf(e);-1!==a&&(0,ew.mx)(a,l).forEach(e=>{let l=t[e],s="STYLE_FOLDER"===l.type?l.name:l.node_id,a=n.get(s);a||(a=0),n.set(s,a+1)})}),n}),eg=n.useCallback(()=>{if(!q)return;let t=(0,ew.QA)(q,l);if(0===t.length)return;let n=t[0],s=l.indexOf(n),a=s,r=s+1;if(n.type===M.PW.STYLE&&l[r]&&l[r].type===M.PW.STYLE){let e=(0,ew.rM)(n);for(let t=s+1;t<l.length;t++){let n=l[t];if("STYLE_FOLDER"===n.type&&n.level===e||(0,ew.rM)(n)<e){a=t-1,r=t;break}t===l.length-1&&(a=t,r=t+1)}}ey(t,l[a],l[r],!0);let o=(0,A.In)(n.name),i=V?(0,w.t)("design_systems.create_style.new_folder"):(0,w.t)("design_systems.create_style.untitled_folder");o&&(i=`${o}/${i}`);let y=(e,t)=>{if(e.type===M.PW.STYLE){let l=i+"/"+t+(0,A.kH)(e.name);c.l7.user("rename-style",()=>{d.glU.renameNode(e.node_id,l)})}else{let l=t+(0,A.kH)(e.name)+"/";e.styles.forEach(e=>{y(e,l)}),e.subfolders.forEach(e=>{y(e,l)})}};t.forEach(e=>{y(e,"")}),Y({type:e,folderNames:new Set([i]),styleIds:new Set}),_(i,!1,e)},[Y,ey,V,q,_,l,e]),eE=n.useCallback((e,t)=>{let n=l[e];"STYLE_FOLDER"===n.type&&Z(e=>{let l=new Set(e);return t?l.add(n.name):l.delete(n.name),l})},[l]),eS=n.useCallback((e,t)=>{Z(n=>{let s=new Set(n),a=l[e];if("STYLE_FOLDER"===a.type){let e=(0,A.In)(a.name),l=""===e?t:e+"/"+t;z.has(a.name)&&(z.delete(a.name),z.add(l)),(0,ew.KU)(a).forEach(e=>{if(z.has(e.name)){let t=e.name.replace(a.name,"");z.add(l+t),z.delete(e.name)}})}return s}),k(l,e,t)},[k,z,l]),e_=n.useCallback(e=>{P(l,e)},[P,l]),eh=n.useCallback((e,t,l)=>{let n=t>.5?1:Math.round(1e3*t)/1e3;et({index:e,type:l?"in":"before"}),en(n)},[]),ek=n.useCallback(()=>{Z(e=>c.l7.user("delete-styles",()=>{let t=new Set(e);return(q?(0,ew.QA)(q,l):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,ew.a2)(e,H?.key||null),z.delete(e.name),(0,ew.KU)(e).forEach(e=>z.delete(e.name))):(0,ew.Nr)(e,H?.key||null)}),t})),L.Y5.triggerAction("commit"),G.isShown&&($(T.sw()),$(h.XE()),d.glU.selectStyle(i.n3.INVALID,i.IA.INVALID)),Y(null)},[G.isShown,Y,q,l,H?.key,z,$]),eC=n.useMemo(()=>{let e=q?(0,ew.QA)(q,l):[];return(0,ew.Ug)(e).map(e=>e.node_id)},[q,l]),eT=n.useCallback(()=>{c.l7.user("cut-styles",()=>d.glU&&d.glU.cutStyles(eC))},[eC]),ev=n.useCallback(()=>{c.l7.user("copy-styles",()=>d.glU&&d.glU.copyStyles(eC))},[eC]),eL=n.useCallback(()=>{c.l7.user("duplicate-styles",()=>d.glU&&d.glU.duplicateStyles(eC))},[eC]),eR=n.useCallback(()=>{c.l7.user("paste-styles",()=>d.glU&&d.glU.pasteStyles())},[]),eN=n.useCallback((e,t)=>{(0,y.k)().ds_qw_copy_duplicate_styles||(t===d.zyC.PASTE?c.l7.user("paste-styles",()=>d.glU&&d.glU.pasteStyles()):e.shouldPropagate=!0)},[]);n.useEffect(()=>{if(!q)return;let e=(e,t)=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||(t(),e.stopPropagation())},t=t=>{e(t,eT)},l=t=>{e(t,eR)},n=t=>{e(t,ev)};return document.addEventListener("cut",t),(0,y.k)().ds_qw_copy_duplicate_styles&&(document.addEventListener("paste",l),document.addEventListener("copy",n)),()=>{document.removeEventListener("cut",t),(0,y.k)().ds_qw_copy_duplicate_styles&&(document.removeEventListener("paste",l),document.removeEventListener("copy",n))}},[eT,eR,ev,q]);let eI=n.useCallback(e=>{J(t=>[...t,e])},[]),eA=n.useCallback(()=>{b()},[b]),ex=g.rf(W,"ondragend",n.useCallback(()=>{et(null),en(null),J([]),I()},[I])),eM=(0,f.ZC)(q);n.useEffect(()=>{eM!==q&&q&&Z(e=>{let l=new Set(e);for(let e of q.styleIds.values()){let n=t.find(t=>t.node_id===e);if(!n)continue;let s=(0,A.ke)(n.name);for(let e=0;e<s.length;e++){let t=s.slice(0,e).join("/");l.delete(t)}}return l})},[q,eM,t]);let eU=n.useRef(null),eD=n.useCallback(e=>{eU.current=e},[eU]),eP=n.useMemo(()=>q?(0,ew.h$)(q,l):[],[q,l]),eO=n.useMemo(()=>j?(0,ew.h$)(j,l):[],[j,l]),eY=n.useMemo(()=>[...eP,...eO].sort((e,t)=>e-t),[eP,eO]),eK=n.useCallback((e,t,s,a,r,o)=>{let i="STYLE_FOLDER"===e.type?e.name:e.node_id,d=!1,c=!1;for(let t of Q)if("STYLE_FOLDER"===e.type){if(e.name===t){c=!0;break}e.name.startsWith(t)&&(d=!0)}else if((0,A.In)(e.name)===t){d=!0;break}if(!c&&!d&&em(z,l).has(i))return null;let y=eY&&eY[eY.length-1]===t,u=eY&&eY[0]===t;if(e.type===M.PW.STYLE){let l=(0,ew.rM)(e),i=null!=p&&p===e.node_id;return n.createElement(ep,{key:e.node_id,deleteSelectedItems:ek,dsStyle:e,hideStylePreview:ed,index:t,isDragging:a,isEditable:X,isLastChildOfSelection:y,isRenaming:i,level:l,onContextMenu:e_,onCreateFolder:eg,onInspectStyle:D,onMouseDown:r,onMouseMove:o,onRenameItem:_,recordingKey:`style-row-${t}`,selected:s,selectedSecondary:j?.styleIds.has(e.node_id)||!1,stopRenamingItem:eS,stylePreviewShown:G,updateContextMenuStyleRef:O,updateFocusRowRef:s?eD:null,updateSelection:Y})}{let l=null!=S&&S.name===e.name&&S.styleTypeSection===e.styleTypeSection,i=ec?.folderNameToNestUnder||null;return n.createElement(ea,{key:t,deleteSelectedItems:ek,folder:e,folderNameToNestUnder:i,hideStylePreview:ed,index:t,isCollapsed:z.has(e.name),isDragging:a,isEditable:X,isFirstChildOfSelection:u,isRenaming:l,isTemporarilyExpanded:c,level:e.level,onContextMenu:e_,onCreateFolder:eg,onMouseDown:r,onMouseMove:o,onRenameItem:_,recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,selected:s,selectedSecondary:j?.folderNames.has(e.name)||!1,stopRenamingItem:eS,temporarilyExpandFolder:eI,toggleFolder:e=>eE(t,e)})}},[Y,eY,z,ek,ec?.folderNameToNestUnder,em,ed,e_,eg,D,_,S,p,j?.folderNames,j?.styleIds,eS,l,G,eI,Q,eE,O,X,eD]),eF=n.useCallback(t=>{let n=new Set,s=new Set;t.forEach(e=>{let t=l[e];"STYLE_FOLDER"===t.type?n.add(t.name):s.add(t.node_id)}),Y({type:e,folderNames:n,styleIds:s})},[Y,l,e]),eB=n.useRef(),eH=n.useRef();return n.useEffect(()=>{eB.current&&eP.length?(eB.current(),eU.current&&!eU.current.contains(document.activeElement)&&eU.current.focus()):eH.current&&!eP.length&&(eH.current(),eU.current=null)},[eB,eP,eU]),n.createElement(U.vL,{name:"StyleDraggableList",focusFunctionRef:eB,handleClipboard:eN,blurFunctionRef:eH},n.createElement(ef,{styleType:e,setDefaultToolOnCreateStyle:B},n.createElement(eG,{canInsertItemsIn:eo,insertDividerStyle:ec?.dividerStyles,isDragDisabled:!X,listItems:l,onDrag:eh,onDragEnd:ex,onDragStart:eA,onInsertItemsBetweenValues:ey,onInsertItemsIn:eu,recordingKey:"style-draggable-list",renderListItem:eK,scrollContainer:F,selectedIndices:eP,updateSelection:eF}),n.createElement(eb,{onCopyItems:ev,onCreateFolder:eg,onCutItems:eT,onDeleteItems:ek,onDuplicateItems:eL,onEditStyle:D,onPasteItems:eR,onRenameItem:_,styleRowRef:K,styleType:e})))}let eG=D.q}}]);

//# debugId=f39d5754-b112-593b-b3d4-34e864e23a36

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b01ed5615b4b739a9cb577da740cb067e6b95873/9645-556e981f5019ddb6.min.js.map