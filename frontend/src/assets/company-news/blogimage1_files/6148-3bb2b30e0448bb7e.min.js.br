"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="54284361-f10d-52e7-bcc7-8b0f5c1bf231")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6148],{827767:(e,t,a)=>{a.d(t,{T:()=>h});var n=a(580494),i=a(999667),r=a(601295),l=a(190243),o=a(918777),c=a(615233),s=a(748008),d=a(740495),u=a(131650),m=a(318147),_=a(55116),f=a(138528);let p=(0,i.Iz)(e=>(0,i.eU)(t=>e?t(_.WF4.Query({orgId:e})).transform(({org:e})=>!!s.oA(e?.isSalesAssistedPlanProperty)?.value&&!(0,s.oA)(e?.subscriptionShouldNotAutoRenewPlanProperty)&&s.oA(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==m.Lb.SEATS_MODEL_BILLING_2025):r.Qw.disabled()));function h(e,t){let a=(0,d.CT)(),r=(0,l.Xf)(e?.id),m=(0,u.n)(),_=(0,i.md)(p(e?.id??null)),h=(0,f.Xd)("useProductTermsEligibility"),E=(0,f.j_)(h).unwrapOr(!1),k=r.data?.analyze_data_contract_v2_start,b=k?(0,o.A)(k):null,w=(0,o.A)(),v=!!b&&w.isBefore(b)&&90>=b.diff(w,"day"),g=!!b&&w.isBefore(b)&&30>=b.diff(w,"day"),y=(0,o.A)((0,c.tl)().analyze_data_flow_v2_until),N=!!e&&(0,o.A)(e.created_at).isBefore(y),C=(0,s.oA)(_),A=(0,n.k)().terms_of_service_may_2025_update,T=!!(e?.id&&(E||t)&&N&&v&&a&&C&&(m||A&&g));return"loading"===r.status||"loading"===_.status||C?.status==="loading"?(0,s.Xm)():(0,s.gB)({isEligible:T,orgTermsInfo:{organizationName:e?.name??"organization",renewalDate:b}})}},374200:(e,t,a)=>{a.d(t,{L:()=>f,I:()=>p});var n=a(848318),i=a(911734),r=a(700574),l=a(577888),o=a(350808),c=a(863270),s=a(806362),d=a(869439);let u="resource_page_header--resourceHeaderAvatar--FI-3x",m="resource_page_header--resourceHeaderAvatarWrapper--nn-w8",_="resource_page_header--resourceHeaderFigmaPartnerBadge--cgvkO";function f({publishers:e,size:t=32,showFigmaPartnerBadge:a,openInNewTab:r=!1}){return e.length<5?n.createElement(n.Fragment,null,e.map((e,i)=>n.createElement("div",{key:e.id,className:m,"data-testid":"resource-header-avatar-"+i},n.createElement(c.o3,{to:new l.x({profileHandle:e.profile_handle}).to,trackingEventName:"resource_creator_click",trackingProperties:{profileId:e.id,target:"avatar"},key:e.id,target:r?"_blank":"_self"},n.createElement(s.e,{entity:e,size:t,style:{zIndex:3-i},adtlClassName:u})),a&&n.createElement("div",{className:_,style:{zIndex:3-i}},(0,d.C2)(e,!0))))):n.createElement(n.Fragment,null,e.slice(0,3).map((e,t)=>n.createElement("div",{className:m,key:e.id,"data-testid":"resource-header-avatar-"+t},n.createElement(i.N_,{to:new l.x({profileHandle:e.profile_handle}).to,onClick:e=>e.stopPropagation(),key:e.id},n.createElement(s.e,{entity:e,style:{zIndex:3-t},adtlClassName:u})),a&&n.createElement("div",{className:_,style:{zIndex:3-t}},(0,d.C2)(e,!0)))),n.createElement("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--P5q2P resource_page_header--resourceHeaderAvatarWrapper--nn-w8"},n.createElement(o.e,{type:"Letter",size:"Large",letter:(e.length-3).toString()})))}function p({publishers:e,useSmallWidth:t=!1,removeByLabel:a=!1,openInNewTab:i=!1}){return n.createElement("span",{className:e.length>2?"resource_page_header--author--k2bGY":"resource_page_header--authorHiddenOverflow--hoVA5"},(0,r.kc)(e,t,a,i))}},519267:(e,t,a)=>{a.d(t,{N:()=>s});var n=a(848318),i=a(301168),r=a(410725),l=a(182317),o=a(55116),c=a(474132);function s(){let e=n.useMemo(()=>(0,l.g)(),[]),t=(0,i.d4)(c.kY),a=(0,r.Rs)(o.gfM,{cacheNonce:e});return n.useMemo(()=>{if("loaded"===a.status){let e=a.data?.lockClient;if(e)return e.lock}return t},[a,t])}},691112:(e,t,a)=>{a.d(t,{E:()=>r});var n=a(925040);let i=(0,n.Mz)(e=>e.dropdownShown,e=>e?.type),r=e=>(0,n.Mz)(i,t=>t===e)},510029:(e,t,a)=>{a.d(t,{d:()=>H});var n=a(848318),i=a(301168),r=a(144230),l=a(1511),o=a(124810),c=a(408193),s=a(169930),d=a(989232),u=a(775292),m=a(410725),_=a(238462),f=a(182317),p=a(230618),h=a(345964),E=a(755534),k=a(223931),b=a(967688),w=a(744577),v=a(847461),g=a(431698),y=a(858488),N=a(142896),C=a(412865),A=a(125761),T=a(55116),I=a(765330),P=a(302982),R=a(923164),D=a(892750),M=a(46503),x=a(518925),F=a(691063),S=a(853977),B=a(181344),L=a(649567);let O="quick_reply_thread_view--headerButton--wmkPJ",q=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},U=null,H=(0,n.forwardRef)((e,t)=>{let a=(0,m.Rs)(T.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return n.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},n.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},n.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},n.createElement("div",{className:O},!e.fileBrowser&&n.createElement(k.J,{"aria-label":(0,b.t)("quick_reply.navigate_back"),onClick:e.onClose},n.createElement(l.C,null))),n.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===a.status&&a.data.file&&a.data.file.name),n.createElement("div",{className:O},e.fileBrowser?n.createElement(k.J,{"aria-label":(0,b.t)("quick_reply.close"),onClick:e.onClose},n.createElement(o.A,null)):n.createElement("div",{style:{display:"none"}},n.createElement(k.J,{"aria-label":(0,b.t)("quick_reply.more")},n.createElement(c.J,null))))),n.createElement(z,{quickReplyInfo:e.quickReplyInfo,result:a,hideOverflowMenu:e.fileBrowser})))});function z(e){let t=(0,A.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?n.createElement(h.qc,{size:"medium"}):"errors"===e.result.status||null==e.result.data.file?n.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,b.t)("quick_reply.unable_to_load_thread")):n.createElement($,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function $(e){let{quickReplyInfo:t,result:a,user:l}=e,{fileKey:o,threadId:c}=t,m=(0,y.dr)({args:{fileKey:o,rootId:c},subscription:a}),_=(0,i.wA)(),{file:f}=a.data,h=f?.org?.currentPlanUser?.permission||"",E=(0,n.useMemo)(()=>(0,I.mp)({currentOrgId:f.org?.id,teamId:f.teamId,fileKey:o,isOrgGuest:"guest"===h,users:[]}),[f.org?.id,f.teamId,o,h]),{mobileCommentThread:w}=f,{currentUserCommentReadStatus:N}=f,A=w.find(e=>e.id===c),T=n.useMemo(()=>w.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,[w]),R=(0,i.d4)(e=>e.comments.savingCommentUuids),D=(0,i.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!A)return n.createElement("div",null,(0,b.t)("quick_reply.unable_to_load_thread"));let M=w.map(e=>(0,C.G9)(l.id,A,e,N??C.gj,R,D,e.attachments)),x={id:A.id,key:o,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:M,messageMeta:M[0].message_meta,page:A.clientMeta?.pageId||null,isActive:!0,replyCount:w.length-1,isCanvasMention:!1,pageName:A.clientMeta?.pageId||null,sidebarItemType:P.kT.COMMENT_THREAD},F={api:m,status:a.status,data:q,threads:{status:a.status,data:[x],errors:a.errors},errors:a.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return n.createElement(g.kR,{value:F},n.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=M.some(e=>e.isUnread);U=setTimeout(()=>{m.commentReceipts&&e&&(_(v.AY({receiptsAPI:m.commentReceipts,thread:x})),(0,d.trackEvent)("Comment Thread Read",{commentThreadId:c,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{U&&clearTimeout(U)}},n.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},n.createElement(u.B,null,n.createElement(p.oW,{src:T||void 0,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,r.C)(f.checkpointClientMeta)},alt:"thumbnail"})),n.createElement("div",{className:"quick_reply_thread_view--openFileButton--RBtVz"},n.createElement(k.J,{"aria-label":(0,b.t)("quick_reply.open_file"),onClick:()=>{let e=t.deeplink??`/file/${o}?fuid=${l.id}&#${c}`;window.location.href=e}},n.createElement(s.V,null)))),n.createElement(V,{loadedComments:M,user:l,quickReplyInfo:t,commentMentionables:E,hideOverflowMenu:e.hideOverflowMenu})))}function Q(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.dropdownShown||null),a=(0,A.iZ)(),r=(0,R.v)();if(!t||t.type!==N.VJ)return null;let{comment:l,parentRect:o,thread:c,isUnread:s}=t.data;return n.createElement(x.V,{dispatch:e,comment:l,parentRect:o,currentUser:a,isUnread:s,thread:c,copyLink:r})}function V(e){let{loadedComments:t,user:a,quickReplyInfo:r,commentMentionables:l,hideOverflowMenu:o}=e,{fileKey:c,threadId:s}=r,d=(0,i.wA)();(0,n.useEffect)(()=>{d(v.Fm({threadId:s}))},[d,s]);let u=(0,i.d4)(e=>e.comments.typeahead),m=(0,i.d4)(e=>e.comments.editingComment),p=(0,i.d4)(e=>e.dropdownShown||null),h=(0,i.d4)(e=>e.comments.activeThread?.id),k=(0,i.d4)(e=>e.comments.threads),y=h&&k[h]||null,N=y?.reply.messageMeta||[],{submitReply:C,updateMessage:A,submitEdit:T}=function(e){let t=(0,i.wA)(),a=(0,g.I_)().writeAPI,r=g.GH()?.threads;return{submitReply:n.useCallback(e=>{if(!a){console.error("Calling submitReply with no write API");return}r&&"loaded"===r.status&&r.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(n,i,r,l)=>v.dB(a,t,n,i,r,l,e.uuid,B.y),t(v.lV({...e,commentsWriteApi:a,commentsConfiguration:B.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,r,a]),updateMessage:n.useCallback(a=>{t(v.k7({threadId:e,messageMeta:a}))},[t,e]),submitEdit:n.useCallback((e,a)=>{t(v._v({comment:e,messageMeta:a}))},[t])}}(s),I=(0,M._B)(),R=n.useRef(null),O=n.useRef(null),q=n.useRef(null),[U,H]=n.useState(null),[z,$]=n.useState(n.useRef(null)),V=n.useRef(null),Y=0,j=0,J=0;V.current&&V.current.offsetParent&&(Y=V.current.offsetWidth,j=V.current.offsetLeft,J=V.current.offsetParent.clientHeight-V.current.offsetTop);let X=e=>e||{x:0,y:0},K=n.useRef(null);(0,n.useEffect)(()=>{K.current&&K.current.scrollToBottom()},[]);let W=[...new Set(t.map(e=>e.user.handle))],G=t.find(e=>e.id===s);return G?n.createElement(n.Fragment,null,n.createElement("div",{style:w.sx.flex1.$}),n.createElement(E.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:K,enableScrollShadow:!0},n.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,i)=>n.createElement(x.I,{key:`thread-comment-${e.id}`,allowAttachments:!1,comment:e,dispatch:d,dropdownShown:p,editingComment:m,editorOnClear:I.editorOnClear,editorOnInsert:I.editorOnInsert,editorRef:q,editorType:"comment-editor-thread",hideEmojiPicker:!1,hideOverflowMenu:o,hideReactions:!1,hideResolve:!1,hyperlinkLocation:U,index:i,isQuickReplyThreadView:!0,mentionables:l,mountInputFocused:!0,prevAuthor:0===i?null:t[i-1].user_id,setHyperlinkEditorRef:$,setHyperlinkLocation:H,setIsEditorFocused:_.lQ,setResolved:_.lQ,showEditedIndicator:!!e.edited_at,submitEdit:T,thread:{comments:t,key:c,id:s},threadPosition:{x:0,y:0},typeahead:u,user:a,viewportPositionFromClientPosition:X})))),n.createElement(F.K,{allowAttachments:!1,authorNames:W,className:L.MJ,dispatch:d,editingExistingComment:!1,editorOnClear:I.editorOnInsert,editorOnInsert:I.editorOnClear,editorRef:O,editorType:"comment-editor-reply",fileKey:c,hideEmojiPicker:!1,hyperlinkLocation:U,isDisabled:!1,isEmojiPickerDisabled:null!==m,mentionables:l,messageMeta:N,mountInputFocused:!0,onCancel:_.lQ,onComposeFocus:void 0,onSubmit:()=>{C({threadId:s,threadUuid:G.uuid||void 0,uuid:(0,f.g)()})},placeholderText:(0,b.t)("comments.reply"),recordingKey:P.Dw.quickReply,replyContainerRef:V,setHyperlinkEditorRef:$,setHyperlinkLocation:H,setIsEditorFocused:_.lQ,submitText:(0,b.t)("comments.reply"),threadId:s,threadPosition:null,typeahead:u,updateMessage:A,user:a,viewportPositionFromClientPosition:X}),n.createElement(D.rf,{decoratorsRef:R,onClear:I.onClear,onInsert:I.onInsert,width:Y,direction:S.ri.UPWARDS,positionFromBottom:{left:j,bottom:J}}),n.createElement(Q,null)):null}},574860:(e,t,a)=>{a.d(t,{g:()=>s});var n=a(848318),i=a(536384),r=a.n(i),l=a(720522),o=a(297638),c=a(364616);let s=n.forwardRef((e,t)=>{let a=o.s.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return n.createElement("button",{className:r()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,n.createElement(l.B,{svg:c.A,className:a}))})},223931:(e,t,a)=>{a.d(t,{J:()=>r});var n=a(848318),i=a(773511);let r=n.forwardRef(function({children:e,...t},a){return n.createElement(i.E,{...t,ref:a,className:"icon_button_32--iconButton--gFcI9"},n.createElement("span",{"aria-hidden":!0,className:"icon_button_32--icon--8SoTm"},e))})},984799:(e,t,a)=>{a.d(t,{H:()=>r});var n=a(848318),i=a(238462);let r=n.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:i.lQ,onMouseMove:i.lQ,onRemove:i.lQ})},36937:(e,t,a)=>{a.d(t,{IP:()=>eK,fd:()=>n,he:()=>eJ,e8:()=>eX,ql:()=>ej});var n,i=a(848318),r=a(301168),l=a(559389),o=a(879169),c=a(143823),s=a(773511),d=a(580494),u=a(536384),m=a.n(u),_=a(29188),f=a(524050),p=a(637640),h=a(898700),E=a(865114),k=a(304756),b=a(755534),w=a(967688),v=a(952039),g=a(453370),y=a(422444),N=a(30575),C=a(353231),A=a(797975),T=a(730143),I=a(180294),P=a(672940),R=a(125761),D=a(656320),M=a(392903),x=a(788792),F=a(721014),S=a(271617),B=a(531788),L=a(458612),O=a(197638),q=a.n(O),U=a(343651),H=a(615233),z=a(173926),$=a(720522),Q=a(314979),V=a(428397),Y=a(912873),j=a(61717),J=a(125952),X=a(776412),K=a(984799);let W="block_kit_row--rowTop--4zNja",G="block_kit_row--metadataContainer--tcs33",Z="block_kit_row--usersContainer--J5oFI",ee="block_kit_row--usersContainerStructuredView--PUPYI",et="block_kit_row--quickReplyChevron--0rKX3",ea="block_kit_row--chevronIcon--2uviD",en="block_kit_row--imagePreview--CqQsi";var ei=a(987294);function er(e){return i.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:q().sanitize(e.block.html_text)}})}function el(e){let t=(0,U.UF)(e.block.emoji_shortcode)[0];return t.meta?i.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):i.createElement(i.Fragment,null)}function eo(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?i.createElement(er,{key:t,block:e}):i.createElement(el,{key:t,block:e})):[]}function ec(e){let{block:t,size:a}=e;return i.createElement(J.Ro,{entity:{...t,id:t.entity_id},size:a,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function es(e){let{block:t}=e;return i.createElement("div",{className:`${en} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,j.A)()})`}},i.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:a,blue:n,alpha:i}=e;return`rgba(${255*t|0}, ${255*a|0}, ${255*n|0}, ${i})`})(t.background_color)}},i.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function ed(e){let{block:t}=e;return i.createElement("div",{className:"block_kit_row--square--vD5SO"},i.createElement("div",{className:en,style:{backgroundImage:`url(${t.img_url})`}}))}function eu(e){let{avatars:t}=e;return 0===t.length?null:t.length>1?i.createElement("div",{className:Z},i.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},i.createElement(ec,{block:t[1],size:Y.Pf.MEDIUM})),i.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},i.createElement(ec,{block:t[0],size:Y.Pf.MEDIUM}))):i.createElement("div",{className:Z},i.createElement(ec,{block:t[0],size:Y.Pf.LARGE}))}function em(e){let{avatars:t,icon:a}=e;return 0===t.length?null:t.length>1?i.createElement("div",{className:ee},i.createElement("div",{className:"block_kit_row--secondaryUserRevamp--ZkcO7"},i.createElement(ec,{block:t[1],size:Y.Pf.MEDIUM})),i.createElement("div",{className:"block_kit_row--primaryUserRevamp--XYq-9"},i.createElement(ec,{block:t[0],size:Y.Pf.MEDIUM})),a&&i.createElement(e_,{icon:a})):i.createElement("div",{className:ee},i.createElement(ec,{block:t[0],size:Y.Pf.LARGE}),a&&i.createElement(e_,{icon:a}))}function e_(e){let{icon:t}=e,a=new Set([(0,H.ck)("fc8b3d0c889b51bd8800945089e8b473ff4d619d")]);return i.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?i.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${a.has(t.img_url)?"":"block_kit_row--iconInvert--7YBRA"} `,src:t.img_url,alt:""}):"ReacjiBlock"===t._block_type?i.createElement(el,{block:t}):"AvatarBlock"===t._block_type?i.createElement(ec,{block:t,size:Y.Pf.SMALL16}):void 0)}function ef(e){let t=(0,r.wA)(),{block:a,callbacks:n,isPrimary:l=!0,isDisabled:o,setIsDisabled:c}=e,s=async e=>{try{c(!0);let t=(await n.buildNotificationActionRequest(a.notification_action)).data.meta.updated_notification_blob;a.hide_after_action?n.hideNotification(e):(n.followLinkIfPossible(),t&&n.updateNotification(t.notification_id,t))}catch(n){let e=n.message||("resolve"===a.notification_action?(0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,w.t)("user_notification.an_error_occurred_while_removing_this_notification"));t(Q.s.error(e))}finally{c(!1)}},d=eo([a.text]);return i.createElement(B.IK,{variant:l?"primary":"secondary",onClick:()=>{s(a.screenreader_action_success_announcement)},disabled:o},d)}function ep(e){let{block:t,actionBlockCallbacks:a}=e,[n,r]=i.useState(!1);return i.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},i.createElement(ef,{block:t.secondary_action,callbacks:a,isPrimary:!1,isDisabled:n,setIsDisabled:r}),i.createElement(ef,{block:t.primary_action,callbacks:a,isPrimary:!0,isDisabled:n,setIsDisabled:r}))}function eh(e){let{block:t,plan:a,shouldShowChevron:n,userLastViewedTimestamp:r}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return i.createElement(eE,{block:t,plan:a,shouldShowChevron:n});case"SplitlineTitleAndBodyBlock":return i.createElement(ek,{block:t,shouldShowChevron:n,userLastViewedTimestamp:r})}}function eE(e){let{block:t,plan:a,shouldShowChevron:n}=e;return i.createElement(i.Fragment,null,i.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"block_kit_row--content--52-rY"},i.createElement("div",null,eo(t.title)),i.createElement("div",{className:G},i.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&i.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},eo(t.description)),i.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},a&&i.createElement(i.Fragment,null,i.createElement(X.H,{entityId:a.id.toString(),entityName:a.name,imgUrl:a.img_url||void 0}),(0,M.gN)(a.name,21),i.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),i.createElement(z.h1,{date:t.created_at,style:"short"}))),n&&i.createElement("div",{className:et},i.createElement($.B,{svg:ei.A,className:ea}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return i.createElement(ec,{block:e,size:Y.Pf.XLARGE});case"ImageThumbnailBlock":return i.createElement(ed,{block:e});case"FileThumbnailBlock":return i.createElement(es,{block:e})}})())}function ek(e){let{block:t,shouldShowChevron:a,userLastViewedTimestamp:n}=e;return i.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},i.createElement("div",{className:"block_kit_row--title--gqwu-"},eo(t.title)),i.createElement(eN,{createdAt:t.created_at,lastSeenTimestamp:n})),i.createElement("div",{className:G},i.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},eo(t.subtitle)),t.description&&i.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},eo(t.description)),a&&i.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},i.createElement("div",{className:et},i.createElement($.B,{svg:ei.A,className:ea})))))}function eb(e){let{notification:t}=e;return(0,N.ro)()?i.createElement(ew,{notification:t,children:e.children}):i.createElement("div",{className:W},t.is_unread?i.createElement("div",{className:"block_kit_row--unreadDot--e-8EJ"}):null,i.createElement(eu,{avatars:t.avatars}),e.children)}function ew(e){let{notification:t}=e,a=(0,w.t)("user_notifications.unread_notifcation_sr");return i.createElement("div",{className:W},t.is_unread?i.createElement("div",{className:"block_kit_row--unreadDotStructuredView--WluAp"}):null,i.createElement(em,{avatars:t.avatars,icon:t.icon}),t.is_unread?i.createElement(L.E,null,a):null,e.children)}function ev(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e;return i.createElement(eb,{notification:a},i.createElement(eh,{block:t.body,plan:!0===n?void 0:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function eg(e){let{attachment:t,notification:a,dontShowPlanIcon:n}=e,{shouldShowChevron:r}=i.useContext(K.H);return i.createElement(eb,{notification:a},i.createElement(eh,{block:t.body,plan:!0===n?void 0:a.plan,shouldShowChevron:r(a),userLastViewedTimestamp:a.filters.user_last_viewed_timestamp}))}function ey(e){let{attachment:t,notification:a,actionBlockCallbacks:n}=e;return i.createElement(i.Fragment,null,i.createElement(eb,{notification:a},i.createElement(eh,{block:t.body,plan:a.plan,userLastViewedTimestamp:a.filters.user_last_viewed_timestamp})),i.createElement(ep,{block:t.actions,actionBlockCallbacks:n}))}function eN(e){let{createdAt:t,lastSeenTimestamp:a}=e,n=eC(t,a),r=(0,z.Ak)(t,"narrow");if("today"!==n&&"new"!==n){let e=new Date(t),a={};a=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},r=new Intl.DateTimeFormat((0,V.Gq)().getPrimaryLocale(!1),a).format(e)}return i.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},r)}function eC(e,t){let a=new Date(e),n=new Date,i=new Date(n);return(i.setDate(n.getDate()-1),t&&new Date(t)<a)?"new":eA(a,n)?"today":eA(a,i)?"yesterday":a>=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7)?"last_week":"older"}function eA(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var eT=(e=>(e.NEW="new",e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(eT||{});let eI={new:(0,w.tx)("user_notifications.new"),today:(0,w.tx)("user_notifications.today"),yesterday:(0,w.tx)("user_notifications.yesterday"),last_week:(0,w.tx)("user_notifications.last_7_days"),older:(0,w.tx)("user_notifications.older")};function eP(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var eR=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(eR||{});let eD={actionable:(0,w.tx)("user_notifications.pending"),actioned:(0,w.tx)("user_notifications.done")};var eM=a(989232),ex=a(810503),eF=a(706688);function eS(e){let t=e.preferred_attachments.find(e=>eF.p.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eB(e){let t;let a=(0,r.wA)(),[n,l]=(0,i.useState)(!1),o=(0,r.d4)(e=>e.selectedView.view),{onClick:c,onMouseEnter:s,onMouseMove:u,onRemove:m}=i.useContext(K.H),_=(0,N.ro)(),f=e.notification;i.useEffect(()=>()=>{m(f)},[m,f]);try{t=eS(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let p=async n=>{(0,eM.trackEvent)("file_browser_notification_clicked",{notification_id:f.notification_id,notification_type:f.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:o,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),h(n);let i=c(f);if("ActionableAttachment"!==t._block_type){if((0,d.k)().notif_new_read_api)try{await x.sr.markNotificationAsRead({notification_id:f.notification_id,currentView:o}),i||e.followLinkOnClickCallback(),e.updateNotificationCallback(f.notification_id,{...f,is_unread:!1})}catch(e){a(Q.s.error((0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification")))}else k("resolve").then(({data:t})=>{if(i||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}},e=>{a(Q.s.error((0,w.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})}},h=e=>{e.stopPropagation()},E=t=>{l(!0),e.onHide&&e.onHide(),t&&a(v.F.enqueue({message:t,error:!1,role:"status",timeoutOverride:1}))},k=(e,t=o)=>x.sr.updateNotification({notification_id:f.notification_id,notification_action:e,currentView:t});return!n&&i.createElement("div",{tabIndex:0,className:_?"block_kit_row--rowContainerRevamp--Ak9PI":"block_kit_row--rowContainer--hsQo5",onClick:p,onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key&&p(e)},onMouseDown:h,onMouseEnter:t=>{s(t,f,async()=>{if((0,d.k)().notif_new_read_api)try{await x.sr.markNotificationAsRead({notification_id:f.notification_id,currentView:o+"_quickreply"}),e.updateNotificationCallback(f.notification_id,{...f,is_unread:!1})}catch(e){(0,ex.x1)("Error marking notification as read",e)}else k("resolve",o+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let a=t.meta.updated_notification_blob;e.updateNotificationCallback(a.notification_id,a)}})})},onMouseMove:e=>{u(e)},"data-testid":"notification-row"},((t,a)=>{try{switch(t._block_type){case"ActionableAttachment":{let n={updateNotification:e.updateNotificationCallback,hideNotification:E,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:k};return i.createElement(ey,{attachment:t,notification:a,actionBlockCallbacks:n})}case"ClientActionableAttachment":return i.createElement(eg,{attachment:t,notification:a});case"BodyAndThumbnailAttachment":case"BodyAttachment":return i.createElement(ev,{attachment:t,notification:a,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),E(null)}})(t,f))||null}var eL=a(608940),eO=a(211766),eq=a(238462),eU=a(454805),eH=a(510029),ez=a(486250);let e$=class e{constructor(){this.circularBuffer=new eL.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,a){a-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=a)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eU.Mi(window.innerWidth,window.innerHeight)}};function eQ(e){let[t,a]=(0,i.useState)(null),[n,r]=(0,i.useState)(0),l=(0,T.q5)(),o=i.useRef(eq.lQ),c=i.useRef(eq.lQ),s=i.useRef(null),u=i.useRef(null),m=(0,N.ro)(),_=(0,ez.zr)(l,t),f=i.useRef({notificationId:"",mouseLocationHistory:new e$,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,i.useEffect)(()=>{u.current&&u.current.addEventListener("mouseover",e=>{clearTimeout(f.current?.scheduledShowQuickReply)})},[t]);let p=()=>{clearTimeout(f.current?.scheduledMarkAsRead),f.current.scheduledMarkAsRead=setTimeout(()=>{c.current=o.current},1e3)},h=i.useMemo(()=>{function e(e,t,n){let i=window.innerWidth>900&&window.innerHeight>650;f.current.notificationId=e.notification_id,i&&(0,ez.UC)(e)?(a((0,ez.AS)(e)),r(t),o.current=n):(a(null),o.current=eq.lQ),f.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,a,n)=>{let i=!1;if(a.notification_id!==f.current.notificationId&&u.current){let e=u.current.getBoundingClientRect(),a=new eU.Mi(e.left,e.top),n=new eU.Mi(e.left,e.bottom),r=[f.current.mouseLocationHistory.getLocation50msAgo(),a,n];i=(0,eO.y)(new eU.Mi(t.clientX,t.clientY),r)}let r=t.target;if(i){var l;l=()=>{e(a,r.getBoundingClientRect().bottom,n)},clearTimeout(f.current?.scheduledShowQuickReply),f.current&&(f.current.scheduledShowQuickReply=setTimeout(l,500))}else clearTimeout(f.current?.scheduledShowQuickReply),e(a,r.getBoundingClientRect().bottom,n)},onMouseMove:e=>{f.current.mouseLocationHistory.push(new eU.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===f.current.notificationId&&a(null)}}},[u]);if(!((0,d.k)().desktop_quickreply_filebrowser&&m))return i.createElement(i.Fragment,null,e.children);let E=Math.max(0,n-(s.current?.getBoundingClientRect().y??0)-(u.current?.getBoundingClientRect().height??640));return i.createElement(i.Fragment,null,i.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:s},t&&!_&&i.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:E,maxHeight:640,minHeight:450},onMouseEnter:()=>{p()},onMouseLeave:()=>{clearTimeout(f.current?.scheduledMarkAsRead),c.current(),c.current=eq.lQ,o.current=eq.lQ}},i.createElement(eH.d,{quickReplyInfo:t,onClose:()=>a(null),fileBrowser:!0,ref:u}))),i.createElement(K.H.Provider,{value:h},e.children))}e$.BUFFER_CAPACITY=10,e$.DESIRED_DURATION_MS=50,e$.THROTTLE_DURATION_MS=e$.DESIRED_DURATION_MS/e$.BUFFER_CAPACITY;let eV="user_notifications_dropdown--dateHeader---l8oH",eY="user_notifications_dropdown--markAllReadButton--TwhKK text--fontPos11--2LvXf text--_fontBase--QdLsd";function ej(e,t){let a=(0,r.wA)(),n=(0,r.d4)(e=>e.user.id),o=(0,r.d4)(e=>e.user.community_profile_id),c=(0,r.d4)(e=>e.authedUsers.byId[n]?.plans),s=i.useMemo(()=>void 0!==c&&(new Map(c.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[c,t]),d=(0,r.d4)(e=>e.userNotifications.communityProfileBellStates),u=(0,r.d4)(e=>e.selectedView.view),[m,f]=(0,i.useState)(new Map),[p,E]=(0,i.useState)(!0),b=(0,h.F)(d);i.useEffect(()=>{let i=(0,l.s)(()=>{e?o&&(b.current[o]&&a((0,M.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:o})),x.sr.getCommunityServerDriven({currentView:u}).then(({data:e})=>{y(e.meta)}).catch(e=>{a(v.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),a(g.oB())})):((0,M.Zo)(!1,M.td,n),x.sr.getServerDrivenPlan({currentPlanId:t,currentView:u,isPlanOrg:s}).then(({data:e})=>{y(e.meta)}).catch(e=>{a(v.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),a(g.oB())}))},800,!0);E(!0),i()},[t,b,u,a,e,s,o,n]);let y=e=>{let t=new Map,a=!1;e.forEach(e=>{t.set(e.notification_id,e),!a&&e.filters.is_priority&&(a=!0)}),f(t),E(!1)};return{notificationFeedMap:m,isFetchingNotifications:p,markAllAsReadFn:()=>{(e?k.Ay.post("/api/user_notifications/community/mark_read",{currentView:u,source:_.S8?"desktopbell":"web"}):k.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:u,is_plan_org:s,source:_.S8?"desktopbell":"web"})).then(()=>{f(new Map(Array.from(m,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{a(v.F.enqueue({message:(0,w.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{f(new Map(m.set(e,t)))}}}function eJ(e,t){return e.filter(e=>!t.includes(e.notification_id))}function eX(e){return e.some(e=>e.filters.is_priority)}function eK(e){let[t,a]=(0,i.useState)(M.td),{notificationFeedMap:r,isFetchingNotifications:l,markAllAsReadFn:c,updateNotification:s}=ej(!!e.inCommunity,t),[d,u]=(0,i.useState)([]),_=(0,N.ro)(),f=t===M.td?S.a:t,p=eJ([...r.values()],d),h=(0,N.Ow)(),k=eX(p),[b,w,v]=o.t.useTabs({all:!0,priority:!!h&&k,unread:!0}),g=(0,E.ZC)(v.activeTab);i.useEffect(()=>{v.activeTab!==g&&(0,C.qD)({name:"user_notifications_filter_viewed",filter_type:v.activeTab,dropdown_location:"web"})},[g,v.activeTab]);let y=e=>{e.stopPropagation()},A=e=>{e===S.a&&(e=M.td),(0,C.FE)(e,"notifications",void 0),a(e)},T=i.useMemo(()=>p.filter(e=>e.filters.is_priority),[p]),I=i.useMemo(()=>p.filter(e=>e.is_unread),[p]),P=t=>i.createElement(n.Feed,{notifications:t,currentPlanFilter:f,currentNotificationFilter:v.activeTab,hiddenNotificationIds:d,setHiddenNotificationIds:u,isFetchingNotifications:l,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:s});return i.createElement("div",{className:m()(0!==r.size||l?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:y,onClick:y,"data-onboarding-key":F.fD},i.createElement(eQ,null,i.createElement(n.Header,{selectedPlan:t,onPlanFilterUpdate:e=>A(e),inCommunity:!!e.inCommunity,showMarkAllAsRead:eW(l,p)&&!_,markAllAsReadFn:c,inDesktopTray:!1}),!!_&&i.createElement(n.FilterToggle,{notificationFilter:v.activeTab,toggleNotificationFilter:e=>{(0,C.Cu)({filter_type:e},"user_notifications_filter_clicked")},isFetchingNotifications:l,notifications:p,markAllAsReadFn:c,tabManager:v,tabPropsMap:b}),i.createElement(o.t.TabPanel,{...w.all},P(p)),i.createElement(o.t.TabPanel,{...w.priority},P(T)),i.createElement(o.t.TabPanel,{...w.unread},P(I))))}function eW(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return(0,N.ro)()?i.createElement("h3",{className:eV},eI[e.notificationDateGroup]):null}function a(e){return(0,N.Ow)()?i.createElement("h3",{className:eV},eD[e.notificationPriorityGroup]):null}e.Feed=function(e){let n=(0,R.Pc)(),l=(0,r.d4)(e=>n?e.authedUsers.byId[n.id]?.plans:null),o=(0,r.Pj)(),s=(0,r.wA)(),d=(0,P.FC)(),u=(0,T.q5)(),m=(0,I.sZ)(),h=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},E=!1;if(n&&!e.inCommunity&&l?.length===1&&(E=!0,e.currentPlanFilter===S.a)){let t=l[0].plan_id;for(let a of e.notifications)if(a.plan?.id.toString()!==t){E=!1;break}}let k=i.useCallback(t=>()=>{var a,n;if(!t.deeplink)return;let i=new URL(t.deeplink.href),r=i.pathname;if(r.includes("project"))a=r.split("project/")[1],(0,C.xr)("file_browser_folder_click",a,null,d,{selectedView:"notifications",planFilterId:e.currentPlanFilter===S.a?null:e.currentPlanFilter});else if(r.includes("team"))n=r.split("team/")[1],(0,C._J)("file_browser_team_click",n,d,{selectedView:"notifications",planFilterId:e.currentPlanFilter===S.a?null:e.currentPlanFilter});else if((0,f.ek)(r)){let t=(0,f.zv)(r);t&&s(y.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===S.a?void 0:e.currentPlanFilter||void 0}}))}s(g.oB());let l=!!u&&u.key===(0,f.zv)(i.pathname);if(!_.eD&&l)s((0,A.H)({params:i.searchParams.toString(),hash:i.hash}));else if(t.deeplink.use_unsafe)p.Ay.unsafeRedirect(i.href,_.eD?void 0:"_blank");else if(e.inDesktopTray)p.Ay.redirect(i.href);else try{let e=(0,D.vU)(o.getState(),r);if("teamFeed"===e.view){m&&t.plan?.id.toString()===m.id?s(g.$T(e)):p.Ay.redirect(i.href,_.eD?void 0:"_blank");return}p.Ay.redirect(i.href,_.eD?void 0:"_blank");return}catch{p.Ay.redirect(i.href,_.eD?void 0:"_blank")}},[s,u,e.currentPlanFilter,e.inDesktopTray,d,o,m]);if(e.isFetchingNotifications)return i.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},i.createElement(c.k,null));if(0===e.notifications.length)return i.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,w.tx)("user_notifications.dropdown.no_notifications"));{var v;let n,r;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eP(t))-Number(eP(e)));let l=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",o=eC((v=e.notifications)[0].preferred_attachments[0].body.created_at,v[0].filters.user_last_viewed_timestamp)===eC(v[v.length-1].preferred_attachments[0].body.created_at,v[0].filters.user_last_viewed_timestamp),c=e=>{let a;let r=null;if(!o)try{a=eS(e);let l=eC(a.body.created_at,e.filters.user_last_viewed_timestamp);l!==n&&(n=l,r=i.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:l}))}catch(e){console.error("Skipping date header, unsupported notification")}return r},s=e=>{let t=null,n=eP(e)?"actionable":"actioned";return n!==r&&(r=n,t=i.createElement(a,{key:`priority-${e.notification_id}`,notificationPriorityGroup:n})),t};return i.createElement(b.P,{className:`${e.fillParent?"":l}`},i.createElement("div",null,e.notifications.map(t=>{let a=null;return a="priority"===e.currentNotificationFilter?s(t):c(t),i.createElement(i.Fragment,{key:`row-container-${t.notification_id}`},a,i.createElement(eB,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:E,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>h(t.notification_id),followLinkOnClickCallback:k(t)}))})))}},e.UnreadBar=function(e){return eW(e.isFetchingNotifications,e.notifications)?i.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return i.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,w.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),eW(e.isFetchingNotifications,e.notifications)&&i.createElement(s.E,{onClick:e.markAllAsReadFn,className:eY},(0,w.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=a,e.Header=function(e){let t=(0,T.q5)(),a=!e.inDesktopTray&&(!!t||!!(0,d.k)().notif_settings_button);return i.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?i.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,w.t)("user_notification.community_notifications")):i.createElement(i.Fragment,null,i.createElement(S.j,{currentPlanFilter:e.selectedPlan===M.td?S.a:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate,displaySettings:a})),e.children,e.showMarkAllAsRead&&i.createElement(s.E,{onClick:e.markAllAsReadFn,className:eY},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))},e.FilterToggle=function(e){let t=i.createElement(o.t.TabStrip,{manager:e.tabManager},i.createElement(o.t.Tab,{...e.tabPropsMap.all},(0,w.t)("user_notification.all")),i.createElement(o.t.Tab,{...e.tabPropsMap.priority},function(e){let t=e.reduce((e,t)=>e+Number(eP(t)),0);return 0===t?(0,w.t)("user_notifications.requests_empty"):(0,w.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),i.createElement(o.t.Tab,{...e.tabPropsMap.unread},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,w.t)("user_notifications.unread_empty"):(0,w.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications)));return e.isFetchingNotifications?null:i.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},t,eW(e.isFetchingNotifications,e.notifications)&&i.createElement(s.E,{onClick:e.markAllAsReadFn,className:eY},(0,w.tx)("user_notifications.dropdown.mark_all_as_read")))}})(n||(n={}))},271617:(e,t,a)=>{a.d(t,{a:()=>P,j:()=>R});var n=a(848318),i=a(301168),r=a(278905),l=a(954703),o=a(748059),c=a(773511),s=a(52495),d=a(282631),u=a(580494),m=a(720522),_=a(967688),f=a(453370),p=a(31898),h=a(353231),E=a(730143),k=a(125761),b=a(715880),w=a(392903),v=a(129723),g=a(17753),y=a(2122);let N="notifs_plan_filter--boldTitle--ZUcpT",C="notifs_plan_filter--planFilterContainer--E2TSh",A="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var T=a(364616),I=a(824007);let P="ALL_PLANS_FILTER";function R(e){let{currentPlanFilter:t,onPlanFilterUpdate:a}=e,R=(0,i.wA)(),D=(0,E.q5)(),M=(0,n.useRef)(null),x=!!(0,u.k)().limited_plan_spaces,{getTriggerProps:F,manager:S}=r.b(),B=(0,k.iZ)(),L=(0,i.d4)(e=>x?e.plans:B?e.authedUsers.byId[B.id]?.plans:null),O=(0,i.d4)(b.P),q=(0,i.d4)(e=>e.orgById),U=()=>{R(f.oB()),(0,h.Cu)({userId:B?.id,fileKey:D?.key,eventName:"Notification Settings Button Clicked"}),R(p.to({type:y.s,data:{tab:y.c.NOTIFICATIONS}}))};if(!B||!L||L.length<=1)return n.createElement("div",{className:C},n.createElement("span",{className:N},(0,_.t)("user_notification.all_notifications")),e.displaySettings&&L?.length===1&&n.createElement(l.K,{"aria-label":(0,_.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,_.t)("user_notifications.settings"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},onClick:U},n.createElement(s.I,null)));let H=L.map(e=>e.plan_id);H.unshift(P);let z=(e,t)=>e===P?(0,_.t)("user_notification.all_notifications"):t[e],$=L.reduce((e,t)=>{if(x&&"plan_type"in t){let a="";if(t.plan_type===v.O.ORG){let e=q[t.plan_id];a=e?.name??a}else{let e=O[t.plan_id];a=e?.name??a}e[t.plan_id]=a}else"name"in t&&(e[t.plan_id]=t.name);return e},{}),Q=(e,t)=>{e.stopPropagation(),a(t)},V=H.map(e=>n.createElement(r.q7,{key:e,onClick:t=>{Q(t,e)}},e===t&&n.createElement("span",{className:"notifs_plan_filter--fillMenu--Ar-HO"},n.createElement(m.B,{svg:I.A})),n.createElement("span",{className:`${e===t?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${A}`},z(e,$))));return n.createElement("div",{className:C,ref:M},n.createElement(o.nK,null,n.createElement(r.bL,{manager:S},n.createElement(c.E,{"aria-label":(0,_.t)("user_notifications.notif_filter_label",{planName:z(t,$)}),className:"notifs_plan_filter--dropdownButton--hQgHc",...F()},n.createElement("span",{className:[N,A].join(" ")},(0,w.gN)(z(t,$),35)),n.createElement(m.B,{svg:T.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),n.createElement(d.J,null,n.createElement(r.mc,null,V)))),e.displaySettings&&n.createElement(l.K,{"aria-label":(0,_.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,_.t)("user_notifications.settings"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},onClick:U},n.createElement(s.I,null)))}},87826:(e,t,a)=>{a.d(t,{dV:()=>$});var n=a(848318),i=a(301168),r=a(309488),l=a(347487),o=a(162796),c=a(803565),s=a(186606),d=a(999667),u=a(536384),m=a.n(u),_=a(141760),f=a(206639),p=a(182317),h=a(439382),E=a(720522),k=a(178806),b=a(967688),w=a(87463),v=a(31898),g=a(863270),y=a(995218),N=a(506428),C=a(355755),A=a(125761),T=a(361053),I=a(537256),P=a(259964),R=a(17753),D=a(991675),M=a(446951),x=a(597933),F=a(877994),S=a(920274),B=a(164710),L=a(996775),O=a(418866);let q="edit_color_palette_modal--modalLabel--AVogh text--fontPos11--2LvXf text--_fontBase--QdLsd",U="edit_color_palette_modal--colorCircleOuter--ZJqke";var H=a(209810);function z({onSave:e,onCancel:t,palette:a,enableSubmitWithNoChanges:o,manager:u,isPaletteEyedropperActive:g}){let C=(0,i.wA)(),[D,M]=n.useState(a?.name||""),[z,Q]=(0,d.fp)(O.Jq),V=n.useMemo(()=>a?.baseColors||(0,F.Vk)(),[a?.baseColors]),[Y,j]=(0,d.fp)(O.rN),J=(0,d.Xr)(x.B),X="whiteboard"===(0,y.lg)(),K="dark"!==(0,N.DP)()||X?"light":"dark",W=!(0,f.$K)(V,Y)||o,[G,Z]=n.useState(!1);n.useEffect(()=>(Q(-1),j(V),J(s.cxo.EDIT_PALETTE_MODAL),()=>{Q(-1),j(V),J(s.cxo.SELECTION)}),[Q,j,J,V]);let ee=(0,i.d4)(e=>{let t=e.selectedView;return"fullscreen"!==t.view||t.editorType!==P.nT.Whiteboard}),et=n.useCallback(e=>{j([...Y,e])},[Y,j]),ea=n.useCallback((e,t)=>{j([...Y.slice(0,e),t,...Y.slice(e+1)])},[Y,j]),en=e=>{j([...Y.slice(0,e),...Y.slice(e+1)])},ei=()=>{Q(-1)},er=n.useCallback(e=>{C(v.$O({type:$.type,data:{palette:{uuid:e,name:D,baseColors:Y},enableSubmitWithNoChanges:!0}}))},[C,D,Y]),el=(0,T.cD)(),eo=(0,A.TA)(),ec=(0,L.Bw)(),es=n.useCallback(()=>{let t=Y.some((e,t)=>Y.some((a,n)=>t!==n&&(0,f.DA)(e,a)));if(Z(t),t)return;let n=Y.map(e=>(0,_.colorToHex)(e,1));if(D&&eo&&n.length){let t=a?.uuid||(0,p.g)();a?(0,O.NK)({name:D,teamId:el,baseColors:n,uuid:t},C,()=>er(t)):((0,O.cl)({name:D,teamId:el,uuid:t,baseColors:n,creatorId:eo,isTeamDefault:!1,canRead:!0},C,()=>er(t)),ec(t,n.length,!0)),e()}},[Y,D,eo,a,e,el,C,er,ec]),ed=n.useMemo(()=>Array(Y.length).fill(null).map(e=>n.createRef()),[Y.length]),eu=n.createRef();ed.push(eu);let em=function(e){let t=(0,f.tK)(f.ol.MULTIPLAYER_PURPLE)||f.Uv;if(!e)return t;let a=(0,c.oB)(e),n=360*a.h,i={...a,h:(n+40)%360/360};return(0,c.In)(i)}(Y.length>0?Y[Y.length-1]:null),e_=Y.length>=I.I_,ef=D&&D.trim()&&Y.length>0&&(!a||W||D!==a.name),ep=a?(0,b.t)("whiteboard.color_palettes.modal.edit_palette"):(0,b.t)("whiteboard.color_palettes.modal.create_palette");return n.createElement(r.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(l.vo,{allowOverflow:!0},n.createElement(l.Y9,null,n.createElement(l.hE,null,ep)),n.createElement(l.nB,null,n.createElement("p",{className:q},(0,b.tx)("whiteboard.color_palettes.modal.name")),n.createElement("div",{className:"edit_color_palette_modal--nameInput--iRWoM text--fontPos11--2LvXf text--_fontBase--QdLsd"},n.createElement(h.L,{placeholder:(0,b.t)("whiteboard.color_palettes.modal.palette_name"),value:D||"",onChange:e=>{M(e.target.value)},maxLength:100,height:16,dataTestId:"palette-name-input"})),n.createElement("div",{className:"edit_color_palette_modal--colorsContainer--VNvss"},n.createElement("p",{className:q},(0,b.tx)("whiteboard.color_palettes.modal.colors")),n.createElement("p",{className:"edit_color_palette_modal--modalDescription--SeVmv text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,b.tx)("whiteboard.color_palettes.modal.choose_up_to_9_colors")),G&&n.createElement("p",{className:"edit_color_palette_modal--modalDescriptionError--W6hs7 text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,b.tx)("whiteboard.color_palettes.modal.duplicate_colors")),n.createElement("div",{className:"edit_color_palette_modal--colorPaletteContainer--aQ-En"},Y.map((e,t)=>n.createElement("div",{className:U,ref:ed[t],key:"wrapper"+e+"-"+t},n.createElement("button",{className:m()({"edit_color_palette_modal--deleteColorButton--rWqOY":!0,"edit_color_palette_modal--deleteColorButtonDisabled--dwsFr":z===t}),onClick:()=>en(t),"data-testid":`delete-color-button-${t}`},n.createElement(E.B,{svg:H.A,height:"16px",width:"16px",autosize:!0})),n.createElement(B.v,{target:n.createElement(S.cd,{key:e+"-"+t,size:"large",value:e,selectionState:z===t?"selected":"unselected",onClick:()=>{Q(t)},paletteType:"base",background:"light"}),color:e,onColorChange:e=>ea(z,e),theme:K,isOpen:!g&&z===t,onClose:()=>ei(),dropperDisabled:ee}))),!e_&&n.createElement("div",{className:U,ref:eu,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,b.t)("whiteboard.color_palettes.modal.add_color")},n.createElement(S.HL,{size:"large",value:S.WW,swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"},onClick:()=>{Q(Y.length),et(em)},dataTestId:"add-color-button",fallbackSvg:S.xY}))))),n.createElement(l.wi,null,n.createElement(l.jk,null,n.createElement(w.E,{color:"secondary"},(0,b.tx)("whiteboard.color_palettes.modal.palettes_visible_to_everyone")),n.createElement(k.$z,{variant:"secondary",onClick:t},(0,b.tx)("whiteboard.color_palettes.modal.cancel")),n.createElement(k.$z,{variant:"primary",disabled:!ef,type:"submit",onClick:es,htmlAttributes:{"data-testid":"save-button"}},(0,b.tx)("whiteboard.color_palettes.modal.save_palette"))))))}let $=(0,M.Ju)(function({palette:e,enableSubmitWithNoChanges:t,...a}){let r=(0,i.wA)(),l=(0,A.TA)(),c=(0,T.cD)(),u=o.hS(a),_=(0,C.dH)(),f=(0,d.md)(x.B),p=_===s.NLJ.DROPPER_COLOR&&f===s.cxo.EDIT_PALETTE_MODAL,h=n.useCallback(()=>{r(v.Lo())},[r]);return n.createElement("div",{className:m()("edit_color_palette_modal--headerModalTransitionContainer--C-CFV",{"edit_color_palette_modal--hidden--EDk-H":p})},n.createElement(g.fu,{name:D.e0.FIGJAM_EDIT_PALETTE_MODAL,properties:{userId:l,teamId:c,type:e?"edit palette":"new palette"}},n.createElement(z,{onSave:h,onCancel:h,palette:e,enableSubmitWithNoChanges:t,manager:u,isPaletteEyedropperActive:p})))},"EditColorPaletteModal")},200843:(e,t,a)=>{a.d(t,{j:()=>L});var n=a(848318),i=a(301168),r=a(162796),l=a(309488),o=a(347487),c=a(143823),s=a(193675),d=a(954703),u=a(555973),m=a(303476),_=a(329228),f=a(178806),p=a(967688),h=a(925085),E=a(31898),k=a(863270),b=a(632727),w=a(125761),v=a(55116),g=a(361053),y=a(537256),N=a(17753),C=a(991675),A=a(446951),T=a(414607),I=a(418866),P=a(639088);let R=(0,A.Ju)(function({paletteUuid:e}){let t=(0,i.wA)();return n.createElement(T.Rw,{size:300,confirmText:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_button"),confirmationTitle:(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_title"),popStack:!0,destructive:!0,onConfirm:()=>{(0,I.RN)(e,t)}},n.createElement("div",{className:P.jE},(0,p.tx)("whiteboard.color_palettes.modal.delete_color_palette_confirmation_modal_content")))},"DeleteColorPaletteConfirmationModal");var D=a(877994),M=a(920274),x=a(996775),F=a(87826);let S=(0,A.Ju)(function({paletteName:e,paletteUuid:t}){let a=(0,i.wA)(),r=(0,g.cD)(),l=(0,i.d4)(e=>e.teams[r]?.name);return l||console.error("No team name found for team id",r),n.createElement(T.Rw,{size:360,confirmationTitle:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.title"),confirmText:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.confirm_button"),content:(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.description",{teamName:l,paletteName:e||(0,p.t)("whiteboard.color_palettes.make_default_confirmation_modal.this_palette")}),onConfirm:()=>{t===y.fJ?(0,I.In)(r,a):(0,I.dq)(r,t,a)},popStack:!0})},"MakePaletteTeamDefaultConfirmationModal");function B({palette:e,showMakeDefaultButton:t}){let a=(0,i.wA)(),r=e.uuid===y.fJ,l=e.name||(0,p.t)("whiteboard.color_palettes.unnamed_palette");return n.createElement(h.Y,{width:"fill-parent",direction:"vertical",spacing:"4px"},n.createElement(h.Y,{direction:"horizontal",spacing:"8px"},n.createElement("div",null,l),e.isTeamDefault&&n.createElement(s.E,{variant:"brandOutline"},(0,p.t)("whiteboard.color_palettes.manage_modal.default"))),n.createElement(h.Y,{direction:"horizontal",width:"fill-parent",horizontalAlignItems:"space-between"},n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"0px"},e.baseColors.map(e=>n.createElement(M.cd,{key:e,value:b.z5.parse(e),paletteType:"base",background:"light"}))),n.createElement(h.Y,{direction:"horizontal",width:"hug-contents",spacing:"8px"},!r&&n.createElement(n.Fragment,null,n.createElement(d.K,{onClick:()=>{a(E.$O({type:F.dV.type,data:{palette:{uuid:e.uuid,name:e.name,baseColors:(0,x.$v)(e?.baseColors),isTeamDefault:e.isTeamDefault}}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip"),htmlAttributes:{"data-testid":"edit-color-palette-button-"+e.uuid,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.edit_palette_tooltip")}},n.createElement(u.L,null)),n.createElement(d.K,{onClick:()=>{a(E.$O({type:R.type,data:{paletteUuid:e.uuid}}))},"aria-label":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip"),htmlAttributes:{"data-testid":"delete-color-palette-button-"+e.uuid,"data-tooltip-type":N.Ib.TEXT,"data-tooltip":(0,p.t)("whiteboard.color_palettes.modal.delete_color_palette_tooltip")}},n.createElement(m.i,null))),t&&n.createElement(f.$z,{variant:"secondary",disabled:e.isTeamDefault,onClick:()=>{a(E.$O({type:S.type,data:{paletteUuid:e.uuid,paletteName:e.name}}))},htmlAttributes:{"data-testid":"make-palette-team-default-button-"+e.uuid}},(0,p.tx)("whiteboard.color_palettes.modal.set_default")))))}let L=(0,A.Ju)(function({showMakeDefaultButton:e,entryPoint:t,...a}){let s=(0,w.TA)(),d=(0,g.cD)(),u=r.hS(a),m=(0,i.wA)(),[h]=(0,_.IT)((0,v.iP2)({teamId:d}),{enabled:!!d});return n.createElement(k.fu,{name:C.e0.FIGJAM_MANAGE_PALETTES_MODAL,properties:{entryPoint:t,userId:s,teamId:d}},n.createElement(l.bL,{width:"fit-content",height:"dynamic",manager:u},n.createElement(o.vo,null,n.createElement(o.Y9,null,n.createElement(o.hE,null,(0,p.t)("whiteboard.color_palettes.manage_modal.color_palettes"))),n.createElement(o.nB,{padding:16},n.createElement("div",{className:"manage_color_palettes_modal--subheader--2Aol7"},n.createElement("div",{className:"manage_color_palettes_modal--manageText---c1Ro"},(0,p.tx)("whiteboard.color_palettes.manage_modal.manage_your_teams_color_palettes")),n.createElement(f.$z,{variant:"primary",onClick:()=>{m(E.$O({type:F.dV.type}))},htmlAttributes:{"data-testid":"create-color-palette-button"}},(0,p.tx)("whiteboard.color_palettes.manage_modal.create_new_palette"))),n.createElement("div",{className:"manage_color_palettes_modal--paletteRowsOuter--d2OIk"},"loaded"===h.status&&h.data.colorPalettesForTeam?n.createElement(n.Fragment,null,n.createElement(B,{key:y.fJ,palette:{uuid:y.fJ,name:(0,p.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,D.TS)("base").map(e=>b.z5.format(e)),isTeamDefault:h.data.colorPalettesForTeam.every(e=>!e.isTeamDefault)},showMakeDefaultButton:e}),h.data.colorPalettesForTeam.map(t=>n.createElement(B,{key:t.uuid,palette:t,showMakeDefaultButton:e}))):n.createElement(c.k,{size:"lg",htmlAttributes:{"data-testid":"loading-spinner"}}))))))},"ManageColorPalettesModal")},826331:(e,t,a)=>{a.d(t,{V:()=>i});var n=a(749214);let i=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 6A1.5 1.5 0 0 0 6 7.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 0-1 0v1A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm4.146 3.146a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708l1.647-1.646H9.5a.5.5 0 0 1 0-1h3.793l-1.647-1.646a.5.5 0 0 1 0-.708",clipRule:"evenodd"})})})},555973:(e,t,a)=>{a.d(t,{L:()=>i});var n=a(749214);let i=(0,a(848318).memo)(function(e){return(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4.008 5.124a1 1 0 0 1 1.116-1.116l3.66.457-.124.992-2.636-.329L5 5l.128 1.024.33 2.636a1 1 0 0 0 .285.583l7.403 7.403 3.5-3.5-7.403-7.403a1 1 0 0 0-.583-.286l.124-.992a2 2 0 0 1 1.166.57l9.55 9.55a2 2 0 0 1 0 2.83L17.414 19.5a2 2 0 0 1-2.828 0l-9.55-9.55a2 2 0 0 1-.57-1.166zm13.346 8.73-3.5 3.5 1.439 1.439a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414z",clipRule:"evenodd"})})})}}]);

//# debugId=54284361-f10d-52e7-bcc7-8b0f5c1bf231

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f95e08100534c37a5f3dc0577268c23701606ff0/6148-3bb2b30e0448bb7e.min.js.map