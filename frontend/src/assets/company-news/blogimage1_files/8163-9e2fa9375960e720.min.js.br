"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3ae0e927-7cf1-5d9a-8f5b-ef80c9eaf49b")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[8163],{473935:(e,t,n)=>{n.d(t,{X:()=>k});var o=n(848318),a=n(301168),r=n(316397),i=n(239604),l=n(398872),c=n(734045),s=n(782288),d=n(186606),p=n(320953),m=n(536384),u=n.n(m),_=n(857607),E=n(379267),y=n(554326),g=n(614892),v=n(899757),h=n(738042),I=n(103392),N=n(169660);let T="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",f="stack_controls--scrubbableControl--b1ChI",A="stack_controls--inputSvg--wFizL",P="stack_controls--stackSpacingRow--Uus3H";function b(){let e=(0,y.J2)(d.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===d.RN9.SPACING?o.createElement(S,{focusOnMount:n}):t===d.RN9.COUNTER_SPACING?o.createElement(C,{focusOnMount:n}):o.createElement(D,{stackRegion:t,focusOnMount:n})}let O=e=>{if(e.keyCode===_.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;d.Qa7.tabActiveStackRegion(t)}};function S({focusOnMount:e}){return o.createElement(g.fI,{className:P},o.createElement(N.KI,{focusOnMount:e,inputClassName:T,inputTestId:"stackSpacingControl",noBorderOnFocus:!0,onBlur:d.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:O,onPaste:w,outerClassName:f,recordingKey:"stackSpacingControl",source:"canvas",svgClassName:A}))}function C({focusOnMount:e}){return o.createElement(g.fI,{className:P},o.createElement(v.q,{focusOnMount:e,inputClassName:T,inputTestId:"stackCounterSpacingControl",noBorderOnFocus:!0,onBlur:d.Qa7.clearActiveStackRegion,onCanvasUI:!0,onKeyDown:O,onPaste:w,outerClassName:f,recordingKey:"stackCounterSpacingControl",source:"canvas",svgClassName:A}))}function D({stackRegion:e,focusOnMount:t}){let[n]=(0,I.HF)(e),a=Array.isArray(n)?n.length:0;return e===d.RN9.SPACING?null:o.createElement(g.fI,{className:u()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":a>3})},o.createElement(h.s,{disableVariablesEntryPoint:!0,focusOnMount:t,inputClassName:T,inputTestId:"stackPaddingControl",noBorderOnFocus:!0,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:O,onPaste:w,outerClassName:f,paddingSelection:e,recordingKey:"stackPaddingControl",source:"canvas",svgClassName:A}))}function w(e){(0,E.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),p.l7.user("paste-in-stack",()=>{d.glU.triggerAction("paste",{})}))}let k=o.memo(function(){return(0,a.d4)(e=>e.mirror.appModel.isReadOnly)?null:o.createElement(R,null)});function R(){return o.createElement(r.k,{isShown:!0},o.createElement(c.IA,null,o.createElement(x,{testID:"DesignInlineMenu"})))}function x({testID:e}){let t=(0,a.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t||"GRID"===t)});return(0,a.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?o.createElement(s.W1,{size:"small",testID:e},o.createElement(i.jk,null),o.createElement(l.x,null)):t?o.createElement(s.W1,{testID:e,darkModePreferred:!0},o.createElement(b,{key:"stackControls"})):null}},149928:(e,t,n)=>{n.d(t,{m:()=>a});var o=n(848318);function a({children:e}){return o.createElement("div",{className:"objects_panel_container--container--jBz9j"},e)}},169444:(e,t,n)=>{n.d(t,{f:()=>E});var o=n(848318),a=n(781239),r=n(454805),i=n(156974),l=n(720522),c=n(511067),s=n(335744),d=n(345900),p=n(749211),m=n(182671),u=n(549307),_=n(954184);function E({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:i,hide:p}=(0,c.BK)("expression-builder-create-variable"),m=o.useRef(null),E=a.rf(a.Pt(t,"createVariableDropdown"),"click",o.useCallback(()=>{1===e.length?I(e[0]):i()},[e,i])),[g,v]=o.useState(!1),h=o.useRef(null),I=e=>{let t=m.current?.getBoundingClientRect();t&&(h.current={initialPosition:new r.Mi(t.left,t.top),resolvedType:e},v(!0))},N=()=>{v(!1)};return o.createElement(o.Fragment,null,o.createElement("button",{ref:m,className:u.ZS,onClick:E},o.createElement(l.B,{svg:_.A})),g&&(g&&h.current?o.createElement(d.U,{initialPosition:h.current.initialPosition,initialWidth:d.i,resolvedType:h.current.resolvedType,onCreateVariable:N,onClose:N}):null),n&&m.current&&o.createElement(s.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:m.current.getBoundingClientRect()},e.map(e=>o.createElement(y,{key:e,resolvedType:e,onClose:p,showCreationModal:I,recordingKey:t}))))}function y({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:r}){let l=(0,m.F)(e),c=a.rf(a.Pt(r,"createVariableOption",l.name),"click",o.useCallback(()=>{n(e),t()},[t,e,n]));return o.createElement(i.c$,{className:u.Fs,onClick:c},o.createElement(p.i,{type:e,showTooltip:!1}),l.name)}},26181:(e,t,n)=>{let o;n.d(t,{E:()=>op});var a=n(848318),r=n(301168),i=n(954703),l=n(832214),c=n(92778),s=n(315696),d=n(186606),p=n(320953),m=n(553547),u=n(580494),_=n(999667),E=n(536384),y=n.n(E),g=n(410441),v=n(156845),h=n(238462),I=n(781239),N=n(998568),T=n(454805),f=n(755534),A=n(401970),P=n(967688),b=n(142896),O=n(696786),S=n(303397),C=n(379267),D=n(489082),w=n(601167),k=n(355755),R=n(730143),x=n(313405),M=n(434289),K=n(17753),L=n(750892),U=n(696816),V=n(989232),B=n(315933),F=n(359822),G=n(425155),Y=n(290267),W=n(925085),H=n(614892),z=n(720522),J=n(297638),X=n(244052),$=n(420906);let j=(0,X.ex)("prototype_action_info",function(){return a.createElement("div",{className:J.s.flex.itemsCenter.justifyCenter.$},a.createElement(z.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:$.A}),a.createElement("span",{className:J.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,P.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));var Z=n(209951),Q=n(596224),q=n(749214);let ee=(0,a.memo)(function(e){return(0,q.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,q.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})})});var et=n(302941),en=n(754210),eo=n(511067),ea=n(113326),er=n(227276),ei=n(540698),el=n(246411),ec=n(499025),es=n(120846);let ed=es.c$,ep=es.l6;function em({action:e}){return a.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},a.createElement(A.U,{svg:(0,el.Yb)(e)},(0,el.av)(e)))}function eu(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,o=(0,D.E7)(e.action),i=(0,el.Yb)(o),l=(0,el.av)(o),c=(0,O.GS)(),s=(0,r.d4)(ec.ZM),d=new en.js(c,s),p=new en.Z6(c,s),m=n?d:p,u=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),_=a.useCallback(e=>e-24,[]),E=a.useCallback(e=>e+24,[]),[g,v]=a.useState(void 0),h=a.createElement(ea.Q,{setMaxWidth:v,options:e_(e),formatOption:e=>e&&e.props.value?m.format(e.props.value):"",getIcon:()=>a.createElement(em,{action:"NAVIGATE_TO"})}),N=y()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!c}),T=a.createElement(A.U,{svg:i},l);return a.createElement(a.Fragment,null,a.createElement(ep,{chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",className:N,dataTestId:"action-select",disabled:u,dispatch:e.dispatch,dropdownAlignment:_,dropdownShown:e.dropdownShown,dropdownWidth:c?g:E,formatter:m,hideDropdownWhenContainerMoves:!(0,ei.nl)(),icon:T,iconClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",id:t,inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",onChange:e.onChange,property:e.action,recordingKey:I.Pt(e,"select")},e_(e)),c&&h)}function e_(e){let t=(0,Q.cJ)(),n=(0,O.GS)(),o=a.createElement(ed,{key:"NONE",value:"NONE",icon:a.createElement(em,{action:"NONE"}),recordingKey:I.Pt(e,"clear-option"),disabled:!1}),r=a.createElement(ed,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:a.createElement(em,{action:"NAVIGATE_TO"}),recordingKey:I.Pt(e,"navigate-to-option"),disabled:!1}),i=a.createElement(ed,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:a.createElement(em,{action:"SWAP_STATE_TO"}),recordingKey:I.Pt(e,"swap-state-to-option"),disabled:!d.glU.isSelectionContainedInStateOrStateInstance()}),l=a.createElement(ed,{key:"GO_BACK",value:"GO_BACK",icon:a.createElement(em,{action:"GO_BACK"}),recordingKey:I.Pt(e,"back-option"),disabled:!1}),c=a.createElement(ed,{key:"SCROLL_TO",value:"SCROLL_TO",icon:a.createElement(em,{action:"SCROLL_TO"}),recordingKey:I.Pt(e,"scroll-to-option"),disabled:!1}),s=a.createElement(ed,{key:"OPEN_URL",value:"OPEN_URL",icon:a.createElement(em,{action:"OPEN_URL"}),recordingKey:I.Pt(e,"url-option"),disabled:!1}),p=a.createElement(ed,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:a.createElement(em,{action:"OPEN_OVERLAY"}),recordingKey:I.Pt(e,"open-overlay-option"),disabled:!1}),m=a.createElement(ed,{key:"SWAP_WITH",value:"SWAP_WITH",icon:a.createElement(em,{action:"SWAP_WITH"}),recordingKey:I.Pt(e,"swap-with-option"),disabled:!1}),_=a.createElement(ed,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:a.createElement(em,{action:"CLOSE_OVERLAY"}),recordingKey:I.Pt(e,"close-option"),disabled:!1}),E=a.createElement(ed,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:a.createElement(em,{action:"SET_VARIABLE"}),recordingKey:I.Pt(e,"set-variable"),disabled:!1}),y=(0,u.k)().prototype_set_mode_action&&a.createElement(ed,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:a.createElement(em,{action:"SET_VARIABLE_MODE"}),recordingKey:I.Pt(e,"set-variable-mode"),disabled:!1}),g=!e.isNestedInConditional&&a.createElement(ed,{key:"CONDITIONAL",value:"CONDITIONAL",icon:a.createElement(em,{action:"CONDITIONAL"}),recordingKey:I.Pt(e,"conditional"),disabled:!1}),v=a.createElement(es.sK,{key:"first-divider"}),h=a.createElement(es.sK,{key:"second-divider"}),N=a.createElement(es.sK,{key:"third-divider"}),{getConfig:T}=(0,er.I7)("exp_prototyping_reorder_actions"),f=!!T().getValue("new_ordering",!1),A=t?[i,l,c,v,E,g]:n?f?[o,v,r,i,l,c,s,h,E,y,g,N,p,m,_]:[o,v,r,i,l,c,s,h,p,m,_,N,E,y,g]:[o,v,r,i,l,h,E,y,g,c,s,N,p,m,_];if(e.showVideoActions&&!t){let t=[a.createElement(es.sK,{key:"fourth-divider"}),a.createElement(ed,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:a.createElement(em,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:I.Pt(e,"update-media-play-pause-options"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:a.createElement(em,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:I.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:a.createElement(em,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:I.Pt(e,"update-media-skip_to"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:a.createElement(em,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:I.Pt(e,"update-media-skip-by-options"),disabled:!1})];A=A.concat(t)}return A.filter(Boolean)}var eE=n(660376),ey=n(773511),eg=n(833420),ev=n(788903),eh=n(578386),eI=n(60519),eN=n(346288),eT=n(96526),ef=n(934363);let eA="prototype_action_verbose_title--actionNameInsertion--aF4kI",eP="prototype_action_verbose_title--actionName--qWJL3",eb="prototype_action_verbose_title--actionNameUI3--JAYsG",eO=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return a.useMemo(()=>new en.cP(e),[e])};function eS({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:o}){let r=(0,G.YT)()===G.Oz.TWO_COL,i=a.useContext(eI.c),l=r&&i===eI.P.LEFT,c=t||n,s=(0,ev.u)((0,D.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),p=(0,D.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,eh.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,u=s?.name??p?.name,_=eO(),E=new en.Z6((0,O.GS)()),g=(0,en._X)(e),v=(0,D.E7)(g),I=a.createElement(A.U,{svg:(0,el.Yb)(v)},(0,el.av)(v)),N=e=>{if(!e.connectionType||(0,D.gl)(e.connectionType))return null;let t=y()({[eP]:!0,[eb]:r}),n=y()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":r});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":case"OBJECT_ANIMATION":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let o=e.transitionNodeID;if((0,D.gl)(o))return a.createElement("div",{className:t},(0,P.t)("proto.variant_actions.mixed"));if(void 0===o||m.aI(o,m.Hr))return null;let r=m.dI(o),i=_.format(r);return a.createElement("div",{className:n},i)}case"URL":{let o=e.connectionURL;if(!o)return null;if((0,D.gl)(o))return a.createElement("div",{className:t},(0,P.t)("proto.variant_actions.mixed"));return a.createElement("div",{className:n},o)}case"SET_VARIABLE":if(!e.targetVariableData||(0,D.gl)(e.targetVariableData))return null;return a.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},a.createElement(U.y3,{targetVariableData:e.targetVariableData,onClick:h.lQ,showVariableThumbnails:!1,isNarrowPanel:c,isInConditional:!0}));case"CONDITIONAL":{if((0,D.gl)(e)||(0,D.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return a.createElement(U.y3,{targetVariableData:t,onClick:h.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,eE.xb)(e.connectionType)}},T=y()({[J.s.block.bgTransparent.$]:!0,"prototype_action_verbose_title--buttonResetTextAlign--gy69p":!0,[ef.Li]:c&&!r,[ef.O8]:!c&&!r,[ef.kE]:r}),f=y()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":r});return a.createElement(ey.E,{className:T,onClick:o},a.createElement(eg.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},a.createElement("div",{className:f},I),(e=>{let t=v?E.format(v):"Undefined",n=y()({[eP]:!0,[eb]:r});if(((0,D.gl)(e.connectionType)||(0,D.gl)(g))&&(t=(0,P.t)("fullscreen.mixed")),!e.connectionType||(0,D.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t));var o=N(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return a.createElement(a.Fragment,null,a.createElement("div",{className:n},(0,P.t)("proto.action_change_to")),o);if(o){if("OVERLAY"===e.navigationType)return a.createElement(a.Fragment,null,a.createElement("div",{className:eA},(0,P.tx)("proto.action_overlay_title",{overlayFrameName:a.createElement("span",null,o)})));if("SWAP"===e.navigationType)return a.createElement(a.Fragment,null,a.createElement("div",{className:n},(0,P.t)("proto.action_swap_overlay_title")),o)}return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t),o);case"UPDATE_MEDIA_RUNTIME":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t),o);case"URL":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},o?(0,P.t)("proto.action_url_title"):(0,P.t)("proto.action_open_link")),o);case"SET_VARIABLE":{let i=e.targetVariableData&&(0,D.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===d.rXF.COLOR,c=y()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":r});if(u&&o)return a.createElement(a.Fragment,null,a.createElement("div",{className:i?c:eA},(0,P.tx)("proto.action_set_variable_title",{variableName:a.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},a.createElement(eT.wG,{text:u,isDeleted:!!s&&(0,eN.eF)(s),disableHover:l})),variableValue:a.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},o)})));return a.createElement(a.Fragment,null,a.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},(0,P.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return a.createElement(a.Fragment,null,a.createElement("div",{className:n},r?(0,P.t)("proto.if"):(0,P.t)("proto.action_conditional_title")),o);case"OBJECT_ANIMATION":return a.createElement(a.Fragment,null);default:(0,eE.xb)(e.connectionType)}})(e)))}var eC=n(672154),eD=n(673786),ew=n(181640),ek=n.n(ew),eR=n(223926),ex=n.n(eR),eM=n(563304),eK=n.n(eM),eL=n(626715),eU=n.n(eL),eV=n(810503),eB=n(822879),eF=n(525251),eG=n(985789),eY=n(245838);let eW="prototype_set_variable_mode_controls--dropdownRow--vl5z4",eH="missing",ez=es.l6,eJ=es.c$,eX=es.l6,e$=es.c$,ej={};function eZ(){let e=(0,ev.h6)()||ej,t=(0,eG.iR)(),n=a.useMemo(()=>{let n=eK()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,sortPosition:t.sortPosition,isCompatible:!0,collectionName:e.name}))||[],explicitMode:null,inheritMode:null,libraryKey:e.library_key}));return ek()({},e,n)},[t,e]),o=a.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.libraryKey})),[n]),i=a.useMemo(()=>Object.values(o).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[o]),l=a.useMemo(()=>eU()(i.map(e=>e.modeData.libraryKey??eY.CC)),[i]),c=(0,eB.U)(l),[s,p]=a.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=ex()(i,e=>e.isLocal?"_local":e.modeData.libraryKey&&c.data?.[e.modeData.libraryKey]===void 0?"_unknownFile":e.modeData.libraryKey),o=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{libraryKey:e,fileName:c.data?.[e]??""},...t]).flat(1);return t&&(o.push({libraryKey:eY.CC,fileName:(0,P.t)("variables.mode_properties_panel.used_variables.subheading")}),o.push(...t)),[e??[],o]},[c,i]),m=(0,eG.d2)(),u=a.useCallback(e=>{let t=m[(0,eD.yG)(e)],n=i.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[m,i]),_=i.length>0?i[0]:void 0,E=_?.setKey,y=_?.modeData.collectionID,g=a.useMemo(()=>E&&u(E),[E,u]),v=(0,r.wA)();return{localVariableSets:s,allVariableSets:i,firstVariableSet:_,firstVariableSetID:y,firstVariableSetMode:g,getDefaultNewModeForVariableCollectionKey:u,reportAnalyticsEventWhenSelected:e=>{let t=d.mSn.getVariableSetInfoForSetModeAnalytics(e);v((0,x.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:p}}function eQ({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:o,recordingKey:r,actionIndexPath:i}){let{getDefaultNewModeForVariableCollectionKey:l,allVariableSets:c,reportAnalyticsEventWhenSelected:s}=eZ(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:p}=(0,G.zt)(),m=(0,O.GS)();a.useEffect(()=>{if(!n||(0,D.gl)(n))return;let e=c.find(e=>e.setKey===n);e?((0,eV.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),o({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,eV.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),o({targetVariableSetKey:void 0}))},[n,c,o]);let[u,_]=a.useMemo(()=>{let t=(0,D.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let o=eC.gr.toRefIfSubscribed(t);if(o)return e.find(e=>e.setKey===o.key)}(c,e)||eH,n=(()=>{if(!(0,D.gl)(t)&&void 0!==t&&t!==eH)return t})();return[t,n]},[e,c]),E=a.createElement(e1,{selectedVariableSet:u,onChange:e=>{d?p():(s(e.modeData.collectionID),o({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:l(e.setKey)}))},actionIndexPath:i}),y=m?a.createElement(eF.A,{input:E,label:(0,P.t)("proto.set_variable_mode.collection_label")}):a.createElement(H.fI,{recordingKey:I.Pt(r,"selectTargetVariableSet")},E),g=a.createElement(e3,{selectedVariableSetKey:_&&_.setKey,selectedVariableModeID:t,onChange:e=>{d?p():o({targetVariableModeID:e})},actionIndexPath:i}),v=m?a.createElement(eF.A,{input:g,label:(0,P.t)("proto.set_variable_mode.mode_label")}):a.createElement(H.fI,{recordingKey:I.Pt(r,"selectTargetVariableMode")},g);return a.createElement("div",{className:m?void 0:J.s.relative.$},y,_&&v)}let eq={format:e=>void 0===e?(0,P.t)("proto.prototype_panel.edit_set_mode.none"):e===eH?(0,P.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==eH&&t!==eH&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function e0(e,t){return"libraryKey"in e?[t&&a.createElement(es.sK,{key:e.libraryKey+"divider"}),a.createElement(eJ,{isHeader:!0,key:e.libraryKey+"header",formattedValue:e.fileName})]:a.createElement(eJ,{key:e.setKey,value:e})}function e1({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let o=(0,r.wA)(),i=(0,eo.Um)(),l="set-variable-mode--select-variable-set-"+n,{localVariableSets:c,allVariableSets:s,subscribedVariableSetsWithSections:d}=eZ();return a.createElement(ez,{id:l,className:eW,property:e,formatter:eq,dispatch:o,dropdownShown:i?.type===l?i:null,onChange:e=>{(0,D.gl)(e)||void 0===e||e===eH||t(e)}},s.length>0?[c.length>0&&a.createElement(eJ,{key:I.Pt(l,"local_variables"),isHeader:!0,formattedValue:(0,P.t)("variables.mode_properties_panel.assets_created_in_file.subheading")}),...c.map(e=>e0(e,!1)),...d.map((e,t)=>e0(e,c.length>0||t>0))]:[])}let e5={format:e=>void 0===e?(0,P.t)("proto.prototype_panel.edit_set_mode.none"):e===eH?(0,P.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""};function e4(e){return a.createElement(e$,{key:e.modeId.guid,value:e})}function e3({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:o}){let i=(0,r.wA)(),l=(0,eo.Um)(),c="set-variable-mode--select-variable-mode-"+o,{allVariableSets:s}=eZ(),d=a.useMemo(()=>s.find(t=>t.setKey===e)?.modeData.modeOptions,[e,s]),p=a.useMemo(()=>(0,D.gl)(t)||void 0===t?t:d?.find(e=>e.modeId.guid===t)||eH,[t,d]);return a.createElement(eX,{id:c,className:eW,property:p,formatter:e5,dispatch:i,dropdownShown:l?.type===c?l:null,onChange:e=>{!e||(0,D.gl)(e)||e===eH||n(e.modeId.guid)}},d&&d?.map(e4))}var e2=n(699848),e7=n(813009),e8=n(995218),e6=n(959219),e9=n(21614),te=n(271020),tt=n(544405),tn=n(632727),to=n(273555),ta=n(52463),tr=n(232958),ti=n(890868),tl=n(190561),tc=n(753644),ts=n(483157),td=n(554326);function tp(e){a.useEffect(()=>{let t=d.Ez5?.prototypingEditorState().colorPickerEyedropperVarData;if(t)return(0,td.lu)(t,{onChangeImmediate(){let n=t.getCopy();n&&e(n)}})},[e])}var tm=n(875879),tu=n(847526),t_=n(27776),tE=n(881929),ty=n(468447),tg=n(869219);let tv=tn.TI;function th({children:e}){return(0,O.GS)()?a.createElement(tu.TN,null,e):a.createElement(H.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function tI({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:o}){let[i,l]=a.useState(!1),[c,s]=a.useState(new T.Mi),u=(0,r.wA)(),_=(0,O.GS)(),E="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:y,destinationOverlayBackgroundType:g,destinationOverlayPositionType:v,destinationOverlayBackgroundInteraction:h}=(0,e7.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[E]?.destinationOverlayBackgroundInteraction})),N=a.useRef(null),f=a.useRef(null),A=a.useCallback(()=>{l(!1)},[l]),b=a.useCallback(()=>{if(i)A();else{l(!0);let e=_?f.current:N.current;s((0,ta.cn)(e))}},[i,A,_]),S=a.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";p.l7.user("overlay-background-type-edit-scope",()=>{d.X3B.setOverlayBackgroundType(m.dI(o),t)}),u((0,x._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[u,o]),C=a.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";p.l7.user("overlay-background-interaction-edit-scope",()=>{d.X3B.setOverlayBackgroundInteraction(m.dI(o),t)}),u((0,x._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[u,o]),w=a.useCallback(()=>(0,D._W)(y,{r:0,g:0,b:0,a:.25}),[y]),k=a.useCallback((e,t)=>{t!==to.zk.NO&&p.l7.user("overlay-background-color-edit-scope",()=>{d.X3B.setOverlayBackgroundColor(m.dI(o),e)})},[o]);tp(e=>{k(e.value,to.zk.YES)});let R=a.useCallback((e,t)=>{k(e,to.zk.YES)},[k]),M=a.useCallback((e,t)=>{let n=w();k({r:n.r,g:n.g,b:n.b,a:e},t)},[w,k]),K=a.useCallback(e=>{p.l7.user("overlay-position-type-edit-scope",()=>{d.X3B.setOverlayPositionType(m.dI(o),e)}),u((0,x._P)({name:"Overlay position changed",params:{position:e}}))},[u,o]),L=w(),U=w().a,V=(0,D.E7)(v),B="CLOSE_ON_CLICK_OUTSIDE"===(0,D.E7)(h),F="SOLID_COLOR"===(0,D.E7)(g),G=a.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},a.createElement(ti.J,{onClick:F?b:()=>{},color:L,opacity:U,recordingKey:I.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),a.createElement(tc.AN,{className:_?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:tv,property:L,disabled:!F,onChange:R,recordingKey:I.Pt(t,"colorInput"),noBorderOnFocus:!0}),a.createElement(tr.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:U,onValueChange:M,dispatch:u,disabled:!F,noBorderOnFocus:!0,recordingKey:I.Pt(t,"opacity")}));return a.createElement(H.Zk,{className:_?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!_&&a.createElement(H.fI,null,a.createElement(ts.Q,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,P.tx)("proto.overlay_settings"))),a.createElement(tO,{overlayPositionType:V,onOverlayPositionTypeChange:K,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&a.createElement(th,null,a.createElement(te.S,{label:a.createElement(tt.J,null,(0,P.tx)("proto.close_when_clicking_outside")),recordingKey:I.Pt(t,"closeOnClickOutside"),onChange:C,checked:B})),a.createElement(th,null,a.createElement(te.S,{label:a.createElement(tt.J,null,_?(0,P.tx)("proto.overlay_panel.background"):(0,P.tx)("proto.add_background")),recordingKey:I.Pt(t,"addBackgroundBehindOverlay"),onChange:S,checked:F})),F&&(_?a.createElement(eF.A,{ref:f,label:(0,P.t)("proto.overlay_panel.background"),input:G}):a.createElement(H.fI,{ref:N}," ",G," ")),i&&a.createElement(tl.h,{disabledVariableIds:new Set,initialPosition:c,color:L,boundVariable:null,onChange:k,onClose:A,recordingKey:I.Pt(t,"colorPicker")}))}let tN=es.l6,tT=es.c$;class tf extends a.PureComponent{constructor(){super(...arguments),this.titleFormatter=new en.Cr,this.renderOverlayPositionOption=(e,t)=>a.createElement(tT,{key:t,value:e,recordingKey:I.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return a.createElement(tN,{chevronClassName:"overlay_panel--chevron--7RTA-",className:this.props.className,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownWidth:t_.DxS,formatter:this.titleFormatter,id:this.props.recordingKey??"overlay-position_select",inputClassName:"overlay_panel--input--tGHHB",onChange:this.props.onChange,property:this.props.property,recordingKey:I.Pt(this.props,"select")},e,a.createElement(es.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}tf.displayName="OverlayPositionDropdown";class tA extends tm.I{}class tP extends tm.Y{}class tb extends a.PureComponent{render(){return a.createElement(tA,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},a.createElement(tP,{value:"CENTER",tooltip:(0,P.t)("proto.tooltip_overlay_position_center"),svg:ty.A,recordingKey:I.Pt(this.props,"center")}),a.createElement(tP,{value:"TOP_LEFT",tooltip:(0,P.t)("proto.tooltip_overlay_position_top_left"),svg:tg.A,recordingKey:I.Pt(this.props,"top-left")}),a.createElement(tP,{value:"BOTTOM_CENTER",tooltip:(0,P.t)("proto.tooltip_overlay_position_bottom_center"),svg:tE.A,recordingKey:I.Pt(this.props,"bottom-center")}))}}function tO({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let o=(0,O.GS)(),i=(0,r.wA)(),l=(0,eo.Um)(),c=a.createElement(tf,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:i,dropdownShown:l,onChange:t,recordingKey:I.Pt(n,"overlayPositionDropdown")}),s=a.createElement(tb,{property:e,onChange:t,recordingKey:I.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return o?a.createElement(eF.A,{label:(0,P.t)("proto.overlay_panel.position"),input:c}):a.createElement(H.fI,null,c,s)}var tS=n(732676),tC=n(910401),tD=n(672595);let tw="prototype_conditional_controls--conditionalRowUI3--rQlu6",tk="prototype_conditional_controls--conditionIcon--Npk57";var tR=n(609746),tx=n(969560),tM=n(764361);function tK({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:o,updateActions:r,onAddAction:i,autoOpenVariablePicker:l,isSelected:c,handleMouseDownUI3:s,...p}){let m=p.conditionalActions,u=m?.actions?m?.actions:[],_=m?.condition?m?.condition:void 0,E=(0,G.YT)()===G.Oz.TWO_COL,y=E?tw:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",g=a.createElement(U.KN,{resolvedType:d.rXF.BOOLEAN,targetVariableData:_,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:o,showVariableThumbnails:!0,isNarrowPanel:!0}),v=a.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},a.createElement(tD.t,{addButtonPressed:i,recordingKey:I.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),h=a.createElement(a.Fragment,null,E?a.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,P.tx)("proto.else")):a.createElement(z.B,{className:tk,svg:tR.A}),!E&&u.length>0&&a.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},a.createElement(tD.t,{addButtonPressed:i,recordingKey:I.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!E,isNestedInConditional:!0}))),N=E?a.createElement(ey.E,{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onClick:s},h):a.createElement(H.fI,{className:E?tw:"prototype_conditional_controls--conditionalRow--u0PaS"},h);return a.createElement(a.Fragment,null,p.ifStatement&&a.createElement("div",{className:y},!E&&a.createElement(W.Y,{direction:"horizontal",spacing:4},a.createElement("span",{className:E?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},a.createElement(W.Y,{direction:"horizontal",spacing:0},a.createElement(z.B,{className:tk,svg:tx.A}),a.createElement(W.Y,{direction:"horizontal",spacing:0},(0,D.hS)(_)&&g),a.createElement(z.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:tM.default}))),!E&&u.length>0&&v)),!p.ifStatement&&N,u&&u.map((o,r)=>a.createElement(nM,{key:r,action:o,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],r],autoOpenVariablePicker:l,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:u.length,onAddAction:i,onDeleteAction:()=>e(r),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:I.Pt(p.recordingKey,"conditional-action-row",r),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(r),updateSelectionProperties:n.appendActionIndex(r)})),0===u.length&&a.createElement(nM,{key:0,action:p.emptyAction,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],autoOpenVariablePicker:l,expandedRows:p.expandedRows,interactionType:p.interactionType,isNestedInConditional:!0,numActions:u.length,onAddAction:i,onDeleteAction:()=>e(0),onDrop:p.onDrop,onExpand:p.onExpand,onSelect:p.onSelect,recordingKey:I.Pt(p.recordingKey,"conditional-action-row",0),selectedActionIndex:p.selectedActionIndex,selectedInteractions:p.selectedInteractions,stateManagementVersion:p.stateManagementVersion,updateMultipleDestinationNodes:t.appendActionIndex(0),updateSelectionProperties:n.appendActionIndex(0)}))}function tL(e,t,n){return function(o){var a=[...t];a.length>e?a[e].condition=o:a.push({condition:0===e?o:void 0,actions:[]},{condition:1===e?o:void 0,actions:[]}),n({conditionalActions:a})}}function tU({onDrop:e,onSelect:t,onExpand:n,action:o,updateMultipleDestinationNodes:i,updateSelectionProperties:l,interactionType:c,recordingKey:s,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:m,selectedActionIndex:u,expandedRows:_,autoOpenVariablePicker:E,onNewActionAdded:y,handleMouseDownUI3:g}){let v=(0,r.wA)(),h=(0,k.p8)("currentPage"),N=(0,G.YT)()===G.Oz.TWO_COL,T=N?u.equals(m):void 0,{shouldShowAdvancedPrototypingPaywall:f,showAdvancedPrototypingConditionalActionsModal:A}=(0,G.zt)(),b=(0,D.hS)(o.conditionalActions)&&o.conditionalActions?o.conditionalActions:[],O=e=>function(t){var n=[...b];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},S=e=>function(t){var n=[...b],o=0;if(n.length>e){var a=n[e].actions;a?a.push(t):a=[t],o=a.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),o=1;"SET_VARIABLE"===t.connectionType&&(E.current=!0),l({conditionalActions:n}),y&&y(new tC.Op([m[0],e,o-1])),v((0,x._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:h,actionInConditionalAction:!0}}))},C=e=>function(t){if(f)A();else{var n=[...b];let o=b[e],a=[];if(o&&o.actions)for(let e=0;e<o.actions.length;e++){let n=o.actions[e];e!==t?a.push(n):v((0,x._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:h,actionInConditionalAction:!0}}))}n[e].actions=a,l({conditionalActions:n})}},w=b.length>0?b[0]:void 0,R=b.length>1?b[1]:void 0;return a.createElement("div",{style:N?{position:"relative"}:void 0},(0,D.gl)(o.conditionalActions)&&a.createElement(eg.Y1,null,a.createElement(ey.E,{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})}},(0,P.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,D.hS)(o.conditionalActions)&&a.createElement(a.Fragment,null,a.createElement(tK,{key:0,actionIndexPath:[m[0],0],autoOpenVariablePicker:E,conditionalActions:w,emptyAction:{ifStatement:!0,action:o},expandedRows:_,handleMouseDownUI3:g,ifStatement:!0,interactionType:c,isSelected:T,onAddAction:S(0),onDeleteAction:C(0),onDrop:e,onExpand:n,onSelect:t,recordingKey:I.Pt(s,"conditional-block",0),selectedActionIndex:u,selectedInteractions:p,stateManagementVersion:d,updateActions:O(0),updateCondition:tL(0,b,l),updateMultipleDestinationNodes:i.appendActionIndex(0),updateSelectionProperties:l.appendActionIndex(0)}),a.createElement(tK,{key:1,actionIndexPath:[m[0],1],autoOpenVariablePicker:E,conditionalActions:R,emptyAction:{ifStatement:!1,action:o},expandedRows:_,handleMouseDownUI3:g,ifStatement:!1,interactionType:c,isSelected:T,onAddAction:S(1),onDeleteAction:C(1),onDrop:e,onExpand:n,onSelect:t,recordingKey:I.Pt(s,"conditional-block",1),selectedActionIndex:u,selectedInteractions:p,stateManagementVersion:d,updateActions:O(1),updateCondition:tL(1,b,l),updateMultipleDestinationNodes:i.appendActionIndex(1),updateSelectionProperties:l.appendActionIndex(1)})))}function tV({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:o,...r}){let i=t.length>0?t[0]:void 0,l=i?.condition?i?.condition:void 0,c=y()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!l});return a.createElement(a.Fragment,null,a.createElement(eF.A,{input:null,label:(0,P.t)("proto.condition")}),a.createElement(e2.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,D.hS)(l)?a.createElement("div",{className:c},a.createElement(U.KN,{resolvedType:d.rXF.BOOLEAN,targetVariableData:l,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:tL(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:o,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var tB=n(195124),tF=n(186112);class tG{constructor(e,t){this.nodeFormatter=e,this.scene=t,this.format=e=>{let t=this.nodeFormatter.format(e);if(this.scene&&e!==m.AD&&null!=e){let n=this.scene.get(e);if(n?.isResponsiveSet)return"/"===t?(0,P.t)("sites.panel.home"):t}return t}}}var tY=n(702038),tW=n(700436),tH=n(184226),tz=n(488307),tJ=n(739321);let tX=es.c$,t$=es.l6;function tj(e){let t=a.useMemo(()=>new en.cP(e.scene),[e.scene]),[n,o]=a.useState([]),[r,i]=a.useState([]),l=(0,Q.cJ)(),c=e.nodeId===D.oV?D.oV:m.dI(e.nodeId),s=n;(0,D.hS)(c)&&c!==m.AD&&-1===s.indexOf(c)&&(s=s.concat([c]));let p=`prototype-destination-select-${e.recordingKey}`,u="SCROLL_TO"!==e.action?s.filter(e=>t.hasNameForNode(e)).map((t,n)=>a.createElement(tX,{key:`enabled-${t}`,value:t,recordingKey:I.Pt(e,`viable-option-${n}`),disabled:!1})):((n,o)=>{let r=ex()(n.filter(e=>t.hasNameForNode(e)),t=>t===o&&(0,D.hS)(o)?tB.Ql(e.scene,t)?.guid:e.scene.get(t)?.parentGuid),i=Object.keys(r);(0,tB.X4)(i,t.format.bind(t));let{tlfId:l,index:c}=(0,tB.H_)(e.scene,i);return l&&c&&(i.splice(c,1),i=[l,...i]),i.reduce((t,n,o)=>(0!==o&&t.push(a.createElement(es.sK,{key:o})),t.push(a.createElement(tX,{key:`disabled-${n}`,value:n+" ",recordingKey:I.Pt(e,`disabled-option-${n}`),disabled:!0})),r[n].forEach((n,o)=>{t.push(a.createElement(tX,{key:`enabled-${n+o}`,value:n,recordingKey:I.Pt(e,`viable-option-${o}`),disabled:!1}))}),t),[])})(s,c),_=r.filter(e=>t.hasNameForNode(e)).map((t,n)=>a.createElement(tX,{key:`disabled-${t}`,value:t,recordingKey:I.Pt(e,`disabled-option-${n}`),disabled:!0})),E=e.isUI3?a.Fragment:H.fI;return a.createElement(E,null,a.createElement(t$,{chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",className:e.className,dataTestId:"destination-select",dispatch:e.dispatch,dropdownShown:e.dropdownShown,dropdownWidth:t_.DxS,formatter:new tG(t,e.scene),hideDropdownWhenContainerMoves:!(0,ei.nl)(),id:p,inputClassName:"prototype_destination_dropdown--input--rzglN",onChange:e.onChange,onOptionFocus:e=>{tY.Uc(e??"")},property:c,recordingKey:I.Pt(e,"select"),willShowDropdown:()=>{let t=d.baT.ALL;"SCROLL_TO"===e.action?t=d.baT.SCROLL_TO:"SWAP_STATE_TO"===e.action?t=d.baT.STATES:"NAVIGATE_TO"===e.action&&l&&(t=d.baT.RESPONSIVE_SETS);let{viableIds:n,disabledIds:a}=d.X3B.getTransitionDestinationsOnActiveCanvas(t);return o(n),i(a),Promise.resolve()}},u||null,0!==r.length&&0!==s.length&&a.createElement(es.sK,null),_))}let tZ=a.memo(function(e){let t=(0,R.tS)(),n=(0,R._G)(),o=(0,r.d4)(tQ),i=(0,r.d4)(tW.Sh),l=(0,r.d4)(tW.dK),c=(0,tF.ge)(),s=(0,tH.D)(i,l),p=(0,r.d4)(tq),m=a.useMemo(()=>(0,tJ.cP)(p,t,n,c,e.actionIndexPath),[p,t,n,e.actionIndexPath,c]),u=a.useMemo(()=>(0,tJ.cP)(o,t,n,c),[o,t,n,c]),_=m||u;if(!_||_.mode!==d.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:E,stateGroupModel:y,selectedStates:g,selectedStatesPropertyValues:v}=_,h=y.propertySortOrder||[],I=y.propertyValues;return I?a.createElement(tz.lS,{allStates:E,extended:!0,hideErrorsPanel:!0,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let o=t[e].symbol.node_id;for(let t of(n[e]=o,s[e]||[]))n[t]=o;for(let e of i)n[e]||(n[e]=o)}e.onChange(n)},recordingKey:e.recordingKey,selectedStates:g,selectedStatesPropertyValues:v,shouldIndent:!0,sortedProperties:h,stateGroupPropertyValues:I}):null});function tQ(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function tq(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var t0=n(979890),t1=n(238004),t5=n(169444),t4=n(263267),t3=n(491892),t2=n(534049),t7=n(175393);let t8="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",t6="prototype_set_variable_controls--icon---HzDt",t9="prototype_set_variable_controls--placeholderText--PBIqf";function ne({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:o,...i}){let l=a.useRef(null),c=(0,r.wA)(),s=(0,O.GS)(),p=(0,r.d4)(e=>e.variablePickerShown),_=(0,ev.tZ)((0,D.hS)(t)&&"id"in t?t.id:void 0),E=(0,ev.u)((0,D.hS)(t)&&"id"in t?t.id:void 0),[g,v]=a.useState("");(0,F.h)(()=>{o&&!0===o.current&&(N(),o.current=!1)});let h=(0,ev.BQ)((0,D.hS)(t)&&"id"in t?t.id:void 0)??(0,eh.m9)((0,D.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);a.useEffect(()=>{void 0!==e&&h&&"MIXED"!==h&&(0,D.hS)(e)&&e.resolvedType!==h.resolvedType&&!((0,eh.tz)(e.resolvedType)&&(0,eh.tz)(h.resolvedType))&&n({targetVariableData:void 0})},[h,n,e]);let N=()=>{let e=l.current.getBoundingClientRect();c((0,t1.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:d.rXF.STRING,initialPosition:new T.Mi(e.left-20,e.top),key:i.recordingKey,onVariableSelected:S}))},f=a.useCallback(()=>{c((0,t1.B)())},[c]),[A,b]=a.useState(!1),S=a.useCallback(t=>{if(void 0!==t&&t.node_id){let o={targetVariable:{id:t.node_id}},a=d.CWU.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===d.rXF.COLOR&&a&&(o.targetVariableData=a??void 0),n(o),c((0,x.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),b(!0)}},[c,e,n]),C=a.useCallback(e=>{e.value.stablePath.map(e=>m.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),b(!0))},[n]),w=a.useMemo(()=>({type:"LOCAL_VARIABLES",layout:"list"}),[]),k=a.useRef(null);tp(e=>{n({targetVariableData:e})});let R="nodeFieldAlias"in t?(0,eh.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,M=R?(0,eh.Xx)(R.varValue.resolvedType):null,K=null;if((0,D.gl)(t))K=null;else if(h?.resolvedType===d.rXF.COLOR)K=(0,D.gl)(e)?a.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,P.t)("fullscreen.mixed")):a.createElement(a.Fragment,null,a.createElement(t2.gJ,{variableValue:e??h,onChange:e=>{n({targetVariableData:e})},recordingKey:I.Pt(i.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=i.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",o=d.rXF.BOOLEAN;E?o=E.resolvedType:R&&(o=R.varValue.resolvedType===d.rXF.TEXT_DATA?d.rXF.STRING:R.varValue.resolvedType),K=a.createElement("div",{className:s?void 0:J.s.ml12.$},a.createElement("div",{className:t8},a.createElement(U.KN,{resolvedType:o,targetVariableData:e,autoOpenExpressionBuilder:A,setAutoOpenExpressionBuilder:b,updateSelectionProperties:n,recordingKey:i.recordingKey,isNarrowPanel:i.isNarrowPanel,showVariableThumbnails:!0}),!s&&a.createElement(z.B,{className:y()(t6,t),svg:tM.default})))}let L=y()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!s&&!i.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!s&&i.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":s,[t9]:s&&!(_||R)}),V=(0,r.d4)(ec.ZM)?(0,P.t)("proto.select_variable_unified"):s?(0,P.t)("proto.select_variable.short"):(0,P.t)("proto.select_variable"),B=a.createElement(t0.D8,{recordingKey:I.Pt(i.recordingKey,"selectTargetVariable"),onClick:N},a.createElement("div",{className:s?void 0:(0,D.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:l},a.createElement(W.Y,null,a.createElement("div",{className:L},a.createElement("div",{className:t8},(0,D.gl)(t)?a.createElement("div",{className:y()(J.s.pt2.$,J.s.pb2.$)},(0,P.t)("fullscreen.mixed")):_?a.createElement(eT.wG,{text:_,thumbnailValue:h,isDeleted:!!E&&(0,eN.eF)(E)}):R?a.createElement(eT.wG,{text:R.name,thumbnailValue:M,isDeleted:!1,colorTheme:eT.J2.COMPONENT}):a.createElement("div",{className:y()(J.s.pt2.$,J.s.pb2.$,s?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},V),!s&&a.createElement(z.B,{className:t6,svg:tM.default})))))),G=s?a.createElement(eF.A,{input:B,label:(0,P.t)("proto.target")}):B,Y=y()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!s&&i.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!s&&!i.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":s,[t9]:s&&!e&&h?.resolvedType!==d.rXF.COLOR}),H=a.createElement("div",{className:Y,"data-testid":"set-variable-container"},K),X=s?null!==K?a.createElement(eF.A,{label:(0,P.t)("proto.variable.value"),input:H}):null:H;return a.createElement("div",{className:s?void 0:J.s.relative.$},G,p.isShown&&"variable-picker-set-variable-action"===p.type&&p.key===i.recordingKey?a.createElement(a.Fragment,null,a.createElement(t7.vx,{title:"",headerSize:"hidden",initialPosition:p.initialPosition,onClose:f,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},a.createElement(t3.YK,{currentView:w,disabledVariableIds:new Set,onClose:f,onComponentPropSelected:(0,u.k)().ds_variable_props_proto?C:void 0,onSearchInputChange:v,onVariableSelected:S,pickerType:"set-variable",recordingKey:I.Pt(i.recordingKey,"variablePickerForSelection"),renderSetControls:()=>a.createElement(t4.Z,{currentView:w,subscribedLibraries:[],setControlRightButtons:a.createElement(t5.f,{resolvedTypes:[d.rXF.BOOLEAN,d.rXF.STRING,d.rXF.FLOAT,d.rXF.COLOR]}),recordingKey:I.Pt(i.recordingKey,"variablePickerForSelection")}),searchInputRef:k,searchQuery:g,selectedItem:E})),a.createElement(t3.$3,{onClose:f})):null,X)}var nt=n(347701),nn=n(808943),no=n(156137),na=n(523669),nr=n(801296),ni=n(469508);let nl=(0,X.ex)("prototype_state_management_info",function(){let e=a.createElement(ni.N,{newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295",htmlAttributes:{rel:"noopener noreferrer",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}}},(0,P.tx)("proto.state_management.info_tooltip_learn_more")),t=a.createElement("span",null,a.createElement("strong",null,(0,P.tx)("proto.animation_panel.preserve_scroll_position")));return a.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,P.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}),nc="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",ns="prototype_state_management_panel--expandCaret--uuDge";var nd=n(523860),np=n(85206);function nm({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:o,showResetVideoState:i,showResetInteractiveComponentState:l,updateSelectionProperties:c,stateManagementVersion:s,selectedInteractions:d}){let p=(0,r.wA)(),m=(0,O.GS)(),[u,_]=a.useState(!m),E=(0,e8.Em)(),y=a.useContext(eI.c);if((0,G.YT)()===G.Oz.TWO_COL&&y===eI.P.LEFT)return null;let g=(0,G.LH)(s),v=a.createElement(te.S,{onChange:t=>{p((0,x._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),c({...function(e){if((0,D.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,D.gl)(e.preserveScroll),recordingKey:I.Pt(n,"preserve-scroll-check"),label:a.createElement(tt.J,null,(0,P.tx)("proto.animation_panel.preserve_scroll_position"))}),h=m?a.createElement(tu.TN,null,v):a.createElement(H.fI,{className:nc},v),N=a.createElement(te.S,{onChange:t=>{p((0,x._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:nr.zZ.haveAnyInteractionsBeenUpgraded(d)}})),c({...function(e){if((0,D.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,D.gl)(e.resetScrollPosition),recordingKey:I.Pt(n,"reset-scroll-position-check"),label:a.createElement(tt.J,null,(0,P.tx)("proto.animation_panel.reset_scroll_position"))}),T=a.createElement("div",{"data-tooltip-type":K.Ib.SPECIAL,"data-tooltip":nl,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:m?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},a.createElement(na.In,{icon:"info-16"})),f=m?a.createElement(tu.TN,null,N," ",E&&T):a.createElement(H.fI,{className:nc},N),b=a.createElement(te.S,{onChange:t=>{p((0,x._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:nr.zZ.haveAnyInteractionsBeenUpgraded(d)}})),c({...function(e){if((0,D.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,D.gl)(e.resetInteractiveComponents),recordingKey:I.Pt(n,"reset-component-state-check"),label:a.createElement(tt.J,null,(0,P.tx)("proto.animation_panel.reset_component_state"))}),S=m?a.createElement(tu.TN,null,b):a.createElement(H.fI,{className:nc},b),C=a.createElement(te.S,{onChange:t=>{p((0,x._P)({name:"Reset Video Position Changed",params:{newValue:t}})),c({...function(e){if((0,D.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,D.gl)(e.resetVideoPosition),recordingKey:I.Pt(n,"reset-video-position-check"),label:a.createElement(tt.J,null,(0,G.LH)(s)?(0,P.tx)("proto.state_management.reset_video_state"):(0,P.tx)("proto.animation_panel.reset_video_state"))}),w=m?a.createElement(tu.TN,null,C):a.createElement(H.fI,{className:nc},C),k=a.createElement(H.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,G.kM)(s)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!m&&a.createElement(H.fI,null,a.createElement(ts.Q,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,P.tx)("proto.state_management")),!(0,G.kM)(s)&&T),(0,G.uU)(s)&&o&&h,i&&(0,G.uU)(s)&&w,g&&f,g&&l&&S,g&&i&&w,(0,D.gl)(s)&&a.createElement(W.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},a.createElement(H.UZ,null,(0,P.tx)("proto.state_management.mixed_state_update")))),R=a.createElement(A.U,{svg:u?nd.A:np.A},u?a.createElement(nt.O,{className:ns}):a.createElement(nn.k,{className:ns})),M=a.createElement(ey.E,{key:"expand-caret",recordingKey:I.Pt(n,"expand-caret"),onClick:()=>{_(!u)},actionOnPointerDown:!0,className:"prototype_state_management_panel--expandRow--RVDCp"},R,a.createElement("span",null,(0,P.tx)("proto.state")));return a.createElement(no.k,{name:"prototype_state_management_panel"},m&&M,(u||!m)&&k)}let nu=es.c$,n_=es.l6,nE=m.AD;class ny extends en.cP{format(e){return e===nE||null===e?(0,P.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function ng(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:o,dropdownShown:i,targetVideoNodeID:l,isVideoSelected:c,onChange:s}=e,d=(0,r.wA)(),[p,u]=a.useState(()=>c?new ny(o):new en.cP(o));t.sort((e,t)=>{let n=p.format(e),o=p.format(t);return n.localeCompare(o)}),c&&t.unshift(nE);let _=t.length>0&&n.length>0,E=`prototype-target-video-select-${e.recordingKey}`,y=(0,O.GS)(),g=a.createElement(n_,{chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",dataTestId:"target-video-select",dispatch:d,dropdownAlignment:"left",dropdownShown:i,formatter:p,id:E,inputClassName:"prototype_target_video_dropdown--input--infAK",onChange:s,onOptionFocus:e=>{tY.Uc(e??"")},property:(0,D.gl)(l)?l:m.dI(l),recordingKey:I.Pt(e,"select")},t.filter(e=>p.hasNameForNode(e)).map((t,n)=>a.createElement(nu,{key:`enabled-${n}`,value:t,recordingKey:I.Pt(e,`viable-option-${n}`),disabled:!1})),_&&a.createElement(es.sK,null),n.filter(e=>p.hasNameForNode(e)).map((t,n)=>a.createElement(nu,{key:`disabled-${n}`,value:t,recordingKey:I.Pt(e,`viable-option-${n}`),disabled:!0})));return y?a.createElement(eF.A,{input:g,label:(0,P.t)("proto.video_dropdown.label")}):g}var nv=n(264478);function nh({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:o}){let r=(0,O.GS)(),i=a.createElement(nv.ks,{className:r?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,P.t)("proto.interaction.example_com"),value:(0,D.gl)(e.connectionURL)?(0,P.t)("fullscreen.mixed"):(0,D._W)(e.connectionURL,""),onChange:n,recordingKey:I.Pt(t,"urlTextInput"),autoFocus:!1}),l=a.createElement(te.S,{label:a.createElement(tt.J,null,(0,P.tx)("proto.action_open_url_in_new_tab")),onChange:o,recordingKey:I.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return a.createElement(a.Fragment,null,r?a.createElement(eF.A,{label:(0,P.t)("proto.open_url.text_input_label"),input:i}):i,r?a.createElement(tu.TN,null,l):a.createElement(H.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},l))}var nI=n(959750),nN=n(785812);function nT({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:o,recordingKey:i}){let{smallNudgeAmount:l,bigNudgeAmount:c}=(0,nI.sT)(),s=(0,r.wA)(),d=(0,O.GS)(),p=(t,n)=>(o,a)=>{t&&e({extraScrollOffset:{...t,[n]:o}},{shouldCommit:a})},m=(0,D._W)(n,{x:0,y:0});if(!o||"SCROLL_TO"!==t)return null;let u=a.createElement(tr.gq,{bigNudgeAmount:c,className:d?void 0:ef.U,"data-tooltip":(0,P.t)("proto.trigger.y_offset"),"data-tooltip-type":K.Ib.TEXT,dispatch:s,inputClassName:d?ef.oM:ef.hF,onValueChange:p(m,"y"),recordingKey:I.Pt(i,"extraScrollOffsetY"),scrubMultiplier:l,smallNudgeAmount:l,tooltipForScreenReadersOnly:!1,value:m.y,wheelMultiplier:l},d?a.createElement("span",{className:ef.QK},(0,P.tx)("proto.scroll_options.scroll_offset.y")):a.createElement(z.B,{className:ef.QK,svg:nN.A})),_=a.createElement(tr.gq,{bigNudgeAmount:c,className:d?void 0:ef.sC,"data-tooltip":(0,P.t)("proto.trigger.x_offset"),"data-tooltip-type":K.Ib.TEXT,dispatch:s,inputClassName:d?ef.oM:ef.hF,onValueChange:p(m,"x"),recordingKey:I.Pt(i,"extraScrollOffsetX"),scrubMultiplier:l,smallNudgeAmount:l,tooltipForScreenReadersOnly:!1,value:m.x,wheelMultiplier:l},d?a.createElement("span",{className:ef.QK},(0,P.tx)("proto.scroll_options.scroll_offset.x")):a.createElement(z.B,{className:ef.Kh,svg:nN.A}));return d?a.createElement(tu.Cm,{label:a.createElement(eF.F,{tooltip:(0,P.t)("proto.scroll_options.offset")},(0,P.t)("proto.scroll_options.offset")),leftInput:_,rightInput:u}):a.createElement(H.fI,null,u,_)}let nf=(0,a.memo)(function(e){return(0,q.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,q.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})}),nA="prototype_video_action_options--chevron--mkNyv",nP="prototype_video_action_options--input--3-cEi",nb=new en.js,nO=new en.Z6;function nS({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:o,recordingKey:i}){let l=(0,O.GS)(),c=(0,en.Od)(e),s=(0,D.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,D.E7)(e.connectionType),p="SKIP_TO"===s,m="SKIP_FORWARD"===s||"SKIP_BACKWARD"===s,u="PLAY"===s||"PAUSE"===s||"TOGGLE_PLAY_PAUSE"===s,_="MUTE"===s||"UNMUTE"===s||"TOGGLE_MUTE_UNMUTE"===s,E=(0,r.wA)(),y=(0,nI.RU)(),g=a.useCallback(e=>{n({mediaSkipToTime:e}),E((0,x._P)({name:"Media skip to time changed",params:{value:e}}))},[E,n]),v=`prototype-media-action-select-${i}`,h="prototype_video_action_options--shortDropdown--NOXXv",N=o&&o.type===v?nb:nO,T=a.createElement(ep,{chevronClassName:nA,className:h,dataTestId:"media-play-pause-select",dispatch:E,dropdownShown:o,formatter:N,id:v,inputClassName:nP,onChange:t,property:c,recordingKey:I.Pt(i,"select")},a.createElement(ed,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:I.Pt(i,"toggle-play-pause-option"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:I.Pt(i,"play-option"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:I.Pt(i,"pause-option"),disabled:!1})),f=a.createElement(ep,{chevronClassName:nA,className:h,dataTestId:"media-mute-unmute-select",dispatch:E,dropdownShown:o,formatter:N,id:v,inputClassName:nP,onChange:t,property:c,recordingKey:I.Pt(i,"select")},a.createElement(ed,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:I.Pt(i,"toggle-mute-unmute-option"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:I.Pt(i,"mute-option"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:I.Pt(i,"unmute-option"),disabled:!1})),A=a.createElement(ep,{chevronClassName:nA,className:h,dataTestId:"media-skip-by-select",dispatch:E,dropdownShown:o,dropdownWidth:160,formatter:N,id:v,inputClassName:nP,onChange:t,property:c,recordingKey:I.Pt(i,"select")},a.createElement(ed,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:I.Pt(i,"skip-forward-option"),disabled:!1}),a.createElement(ed,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:I.Pt(i,"skip-backward-option"),disabled:!1})),b=a.createElement(tr.qd,{className:"prototype_video_action_options--timestampContainer---DdaI","data-tooltip":(0,P.t)("proto.trigger.timestamp_to_set_to"),"data-tooltip-type":K.Ib.TEXT,dataTestId:"mediaSkipToTime-input",dispatch:E,displayFractions:!0,inputClassName:"prototype_video_action_options--timestamp--luOrs",max:3600,onValueChange:g,recordingKey:I.Pt(i,"mediaSkipToTimeInput"),scrubMultiplier:y/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipToTime||0,wheelMultiplier:y/1e3},l?a.createElement(nf,null):void 0),S="SKIP_BACKWARD"===s?(0,P.t)("proto.trigger.duration_to_jump_backward"):(0,P.t)("proto.trigger.duration_to_jump_forward"),C=a.createElement(tr.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn","data-tooltip":S,"data-tooltip-type":K.Ib.TEXT,dataTestId:"mediaSkipByAmount-input",dispatch:E,max:3600,onValueChange:e=>{n({mediaSkipByAmount:e}),E((0,x._P)({name:"Media skip by amount changed",params:{value:e}}))},recordingKey:I.Pt(i,"mediaSkipByAmountInput"),scrubMultiplier:y/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaSkipByAmount||5,wheelMultiplier:y/1e3});if(!d)return null;if(l){if(u)return a.createElement(eF.A,{input:T,label:(0,P.t)("proto.video_options.behavior")});if(_)return a.createElement(eF.A,{input:f,label:(0,P.t)("proto.video_options.behavior")});if(m)return a.createElement(a.Fragment,null,a.createElement(eF.A,{input:A,label:(0,P.t)("proto.video_options.direction")}),a.createElement(eF.A,{input:C,label:(0,P.t)("proto.video_options.offset")}));if(p)return a.createElement(eF.A,{input:b,label:(0,P.t)("proto.video_options.timestamp")})}return a.createElement(H.fI,null,u&&T,_&&f,m&&A,m&&C,p&&b)}var nC=n(956783);function nD({action:e,recordingKey:t,interactionType:n,onActionChange:o,updateMultipleDestinationNodes:i,updateSelectionProperties:l,stateManagementVersion:c,autoOpenVariablePicker:s,autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:u,..._}){let E=(0,r.wA)(),g=(0,eo.Um)(),{scene:h}=(0,e7.R)(e=>({scene:e.mirror.sceneGraph})),N=(0,O.GS)(),T=(0,e8.cJ)(),f=(0,G.YT)(),A=f===G.Oz.SINGLE_COL,b=f===G.Oz.TWO_COL,S=a.useContext(eI.c),C=b&&S===eI.P.RIGHT,w="SET_VARIABLE"===(0,D.E7)(e.connectionType),k="SET_VARIABLE_MODE"===(0,D.E7)(e.connectionType),R="CONDITIONAL"===(0,D.E7)(e.connectionType),M="INTERNAL_NODE"===(0,D.E7)(e.connectionType),K="INTERNAL_NODE"===(0,D.E7)(e.connectionType)&&"SWAP_STATE"===(0,D.E7)(e.navigationType),L="URL"===(0,D.E7)(e.connectionType),U=M||"BACK"===(0,D.E7)(e.connectionType)||"CLOSE"===(0,D.E7)(e.connectionType),V="UPDATE_MEDIA_RUNTIME"===(0,D.E7)(e.connectionType),B=(0,r.d4)(e=>{let t=e.mirror.selectionProperties.numSelected,n=e.mirror.selectionProperties.numVideosSelected;return 1===t&&!!n}),F=(0,e9.uQ)(),Y=[],W=[];if(F){let{viableIds:e,disabledIds:t}=d.X3B.getVideoNodesOnSameTlfAsNode(F);Y=e,W=t}let H=m.dI((0,D.E7)(e.transitionNodeID)),z=null!=H&&H!==m.AD,X=M&&(!(0,D.hS)(e.transitionNodeID)||z)&&!(T&&!K&&"SCROLL_TO"!==(0,D.E7)(e.navigationType)),$=(0,D.E7)(e.navigationType),j=M&&"OVERLAY"===(0,D.E7)($),Z=(0,G.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),Q=U&&!j&&("INSTANT"===Z.behavior||"DISSOLVE"===Z.behavior),q=M&&"OVERLAY"===(0,D.E7)(e.navigationType)&&z,ee=M&&(j||"SWAP"===(0,D.E7)($)),et=!V&&(0,G.oc)(e),ea=(0,G.GB)(e),er=(0,G.uU)(c)?Q||et:(0,G.Fp)(c,e.connectionType,e.navigationType),{selectedInteractions:ei}=(0,nC.Ay)(e6.J.NORMAL),el=ei.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>v.d({nodeID:e.sourceNodeID,interactionID:e.id})),ec=a.useCallback(e=>{let t=m.sH(e);t&&l({transitionNodeID:t}),E((0,x._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el),destinationTlfId:e}}))},[E,l,el]),es=a.useCallback(e=>{i(e),E((0,x._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),E((0,x._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el)}}))},[i,E,el]),ed=a.useCallback(e=>{l({connectionURL:e.target.value})},[l]),ep=(0,en.Od)(e),em=y()({[ef.Ph]:!N,[ef.Ti]:_.isNestedInConditional&&!A&&!C}),eu=M&&!K,e_=a.createElement(tj,{className:ef.iR,dispatch:E,dropdownShown:g,onChange:ec,nodeId:e.transitionNodeID||m.Hr,scene:h,recordingKey:I.Pt(t,"destinationDropdown"),action:ep,isUI3:N}),eE=a.createElement(nT,{action:ep,showScrollToOptions:"SCROLL_TO"===ep,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:l,recordingKey:I.Pt(t,"scrollOptionsPanel")}),ey=a.createElement(tI,{interactionType:n,updateSelectionProperties:l,recordingKey:I.Pt(t,"overlaySettings"),actionIndexPath:_.actionIndexPath,nodeId:e.transitionNodeID||m.Hr});return a.createElement("div",{className:em},eu&&(N?a.createElement(a.Fragment,null,a.createElement(eF.A,{label:ee?(0,P.t)("proto.overlay"):(0,P.t)("proto.destination"),input:e_}),eE,q&&ey):e_),L&&a.createElement(nh,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{l({openUrlInNewTab:e}),E((0,x._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ed}),V&&a.createElement(ng,{dropdownShown:g,scene:h,targetVideoNodeID:e.transitionNodeID||m.Hr,recordingKey:I.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:Y,disabledSameFrameVideoIds:W,isVideoSelected:B,onChange:ec}),a.createElement(nS,{dropdownShown:g,action:e,onChange:o,updateSelectionProperties:l,recordingKey:t}),!N&&eE,w&&a.createElement("div",{className:N?void 0:J.s.ml4.$},a.createElement(ne,{action:ep,autoOpenVariablePicker:s,className:ef.PB,dispatch:E,isNarrowPanel:_.isNestedInConditional||_.isNarrowPanel,isNestedInConditional:_.isNestedInConditional,nodeId:e.transitionNodeID||m.Hr,onChange:ec,recordingKey:I.Pt(t,"setVariableControls"),targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:l})),k&&a.createElement("div",{className:N?void 0:J.s.ml4.$},a.createElement(eQ,{dispatch:E,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:l,recordingKey:I.Pt(t,"setVariableControls"),actionIndexPath:_.actionIndexPath.join(",")})),R&&(C?a.createElement(tV,{recordingKey:I.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:u,updateSelectionProperties:l,conditionalActions:(0,D.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):a.createElement(tU,{action:e,actionIndexPath:_.actionIndexPath,autoOpenVariablePicker:s,expandedRows:_.expandedRows,handleMouseDownUI3:_.handleMouseDownUI3,interactionType:n,onDrop:_.onDrop,onExpand:_.onExpand,onNewActionAdded:_.onNewActionAdded,onSelect:_.onSelect,recordingKey:I.Pt(t,"conditionalActionSection"),selectedActionIndex:_.selectedActionIndex,selectedInteractions:_.selectedInteractions,stateManagementVersion:c,updateMultipleDestinationNodes:i,updateSelectionProperties:l})),K&&a.createElement("div",{className:J.s.ml0.$},a.createElement(tZ,{onChange:es,nodeId:e.transitionNodeID||m.Hr,recordingKey:I.Pt(t,"consumption"),actionIndexPath:_.actionIndexPath})),X&&a.createElement(a.Fragment,null,N&&a.createElement("div",{className:ef.x}),a.createElement(tS.X7,{transition:Z,interactionType:n,navigationType:e.navigationType,recordingKey:I.Pt(t,"animationPanel"),updateSelectionProperties:l,isNarrowPanel:_.isNestedInConditional||_.isNarrowPanel,stateManagementVersion:c})),q&&!N&&ey,er&&a.createElement(a.Fragment,null,N&&a.createElement("div",{className:ef.x}),a.createElement(nm,{connectionType:e.connectionType,navigationType:e.navigationType,recordingKey:I.Pt(t,"stateManagementPanel"),selectedInteractions:_.selectedInteractions,showPreserveScrollPosition:Q,showResetInteractiveComponentState:!!ea,showResetVideoState:!!et,stateManagementVersion:c,transition:Z,updateSelectionProperties:l})))}var nw=n(151685),nk=n(705047),nR=n(548384);let nx=Symbol("ACTION_ROW");function nM({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:o,selectedInteractions:i,autoOpenVariablePicker:l,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:d,...p}){let m=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:u,showAdvancedPrototypingVariablesModal:E,showAdvancedPrototypingConditionalActionsModal:g}=(0,G.zt)(),h=(0,eo.Um)(),N=(0,G.hP)(),{firstVariableSetMode:T,firstVariableSetID:f}=eZ(),b=p.action,S=p.isNestedInConditional&&(0,tC.qQ)(p.action),C=!!b.connectionType&&"CONDITIONAL"===b.connectionType,w=(0,O.GS)(),k=(0,G.YT)(),R=k===G.Oz.SINGLE_COL,M=k===G.Oz.TWO_COL,L=a.useContext(eI.c),U=M&&L===eI.P.RIGHT,V=M&&L===eI.P.LEFT,B=!((0,D.gl)(p.action)||["CLOSE","NONE"].includes(b.connectionType))&&!w;var F=p.selectedActionIndex.equals(p.actionIndexPath);let W=1===p.selectedActionIndex.path.length&&p.isNestedInConditional&&p.actionIndexPath[0]===p.selectedActionIndex.path[0];var J=void 0===p.expandedRows||void 0!==p.expandedRows.find(e=>e.equals(p.actionIndexPath));w&&(J=!!R||!V||C);let X=a.useCallback(()=>{(B||R)&&p.onExpand(p.actionIndexPath)},[B,R,p]),[$,j]=a.useState(!1);a.useEffect(()=>{if(C){let e=setTimeout(()=>{j(!0)},0);return()=>clearTimeout(e)}j(!0)},[C]);let Z=C&&!J,Q=C&&J,q=a.useRef(null),[ea,er]=(0,_.fp)(G.hV),{position:ei,dragItem:el}=(0,Y.h4)(()=>({type:nx,element:q,item:{action:p.action,actionIndexPath:new tC.Op(p.actionIndexPath)},dropPositionThreshold:Q?.2:Z?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!V||!J,onDrop(e){p.onDrop(e),er(!0)}})),ec=a.useMemo(()=>{let e=q.current;if(!e||!ei||U)return;if(el&&"CONDITIONAL"===el.connectionType&&p.isNestedInConditional||(0,tC.qQ)(el)){er(!1);return}let t=S?Y.Nz.BEFORE:ei;var n=void 0;let o=e.offsetParent?.firstElementChild?.scrollTop??0;return t===Y.Nz.BEFORE?n=e.offsetTop-o:t===Y.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-o),er(!0),n},[ei,U,el,p.isNestedInConditional,S,er]),es=ei&&C&&!J&&ei===Y.Nz.INSIDE&&"CONDITIONAL"!==el.connectionType,ed=I.rf(p.recordingKey,"mousedown",e=>{J||(F=!0,p.onSelect(p.actionIndexPath,!0))}),ep=I.rf(p.recordingKey,"mousedown",e=>{F=!1,p.onSelect(p.actionIndexPath,!1)}),em=I.rf(p.recordingKey,"click",e=>{p.onSelect(p.actionIndexPath,!0)}),e_=I.rf(p.recordingKey,"mousedown",e=>{(0,tC.qQ)(p.action)||p.onSelect(p.actionIndexPath,!0)}),eE=e=>{var n=!0,o=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":u?(n=!1,E()):(t({connectionType:"SET_VARIABLE"}),l.current=!0);break;case"SET_VARIABLE_MODE":u?(n=!1,E()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:f,targetVariableModeID:T});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":o=!0,u?(n=!1,g()):(t({connectionType:"CONDITIONAL"}),w&&d&&d(!0))}if(w||J||X(),M&&p.onExpand(p.actionIndexPath,o),n){let t=i.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>v.d({nodeID:e.sourceNodeID,interactionID:e.id}));m((0,x._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},ey=p.isNestedInConditional?ef.It:ef.ft,eg=y()({[ef.wu]:!V,[ef.zX]:V&&ea}),ev=a.createElement(A.U,{svg:nk.A},a.createElement(ee,{className:ef._2}));if(S&&p.onAddAction)return a.createElement("div",{className:V?ef.LW:void 0},ec&&a.createElement("hr",{className:ey,style:{transform:`translateY(${ec}px)`}}),V&&p.isNestedInConditional&&ev,a.createElement("div",{className:eg,ref:q},a.createElement(tD.t,{addButtonPressed:p.onAddAction,recordingKey:I.Pt(p.recordingKey,"addAction"),isNestedInConditional:!0})));let eh=(0,en._X)(b),eN="NONE"!==eh,eT=(J||!eN)&&!V,eA=p.numActions>1,eP=(p.numActions>1||p.isNestedInConditional)&&!V,eb=y()({[ef.$l]:!0,[ef.KY]:V&&!p.isNestedInConditional,[ef.Iw]:V&&!p.isNestedInConditional&&ea,[ef.DM]:V&&p.isNestedInConditional,[ef.vs]:V&&p.isNestedInConditional&&ea,[ef.M9]:V&&p.isNestedInConditional&&W&&ea,[ef.I_]:V&&C&&!F&&ea,[ef.Cu]:F&&!w,[ef.PE]:F&&V&&!p.isNestedInConditional,[ef.Ze]:es,[ef.Op]:p.isNestedInConditional&&!w}),eO=y()({[ef.rn]:!0,[ef.Gu]:V,[ef.Ti]:p.isNestedInConditional&&!w&&!U,[ef.Yo]:p.isNestedInConditional&&w&&!U}),eC=a.createElement(z.B,{key:"expand-caret",className:ef.GE,svg:J?nd.A:np.A,recordingKey:I.Pt(p.recordingKey,"expandCaret"),onClick:X}),eD=a.createElement(eS,{action:b,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel&&eA,onClick:w?em:void 0}),ew=a.createElement(eu,{className:"NONE"===eh||w?void 0:nw.fH,dispatch:m,dropdownShown:h,onChange:eE,action:eh,recordingKey:I.Pt(p.recordingKey,"actionDropdown"),showVideoActions:N,isNestedInConditional:p.isNestedInConditional}),ek=a.createElement(H.K0,{className:w?ef.gG:ef.hH,onClick:n,"data-tooltip-type":K.Ib.TEXT,"data-tooltip":(0,P.t)("proto.prototype_panel.delete"),"aria-label":(0,P.t)("proto.prototype_panel.delete"),recordingKey:I.Pt(p.recordingKey,"actionDeleteButton")},a.createElement(A.U,{svg:nR.A},a.createElement(c.O,null))),eR=a.createElement(H.fI,{className:eO,onDoubleClick:X},B&&eC,eT?a.createElement("span",{className:ef.P2},ew):eD,eP&&ek),ex=eT?ew:eD,eM=a.createElement(et.S.div,{className:eO,onDoubleClick:X},B&&eC,eP?a.createElement(e2.DE,{appendedClassName:ef.Jw,label:null,input:ex,icon:ek}):a.createElement(e2.Ad,{appendedClassName:ef.Jw,label:null,input:ex})),eK=a.createElement(et.S.div,{className:eO},R||U?a.createElement(eF.A,{label:(0,P.t)("proto.action"),input:ex}):ex),eL=w?eK:eM,eU=y()({[ef.Oe]:!0,[ef.h2]:F,[ef.Ob]:C});return a.createElement(et.S.div,{className:eb,ref:q,role:"button",tabIndex:0,onMouseDown:w?void 0:ed,onMouseUp:w?void 0:ep},void 0!==ec&&a.createElement("hr",{className:ey,style:{transform:`translateY(${ec}px)`}}),V?a.createElement(et.S.div,{className:eU,role:"button",tabIndex:0,onMouseDown:w?e_:void 0},p.isNestedInConditional&&ev,eL):w?eL:eR,J&&$&&a.createElement(nD,{action:b,actionIndexPath:p.actionIndexPath,autoOpenExpressionBuilder:s,autoOpenVariablePicker:l,expandedRows:p.expandedRows,handleMouseDownUI3:e_,interactionType:p.interactionType,isNarrowPanel:p.isNarrowPanel,isNestedInConditional:p.isNestedInConditional,onActionChange:eE,onDrop:p.onDrop,onExpand:p.onExpand,onNewActionAdded:p.onNewActionAdded,onSelect:p.onSelect,recordingKey:p.recordingKey,selectedActionIndex:p.selectedActionIndex,selectedInteractions:i,setAutoOpenExpressionBuilder:d,stateManagementVersion:o,updateMultipleDestinationNodes:e,updateSelectionProperties:t}))}var nK=n(138810),nL=n(589776),nU=n(275210);function nV({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:o}){let r;let i=(0,nU._i)(t?.keyCodes),l=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[c,s]=a.useState(!1),d=a.useRef(null);a.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(o(!1),d.current.focus(),s(!0))},[o,n,t]),a.useEffect(()=>{if(!c)return()=>{};let t=new nL.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,c]);let p=null,m=(0,nU.E8)(t),u=(0,O.GS)();return c?r=a.createElement(nB,null,u?(0,P.tx)("proto.keyCapture.press_key_lowercase"):(0,P.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&i?p=(0,nU.U8)(i):m?p=m:r=a.createElement(nB,null,u?(0,P.tx)("proto.keyCapture.click_to_set_key"):(0,P.tx)("proto.keyCapture.click_to_select")),a.createElement(H.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":K.Ib.TEXT,"data-tooltip":p&&p.length>10?p:null,onFocus:()=>s(!0),onBlur:()=>s(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!nU.RI.has(t)&&nU.pu[t]&&(t===i?.keyCode&&e.repeat?l((0,nU.wb)({keyCode:t,metaKey:e.metaKey||i.metaKey,shiftKey:e.shiftKey||i.shiftKey,ctrlKey:e.ctrlKey||i.ctrlKey,altKey:e.altKey||i.altKey})):l((0,nU.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},p??r)}function nB({children:e}){return a.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var nF=n(966369);let nG=es.l6,nY=es.c$,nW=new en.VG,nH=new en.EX,nz=new en.JV,nJ=new en.Eq;function nX(e){let t=(0,r.wA)(),n=(0,eo.Um)(),o=(0,O.GS)(),i=(0,Q.cJ)(),{showVideoV2Triggers:l}=(0,e7.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===d.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,el.dq)(e.mirror.selectionProperties)})),c=(0,_.md)(nF.NE),s=t=>{let n=a.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,el.e7)(t));return a.createElement(nY,{key:t,value:t,icon:o?n:void 0,recordingKey:I.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&m.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,D.hS)(e.property),o=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,D.hS)(e.property)&&e.property!==t;return(!n&&!o||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?l:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},p=(i?[]:["NONE"]).map(s),u=["ON_CLICK",...i?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(s),E=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(s),y=(i?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(s),g=["AFTER_TIMEOUT"].map(s),v=c?"ON_MEDIA_HIT"!==e.property?nH:nJ:"ON_MEDIA_HIT"!==e.property?nW:nz,h=a.useCallback(e=>e-24,[]),N=[...p,!i&&a.createElement(es.sK,{key:"select1"}),...u,a.createElement(es.sK,{key:"select2"}),...E,!i&&a.createElement(es.sK,{key:"select3"}),...g,...!i&&l?[a.createElement(es.sK,{key:"select4"}),...y]:[]],[T,f]=a.useState(void 0),A=a.createElement(ea.Q,{setMaxWidth:f,options:N,formatOption:e=>e&&e.props.value?v.format(e.props.value):"",getIcon:()=>(0,el.e7)("AFTER_TIMEOUT")}),P=(0,D.E7)(e.property);return a.createElement(a.Fragment,null,a.createElement(nG,{chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",className:e.className,dataTestId:"interaction-select",dispatch:t,dropdownAlignment:h,dropdownShown:n,dropdownWidth:T,formatter:v,hideDropdownWhenContainerMoves:!(0,ei.nl)(),icon:o&&P?(0,el.e7)(P):void 0,id:"interaction-type-select",onChange:e.onChange,property:e.property,recordingKey:I.Pt(e,"select")},N),A)}let n$={keyCodes:[],triggerDevice:"KEYBOARD"};function nj(e,t,n,o){return n?a.createElement(eF.A,{label:e,input:t,appendedClassName:o?void 0:ef.dU}):a.createElement(H.fI,null,t)}function nZ(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:o}=(0,nC.Ay)(e.category),{interactionType:i="NONE",transitionTimeout:l=.8,mediaHitTime:c=0,interactionMaintained:s=!1,interactionDuration:d=.3,keyTrigger:p=n$}=t.interactionEvent,m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,D.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},u=void 0!==t.interactionActions.find(e=>m(e,"URL")),_=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),E=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,g=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,r.wA)(),n=e.updateSelectionProperties,o=(0,nI.RU)(),[i,l]=a.useState(!1),c=(0,O.GS)(),s=(0,G.YT)(),d=s===G.Oz.SINGLE_COL,p=s===G.Oz.TWO_COL,m=!0===(0,D.E7)(e.maintained),u=(0,D.E7)(e.keyTrigger),_="ON_KEY_DOWN"===(0,D.E7)(e.interactionType),E="AFTER_TIMEOUT"===(0,D.E7)(e.interactionType),g="ON_MEDIA_HIT"===(0,D.E7)(e.interactionType),v=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,D.E7)(e.interactionType)||"")>-1,h=a.createElement(nX,{className:ef.sQ,property:e.interactionType,onChange:o=>{B.sn.start("interaction_details_changed"),n({interactionType:o}),t((0,x._P)({name:"Prototype Interaction Type Changed",params:{newType:o,oldType:(0,D._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===o&&l(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:I.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),N=c?d?a.createElement(eF.A,{label:(0,P.t)("proto.trigger"),input:h}):a.createElement("div",{className:ef.BX},h):a.createElement(H.fI,{className:y()(ef.SG,ef.QT)},h,a.createElement("div",{className:ef.LY},e.headerButtons)),T=a.createElement(a.Fragment,null,E&&nj((0,P.t)("proto.delay"),a.createElement(tr.W4,{className:c?ef.Lp:ef.Zp,"data-tooltip":(0,P.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":K.Ib.TEXT,dataTestId:"timeout-input",dispatch:t,inputClassName:c?ef.Gl:void 0,max:20,onValueChange:e=>{n({transitionTimeout:e})},recordingKey:I.Pt(e,"timeoutInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.timeout,wheelMultiplier:o/1e3},c?a.createElement(nK.A,null):void 0),c,d),_&&nj((0,P.t)("proto.key"),a.createElement(nV,{onChange:e=>{n({keyTrigger:e})},value:u,shouldFocusKeyCaptureField:i,setShouldFocusKeyCaptureField:l}),c,d),g&&nj((0,P.t)("proto.time"),a.createElement(tr.qd,{className:ef.Ym,"data-tooltip":(0,P.t)("proto.trigger.video_hit_time"),"data-tooltip-type":K.Ib.TEXT,dataTestId:"mediaHitTime-input",dispatch:t,displayFractions:!0,inputClassName:ef.vE,max:3600,onValueChange:e=>{n({mediaHitTime:e})},recordingKey:I.Pt(e,"mediaHitTimeInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:e.mediaHitTime,wheelMultiplier:o/1e3},c?a.createElement(nf,null):void 0),c,d),v&&nj((0,P.t)("proto.delay"),a.createElement(tr.W4,{allowEmpty:!0,className:c?ef.Lp:ef.aq,"data-tooltip":(0,P.t)("proto.trigger.after_delay_timeout"),"data-tooltip-type":K.Ib.TEXT,dataTestId:"duration-input",dispatch:t,inputClassName:c?ef.Gl:ef.p0,min:0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},placeholder:(0,P.t)("proto.trigger.add_delay_placeholder"),recordingKey:I.Pt(e,"delayInput"),scrubMultiplier:o/1e3,tooltipForScreenReadersOnly:!0,value:m?e.interactionDuration:void 0,wheelMultiplier:o/1e3},c?a.createElement(nK.A,null):void 0),c,d));return c?a.createElement("div",{className:p?ef.eU:void 0},N,T):a.createElement("div",{className:ef.cF},N,T)}({...e,updateSelectionProperties:o,interactionType:i,interactionContainsOpenLinkAction:u,interactionContainsUpdateMediaRuntime:_,interactionOnlyContainsBack:E,interactionContainsConditionalAction:g,timeout:l,maintained:s,interactionDuration:d,mediaHitTime:c,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:I.Pt(e.recordingKey,G.Qe)})}let nQ="prototype_interaction_edit_modal--contentContainer--bo2b4",nq="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",n0="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",n1="prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD",n5="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",n4="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function n3(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:o,differentLengthActions:r,mergedActions:i}=(0,nC.Ay)(e.category),l="NONE"!==(0,D.E7)(e.interactionType),c=void 0!==i.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:s,onSelect:d}=e,p=(0,O.GS)(),m=(0,G.YT)(),u=m===G.Oz.SINGLE_COL,_=m===G.Oz.TWO_COL,{expandedRows:E,setExpandedRows:g,deleteButtonPressed:v,newActionIndexPath:h,resetNewActionIndexPath:N}=e,T=(0,Q.cJ)()&&"ON_CLICK"===(0,D.E7)(e.interactionType)&&1===i.length&&void 0!==i.find(e=>e.connectionURL||"NAVIGATE"===e.navigationType);a.useEffect(()=>{h&&!h?.equals([])&&(p?d(h.path,!0):(g([...E,h]),d([],!1)),N())},[E,g,h,N,d,p]);let f=a.useCallback(e=>{E.find(t=>t.equals(e))?g(E.filter(t=>!t.equals(e))):g([...E,new tC.Op(e)])},[E,g]),A=a.useCallback(n=>{var o=n.dropItem;if((0,D.gl)(o)||(0,tC.qQ)(n.dragItem.action))return;let a=e.interactionsOnSelectedNodes;if(!a||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let a=e.actions,i=(0,tC.Vp)(a,s,E,o,n.position);if(i.newSelectedActionIndex&&_&&d(i.newSelectedActionIndex.path,!0),i.newActions&&(t[r].actions=i.newActions,p||d([],!1)),i.newExpandedRows){if(_){let e=[];i.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new tC.Op([n]))}),g(e)}else g(i.newExpandedRows)}}}let i=a.map(e=>t.find(t=>t.id===e.id)??e);S.Y5.updateSelectionProperties({prototypeInteractions:i})},[E,g,e.interactionsOnSelectedNodes,s,t,d,p,_]),b=y()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":_});return T?a.createElement(Z.rC,{isInteractionModal:!0}):a.createElement(Y.hh,null,a.createElement(H.Zk,{className:b},e.shouldHideTitle?null:a.createElement(H.fI,null,a.createElement(H.U8,{title:(0,P.t)("proto.interaction.interaction"),dataTooltipContentKey:j,dataTooltipTimeoutDelay:50})),a.createElement("div",null,(l||p)&&a.createElement(a.Fragment,null,u&&a.createElement(a.Fragment,null,a.createElement(nZ,{category:e.category,recordingKey:G.dJ,headerButtons:a.createElement(a.Fragment,null)}),a.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),r&&a.createElement(W.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},a.createElement(H.UZ,null,(0,P.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!r&&a.createElement(a.Fragment,null,i?.map((r,l)=>a.createElement(nM,{key:l,action:r,actionIndexPath:[l],autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:E,interactionType:e.interactionType,isNarrowPanel:!c,isNestedInConditional:!1,numActions:i.length,onDeleteAction:()=>v(l),onDrop:A,onExpand:f,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:I.Pt(e.recordingKey,G.eG,l),selectedActionIndex:s,selectedInteractions:t,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,stateManagementVersion:e.stateManagementVersion,updateMultipleDestinationNodes:o(l),updateSelectionProperties:n(l)})))))))}var n2=n(531788),n7=n(952039);function n8({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:o,selectedInteractions:i}){let l=(0,r.wA)(),c=(0,O.GS)(),s=(0,G.YT)()===G.Oz.SINGLE_COL,d=()=>{for(let t of(V.definedAnalyticsHandler.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:i.length,preserve_scroll_position_value:!!e.preserveScroll}),i))(0,G.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&nr.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,D.hS)(e.preserveScroll)&&(0,D.hS)(o)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(n7.F.enqueue({type:"state-management-updated",message:(0,P.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,P.t)("proto.state_management.visual_bell_update_all"),action:()=>{S.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(n7.F.enqueue({type:"state-management-updated-all",message:(0,P.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},p=()=>{V.definedAnalyticsHandler.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:i.length}),n({stateManagementVersion:0})},m=1===o?a.createElement(n2.$n,{variant:"link",recordingKey:I.Pt(t,"revert-state-management-version"),onClick:p,htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,P.tx)("proto.state_management.revert_controls")):a.createElement(n2.$n,{variant:"secondary",recordingKey:I.Pt(t,"update-state-management-version"),onClick:d},(0,P.tx)("proto.state_management.update_controls")),u=s?n2.IK:n2.$n,_=1===o?a.createElement(u,{variant:"secondary",onClick:p,recordingKey:I.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,P.tx)("proto.state_management.revert_controls")):a.createElement(u,{variant:"primary",onClick:d,recordingKey:I.Pt(t,"update-state-management-version")},(0,P.tx)("proto.state_management.update_controls")),E=1===o?(0,P.tx)("proto.state_management.new_controls"):(0,P.tx)("proto.state_management.old_controls"),y=a.createElement(ni.N,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/14397859494295"},c?(0,P.tx)("proto.state_management.controls_help_link_new"):(0,P.tx)("proto.state_management.controls_help_link")),g=a.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},a.createElement(H.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},E,y),a.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},m)),v=a.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},a.createElement(tt.J,null,E),a.createElement(tt.J,null,y),_),h=a.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},a.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},a.createElement(tt.J,null,E)),a.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},y),_);return a.createElement(no.k,{name:"prototype_state_management_version_panel"},a.createElement(H.Zk,{className:c?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},c?s?v:h:g))}let n6="created_noodle";function n9(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:o}=e,r=(0,G.YT)()===G.Oz.TWO_COL,{detailProps:i,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:c,updateSelectionProperties:s,selectedInteractions:d}=(0,nC.Ay)(e.category);(0,F.h)(()=>{if(void 0!==B.sn.get(n6)){let e=B.sn.stop(n6);(0,V.trackEvent)(n6,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:m}=(0,G.n6)(i,l,d),{interactionType:u="NONE",interactionMaintained:_=!1,interactionDuration:E=.3,keyTrigger:y=n$,transitionTimeout:g=.8,mediaHitTime:v=0}=l.interactionEvent,h=(0,G.iC)(d),N=a.createElement(n3,{autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,autoOpenVariablePicker:e.autoOpenVariablePicker,category:n,deleteButtonPressed:e.deleteButtonPressed,expandedRows:e.expandedRows,interactionDuration:E,interactionType:u,interactionsOnSelectedNodes:c,keyTrigger:y,maintained:_,mediaHitTime:v,newActionIndexPath:o,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,recordingKey:I.Pt(e,G.Qe),resetNewActionIndexPath:e.resetNewActionIndexPath,selectedActionIndex:e.selectedActionIndex,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder,setExpandedRows:e.setExpandedRows,shouldHideTitle:t,stateManagementVersion:h,timeout:g});return a.createElement("div",null,N,!r&&p&&a.createElement(n8,{transition:m,recordingKey:I.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:s,stateManagementVersion:h,selectedInteractions:d}))}var oe=n(756912),ot=n(124213),on=n(941606);function oo(e,t,n){let[o,a,r]=e.path;if(void 0===o||void 0===a||void 0===r)return;let i=t[o]?.conditionalActions;if((0,D.hS)(i)){let e=i?.[a]?.actions?.length??0;if(r>=e){if(0===e){n([o],!0);return}n([o,a,r-1],!0);return}}}function oa(e,t,n){let o=e.path[0]>=t.length,a=0===e.path.length;if(o){n([t.length-1],!0);return}if(a){n([0],!0);return}}var or=n(786175),oi=n(397228);let ol=()=>{d.glU.setSelectedInteractions([]),(0,u.k)().prototype_ai_magic_link_show_suggestion_toast&&S.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),S.Y5.deselectProperty()},oc=(0,g.jz)("197px"),os=(0,g.c8)("50%");function od(e){var t;return e&&o?.height<369?o=t={...o,height:369}:o??={width:440,height:e?369:320,leftWidthPct:45}}let op=a.memo(function(){let e=(0,r.d4)(oy),t=(0,nC.HS)(),{selectedInteractions:n}=(0,nC.Ay)(t),o=n.length>0,[i,l]=a.useState(!1),c=I.v_(G.dJ,"keydown",t=>"Shift"!==t.key?I.aH:(l(!0),e&&o)?void 0:I.aH),s=I.v_(G.dJ,"keyup",t=>"Shift"!==t.key?I.aH:(l(!1),e&&o)?void 0:I.aH);if(a.useEffect(()=>(document.addEventListener("keydown",c),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",s)}),[c,s]),!e||!o)return null;let d=n.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return a.createElement(om,{category:t,containsConditional:d,pressingShiftKey:i,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:l})}),om=a.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:s,initialY:u,shouldPin:E,setPressingShiftKey:h}){let b=(0,r.wA)(),[D,V]=a.useState(!1),[,B]=(0,_.fp)(on.x),F=(0,a.useRef)(null),[Y,W]=a.useState(!1),H=E||D,z=(0,O.GS)(),J=(0,G.YT)(),X=J===G.Oz.SINGLE_COL,$=J===G.Oz.TWO_COL,[j,Z]=a.useState(new tC.Op(z?[0]:[])),{selectedInteractions:q,differentLengthActions:ee,interactionsOnSelectedNodesAndComponents:et,mergedActions:en,detailProps:eo,detailPropsMultipleActions:ea,updateSelectionProperties:er}=(0,nC.Ay)(e),ei=ea.interactionEvent.interactionType??"NONE",el=(0,Q.cJ)();var ec=j.path.length>0?j:new tC.Op([0]);let es=ec.isConditional(),ed=(e,t)=>ec=new tC.Op(e);z&&ec.path[0]>=en.length&&!es?oa(j,en,ed):z&&es&&oo(j,en,ed);let ep=a.useCallback((e,t)=>{t?Z(new tC.Op(e)):Z(new tC.Op([]))},[]);a.useEffect(()=>{if(0===en.length){(0,N.us)("the interactions panel should always have actions if rendered");let e=JSON.parse(JSON.stringify(q));for(let t of e)if(t&&t.actions?.length===0){let e={connectionType:"NONE"};t.actions=[e]}let t=et.map(t=>e.find(e=>m.aI(e.id,t.id))??t);S.Y5.updateSelectionProperties({prototypeInteractions:t})}if(!z)return;let e=j.isConditional();if(e){if(e){oo(j,en,ep);return}}else{oa(j,en,ep);return}},[en,j,z,ep,q,et]);let{shouldShowAdvancedPrototypingPaywall:em,showAdvancedPrototypinglMultipleActionsModal:eu}=(0,G.zt)(),{showPanel:e_,transition:eE}=(0,G.n6)(eo,ea,q),ey=(0,G.iC)(q);var eg=[];$?en.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&eg.push(new tC.Op([t]))}):en.length<4&&en.forEach((e,t)=>{eg.push(new tC.Op([t]))});let[ev,eh]=a.useState(eg),eN=a.useRef(null),eT=n&&!H&&!Y,ef=(0,g.jz)(or.prototypeInteractionModalWidth),eA=(0,g.jz)(or.prototypeInteractionModalExpandedWidth),eP=od(e_).width,eb=t?eA:ef;$&&(eb=eP);let[eO,eS]=a.useState(E),eC=(0,w._X)({subscribeToUpdates_expensive:!E}),eD=a.useCallback(()=>{D||(b((0,x._P)({name:"prototype_interaction_details_modal_dragged"})),V(!0))},[b,D,V]),ew=a.useMemo(()=>{let e=new T.Mi(s,u);if(E)return $?new T.Mi(e.x-(eP-ef),e.y):t?new T.Mi(e.x-(eA-ef),e.y):e;{let t=(0,w.$g)(eC,e);return new T.Mi(t.x-eb/2,t.y+30)}},[eb,s,u,t,E,eC,$,eA,ef,eP]);a.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&h(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,h]),a.useEffect(()=>{B(eT)},[B,eT]),a.useEffect(()=>{eS(E)},[E]),a.useEffect(()=>()=>{b((0,x._P)({name:"prototype_interaction_details_modal_closed"}))},[b]);let ek=(0,_.md)(ot.uW);a.useEffect(()=>{el&&ek?.focus()},[el,ek]);let eR=a.useRef(null),[ex,eM]=a.useState(!1);a.useEffect(()=>{ex&&(eM(!1),eR.current?.scrollToBottom())},[ex,eM,eR]);let[eK,eL]=a.useState(new tC.Op([])),eU=(0,R.q5)(),eV=a.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case M.zy.COPY:case M.zy.CUT:{let o=JSON.parse(JSON.stringify(q)),a=(0,oe.lg)(o),r=C.fG(eU?.key||null,{prototypeInteractions:a});if(C.C4(n,r,""),t===M.zy.CUT){let e=[];for(let t of q){let{sourceNodeID:n,id:o}=t;n&&o&&e.push(v.d({nodeID:n,interactionID:o}))}p.l7.user("delete-prototype-interactions",()=>d.glU.deleteInteractions(e)),S.Y5.deselectProperty()}e.accept()}}},[eU?.key,q]),eB=a.useRef(!1),[eF,eG]=a.useState(!1),{firstVariableSetMode:eY,firstVariableSetID:eW}=eZ(),eH=(0,k.p8)("currentPage"),ez=a.useCallback((e,t,n,o)=>{b((0,x._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:o}}))},[b]),eJ=a.useCallback(e=>{if(et&&q){var t=!1,n=!1;if(em)eu();else{for(let r=0;r<q?.length;r++){let i=q[r],l=[];if(i&&i.actions){var o=0,a=[];for(let r=0;r<i.actions.length;r++){let c=i.actions[r];if(r!==e)void 0!==ev.find(e=>e.equals([r]))&&a.push(new tC.Op([o])),l.push(c),o++;else{let e=i.id?i.id:m.Hr;ez(c.connectionType?c.connectionType:"NONE",(0,m.dI)(e),eH),r===i.actions.length-1&&(t=!0),2===i.actions.length&&(n=!0)}eh(a)}q[r].actions=l}}let r=et.map(e=>q.find(t=>t.id===e.id)??e);S.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&z&&eh([new tC.Op([0])]),t&&$&&Z(new tC.Op([e-1]))}}},[et,q,em,eu,ev,eH,ez,$,z]),eX=a.useCallback(e=>{if(!et||!q||!e.path.length||void 0===e.path[0])return;let[t,n,o]=e.path,a=e.isConditional();if(em)eu();else if(a){let e=!1,a=!1,r=q.map(r=>{let i=r.actions;if(!i)return r;let l=i.map((i,l)=>{if(l!==t||"CONDITIONAL"!==i.connectionType)return i;let c=i.conditionalActions;if(!c)return i;let s=c.map((t,i)=>{if(i!==n)return t;let l=t.actions;if(!l)return t;let c=l[o];c&&ez(c.connectionType?c.connectionType:"NONE",(0,m.dI)(r.id??m.Hr),eH,!0);let s=l.filter((e,t)=>t!==o);return e=o===l.length-1,a=0===s.length,{...t,actions:s}});return{...i,conditionalActions:s}});return{...r,actions:l}}),i=et.map(e=>r.find(t=>t.id===e.id)??e);S.Y5.updateSelectionProperties({prototypeInteractions:i}),a?Z(new tC.Op([t])):!a&&e&&Z(new tC.Op([t,n,o-1]))}else eJ(t);document.activeElement?.blur()},[et,q,em,eu,eJ,eH,ez]),e$=el&&"ON_CLICK"===ei&&1===en.length&&void 0!==en.find(e=>e.connectionURL||"NAVIGATE"===e.navigationType),ej=a.createElement(f.P,{className:$?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":nQ,useBottomPinning:!$,ref:eR,allowScrollAndZoomOver:!0,"data-not-draggable":!0},a.createElement(n9,{autoOpenExpressionBuilder:eF,autoOpenVariablePicker:eB,category:e,deleteButtonPressed:eJ,expandedRows:ev,newActionIndexPath:eK,onNewActionAdded:e=>{eL(e)},onSelect:ep,recordingKey:$?I.Pt("leftCol",G.dJ):G.dJ,resetNewActionIndexPath:()=>{eL(new tC.Op([]))},selectedActionIndex:j,setAutoOpenExpressionBuilder:eG,setExpandedRows:eh,shouldHideTitle:!0})),eQ=1===q.length,eq=q[0],e0=eq.actions&&eq.actions.length<2,e1=eq.actions&&1===eq.actions.length&&eq.actions[0],e5=!e1||"NONE"===e1.connectionType,e4=eQ&&e0&&e5;var e3=m.Hr;let e2=a.createElement(tD.t,{skipPaywall:e4,addButtonPressed:e=>{if(!q)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&em){eu();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=eW,e.targetVariableModeID=eY),"SET_VARIABLE"===e.connectionType&&eB&&(eB.current=!0),z&&"CONDITIONAL"===e.connectionType&&eG(!0);let t=!1;var n=null,o=z&&!ee&&!e4&&q[0].actions&&1===q[0].actions.length;if(ee||e4)for(var a=0;a<q.length;a++){let t=q[a];t.actions=[e];let n=t.id,o=t.sourceNodeID;(0,G.uU)(t.stateManagementVersion)&&n&&o&&nr.zZ.recordInteractionUpgraded(n,o),t.stateManagementVersion=1}else for(var a=0;a<q.length;a++){let o=q[a];if(o.actions){if((0,G.uU)(o.stateManagementVersion)&&(o.id&&o.sourceNodeID&&nr.zZ.recordInteractionUpgraded(o.id,o.sourceNodeID),o.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),$){if(j.isConditional()){let n=j.path[0],a=j.path[1],r=j.path[2],i=o.actions?.[n],l=i.conditionalActions?.[a].actions?.length??0;n===o.actions.length-1&&r===l-1&&(t=!0),i.conditionalActions?.[a].actions?.splice(r+1,0,e)}else{let n=j.path[0]+1;n===o.actions.length&&(t=!0),o.actions?.splice(n,0,e)}}else o.actions?.push(e);e3=o.id?o.id:m.Hr}else o.actions=[e],e3=o.id?o.id:m.Hr;if(o.stateManagementVersion=1,$){let e=[...j.path];e[e.length-1]+=1,n=new tC.Op([...e])}else n=new tC.Op([o.actions.length-1])}let r=et.map(e=>q.find(t=>t.id===e.id)??e);if(S.Y5.updateSelectionProperties({prototypeInteractions:r}),o||$){var i=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&i.push(new tC.Op([t]))}),eh(i)}eM&&(!$||t)&&eM(!0),eL&&eL(n),b((0,x._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,m.dI)(e3),page_id:eH}}))},renderButton:!0,recordingKey:G.dJ,isNestedInConditional:$&&j.isConditional()}),e7=q.some(e=>void 0!==e.actions&&e.actions?.length>1),e8=!j.isConditional()&&!e7,e6=a.createElement(i.K,{onClick:()=>eX(j),"aria-label":(0,P.t)("proto.prototype_panel.delete"),disabled:e8,recordingKey:I.Pt(G.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,P.t)("proto.prototype_panel.delete"),"data-tooltip-type":K.Ib.TEXT}},a.createElement(A.U,{svg:nR.A},a.createElement(c.O,null))),e9=a.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},e2," ",e6),te=a.createElement(eI.c.Provider,{value:eI.P.LEFT},a.createElement("div",{className:$?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:eN,style:$?{width:`${od(e_).leftWidthPct}%`}:void 0},a.createElement(nZ,{category:e,recordingKey:G.dJ,headerButtons:a.createElement(a.Fragment,null)}),a.createElement("div",{className:n5}),ej,a.createElement("div",{className:n5}),a.createElement(a.Fragment,null,e9))),tt=en.length>0?a.createElement(eI.c.Provider,{value:eI.P.RIGHT},a.createElement(f.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:$?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},a.createElement(ou,{selectedActionIndex:ec,handleExpandUI3:(e,t)=>{!t&&en.length>1?eh(ev.filter(t=>!t.equals(e))):ev.find(t=>t.equals(e))||eh([...ev,new tC.Op(e)])},autoOpenVariablePicker:eB,autoOpenExpressionBuilder:eF,setAutoOpenExpressionBuilder:eG}))):null,tn=a.useRef(oc),[,to]=(0,l.i)({disabled:!$,onDragStart(){eN.current&&(tn.current=eN.current.getBoundingClientRect().width)},onDrag(e){if(eN.current&&tn.current){let t=od(e_),n=tn.current+e.delta.x,a=n/t.width*100;n<oc?a=oc/t.width*100:a>os&&(a=os),eN.current.style.width=`${a}%`,o={...t,leftWidthPct:a}}}}),ta=$?a.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},a.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2"},te,a.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},a.createElement("div",{...to({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),tt),e_&&a.createElement(n8,{transition:eE,recordingKey:I.Pt(G.dJ,"stateManagementVersionPanel"),updateSelectionProperties:er,stateManagementVersion:ey,selectedInteractions:q})):ej,tr=a.createElement(t7.vx,{ref:F,allowAutoExpanding:!0,allowResizeHeight:$,allowResizeWidth:$,allowWheelPassthrough:!0,arrowPosition:E?void 0:t7.F_.TOP,arrowRelativeX:E?void 0:eb/2,canRenderBelowViewport:!0,containerClassName:y()({[nQ]:!$,[nq]:$,[n0]:X,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":eO,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!eO,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!z,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!z,"prototype_interaction_edit_modal--hideModal--RSp-R":eT}),contentContainerClassName:y()({[nQ]:!$,[nq]:$,[n0]:X}),dataTestId:"in-context-prototype-interaction-edit-modal",dragHeaderOnly:!0,fullFrame:$,headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",headerSize:"small",initialHeight:$?od(e_).height-t7.uF:void 0,initialPosition:ew,initialWidth:$?od(e_).width:void 0,maxHeight:$?800:void 0,maxWidth:$?800:void 0,minHeight:$?e_?369:320:void 0,minWidth:$?440:void 0,onClose:ol,onDragStart:()=>{eS(!0),eD()},onFocus:()=>W(!0),onResize:$?e=>{o={...od(e_),height:e.height,width:e.width}}:void 0,recordingKey:"interactionDetailsModal",title:t=>a.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},e$?a.createElement(oE,{closeButton:t}):a.createElement(o_,{category:e,recordingKey:G.dJ,createActionTrigger:e2,closeButton:t}))},z?ta:ej),ti=el?tr:a.createElement(L.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:eV},tr);return a.createElement(U.ht.Provider,{value:a.useMemo(()=>({autoCloseOnScroll:!H}),[H])},ti)});function ou({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:o,setAutoOpenExpressionBuilder:r}){let i=(0,nC.HS)(),{selectedInteractions:l,mergedActions:c,makeUpdateSelectionPropertiesForActionIndex:s,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:p}=(0,nC.Ay)(i),m=e.path[0],u=d(m),_=s(m),E=(0,G.iC)(l),y=p.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],i=e.path[2],s=c[m],d=((0,D.hS)(s.conditionalActions)&&s.conditionalActions?s.conditionalActions:[])[n],p=d?.actions?.[i];return p?a.createElement("div",{className:n4},a.createElement(nM,{key:i,action:p,actionIndexPath:e.path,autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:y,isNarrowPanel:!0,isNestedInConditional:!0,numActions:c.length,onDeleteAction:h.lQ,onDrop:h.lQ,onExpand:h.lQ,onSelect:h.lQ,recordingKey:I.Pt(G.dJ,G.Qe,G.eG,m),selectedActionIndex:e,selectedInteractions:l,setAutoOpenExpressionBuilder:r,stateManagementVersion:E,updateMultipleDestinationNodes:u.appendActionIndex(n).appendActionIndex(i),updateSelectionProperties:_.appendActionIndex(n).appendActionIndex(i)})):null}return a.createElement("div",{className:n4},a.createElement(nM,{key:m,action:c[m],actionIndexPath:[m],autoOpenExpressionBuilder:o,autoOpenVariablePicker:t,expandedRows:[e],interactionType:y,isNarrowPanel:!0,isNestedInConditional:!1,numActions:c.length,onDeleteAction:h.lQ,onDrop:h.lQ,onExpand:n,onSelect:h.lQ,recordingKey:I.Pt(G.dJ,G.Qe,G.eG,m),selectedActionIndex:e,selectedInteractions:l,setAutoOpenExpressionBuilder:r,stateManagementVersion:E,updateMultipleDestinationNodes:u,updateSelectionProperties:_}))}function o_({category:e,recordingKey:t,closeButton:n,createActionTrigger:o}){let l=(0,r.wA)(),{selectedInteractions:c}=(0,nC.Ay)(e),p=(0,G.YT)(),m=p===G.Oz.TWO_COL,_=p===G.Oz.SINGLE_COL,E=(()=>{if(1!==c.length)return 0;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return d.X3B.getMatchingInteractions(v.d(t)).length})(),y=(0,u.k)().prototype_hide_matching_noodles&&1===c.length&&E>1&&a.createElement(i.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=d.X3B.getMatchingInteractions(v.d(t));d.glU.selectInteractionsAndSourceNodes(n);let o=(0,P.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});S.Y5.showVisualBellWithUndo("selected-matching-noodles",o,!1),l((0,x._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,P.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:E}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==c.length)return;let e=c[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=d.X3B.getMatchingInteractions(v.d(t));d.glU.hoverInteractions(n)},onMouseLeave:()=>d.glU.hoverInteractions([]),"data-tooltip":(0,P.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:E}),"data-tooltip-type":K.Ib.TEXT}},a.createElement(A.U,{svg:oi.A},a.createElement(s.A,null))),g=a.createElement(nZ,{category:e,recordingKey:t,headerButtons:a.createElement(a.Fragment,null,y,o,n)}),h=a.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,P.tx)("proto.interaction_details.header"),a.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},y,n)),I=a.createElement(a.Fragment,null,(0,P.tx)("proto.interaction_details.header"),a.createElement("div",{className:n1},y,o,n));return m?h:_?I:g}function oE({closeButton:e}){return a.createElement(a.Fragment,null,(0,P.tx)("proto.sites_interaction_link_details.header"),a.createElement("div",{className:n1},e))}let oy=e=>e.pickerShown?.id===b.o$?e.pickerShown:null},85028:(e,t,n)=>{n.d(t,{y7:()=>eb,a1:()=>eM,dT:()=>eB});var o=n(848318),a=n(301168),r=n(544405),i=n(62034),l=n(954703),c=n(713196),s=n(92778),d=n(186606),p=n(320953),m=n(553547),u=n(195124),_=n(999667),E=n(536384),y=n.n(E),g=n(410441),v=n(996202),h=n(865114),I=n(156845),N=n(238462),T=n(781239),f=n(979890),A=n(454805),P=n(720522),b=n(401970),O=n(967688),S=n(244534),C=n(142896),D=n(754210),w=n(995218),k=n(696786),R=n(303397),x=n(489082),M=n(246411),K=n(966369),L=n(730143),U=n(200300),V=n(700436),B=n(273555),F=n(959219),G=n(17753),Y=n(52463),W=n(499025),H=n(341090),z=n(967045),J=n(998390);function X(e){return e??"Default"}let $=o.createContext({getNodeName:X}),j=o.memo(function({getNodeName:e=X,children:t}){let n=o.useMemo(()=>({getNodeName:e}),[e]);return o.createElement($.Provider,{value:n},t)});var Z=n(425155),Q=n(275210),q=n(956783),ee=n(189819),et=n(313405),en=n(197696),eo=n(748790),ea=n(880801),er=n(619534),ei=n(131258),el=n(122586),ec=n(636074),es=n(129256);function ed(){let e=(0,a.wA)(),t=(0,a.d4)(e=>(0,en.Yh)(e.mirror.appModel,ea.JT.MAGIC_LINK));return(0,eo.PE)()?o.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},o.createElement(l.K,{recordingKey:T.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,O.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"),onClick:()=>{(0,el.$I)({moduleToOpen:{type:"custom",module:o.createElement(ec.p,null),name:ei.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,et.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,er.B3)(ea.JT.MAGIC_LINK),t&&(0,er.Ag)(ea.JT.MAGIC_LINK,es.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":(0,O.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"),"data-tooltip-show-above":!0}},o.createElement(ee.B,null))):null}var ep=n(614892),em=n(934151),eu=n(699848),e_=n(297638);let eE=(0,n(244052).ex)("prototype_info",function(e){let{tooltipText:t}=e;return o.createElement("div",{className:e_.s.flex.justifyCenter.itemsCenter.$},o.createElement("span",{className:e_.s.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var ey=n(124213),eg=n(320486),ev=n(756912),eh=n(786175),eI=n(952200),eN=n(389075),eT=n(57540);let ef=new D.JV,eA=new D.Eq,eP=new D.sX,eb=o.memo(function({filterInteractionCategory:e}){let t=(0,a.wA)(),n=(0,a.d4)(q.Cy),r=(0,a.d4)(q.n9),i=(0,a.d4)(q.DV),l=(0,a.d4)(eD),c=(0,a.d4)(V.dK),s=(0,a.d4)(V.Xt),_=(0,q.a2)(),E=(0,q.R)(),y=(0,a.d4)(ek),h=(0,a.d4)(eC),N=Object.keys(s).length>1,T=eR(),f=function(){let e=eR(),t=(0,a.d4)(ew);return!!e&&!!t&&t.selectionOverrides[d.YnC.PROTOTYPE_INTERACTIONS]}(),P=(0,L.q5)(),b=(0,v.U)(),O=(0,w.cJ)(),k=o.useMemo(()=>new D.cP(c),[c]),x=o.useCallback(e=>k.format(e),[k]),M=o.useRef(null),K=e=>{R.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:B.zk.NO_BUT_TRACK_AS_EDIT}),R.Y5.commit()},U=(0,J.Zj)(Object.keys(s)),G=o.createElement(eO,{currentSelectedProperty:l,dispatch:t,filterInteractionCategory:e,headerAccessory:U&&o.createElement(ed,null),inSites:O,inheritedInternalInteractionGroups:E,interactionGroups:_,isOrInInstance:T,isValidPrototypingSourceSelected:y,mixed:N,onAddProperty:e=>{e.stopPropagation();let t=[],o=[];for(let e of Object.keys(s)){let n=d.glU.generateUniqueID();if(!n)return;let a=m.sH(n);if(!a)return;let r={id:a,sourceNodeID:m.sH(e)??m.Hr,event:{interactionType:eM(_,void 0,O)}};r.stateManagementVersion=1,r.actions=[{connectionType:"NONE"}],t.push(r);let i=(0,u.kh)(c,e);o.push(i?i.guid:"")}let a=t.map(e=>I.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(a.length>0){d.glU.setSelectedInteractions(a);let e=(0,Y.cn)(M.current);eB(new A.Mi(e.x,e.y+(0,g.jz)(eh.rightNavGridRowHeight)))}let i=[...n,...t,...r];b("prototype_interaction_added",{interactionCount:i.length,sourceTlfIds:JSON.stringify(o)}),K(i)},onChange:(e,t)=>{let o=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),a=new Set,i=[];for(let e of o){let t=m.dI(e.id);if(t&&!a.has(t))i.push(e);else{if(!(t=d.glU.generateUniqueID()))continue;let n=m.sH(t);if(!n)continue;i.push({...e,id:n})}t&&a.add(t)}t===F.J.NORMAL?i=[...i,...r]:t===F.J.INHERITED_INTERNAL&&(i=[...n,...i]),K(i)},onDeleteProperty:(e,t)=>{let n=(t===F.J.NORMAL?_:E).filter((t,n)=>e.has(n)),o=[];for(let e of n)o.push(...e.interactions);let a=eV(o);p.l7.user("delete-prototype-interactions",()=>d.glU.deleteInteractions(a)),R.Y5.deselectProperty()},openFile:P,shouldIgnoreKeyboardEvents:i.length>0||l.type!==d.rrT.PROTOTYPE_INTERACTION&&l.type!==d.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,showResetInteractionsButton:f,toggleScrollBehaviorPicker:()=>{if(h?.id===C.AO)t(S.XE());else{let e=(0,Y.cn)(M.current);t(S.u1({id:C.AO,initialX:e.x,initialY:e.y}))}}});return o.createElement(j,{getNodeName:x},O?G:o.createElement(ep.Zk,{"data-onboarding-key":"prototypePanel",ref:M,"data-testid":"prototype-interaction-list"},G))});function eO(e){let t=o.useRef(!1),n=(0,k.GS)(),a=!!e.filterInteractionCategory,i=!a||e.filterInteractionCategory===F.J.NORMAL,l=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=a?e.filterInteractionCategory===F.J.INHERITED_INTERNAL&&l:l,s=n?o.createElement("div",{className:"prototype_interaction_list--categoryRow--Xxfm4"},o.createElement(r.J,{className:"prototype_interaction_list--categoryLabel--0dGOM"},(0,O.tx)("proto.interaction_list.variant_interactions"))):o.createElement(ep.fI,null,o.createElement(ep.UZ,{className:"prototype_interaction_list--label--dGwgy"},(0,O.tx)("proto.interaction_list.variant_interactions"))),m=(0,U.o3)(U.nt.useGrid)&&n;return o.createElement(o.Fragment,null,i&&o.createElement(em.dD.Provider,{value:{useGrid:m}},o.createElement(z.h6,{addProperty:e.onAddProperty,boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,headerAccessory:e.headerAccessory,hideAddButton:!e.isValidPrototypingSourceSelected,onChange:t=>e.onChange(t,F.J.NORMAL),onDeleteProperty:t=>e.onDeleteProperty(t,F.J.NORMAL),onResetInteractions:p.nc.user("reset-instance-interactions",()=>d.glU.resetSymbolOverrides(d.YnC.PROTOTYPE_INTERACTIONS)),openFile:e.openFile,pickerShown:null,propertyList:e.interactionGroups,recordingKey:"prototypeInteractionList",renderProperty:(n,a,r,i,l,c,s,d,p)=>o.createElement(eS,{key:m?void 0:a,autoOpenVariablePicker:t,category:F.J.NORMAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:a,interactionGroup:n,interactionGroups:e.interactionGroups,isDragging:i,onMouseDown:s,onMouseMove:d,onMouseUp:p,recordingKey:T.Pt("prototypeInteractionList",a),selected:r,singletonRow:e.interactionGroups.length<=1}),selectedPropertyType:d.rrT.PROTOTYPE_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,showResetInteractionsButton:e.showResetInteractionsButton,stylePickerShown:{isShown:!1},title:e.inSites?"":(0,O.t)("proto.title_interactions"),toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})),c&&s,c&&o.createElement(em.dD.Provider,{value:{useGrid:m}},o.createElement(z.h6,{addProperty:N.lQ,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,hideAddButton:!0,onChange:t=>e.onChange(t,F.J.INHERITED_INTERNAL),onDeleteProperty:t=>e.onDeleteProperty(t,F.J.INHERITED_INTERNAL),openFile:e.openFile,pickerShown:null,propertyList:e.inheritedInternalInteractionGroups,recordingKey:T.Pt("prototypeInheritedInternalInteractionList"),renderProperty:(n,a,r,i,l,c,s,d,p)=>o.createElement(eS,{key:m?void 0:a,autoOpenVariablePicker:t,category:F.J.INHERITED_INTERNAL,dispatch:e.dispatch,hasFocus:l,inSites:e.inSites,index:a,interactionGroup:n,interactionGroups:e.inheritedInternalInteractionGroups,isDragging:i,onMouseDown:s,onMouseMove:d,onMouseUp:p,recordingKey:T.Pt("prototypeInheritedInternalInteractionList",a),selected:r,singletonRow:e.inheritedInternalInteractionGroups.length<=1}),selectedPropertyType:d.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,stylePickerShown:{isShown:!1},title:"",toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker})))}function eS({interactionGroups:e,interactionGroup:t,index:n,hasFocus:r,isDragging:u,selected:E,singletonRow:g,onMouseDown:N,onMouseMove:A,onMouseUp:w,dispatch:x,category:L,recordingKey:U,inSites:B}){let z=(0,k.GS)(),{getNodeName:J}=o.useContext($),X=(0,a.d4)(q.DV),j=(0,q.a2)(),Q=(0,a.d4)(eC),ee=Q?.id===C.o$?Q:null,et=(0,a.d4)(V.dK),[en,eo]=o.useState(!1),ea=(0,_.md)(K.NE)?eA:ef,er=o.useContext(eg.qd),ei=function(e,t){let n=new Set(t.map(e=>{let t=I.s(e);return t?m.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=m.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,X),[el,ec]=(0,_.fp)(ey.jM),es=(0,_.md)(ey.uW),{useGrid:ed}=o.useContext(em.dD),ep=o.useRef(null),e_=o.useRef(null),eh=o.useCallback(()=>{let e=z&&B?e_.current:ep.current;eB((0,Y.cn)(e))},[B,z]),eP=o.useCallback(()=>{d.glU.setSelectedInteractions([]),x(S.XE()),R.Y5.deselectProperty()},[x]),eb=n=>{if(!ep||!e_)return;B&&es?.focus();let o=eU(t),a=n.metaKey||n.ctrlKey;if(a)ei?o=X.filter(e=>!o.includes(e)):o.push(...X);else if(!B&&n.shiftKey){var r;let n,a;let i=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===i)return;let l=function(e,t){let n=1/0,o=e;for(let a of t){let t=Math.abs(e-a);t<n&&(o=a,n=t)}return o}(i,function(e,t){let n=new Set,o=new Set(t);for(let t=0;t<e.length;t++)eU(e[t]).some(e=>o.has(e))&&n.add(t);return n}(e,X)),c=(n=i,a=l,i>l&&(n=l,a=i),e.slice(n,a+1));for(let e of(o=[...X],c))o.push(...eU(e))}if(d.glU.setSelectedInteractions(o),R.Y5.updateAppModel({currentSelectedProperty:{type:L===F.J.NORMAL?d.rrT.PROTOTYPE_INTERACTION:d.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),o.length){let e=ee&&ee.shouldPin;if(B){let t=el.length+o.length>1;a?(a||t)&&x(S.XE()):(ec([]),e||eh())}else e||eh()}else eP()},eO=(0,a.d4)(W.ZM),eS=!1,eD=null,ew=null;for(let e of t.interactions)if(!eD&&e.actions&&e.actions.length>0)eD=e.actions[0],ew=e;else if(eL(eD,J,z,eO)!=eL((e.actions??[])[0],J,z,eO)){eS=!0;break}let ek=()=>{let e=eV(t.interactions);d.glU.hoverInteractions(e),eo(!0)},eR=()=>{d.glU.hoverInteractions([]),eo(!1)},ex=new D.js(z,eO),eM=(0,D.mj)(eD),eF=ew?.actions?.length??0,eG=eF>1?(0,O.t)("sites.panel.interaction_summary",{numActions:eF}):eS||!eD||"NONE"===eM?void 0:ex.format(eM),{tooltipText:eY,showTooltip:eW}=(0,ev.QY)(eG),eH=e=>{e.stopPropagation()},ez=e=>{e.stopPropagation();let n=eV(t.interactions);p.l7.user("delete-prototype-interactions",()=>d.glU.deleteInteractions(n)),R.Y5.deselectProperty(),R.Y5.commit()},eJ=!1,eX=!1;if(L===F.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=et.get(m.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{eJ=!0;break}}}let o=d.glU.getContainingStateGroupOrSelf(m.dI(e.sourceNodeID??m.Hr))||"";if(""===o||""!==n&&o!==n){eJ=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),o=e.some(e=>"ON_HOVER"===e.event.interactionType);eX=n&&o}eJ=L!==F.J.INHERITED_INTERNAL&&eJ;let e$=function(e,t,n){if(e!==F.J.INHERITED_INTERNAL)return null;let o=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,o=void 0!==t.actions&&t.actions.length>=1;if(!n||!o)return!1;let a=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),r=e.actions.every(e=>m.fn(e.transitionNodeID));var i=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){i=!0;break}return a&&r&&i}(e.interactions[0],t.interactions[0]));return o?.interactions[0]??null}(L,t,e),ej=(0,h.ZC)(e$),eZ=(0,v.U)();if(o.useEffect(()=>{null===ej&&e$&&eZ("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:e$.event?.interactionType})}),t.event.interactionType&&er&&er!==(0,Z.hD)(t.event.interactionType)||"mouse"===er&&(0,eg.zL)(t.interactions))return null;let eQ=L===F.J.INHERITED_INTERNAL&&j.some(e=>e.key===t.key)&&!e$,eq=E&&r,e0=ei&&!E,e1=o.createElement(c.Z,null),e5=eJ||eX||eQ,e4=eJ?(0,O.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):eX?(0,O.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):eQ?(0,O.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",e3=o.createElement(eu.Y9,{ref:e_,"data-testid":`prototypeInteractionItem-${n}`,hideGrabber:!0,onMouseEnter:ek,onMouseLeave:eR,onClick:eb,recordingKey:T.Pt(U,"draggableRow"),selected:ei,"aria-selected":ei},o.createElement(eu.s2,{label:null,leftIcon:o.createElement(i.d,{"aria-expanded":e0&&!!ee,recordingKey:T.Pt(U,"interactionIcon"),htmlAttributes:{onMouseDown:eH,"data-tooltip-type":G.Ib.TEXT,"data-tooltip":e5?e4:eK(t.event,ea,!!B)},"aria-label":e5?e4:eK(t.event,ea,!!B),children:e5?e1:(0,M.e7)(t.event.interactionType)}),input:o.createElement(f.D8,{onMouseDown:eH,recordingKey:T.Pt(U,"interactionText"),className:"prototype_interaction_list--ellipsis--ro1zN ellipsis--ellipsis--Tjyfa",onMouseEnter:eW},eK(t.event,ea,!!B),eG&&o.createElement("span",{"data-tooltip-type":G.Ib.TEXT,"data-tooltip":eY,className:"prototype_interaction_list--summaryText--hGpp4"},"\xa0\xb7\xa0",eG)),rightIcon:o.createElement("div",{hidden:!en},o.createElement(l.K,{onClick:ez,"aria-label":(0,O.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:T.Pt(U,"removeButton"),htmlAttributes:{onMouseDown:eH}},o.createElement(b.U,{svg:eI.A,fallbackSvg:eN.A},o.createElement(s.O,null))))}));if(B)return e3;let e2=o.createElement(f.D8,{className:y()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":eq,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":e0}),onClick:eb,onKeyDown:e=>{ed&&("Enter"!==e.key&&(" "!==e.key||e.shiftKey)||eb(e))},tabIndex:ed?0:void 0,onMouseDown:eH,recordingKey:U},e5&&o.createElement(P.B,{className:"prototype_interaction_list--warningIcon--Mgr5O",svg:eT.A,"data-tooltip-type":G.Ib.SPECIAL,"data-tooltip":eE,"data-tooltip-text":e4}),o.createElement("div",{className:e5?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},eK(t.event,ea,!!B)),o.createElement(b.U,{className:"prototype_interaction_list--actionIcon--x-haP",svg:eS?(0,M.Yb)("NONE"):(0,M.Yb)((0,D.mj)(eD))},(0,M.av)((0,D.mj)(eD))),o.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},eS?(0,O.t)("proto.variant_actions.mixed"):L===F.J.INHERITED_INTERNAL?(0,O.t)("proto.variant_actions.change_to"):eL(eD,J,z,eO))),e7=o.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},o.createElement(l.K,{onClick:ez,"aria-label":(0,O.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:T.Pt(U,"removeButton"),htmlAttributes:{onMouseDown:eH}},o.createElement(b.U,{svg:eI.A,fallbackSvg:eN.A},o.createElement(s.O,null))));return ed?o.createElement(em.lt,{ref:ep,htmlAttributes:{"data-testid":`prototypeInteractionItem-${n}`},input:e2,icon:e7,selected:E||ei,hasFocus:eq,singletonRow:g,recordingKey:T.Pt(U,"draggableRow")}):o.createElement("div",null,o.createElement(H.e,{ref:ep,className:z?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,dragging:u,onMouseDown:N,onMouseEnter:ek,onMouseLeave:eR,onMouseMove:A,onMouseUp:w,recordingKey:T.Pt(U,"draggableRow"),selected:eq,selectedSecondary:e0,singletonRow:g},e2,e7))}function eC(e){return e.pickerShown}function eD(e){return e.mirror.appModel.currentSelectedProperty}function ew(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function ek(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function eR(){let e=(0,a.d4)(V.Xt),t=(0,a.d4)(V.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let ex=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function eM(e,t,n){let o=new Set;for(let{event:t}of e)o.add(t.interactionType);for(let e of ex)if(!o.has(e)&&(!n||"DRAG"!==e)&&("BACK"!==t||"ON_HOVER"!==e&&"ON_PRESS"!==e))return e;return"ON_KEY_DOWN"}function eK(e,t,n){let o=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,Q._i)(e.keyTrigger.keyCodes),a=(0,Q.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n?(0,Q.U8)(t):o+" ("+(0,Q.U8)(t)+")";if(a)return n?a:o+" ("+a+")"}return o}function eL(e,t,n,o){let a=new D.js(n,o);if(!e)return a.format("NONE");let r=(0,D.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return a.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,x.gl)(e.connectionURL))return(0,O.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return a.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return eP.format(e)}return e.transitionNodeID?(0,x.gl)(e.transitionNodeID)?(0,O.t)("fullscreen.mixed"):t(m.dI(e.transitionNodeID)):a.format("NONE")}function eU(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>I.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function eV(e){let t=[];for(let n of e){let{sourceNodeID:e,id:o}=n;e&&o&&t.push(I.d({nodeID:e,interactionID:o}))}return t}function eB(e){R.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:d.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}},672595:(e,t,n)=>{n.d(t,{h:()=>T,t:()=>f});var o=n(848318),a=n(301168),r=n(990140),i=n(536384),l=n.n(i),c=n(781239),s=n(401970),d=n(178806),p=n(967688),m=n(754210),u=n(696786),_=n(246411),E=n(511067),y=n(456977),g=n(442022),v=n(596224),h=n(425155),I=n(934363),N=n(954184);let T=e=>`interaction-panel-create-action-${e}`;function f(e){let t=T(e.recordingKey);var{showing:n,toggle:i,hide:f}=(0,E.BK)(t);let A=(0,o.useRef)(null),{recordingKey:P,addButtonPressed:b,presetInteractions:O,isLayoutNodeSelected:S}=e,{shouldShowAdvancedPrototypingPaywall:C,showAdvancedPrototypinglMultipleActionsModal:D}=(0,h.zt)(),w=(0,o.useCallback)(()=>{!e.skipPaywall&&C?D():i()},[e.skipPaywall,C,D,i]),k=(0,h.YT)()===h.Oz.TWO_COL,R=(0,h.hP)(),x=(0,u.GS)(),M=(0,v.cJ)(),K=(0,h.He)({showVideoActions:R,isNestedInConditional:e.isNestedInConditional,isSites:M,isUI3:x,showPresetActions:!!e.presetInteractions,isLayoutNodeSelected:S}),L=(0,a.wA)(),U=(0,o.useCallback)(e=>{b((0,h.Bs)(e)),f()},[b,f]),V=l()({[I.x1]:e.renderButton,[I.xm]:!e.renderButton&&!k,[I.U3]:!e.renderButton&&k}),B=[];K.forEach(e=>{(0,h.vc)(e)?B.push(y.w):e===h.Xk&&O?.length?B.push(...O,y.w):B.push(function({actionType:e,clickCb:t,recordingKey:n,isUI3:a}){let r=(0,_.Yb)(e),i=(0,_.av)(e),l=new m.Z6(a),d=e?l.format(e):"Undefined";return{type:e,className:I.BP,callback:()=>t(e),icon:o.createElement(s.U,{className:I.QE,svg:r},i),displayText:d,recordingKey:c.Pt(n,"createActionOption",e),"data-onboarding-key":`create-action-${e}`}}({clickCb:U,recordingKey:P,actionType:e,isUI3:x}))});let F=e.isNestedInConditional?(0,p.t)("proto.prototype_panel.add_nested_action"):M?(0,p.t)("sites.panel.add_interaction"):(0,p.t)("proto.prototype_panel.add");return o.createElement(o.Fragment,null,o.createElement(d.e6,{ref:A,recordingKey:c.Pt(P,"createActionDropdown"),className:V,onClick:w,"aria-label":(0,p.t)("proto.prototype_panel.create_action_button"),htmlAttributes:{"data-tooltip":F,"data-tooltip-type":"text"}},e.renderButton?o.createElement(s.U,{svg:N.A},o.createElement(r.e,null)):(0,p.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&A.current&&o.createElement(g.j,{dataTestId:e.dataTestId,dispatch:L,hidePointWhenContentOffScreen:!0,items:B,lean:"center",minWidth:130,onSelectItem:e=>e.callback?.(),parentRect:A.current.getBoundingClientRect(),recordingKey:"actionDropdown",showPoint:!0}))}},612499:(e,t,n)=>{n.d(t,{Z0:()=>ts});var o=n(848318),a=n(301168),r=n(660376),i=n(585886),l=n(553547),c=n(781239),s=n(156137),d=n(967688),p=n(957872),m=n(863270),u=n(696786),_=n(361323),E=n(303397),y=n(959750),g=n(702038),v=n(489082),h=n(963307),I=n(313405),N=n(991675),T=n(247852),f=n(322638),A=n(998390),P=n(454805),b=n(244534),O=n(142896),S=n(632727),C=n(52463),D=n(890868),w=n(190561),k=n(753644),R=n(483157),x=n(614892),M=n(847526);class K extends c.o6{render(){return o.createElement(x.Zk,null,o.createElement(x.fI,null,o.createElement(R.Q,null,(0,d.tx)("proto.menu.background"))),o.createElement(L,{...this.props}))}}function L(e){let t=o.useRef(null),n=o.useRef(null),a=(0,u.GS)(),{dispatch:r,pickerShown:i,prototypeBackgroundColor:l}=e,s=o.useCallback(()=>{let e=a?n.current:t.current;if(i&&i.id===O.$T)r(b.XE());else if(e&&e instanceof HTMLElement){let t=(0,C.cn)(e);r(b.u1({id:O.$T,initialX:t.x,initialY:t.y}))}},[r,i,a]),d=o.useCallback((e,t)=>{r((0,I._P)({name:"Prototype Background Modified"})),E.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[r]),p=(0,v._W)(l,{r:0,g:0,b:0,a:1}),m=o.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(D.J,{onClick:s,color:p,opacity:p.a,recordingKey:c.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),o.createElement(k.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:S.TI,property:p,onChange:d,recordingKey:c.Pt(e,"colorInput"),noBorderOnFocus:!0}));return o.createElement(o.Fragment,null,a?o.createElement(M.TN,{ref:n},m):o.createElement(x.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},m),i&&i.id===O.$T&&o.createElement(w.h,{disabledVariableIds:new Set,initialPosition:new P.Mi(i.initialX??0,i.initialY??0),color:p,boundVariable:null,onChange:d,recordingKey:c.Pt(e,"colorPicker")}))}K.displayName="PrototypeBackgroundPanel";var U=n(779492),V=n(250838),B=n(751304),F=n(176143),G=n(999667),Y=n(401970),W=n(899386),H=n(17753),z=n(232958),J=n(120846),X=n(434124),$=n(483189);let j="prototype_device_panel--deviceSelect--wnOgI",Z="prototype_device_panel--deviceOption--rvW-q",Q="prototype_device_panel--inactiveLabel--UEKyk raw_components--iconInsideBorderFocusWithin--2g7fO",q="prototype_device_panel--labelInactive--pv4Sf",ee="prototype_device_panel--deviceDropdownChevron--kq9TV",et="prototype_device_panel--deviceDropdownInput--AxG9E";var en=n(375572),eo=n(988712);class ea extends o.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>W.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return W.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=W.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;E.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let a=o.createElement(ep,{dispatch:this.props.dispatch,presetIdentifier:this.deviceInfo().presetIdentifier,dropdownShown:this.props.dropdownShown,onChange:this.onModelChange,recordingKey:c.Pt(this.props,"modelDropdown")}),r=t?o.createElement(M.dx,{left:a,right:n}):o.createElement(M.TN,null,a);return o.createElement("div",null,!this.props.isUI3&&o.createElement(x.hl,null,o.createElement(x.UZ,{className:q},(0,d.tx)("presets.device_panel.model"))),this.props.isUI3?r:o.createElement(x.fI,null,a))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,v._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=S.z5.format(t),a=t.r>.9&&t.g>.9&&t.b>.9,r=`1px solid ${a?"#EFEFEF":"transparent"}`,i=o.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:r}},o.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return o.createElement("div",null,!this.props.isUI3&&o.createElement(x.hl,null,o.createElement(x.UZ,{className:q},(0,d.tx)("presets.device_panel.preview"))),this.props.isUI3?o.createElement(M.TN,{appendedClassName:$.Rk},i):o.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},i))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,o=t.rotation;o=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",E.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:o}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=o.createElement(ec,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,dropdownShown:this.props.dropdownShown,recordingKey:c.Pt(this.props,"deviceDropdown")}),n=o.createElement(U.bL,{onChange:this.onChangeOrientation,recordingKey:c.Pt(this.props,"orientationControl"),value:this.currentDeviceOrientation(),legend:o.createElement(V.q,null,(0,d.t)("presets.device_panel.rotation"))},o.createElement(U.c$,{"aria-label":(0,d.t)("presets.device_panel.rotation.portrait"),value:"PORTRAIT",icon:o.createElement(Y.U,{svg:eo.A},o.createElement(B.l,null))}),o.createElement(U.c$,{"aria-label":(0,d.t)("presets.device_panel.rotation.landscape"),value:"LANDSCAPE",icon:o.createElement(Y.U,{svg:en.A},o.createElement(F.J,null))})),a=(0,W.$X)(e.type||"NONE",e.presetIdentifier),r=o.createElement(x.fI,null,t,a&&n),i=this.deviceInfo()&&this.shouldShowModelDropdown(),l=a&&!i?o.createElement(M.dx,{left:t,right:n}):o.createElement(M.TN,null,t),s=o.createElement(er,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:c.Pt(this.props,"deviceSizeInputs")});return o.createElement(x.Zk,null,o.createElement(x.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},o.createElement(R.Q,{innerRef:this.props.titleRef,extended:this.props.isUI3,doNotReserveSpaceForChevron:!0,forceNoChevron:!0},this.props.isUI3?(0,d.tx)("presets.device_panel.prototype_settings"):(0,d.tx)("presets.device_panel.device"))),this.props.isUI3?l:r,this.renderModelDropdown(!!i,a,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&o.createElement(L,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:c.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s)}}function er(e){let t=o.useCallback(t=>{E.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=o.useCallback(t=>{E.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),a=o.createElement(z.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,d.t)("presets.device_panel.device_width_tooltip"),"data-tooltip-type":H.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",onValueChange:t,recordingKey:c.Pt(e,"deviceWidth"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.x},o.createElement("span",{className:Q},(0,d.tx)("proto.device_panel.width"))),r=o.createElement(z.$j,{bigNudgeAmount:e.bigNudgeAmount,className:"prototype_device_panel--scrubbableInput--0TFVb","data-tooltip":(0,d.t)("presets.device_panel.device_height_tooltip"),"data-tooltip-type":H.Ib.TEXT,dispatch:e.dispatch,inputClassName:"prototype_device_panel--input--vNirJ",onValueChange:n,recordingKey:c.Pt(e,"deviceHeight"),smallNudgeAmount:e.smallNudgeAmount,tooltipForScreenReadersOnly:!0,value:e.prototypeDevice.size.y},o.createElement("span",{className:Q},(0,d.tx)("proto.device_panel.height")));return(0,u.GS)()?o.createElement(M.dx,{left:a,right:r}):o.createElement(x.fI,null,a,r)}ea.displayName="PrototypeDevicePanel";let ei=J.l6,el=J.c$;class ec extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,d.t)("proto.frame_preset_panel.no_device"):(0,d.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,d.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,d.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,I.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,I._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:G.zl.get(X.h).modalStatus===X.b.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,W.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let a=n.framePresetSize;return o.createElement(el,{value:n,key:t,recordingKey:c.Pt(this.props,n.deviceName)},o.createElement("div",{className:Z},o.createElement("span",null,n.getI18nDeviceName()),o.createElement("span",null,a.x,"\u200A\xd7\u200A",a.y)," "))}}render(){let e;return e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":W.hY[this.props.prototypeDevice.presetIdentifier]||"NONE",o.createElement(ei,{chevronClassName:ee,className:j,dispatch:this.props.dispatch,dropdownAlignment:"right",dropdownClassName:"prototype_device_panel--deviceDropdown--ufbuZ",dropdownShown:this.props.dropdownShown,formatter:this.formatter,id:"prototype-device-select",inputClassName:et,onChange:this.onChange,property:e,recordingKey:c.Pt(this.props,"select")},o.createElement(el,{value:"NONE",recordingKey:c.Pt(this.props,"NONE")}),o.createElement(J.sK,null),W.r6.map(this.renderPresetOption),o.createElement(J.sK,null),W.J_.map(this.renderPresetOption),o.createElement(J.sK,null),W.AG.map(this.renderPresetOption),o.createElement(J.sK,null),W.$w.map(this.renderPresetOption),o.createElement(J.sK,null),o.createElement(el,{value:"CUSTOM",recordingKey:c.Pt(this.props,"CUSTOM")},o.createElement("div",{className:Z},o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.custom_size")),o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.fit")))),o.createElement(el,{value:"PRESENTATION",recordingKey:c.Pt(this.props,"PRESENTATION")},o.createElement("div",{className:Z},o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.presentation")),o.createElement("span",null,(0,d.tx)("proto.frame_preset_panel.fill")))),o.createElement(J.sK,null),W.dr.map(this.renderPresetOption))}}ec.displayName="DeviceDropdown";let es=J.l6,ed=J.c$;class ep extends c.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=W.hY[e];return t?t.getI18nStyleName():(0,d.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return o.createElement(ed,{value:n,key:t,recordingKey:c.Pt(this.props,n)},W.hY[n].getI18nStyleName())}}render(){let e=W.hY[this.props.presetIdentifier];if(!e)return null;let t=W.yr[e.deviceName],n=this.props.presetIdentifier;return o.createElement(es,{chevronClassName:ee,className:j,dispatch:this.props.dispatch,dropdownClassName:"prototype_device_panel--modelDropdown--WbHYJ",dropdownShown:this.props.dropdownShown,formatter:this.formatter,id:"prototype-style-select",inputClassName:et,onChange:this.props.onChange,property:n,recordingKey:c.Pt(this.props,"select")},t.map(this.renderStyleOption))}}ep.displayName="ModelDropdown";var em=n(340427),eu=n(85028),e_=n(83677),eE=n(271020),ey=n(544405),eg=n(323209),ev=n(749214);let eh=(0,o.memo)(function(e){return(0,ev.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,ev.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.146 6.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 1 0 0 6h.5a.5.5 0 0 1 0 1H9a4 4 0 0 1 0-8h1.293L9.146 6.854a.5.5 0 0 1 0-.708M14 8.5a.5.5 0 0 1 .5-.5h.5a4 4 0 0 1 0 8h-1.293l1.147 1.146a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 1 0 0-6h-.5a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})})}),eI=(0,o.memo)(function(e){return(0,ev.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,ev.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.854 6.854a.5.5 0 0 0-.708-.708l-11 11a.5.5 0 0 0 .708.708zm-8.708-.708a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9H9a3 3 0 0 0-2.143 5.1.5.5 0 0 1-.714.7A4 4 0 0 1 9 8h1.293L9.146 6.854a.5.5 0 0 1 0-.708m8.004 3.047a.5.5 0 0 1 .707.008A4 4 0 0 1 15 16h-1.293l1.147 1.145a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L13.707 15H15a3 3 0 0 0 2.143-5.1.5.5 0 0 1 .007-.707",clipRule:"evenodd"})})});var eN=n(717865);let eT=(0,o.memo)(function(e){return(0,ev.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,ev.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879v-1.88a1 1 0 0 0-1.707-.706L9.586 8H7.5A1.5 1.5 0 0 0 6 9.5v5c0 .383.144.733.38.998l.711-.71A.5.5 0 0 1 7 14.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.439A1 1 0 0 0 14 18v-5.88m2.069-2.068.71-.71a3.501 3.501 0 0 1-1.217 5.993c-.29.092-.562-.144-.562-.448v-.03c0-.237.17-.437.392-.522a2.5 2.5 0 0 0 .677-4.283m-1.013 1.013.172-.172c.113-.056.248-.044.36.073.255.269.412.632.412 1.033s-.157.764-.412 1.033c-.238.25-.588.02-.588-.326v-1.415a.5.5 0 0 1 .056-.226m2.798-4.92a.5.5 0 0 1 0 .708l-11 11a.5.5 0 1 1-.708-.707l11-11a.5.5 0 0 1 .708 0",clipRule:"evenodd"})})});var ef=n(720522),eA=n(767449),eP=n(699848),eb=n(210983),eO=n(983040),eS=n(821909),eC=n(621897),eD=n(235558);function ew({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,v.gl)(e)&&(0,v.gl)(t)?n=(0,d.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:o.createElement(ef.B,{svg:eO.A,className:eb.eT}),speakerSvg:o.createElement(ef.B,{svg:eC.A,className:eb.To})}):(0,v.gl)(e)?n=(0,d.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:o.createElement(ef.B,{svg:eO.A,className:eb.eT})}):(0,v.gl)(t)&&(n=(0,d.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:o.createElement(ef.B,{svg:eC.A,className:eb.To})})),n?o.createElement(x.fI,null,o.createElement(x.UZ,{className:eb.pc},n)):null}let ek=e=>(0,v.gl)(e)?"mixed":e,eR=e=>!0===e,ex=function(e){let t=()=>{let t=!eR(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,I._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:ek(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,I._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:ek(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},a=o.createElement("span",{className:(0,u.GS)()?void 0:eb.hW},o.createElement(eE.S,{label:o.createElement(ey.J,{htmlAttributes:{"data-tooltip":(0,d.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":H.Ib.TEXT}},(0,d.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,I._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:ek(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:eR(e.videoPlayback.autoplay),mixed:(0,v.gl)(e.videoPlayback.autoplay),recordingKey:c.Pt(e,"autoPlayToggle")})),r=(0,u.GS)()?o.createElement(eg.f,{checked:eR(e.videoPlayback.mediaLoop),mixed:(0,v.gl)(e.videoPlayback.mediaLoop),onIcon:o.createElement(Y.U,{svg:eO.A},o.createElement(eh,null)),offIcon:o.createElement(Y.U,{svg:eS.A},o.createElement(eI,null)),onChange:t,recordingKey:c.Pt(e,"videoLoopToggle"),"aria-label":(0,d.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,d.t)("proto.prototype_panel.loop"),"data-tooltip-type":H.Ib.TEXT}}):o.createElement(eA.m,{toggled:eR(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?eO.A:eS.A,fallbackSvg:e.videoPlayback.mediaLoop?eO.A:eS.A,onMouseDown:t,recordingKey:c.Pt(e,"videoLoopToggle"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip":(0,d.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:eb.BM}),i=(0,u.GS)()?o.createElement(eg.f,{checked:eR(!e.videoPlayback.muted),mixed:(0,v.gl)(e.videoPlayback.muted),onIcon:o.createElement(Y.U,{svg:eC.A},o.createElement(eN.L,null)),offIcon:o.createElement(Y.U,{svg:eD.A},o.createElement(eT,null)),onChange:n,recordingKey:c.Pt(e,"videoSoundToggle"),"aria-label":(0,d.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,d.t)("proto.prototype_panel.sound"),"data-tooltip-type":H.Ib.TEXT}}):o.createElement(eA.m,{toggled:!e.videoPlayback.muted,svg:eR(e.videoPlayback.muted)?eD.A:eC.A,fallbackSvg:eR(e.videoPlayback.muted)?eD.A:eC.A,onMouseDown:n,recordingKey:c.Pt(e,"videoSoundToggle"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip":(0,d.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:eb.BM}),l=(0,u.GS)()?o.createElement(eP.pG,{input:a,leftIcon:r,rightIcon:i,label:null}):o.createElement(x.fI,{className:eb.kh},a,o.createElement("div",{className:eb.zc},r,i));return o.createElement(x.Zk,null,o.createElement(x.fI,null,o.createElement(R.Q,{extended:!0},(0,d.tx)("proto.prototype_panel.video"))),l,o.createElement(ew,{videoPlayback:e.videoPlayback}))};var eM=n(345204),eK=n(871043),eL=n(291549),eU=n(536070),eV=n(186606),eB=n(320953),eF=n(813009),eG=n(754210),eY=n(554326),eW=n(494604),eH=n(297638),ez=n(244052),eJ=n(94747),eX=n(330785);function e$(e){let{type:t}=e;return o.createElement("div",{className:eH.s.flex.justifyCenter.itemsCenter.$},o.createElement(ef.B,{className:eH.s.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?eJ.A:eX.A}),o.createElement("span",{className:eH.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,d.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let ej=(0,ez.ex)("prototype_scroll_horizontal_info",e$,()=>({type:"horizontal",unconstrainWidth:!0})),eZ=(0,ez.ex)("prototype_scroll_vertical_info",e$,()=>({type:"vertical",unconstrainWidth:!0})),eQ=(0,ez.ex)("prototype_scroll_marquee_info",function(){return o.createElement("div",{className:eH.s.flex.justifyCenter.itemsCenter.$},o.createElement("span",{className:eH.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,d.tx)("proto.prototype_panel.overflow_scrolling_not_available_for_frames_with_marquee")))},()=>({}));var eq=n(596224);let e0="scroll_behavior_panel--inactiveLabel--IexW8",e1="scroll_behavior_panel--inactiveLabelContainer--lQjAi";function e5(e){let{disableOverflowBehaviorItem:t,disableScrollBehaviorItem:n,dropdownShown:r,updateSelectionProperties:i}=e,l=(0,a.wA)(),[p,m]=function(){let e=(0,eY.J2)(eV.Ez5.propertiesPanelState().shownPropertiesPanels)[eV.ibQ.OVERFLOW_ITEM],t=(0,eq.cJ)(),n=(0,h.kl)("isSection"),o=(0,h.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!o]}(),[_]=(0,h.lJ)("showWontScrollWarning"),[E]=(0,h.lJ)("scrollDirection"),y=e6(),g=(0,u.GS)()?o.createElement(eW.iE,{titleTx:(0,d.tx)("proto.scroll_panel.scroll_behavior_title")}):o.createElement(x.fI,null,o.createElement(R.Q,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,d.tx)("proto.scroll_panel.scroll_behavior_title")));return p||m?o.createElement(s.k,{name:"scroll_behavior_panel"},o.createElement(x.Zk,null,g,m&&o.createElement(x.fI,null,o.createElement("div",{className:e1},o.createElement("span",{className:e0},(0,d.tx)("proto.scroll_panel.position_dropdown.position"))),o.createElement(e8,{recordingKey:c.Pt(e,"scrollBehavior"),dropdownShown:r,disabled:n})),p&&o.createElement(x.fI,null,o.createElement("div",{className:e1},o.createElement("span",{className:e0},(0,d.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),_&&o.createElement("div",{className:"scroll_behavior_panel--infoIcon--FeXbf","data-tooltip-type":H.Ib.SPECIAL,"data-tooltip":y?eQ:"HORIZONTAL"===E?ej:eZ,"data-tooltip-show-immediately":!0},o.createElement(eU.r,null)),o.createElement(e3,{className:_?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:E,onChange:e=>{l((0,I._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,v._W)(E,"MIXED")}})),i({scrollDirection:e})},disabled:t||y,recordingKey:c.Pt(e,"scrollDirection")})))):null}let e4=["NONE","HORIZONTAL","VERTICAL","BOTH"];class e3 extends o.PureComponent{render(){return o.createElement("div",{className:this.props.className},o.createElement(eL.bL,{onChange:this.props.onChange,value:this.props.property||"NONE",recordingKey:this.props.recordingKey},o.createElement(eL.l9,{"data-testid":"scroll-direction-dropdown",disabled:this.props.disabled,label:o.createElement(ey.h,null,(0,d.tx)("proto.scroll_panel.overflow_dropdown.overflow")),width:"fill"}),o.createElement(eL.mc,null,e4.map(e=>o.createElement(eL.c$,{key:e,value:e},eG.Rk.format(e))))))}}e3.displayName="ScrollDirectionDropdown";let e2=J.l6,e7=J.c$;function e8(e){let t=(0,a.wA)(),n=(0,h.kl)("scrollBehavior"),{fixedScrollingDisabled:r}=(0,eF.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),i="scroll-behavior-select",l=e.dropdownShown&&e.dropdownShown.type===i?eG.Ge:eG.wi;return o.createElement(e2,{className:"scroll_behavior_panel--scrollPosition--YAyUM",dataTestId:"scroll-behavior-dropdown",disabled:e.disabled,dispatch:t,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",dropdownShown:e.dropdownShown,formatter:l,id:i,onChange:e=>{t((0,I._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?eV.KjJ.FIXED:"STICKY_SCROLLS"===e?eV.KjJ.STICKY_SCROLLS:eV.KjJ.SCROLLS;eB.l7.user("set-scroll-behavior",()=>eV.X3B.aggressivelySetScrollBehaviorOfSelection(n)),E.Y5.commit()},property:n||"SCROLLS",recordingKey:e.recordingKey},o.createElement(e7,{value:"SCROLLS"}),o.createElement(e7,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:r}),o.createElement(e7,{value:"STICKY_SCROLLS"}))}let e6=()=>{let[e]=(0,h.lJ)("marquee");return!!(0,eK.EA)(e)};var e9=n(386160),te=n(328437),tt=n(201898),tn=n(903582),to=n(380641),ta=n(691234);function tr(){return o.createElement(f.u,{idForTests:"create-connection-hint",title:(0,d.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:tn.A,iconFallback:to.A,hintText:(0,d.t)("proto.onboarding.select_a_frame_or_object_hint")})}function ti(){return o.createElement(f.u,{idForTests:"delete-connection-hint",title:(0,d.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:te.A,iconFallback:tt.A,hintText:(0,d.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function tl(){return o.createElement(f.u,{idForTests:"play-button-hint",title:(0,d.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:ta.A,hintText:(0,d.t)("proto.onboarding.use_the_play_button_hint")})}function tc({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:a}){let r=0===a&&!e,i=0!==a&&!t,l=!n,c=o.useMemo(()=>r?p.c.CREATING_A_CONNECTION:i?p.c.REMOVING_A_CONNECTION:l?p.c.RUNNING_YOUR_PROTOTYPE:null,[r,i,l]);return c?o.createElement(m.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:c}},o.createElement(x.Zk,null,o.createElement("div",null,r&&o.createElement(tr,null),i&&o.createElement(ti,null),l&&o.createElement(tl,null)))):null}let ts=(0,m.kp)(function(e){let{dropdownShown:t,pickerShown:n,shouldUseSelectedStyleProperties:p,userFlags:m}=e,{isInstanceSelected:N,isInstanceSublayerSelected:f,isCodeInstanceSelected:P,isSectionSelected:b,isTopLevelFrameAndValidPrototypeSourceSelected:O,isValidPrototypingSourceSelected:S,numSelected:C,numTransitionsOnCurrentPage:D,numVideosSelected:w,prototypeBackgroundColor:k,prototypeDevice:R,prototypeStartingPointsInfo:M,transitionNodeID:L}=function(e){let t=e?h.pw:h.zj,n=e?h.DQ:h.fC;return{...t("prototypeDevice","prototypeBackgroundColor","numSelected","numVideosSelected","transitionNodeID","isInstanceSublayerSelected","isInstanceSelected","isCodeInstanceSelected","isValidPrototypingSourceSelected","isTopLevelFrameAndValidPrototypeSourceSelected"),...n("isSectionSelected","numTransitionsOnCurrentPage","prototypeStartingPointsInfo")}}(p),U=(0,u.GS)(),V=(0,eq.cJ)(),{bigNudgeAmount:B,smallNudgeAmount:F}=(0,y.sT)(),G=function(e){let t=(0,h.Gt)("videoMediaLoop"),n=(0,h.Gt)("videoAutoplay"),o=(0,h.Gt)("videoMuted"),a=(0,h.Gt)("numVideosSelected");if(e)return(0,r.B1)(t),(0,r.B1)(n),(0,r.B1)(o),(0,r.B1)(a),{autoplay:n,muted:o,mediaLoop:t,numVideosSelected:a}}(!!w),Y=(0,v.E7)(C),W=null!==Y&&Y>0,H=(0,a.wA)(),z=o.useCallback(()=>{H((0,I._P)({name:"Show Prototype Settings Clicked"})),g.wr()},[H]),J=o.useRef(!1),X=o.useRef(!1),$=o.useCallback(()=>{X.current=!0},[]),j=o.useCallback(()=>{X.current=!1},[]),Z=o.useRef(null),Q=o.useRef(null);o.useEffect(()=>{if(!X.current)return;if(J.current&&Z.current){Z.current.focus();return}let e=(0,_.xv)(Q.current);e&&e.focus()},[W]);let q=!(0,v.hS)(L)||l.fn((0,v.E7)(L)),ee=!V&&!!w,et=!V&&M&&M.length>0,en=V||q?null:o.createElement(tc,{dismissedCreateConnectionHint:!!m.dismissed_create_connection_hint,dismissedDeleteConnectionHint:!!m.dismissed_delete_connection_hint,dismissedPlayButtonHint:!!m.dismissed_play_button_hint,numTransitionsOnCurrentPage:D}),eo=!V&&((S??!0)||b&&(0,A.YR)());return(0,r.KF)(W||V||(0,v.hS)(R),"should not have mixed device selection"),o.createElement("div",{ref:Q,onBlur:j,onFocus:$,onPointerDown:e=>{J.current=(0,i.n4)(e.nativeEvent)}},W?o.createElement(o.Fragment,null,!V&&O&&o.createElement(e_.A,{recordingKey:c.Pt(e,"startingPointPanel")}),eo&&o.createElement(eu.y7,null),!P&&o.createElement(e5,{dropdownShown:t,disableOverflowBehaviorItem:!!(N||f),disableScrollBehaviorItem:!!f,recordingKey:c.Pt(e,"scrollBehaviorPanel"),updateSelectionProperties:E.Y5.updateSelectionProperties}),ee&&o.createElement(ex,{updateSelectionProperties:E.Y5.updateSelectionProperties,dispatch:H,videoPlayback:G,recordingKey:c.Pt(e,"prototypeVideoPlaybackPanel")}),!V&&o.createElement(s.k,{name:"show_prototype_settings_panel"},o.createElement(x.Zk,{className:U?e9.rq:void 0},o.createElement(eM.z,{onClick:z,recordingKey:c.Pt(e,"prototypeSettingsButton")},(0,d.tx)("proto.menu.show_prototype_settings"))))):o.createElement(o.Fragment,null,!V&&o.createElement(ea,{key:"device-panel",bigNudgeAmount:B,dispatch:H,dropdownShown:t,isUI3:U,pickerShown:n,prototypeBackgroundColor:k,prototypeDevice:(0,I.Qx)(R),recordingKey:"devicePanel",smallNudgeAmount:F,titleRef:Z}),!U&&o.createElement(K,{recordingKey:c.Pt(e,"backgroundPanel"),prototypeBackgroundColor:k,pickerShown:n,dispatch:H}),et&&o.createElement(em.A,null)),en,o.createElement(T.Mw,{panelName:T.ON.PROTOTYPE}),W&&o.createElement("div",null))},N.e0.PROTOTYPE_PANEL)},815934:(e,t,n)=>{n.d(t,{B:()=>I});var o=n(848318),a=n(301168),r=n(62034),i=n(361765),l=n(781239),c=n(41830),s=n(156137),d=n(401970),p=n(967688),m=n(788903),u=n(507621),_=n(17753),E=n(483157),y=n(614892),g=n(212679),v=n(821561);function h(e){return e.modalShown?.type===g.y.type||e.modalShown?.prevModal?.type===g.y.type}function I(){let e=(0,u.n)({type:g.y}),t=(0,o.useCallback)(()=>{e()},[e]),n=(0,a.d4)(h),I=0===(0,m.Rb)().length&&!n;return o.createElement(s.k,{name:"local_variables_panel"},o.createElement(y.Zk,null,o.createElement(y.fI,{className:I?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},o.createElement(E.x,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,p.tx)("variables.local_variables_panel.local_variables_title")),o.createElement(c.E,{name:"variables_modal_button"},o.createElement(r.d,{onClick:t,recordingKey:(0,l.Pt)("localVariablesPanel","variablesModalButton"),"aria-expanded":n,"aria-label":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,p.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":_.Ib.TEXT}},o.createElement(d.U,{svg:v.A},o.createElement(i.A,null)))))))}},930229:(e,t,n)=>{n.d(t,{T:()=>a});var o=n(749214);let a=(0,n(848318).memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.003 7.375A5.5 5.5 0 0 1 16.61 9.5H14a.5.5 0 0 0 0 1h3.5a.5.5 0 0 0 .5-.5V6.5a.5.5 0 0 0-1 0v1.847a6.5 6.5 0 1 0-.128 8.456.5.5 0 1 0-.75-.662 5.5 5.5 0 1 1-6.119-8.766",clipRule:"evenodd"})})})}}]);

//# debugId=3ae0e927-7cf1-5d9a-8f5b-ef80c9eaf49b

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/5918dee93e3dda59b6687cd39eeabb36fbd00207/8163-9e2fa9375960e720.min.js.map