
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="07c58035-66a0-5db4-814c-0295a827352e")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1053],{675182:(e,t,n)=>{"use strict";var i=n(431847).every;function r(e,t,n,i){var r=!0;return n!==i.length-1&&(r=t.calledBefore(i[n+1])),void 0===e[t.id]&&(e[t.id]=0),e[t.id]<t.callCount&&!!r&&(e[t.id]+=1,!0)}e.exports=function(e){var t=arguments.length>1?arguments:e;return i(t,r.bind(null,{}))}},666078:(e,t,n)=>{"use strict";var i=n(588764);e.exports=function(e){return e.constructor&&e.constructor.name||"function"==typeof e.constructor&&i(e.constructor)||null}},437003:(e,t)=>{"use strict";t.wrap=function(e,n){var i=function(){return t.printWarning(n),e.apply(this,arguments)};return e.prototype&&(i.prototype=e.prototype),i},t.defaultMsg=function(e,t){return`${e}.${t} is deprecated and will be removed from the public API in a future version of ${e}.`},t.printWarning=function(e){"object"==typeof process&&process.emitWarning?process.emitWarning(e):console.info?console.info(e):console.log(e)}},712155:e=>{"use strict";e.exports=function(e,t){var n=!0;try{e.forEach(function(){if(!t.apply(this,arguments))throw Error()})}catch(e){n=!1}return n}},588764:e=>{"use strict";e.exports=function(e){if(!e)return"";try{return e.displayName||e.name||(String(e).match(/function ([^\s(]+)/)||[])[1]}catch(e){return""}}},639705:(e,t,n)=>{"use strict";var i;i=void 0!==n.g?n.g:"undefined"!=typeof window?window:self,e.exports=i},200448:(e,t,n)=>{"use strict";e.exports={global:n(639705),calledInOrder:n(675182),className:n(666078),deprecated:n(437003),every:n(712155),functionName:n(588764),orderByFirstCall:n(244512),prototypes:n(118410),typeOf:n(491162),valueToString:n(171449)}},244512:(e,t,n)=>{"use strict";var i=n(431847).sort,r=n(431847).slice;function o(e,t){var n=e.getCall(0),i=t.getCall(0);return(n&&n.callId||-1)<(i&&i.callId||-1)?-1:1}e.exports=function(e){return i(r(e),o)}},431847:(e,t,n)=>{"use strict";var i=n(593205);e.exports=i(Array.prototype)},593205:(e,t,n)=>{"use strict";var i=Function.call,r=n(37392),o=["size","caller","callee","arguments"];r&&o.push("__proto__"),e.exports=function(e){return Object.getOwnPropertyNames(e).reduce(function(t,n){return o.includes(n)||"function"!=typeof e[n]||(t[n]=i.bind(e[n])),t},Object.create(null))}},536896:(e,t,n)=>{"use strict";var i=n(593205);e.exports=i(Function.prototype)},118410:(e,t,n)=>{"use strict";e.exports={array:n(431847),function:n(536896),map:n(689952),object:n(6887),set:n(90618),string:n(784081)}},689952:(e,t,n)=>{"use strict";var i=n(593205);e.exports=i(Map.prototype)},6887:(e,t,n)=>{"use strict";var i=n(593205);e.exports=i(Object.prototype)},90618:(e,t,n)=>{"use strict";var i=n(593205);e.exports=i(Set.prototype)},784081:(e,t,n)=>{"use strict";var i=n(593205);e.exports=i(String.prototype)},37392:e=>{"use strict";let t;try{t=!1}catch(e){t=!0}e.exports=t},491162:(e,t,n)=>{"use strict";var i=n(939337);e.exports=function(e){return i(e).toLowerCase()}},171449:e=>{"use strict";e.exports=function(e){return e&&e.toString?e.toString():String(e)}},283887:(e,t,n)=>{"use strict";let i;let r=n(200448).global;try{i=n(289702)}catch(e){}let o=function e(t){let o;let s=function(){},l=function(){return[]},a=t.setTimeout(s,0),h="object"==typeof a,c=t.process&&"function"==typeof t.process.hrtime,u=c&&"function"==typeof t.process.hrtime.bigint,d=t.process&&"function"==typeof t.process.nextTick,f=t.process&&n(620008).promisify,p=t.performance&&"function"==typeof t.performance.now,g=t.Performance&&(typeof t.Performance).match(/^(function|object)$/),m=t.performance&&t.performance.constructor&&t.performance.constructor.prototype,v=t.hasOwnProperty("queueMicrotask"),y=t.requestAnimationFrame&&"function"==typeof t.requestAnimationFrame,b=t.cancelAnimationFrame&&"function"==typeof t.cancelAnimationFrame,w=t.requestIdleCallback&&"function"==typeof t.requestIdleCallback,_=t.cancelIdleCallback&&"function"==typeof t.cancelIdleCallback,x=t.setImmediate&&"function"==typeof t.setImmediate,k=t.Intl&&"object"==typeof t.Intl;t.clearTimeout(a);let S=t.Date,C=t.Intl,T=1e12,A=!1;function O(e,t){e.loopLimit&&t===e.loopLimit-1&&(A=!0)}function E(e){let t;if(!e)return 0;let n=e.split(":"),i=n.length,r=i,o=0;if(i>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw Error("tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits");for(;r--;){if((t=parseInt(n[r],10))>=60)throw Error(`Invalid time ${e}`);o+=t*Math.pow(60,i-r-1)}return 1e3*o}function M(e){if(!e)return 0;if("function"==typeof e.getTime)return e.getTime();if("number"==typeof e)return e;throw TypeError("now should be milliseconds since UNIX epoch")}function D(e,t){let n=Error(`Aborting after running ${e.loopLimit} timers, assuming an infinite loop!`);if(!t.error)return n;let i=/target\.*[<|(|[].*?[>|\]|)]\s*/,r=new RegExp(String(Object.keys(e).join("|")));h&&(r=RegExp(`\\s+at (Object\\.)?(?:${Object.keys(e).join("|")})\\s+`));let o=-1;t.error.stack.split("\n").some(function(e,t){return e.match(i)?(o=t,!0):e.match(r)?(o=t,!1):o>=0});let s=`${n}
${t.type||"Microtask"} - ${t.func.name||"anonymous"}
${t.error.stack.split("\n").slice(o+1).join("\n")}`;try{Object.defineProperty(n,"stack",{value:s})}catch(e){}return n}function P(e,t){let n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.now?e.now=function(){return e.clock.now}:delete e.now,t.toSource?e.toSource=function(){return t.toSource()}:delete e.toSource,e.toString=function(){return t.toString()},e.prototype=t.prototype,e.parse=t.parse,e.UTC=t.UTC,e.prototype.toUTCString=t.prototype.toUTCString,e.isFake=!0,e}function N(e){if(e.jobs){for(let t=0;t<e.jobs.length;t++){let n=e.jobs[t];if(n.func.apply(null,n.args),O(e,t),e.loopLimit&&t>e.loopLimit)throw D(e,n)}A=!1,e.jobs=[]}}function L(e,t){if(void 0===t.func)throw Error("Callback must be provided to timer calls");if(h&&"function"!=typeof t.func)throw TypeError(`[ERR_INVALID_CALLBACK]: Callback must be a function. Received ${t.func} of type ${typeof t.func}`);if(A&&(t.error=Error()),t.type=t.immediate?"Immediate":"Timeout",t.hasOwnProperty("delay")){var n;"number"!=typeof t.delay&&(t.delay=parseInt(t.delay,10)),n=t.delay,(Number.isFinite?Number.isFinite(n):isFinite(n))||(t.delay=0),t.delay=t.delay>0x7fffffff?1:t.delay,t.delay=Math.max(0,t.delay)}if(t.hasOwnProperty("interval")&&(t.type="Interval",t.interval=t.interval>0x7fffffff?1:t.interval),t.hasOwnProperty("animation")&&(t.type="AnimationFrame",t.animation=!0),t.hasOwnProperty("idleCallback")&&(t.type="IdleCallback",t.idleCallback=!0),e.timers||(e.timers={}),t.id=T++,t.createdAt=e.now,t.callAt=e.now+(parseInt(t.delay)||(e.duringTick?1:0)),e.timers[t.id]=t,h){let n={refed:!0,ref:function(){return this.refed=!0,n},unref:function(){return this.refed=!1,n},hasRef:function(){return this.refed},refresh:function(){return t.callAt=e.now+(parseInt(t.delay)||(e.duringTick?1:0)),e.timers[t.id]=t,n},[Symbol.toPrimitive]:function(){return t.id}};return n}return t.id}function R(e,t){return e.callAt<t.callAt?-1:e.callAt>t.callAt?1:e.immediate&&!t.immediate?-1:!e.immediate&&t.immediate?1:e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:e.id<t.id?-1:e.id>t.id?1:void 0}function I(e,t,n){let i;let r=e.timers,o=null;for(i in r)if(r.hasOwnProperty(i)){var s;(s=r[i])&&s.callAt>=t&&s.callAt<=n&&(!o||1===R(o,r[i]))&&(o=r[i])}return o}function F(e){let t;let n=e.timers,i=null;for(t in n)n.hasOwnProperty(t)&&(!i||1===R(i,n[t]))&&(i=n[t]);return i}function z(e){let t;let n=e.timers,i=null;for(t in n)n.hasOwnProperty(t)&&(!i||-1===R(i,n[t]))&&(i=n[t]);return i}function B(e,t){("number"==typeof t.interval?e.timers[t.id].callAt+=t.interval:delete e.timers[t.id],"function"==typeof t.func)?t.func.apply(null,t.args):(0,eval)(t.func)}function W(e){return"IdleCallback"===e||"AnimationFrame"===e?`cancel${e}`:`clear${e}`}let j=(o=0,function(e){o++||console.warn(e)});function H(e,t,n){if(!t)return;e.timers||(e.timers={});let i=Number(t);if(Number.isNaN(i)||i<1e12){let i=W(n);if(!0===e.shouldClearNativeTimers){let n=e[`_${i}`];return"function"==typeof n?n(t):void 0}j(`FakeTimers: ${i} was invoked to clear a native timer instead of one created by this library.
To automatically clean-up native timers, use \`shouldClearNativeTimers\`.`)}if(e.timers.hasOwnProperty(i)){let t=e.timers[i];if(t.type===n||"Timeout"===t.type&&"Interval"===n||"Interval"===t.type&&"Timeout"===n)delete e.timers[i];else{var r;let e=W(n),i="IdleCallback"===(r=t.type)||"AnimationFrame"===r?`request${r}`:`set${r}`;throw Error(`Cannot clear timer: timer created with ${i}() but cleared with ${e}()`)}}}function V(e,t,n){if(n[t].hadOwnProperty=Object.prototype.hasOwnProperty.call(e,t),n[`_${t}`]=e[t],"Date"===t){let i=P(n[t],e[t]);e[t]=i}else if("Intl"===t)e[t]=n[t];else if("performance"===t){let i=Object.getOwnPropertyDescriptor(e,t);if(i&&i.get&&!i.set){Object.defineProperty(n,`_${t}`,i);let r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,r)}else e[t]=n[t]}else e[t]=function(){return n[t].apply(n,arguments)},Object.defineProperties(e[t],Object.getOwnPropertyDescriptors(n[t]));e[t].clock=n}function U(e,t){e.tick(t)}let $={setTimeout:t.setTimeout,clearTimeout:t.clearTimeout,setInterval:t.setInterval,clearInterval:t.clearInterval,Date:t.Date};x&&($.setImmediate=t.setImmediate,$.clearImmediate=t.clearImmediate),c&&($.hrtime=t.process.hrtime),d&&($.nextTick=t.process.nextTick),p&&($.performance=t.performance),y&&($.requestAnimationFrame=t.requestAnimationFrame),v&&($.queueMicrotask=!0),b&&($.cancelAnimationFrame=t.cancelAnimationFrame),w&&($.requestIdleCallback=t.requestIdleCallback),_&&($.cancelIdleCallback=t.cancelIdleCallback),k&&($.Intl=t.Intl);let K=t.setImmediate||t.setTimeout;function q(e,n){e=Math.floor(M(e)),n=n||1e3;let i=0,r=[0,0];if(void 0===S)throw Error("The global scope doesn't have a `Date` object (see https://github.com/sinonjs/sinon/issues/1852#issuecomment-419622780)");let o={now:e,Date:P(function e(t,n,i,r,o,s,l){if(!(this instanceof e))return new S(e.clock.now).toString();switch(arguments.length){case 0:return new S(e.clock.now);case 1:return new S(t);case 2:return new S(t,n);case 3:return new S(t,n,i);case 4:return new S(t,n,i,r);case 5:return new S(t,n,i,r,o);case 6:return new S(t,n,i,r,o,s);default:return new S(t,n,i,r,o,s,l)}},S),loopLimit:n};function s(){return 16-(o.now-e)%16}function l(t){let n=o.now-r[0]-e,s=Math.floor(n/1e3),l=(n-1e3*s)*1e6+i-r[1];if(Array.isArray(t)){if(t[1]>1e9)throw TypeError("Number of nanoseconds can't exceed a billion");let e=t[0],n=l-t[1],i=s-e;return n<0&&(n+=1e9,i-=1),[i,n]}return[s,l]}function a(){let e=l();return 1e3*e[0]+e[1]/1e6}function h(e,t,n,r){let s,l,a,h,c,u;let d="number"==typeof e?e:E(e),f=Math.floor(d),p=function(e){let t=1e6*e%1e6;return Math.floor(t<0?t+1e6:t)}(d),g=i+p,m=o.now+f;if(d<0)throw TypeError("Negative ticks are not supported");g>=1e6&&(m+=1,g-=1e6),i=g;let v=o.now,y=o.now;function b(){for(s=I(o,v,m);s&&v<=m;){if(o.timers[s.id]){v=s.callAt,o.now=s.callAt,a=o.now;try{N(o),B(o,s)}catch(e){l=l||e}if(t){K(h);return}c()}u()}if(a=o.now,N(o),a!==o.now&&(v+=o.now-a,m+=o.now-a),o.duringTick=!1,s=I(o,v,m))try{o.tick(m-o.now)}catch(e){l=l||e}else o.now=m,i=g;if(l)throw l;if(!t)return o.now;n(o.now)}return o.duringTick=!0,a=o.now,N(o),a!==o.now&&(v+=o.now-a,m+=o.now-a),h=t&&function(){try{c(),u(),b()}catch(e){r(e)}},c=function(){a!==o.now&&(v+=o.now-a,m+=o.now-a,y+=o.now-a)},u=function(){s=I(o,y,m),y=v},b()}return o.Date.clock=o,u&&(l.bigint=function(){let e=l();return BigInt(e[0])*BigInt(1e9)+BigInt(e[1])}),k&&(o.Intl=function(){let e={};return Object.getOwnPropertyNames(C).forEach(t=>e[t]=C[t]),e.DateTimeFormat=function(...t){let n=new C.DateTimeFormat(...t),i={};return["formatRange","formatRangeToParts","resolvedOptions"].forEach(e=>{i[e]=n[e].bind(n)}),["format","formatToParts"].forEach(t=>{i[t]=function(i){return n[t](i||e.clock.now)}}),i},e.DateTimeFormat.prototype=Object.create(C.DateTimeFormat.prototype),e.DateTimeFormat.supportedLocalesOf=C.DateTimeFormat.supportedLocalesOf,e}(),o.Intl.clock=o),o.requestIdleCallback=function(e,t){let n=0;o.countTimers()>0&&(n=50);let i=L(o,{func:e,args:Array.prototype.slice.call(arguments,2),delay:void 0===t?n:Math.min(t,n),idleCallback:!0});return Number(i)},o.cancelIdleCallback=function(e){return H(o,e,"IdleCallback")},o.setTimeout=function(e,t){return L(o,{func:e,args:Array.prototype.slice.call(arguments,2),delay:t})},void 0!==t.Promise&&f&&(o.setTimeout[f.custom]=function(e,n){return new t.Promise(function(t){L(o,{func:t,args:[n],delay:e})})}),o.clearTimeout=function(e){return H(o,e,"Timeout")},o.nextTick=function(e){var t;return t={func:e,args:Array.prototype.slice.call(arguments,1),error:A?Error():null},void(o.jobs||(o.jobs=[]),o.jobs.push(t))},o.queueMicrotask=function(e){return o.nextTick(e)},o.setInterval=function(e,t){return t=parseInt(t,10),L(o,{func:e,args:Array.prototype.slice.call(arguments,2),delay:t,interval:t})},o.clearInterval=function(e){return H(o,e,"Interval")},x&&(o.setImmediate=function(e){return L(o,{func:e,args:Array.prototype.slice.call(arguments,1),immediate:!0})},void 0!==t.Promise&&f&&(o.setImmediate[f.custom]=function(e){return new t.Promise(function(t){L(o,{func:t,args:[e],immediate:!0})})}),o.clearImmediate=function(e){return H(o,e,"Immediate")}),o.countTimers=function(){return Object.keys(o.timers||{}).length+(o.jobs||[]).length},o.requestAnimationFrame=function(e){return Number(L(o,{func:e,delay:s(),get args(){return[a()]},animation:!0}))},o.cancelAnimationFrame=function(e){return H(o,e,"AnimationFrame")},o.runMicrotasks=function(){N(o)},o.tick=function(e){return h(e,!1)},void 0!==t.Promise&&(o.tickAsync=function(e){return new t.Promise(function(t,n){K(function(){try{h(e,!0,t,n)}catch(e){n(e)}})})}),o.next=function(){N(o);let e=F(o);if(!e)return o.now;o.duringTick=!0;try{return o.now=e.callAt,B(o,e),N(o),o.now}finally{o.duringTick=!1}},void 0!==t.Promise&&(o.nextAsync=function(){return new t.Promise(function(e,t){K(function(){try{let n;let i=F(o);if(!i){e(o.now);return}o.duringTick=!0,o.now=i.callAt;try{B(o,i)}catch(e){n=e}o.duringTick=!1,K(function(){n?t(n):e(o.now)})}catch(e){t(e)}})})}),o.runAll=function(){let e;for(N(o),e=0;e<o.loopLimit;e++){if(!o.timers||0===Object.keys(o.timers).length)return A=!1,o.now;o.next(),O(o,e)}let t=F(o);throw D(o,t)},o.runToFrame=function(){return o.tick(s())},void 0!==t.Promise&&(o.runAllAsync=function(){return new t.Promise(function(e,t){let n=0;!function i(){K(function(){try{let r;if(N(o),n<o.loopLimit){if(!o.timers||(r=Object.keys(o.timers).length,0===r)){A=!1,e(o.now);return}o.next(),n++,i(),O(o,n);return}let s=F(o);t(D(o,s))}catch(e){t(e)}})}()})}),o.runToLast=function(){let e=z(o);return e?o.tick(e.callAt-o.now):(N(o),o.now)},void 0!==t.Promise&&(o.runToLastAsync=function(){return new t.Promise(function(e,t){K(function(){try{let t=z(o);t||(N(o),e(o.now)),e(o.tickAsync(t.callAt-o.now))}catch(e){t(e)}})})}),o.reset=function(){i=0,o.timers={},o.jobs=[],o.now=e},o.setSystemTime=function(e){let t,n;let s=M(e),l=s-o.now;for(t in r[0]=r[0]+l,r[1]=r[1]+i,o.now=s,i=0,o.timers)o.timers.hasOwnProperty(t)&&(n=o.timers[t],n.createdAt+=l,n.callAt+=l)},o.jump=function(e){let t=Math.floor("number"==typeof e?e:E(e));for(let e of Object.values(o.timers))o.now+t>e.callAt&&(e.callAt=o.now+t);o.tick(t)},p&&(o.performance=Object.create(null),o.performance.now=a),c&&(o.hrtime=l),o}return{timers:$,createClock:q,install:function(e){let n,o;if(arguments.length>1||e instanceof Date||Array.isArray(e)||"number"==typeof e)throw TypeError(`FakeTimers.install called with ${String(e)} install requires an object parameter`);if(!0===t.Date.isFake)throw TypeError("Can't install fake timers twice on the same global object.");if((e=void 0!==e?e:{}).shouldAdvanceTime=e.shouldAdvanceTime||!1,e.advanceTimeDelta=e.advanceTimeDelta||20,e.shouldClearNativeTimers=e.shouldClearNativeTimers||!1,e.target)throw TypeError("config.target is no longer supported. Use `withGlobal(target)` instead.");let a=q(e.now,e.loopLimit);if(a.shouldClearNativeTimers=e.shouldClearNativeTimers,a.uninstall=function(){return function(e,n){let r,o,s;for(o=0,s=e.methods.length;o<s;o++){if("hrtime"===(r=e.methods[o])&&t.process)t.process.hrtime=e._hrtime;else if("nextTick"===r&&t.process)t.process.nextTick=e._nextTick;else if("performance"===r){let n=Object.getOwnPropertyDescriptor(e,`_${r}`);n&&n.get&&!n.set?Object.defineProperty(t,r,n):n.configurable&&(t[r]=e[`_${r}`])}else if(t[r]&&t[r].hadOwnProperty)t[r]=e[`_${r}`];else try{delete t[r]}catch(e){}if(void 0!==e.timersModuleMethods)for(let t=0;t<e.timersModuleMethods.length;t++){let n=e.timersModuleMethods[t];i[n.methodName]=n.original}}return(!0===n.shouldAdvanceTime&&t.clearInterval(e.attachedInterval),e.methods=[],e.timers)?Object.keys(e.timers).map(function(t){return e.timers[t]}):[]}(a,e)},a.methods=e.toFake||[],0===a.methods.length&&(a.methods=Object.keys($).filter(function(e){return"nextTick"!==e&&"queueMicrotask"!==e})),!0===e.shouldAdvanceTime){let n=U.bind(null,a,e.advanceTimeDelta),i=t.setInterval(n,e.advanceTimeDelta);a.attachedInterval=i}if(a.methods.includes("performance")){let n=m?t.performance.constructor.prototype:g?t.Performance.prototype:void 0;if(n)Object.getOwnPropertyNames(n).forEach(function(e){"now"!==e&&(a.performance[e]=0===e.indexOf("getEntries")?l:s)});else if((e.toFake||[]).includes("performance"))throw ReferenceError("non-existent performance object cannot be faked")}for(t===r&&i&&(a.timersModuleMethods=[]),n=0,o=a.methods.length;n<o;n++){let e=a.methods[n];if("hrtime"===e?t.process&&"function"==typeof t.process.hrtime&&V(t.process,e,a):"nextTick"===e?t.process&&"function"==typeof t.process.nextTick&&V(t.process,e,a):V(t,e,a),void 0!==a.timersModuleMethods&&i[e]){let n=i[e];a.timersModuleMethods.push({methodName:e,original:n}),i[e]=t[e]}}return a},withGlobal:e}}(r);o.timers,o.createClock,o.install},79414:function(e,t,n){var i,r;r=function(e){var t=["N","E","A","D"];function n(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function i(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function r(e,t,n){r.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function s(e,t){s.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function l(e,t,n){l.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function a(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e}function h(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function u(e){var t=0,n=h(e);if("array"===n){e.forEach(function(e){t+=u(e)});var i="[type: array, hash: "+t+"]";return t+c(i)}if("object"===n){for(var r in e)if(e.hasOwnProperty(r)){var o="[ type: object, key: "+r+", value hash: "+u(e[r])+"]";t+=c(o)}return t}return t+c("[ type: "+n+" ; value: "+e+"]")}function d(e,t,n,i,a,c,f,p){n=n||[],f=f||[];var g,m,v,y,b=(a=a||[]).slice(0);if(null!=c){if(i){if("function"==typeof i&&i(b,c))return;if("object"==typeof i){if(i.prefilter&&i.prefilter(b,c))return;if(i.normalize){var w=i.normalize(b,c,e,t);w&&(e=w[0],t=w[1])}}}b.push(c)}"regexp"===h(e)&&"regexp"===h(t)&&(e=e.toString(),t=t.toString());var _=typeof e,x=typeof t,k="undefined"!==_||f&&f.length>0&&f[f.length-1].lhs&&Object.getOwnPropertyDescriptor(f[f.length-1].lhs,c),S="undefined"!==x||f&&f.length>0&&f[f.length-1].rhs&&Object.getOwnPropertyDescriptor(f[f.length-1].rhs,c);if(!k&&S)n.push(new o(b,t));else if(!S&&k)n.push(new s(b,e));else if(h(e)!==h(t))n.push(new r(b,e,t));else if("date"===h(e)&&e-t!=0)n.push(new r(b,e,t));else if("object"===_&&null!==e&&null!==t){for(g=f.length-1;g>-1;--g)if(f[g].lhs===e){y=!0;break}if(y)e!==t&&n.push(new r(b,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){for(p&&(e.sort(function(e,t){return u(e)-u(t)}),t.sort(function(e,t){return u(e)-u(t)})),g=t.length-1,m=e.length-1;g>m;)n.push(new l(b,g,new o(void 0,t[g--])));for(;m>g;)n.push(new l(b,m,new s(void 0,e[m--])));for(;g>=0;--g)d(e[g],t[g],n,i,b,g,f,p)}else{var C=Object.keys(e),T=Object.keys(t);for(g=0;g<C.length;++g)v=C[g],(y=T.indexOf(v))>=0?(d(e[v],t[v],n,i,b,v,f,p),T[y]=null):d(e[v],void 0,n,i,b,v,f,p);for(g=0;g<T.length;++g)(v=T[g])&&d(void 0,t[v],n,i,b,v,f,p)}f.length=f.length-1}}else e===t||"number"===_&&isNaN(e)&&isNaN(t)||n.push(new r(b,e,t))}function f(e,t,n,i,r){var o=[];if(d(e,t,o,i,null,null,null,r),n)for(var s=0;s<o.length;++s)n(o[s]);return o}function p(e,t,n,i){var r=f(e,t,i?function(e){e&&i.push(e)}:void 0,n);return i||(r.length?r:void 0)}function g(e,n,i){if(void 0===i&&n&&~t.indexOf(n.kind)&&(i=n),e&&i&&i.kind){for(var r=e,o=-1,s=i.path?i.path.length-1:0;++o<s;)void 0===r[i.path[o]]&&(r[i.path[o]]=void 0!==i.path[o+1]&&"number"==typeof i.path[o+1]?[]:{}),r=r[i.path[o]];switch(i.kind){case"A":i.path&&void 0===r[i.path[o]]&&(r[i.path[o]]=[]),function e(t,n,i){if(i.path&&i.path.length){var r,o=t[n],s=i.path.length-1;for(r=0;r<s;r++)o=o[i.path[r]];switch(i.kind){case"A":e(o[i.path[r]],i.index,i.item);break;case"D":delete o[i.path[r]];break;case"E":case"N":o[i.path[r]]=i.rhs}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":t=a(t,n);break;case"E":case"N":t[n]=i.rhs}return t}(i.path?r[i.path[o]]:r,i.index,i.item);break;case"D":delete r[i.path[o]];break;case"E":case"N":r[i.path[o]]=i.rhs}}}return n(r,i),n(o,i),n(s,i),n(l,i),Object.defineProperties(p,{diff:{value:p,enumerable:!0},orderIndependentDiff:{value:function(e,t,n,i){var r=f(e,t,i?function(e){e&&i.push(e)}:void 0,n,!0);return i||(r.length?r:void 0)},enumerable:!0},observableDiff:{value:f,enumerable:!0},orderIndependentObservableDiff:{value:function(e,t,n,i,r,o,s){return d(e,t,n,i,r,o,s,!0)},enumerable:!0},orderIndepHash:{value:u,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&f(e,t,function(i){(!n||n(e,t,i))&&g(e,t,i)})},enumerable:!0},applyChange:{value:g,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var i,r,o=e;for(i=0,r=n.path.length-1;i<r;i++)void 0===o[n.path[i]]&&(o[n.path[i]]={}),o=o[n.path[i]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){var r,o=t[n],s=i.path.length-1;for(r=0;r<s;r++)o=o[i.path[r]];switch(i.kind){case"A":e(o[i.path[r]],i.index,i.item);break;case"D":case"E":o[i.path[r]]=i.lhs;break;case"N":delete o[i.path[r]]}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":case"E":t[n]=i.lhs;break;case"N":t=a(t,n)}return t}(o[n.path[i]],n.index,n.item);break;case"D":case"E":o[n.path[i]]=n.lhs;break;case"N":delete o[n.path[i]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),p.DeepDiff=p,e&&(e.DeepDiff=p),p}(this),void 0!==(i=(function(){return r}).call(t,n,t,e))&&(e.exports=i)},488412:(e,t,n)=>{"use strict";n.d(t,{AO:()=>u,Fu:()=>f,TM:()=>T,sC:()=>O,yJ:()=>d,zR:()=>w});var i=n(113065),r=n(861193),o=n(987701),s=n(258635);function l(e){return"/"===e.charAt(0)?e:"/"+e}function a(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))?e.substr(t.length):e}function c(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function u(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function d(e,t,n,o){var s,l,a,h,c,u;return"string"==typeof e?(a="",h="",-1!==(c=(l=e||"/").indexOf("#"))&&(h=l.substr(c),l=l.substr(0,c)),-1!==(u=l.indexOf("?"))&&(a=l.substr(u),l=l.substr(0,u)),(s={pathname:l,search:"?"===a?"":a,hash:"#"===h?"":h}).state=t):(void 0===(s=(0,i.A)({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t)),n&&(s.key=n),o?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=(0,r.A)(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s}function f(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,o.A)(e.state,t.state)}function p(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof i?i(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter(function(e){return e!==i})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach(function(e){return e.apply(void 0,n)})}}}var g=!!("undefined"!=typeof window&&window.document&&window.document.createElement);function m(e,t){t(window.confirm(e))}var v="popstate",y="hashchange";function b(){try{return window.history.state||{}}catch(e){return{}}}function w(e){void 0===e&&(e={}),g||(0,s.A)(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=-1!==window.navigator.userAgent.indexOf("Trident"),a=e,f=a.forceRefresh,w=void 0!==f&&f,_=a.getUserConfirmation,x=void 0===_?m:_,k=a.keyLength,S=void 0===k?6:k,C=e.basename?c(l(e.basename)):"";function T(e){var t=e||{},n=t.key,i=t.state,r=window.location,o=r.pathname+r.search+r.hash;return C&&(o=h(o,C)),d(o,i,n)}function A(){return Math.random().toString(36).substr(2,S)}var O=p();function E(e){(0,i.A)(j,e),j.length=n.length,O.notifyListeners(j.location,j.action)}function M(e){void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")||N(T(e.state))}function D(){N(T(b()))}var P=!1;function N(e){P?(P=!1,E()):O.confirmTransitionTo(e,"POP",x,function(t){var n,i,r,o;t?E({action:"POP",location:e}):(n=j.location,-1===(i=R.indexOf(n.key))&&(i=0),-1===(r=R.indexOf(e.key))&&(r=0),(o=i-r)&&(P=!0,F(o)))})}var L=T(b()),R=[L.key];function I(e){return C+u(e)}function F(e){n.go(e)}var z=0;function B(e){1===(z+=e)&&1===e?(window.addEventListener(v,M),o&&window.addEventListener(y,D)):0===z&&(window.removeEventListener(v,M),o&&window.removeEventListener(y,D))}var W=!1,j={length:n.length,action:"POP",location:L,createHref:I,push:function(e,t){var i="PUSH",o=d(e,t,A(),j.location);O.confirmTransitionTo(o,i,x,function(e){if(e){var t=I(o),s=o.key,l=o.state;if(r){if(n.pushState({key:s,state:l},null,t),w)window.location.href=t;else{var a=R.indexOf(j.location.key),h=R.slice(0,a+1);h.push(o.key),R=h,E({action:i,location:o})}}else window.location.href=t}})},replace:function(e,t){var i="REPLACE",o=d(e,t,A(),j.location);O.confirmTransitionTo(o,i,x,function(e){if(e){var t=I(o),s=o.key,l=o.state;if(r){if(n.replaceState({key:s,state:l},null,t),w)window.location.replace(t);else{var a=R.indexOf(j.location.key);-1!==a&&(R[a]=o.key),E({action:i,location:o})}}else window.location.replace(t)}})},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(e){void 0===e&&(e=!1);var t=O.setPrompt(e);return W||(B(1),W=!0),function(){return W&&(W=!1,B(-1)),t()}},listen:function(e){var t=O.appendListener(e);return B(1),function(){B(-1),t()}}};return j}var _="hashchange",x={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+a(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:a,decodePath:l},slash:{encodePath:l,decodePath:l}};function k(e){var t=e.indexOf("#");return -1===t?e:e.slice(0,t)}function S(){var e=window.location.href,t=e.indexOf("#");return -1===t?"":e.substring(t+1)}function C(e){window.location.replace(k(window.location.href)+"#"+e)}function T(e){void 0===e&&(e={}),g||(0,s.A)(!1);var t=window.history;window.navigator.userAgent.indexOf("Firefox");var n=e,r=n.getUserConfirmation,o=void 0===r?m:r,a=n.hashType,f=e.basename?c(l(e.basename)):"",v=x[void 0===a?"slash":a],y=v.encodePath,b=v.decodePath;function w(){var e=b(S());return f&&(e=h(e,f)),d(e)}var T=p();function A(e){(0,i.A)(B,e),B.length=t.length,T.notifyListeners(B.location,B.action)}var O=!1,E=null;function M(){var e=S(),t=y(e);if(e!==t)C(t);else{var n=w(),i=B.location;if(!O&&i.pathname===n.pathname&&i.search===n.search&&i.hash===n.hash||E===u(n))return;E=null,O?(O=!1,A()):T.confirmTransitionTo(n,"POP",o,function(e){var t,i,r,o;e?A({action:"POP",location:n}):(t=B.location,-1===(i=L.lastIndexOf(u(t)))&&(i=0),-1===(r=L.lastIndexOf(u(n)))&&(r=0),(o=i-r)&&(O=!0,R(o)))})}}var D=S(),P=y(D);D!==P&&C(P);var N=w(),L=[u(N)];function R(e){t.go(e)}var I=0;function F(e){1===(I+=e)&&1===e?window.addEventListener(_,M):0===I&&window.removeEventListener(_,M)}var z=!1,B={length:t.length,action:"POP",location:N,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=k(window.location.href)),n+"#"+y(f+u(e))},push:function(e,t){var n="PUSH",i=d(e,void 0,void 0,B.location);T.confirmTransitionTo(i,n,o,function(e){if(e){var t=u(i),r=y(f+t);if(S()!==r){E=t,window.location.hash=r;var o=L.lastIndexOf(u(B.location)),s=L.slice(0,o+1);s.push(t),L=s,A({action:n,location:i})}else A()}})},replace:function(e,t){var n="REPLACE",i=d(e,void 0,void 0,B.location);T.confirmTransitionTo(i,n,o,function(e){if(e){var t=u(i),r=y(f+t);S()!==r&&(E=t,C(r));var o=L.indexOf(u(B.location));-1!==o&&(L[o]=t),A({action:n,location:i})}})},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return z||(F(1),z=!0),function(){return z&&(z=!1,F(-1)),t()}},listen:function(e){var t=T.appendListener(e);return F(1),function(){F(-1),t()}}};return B}function A(e,t,n){return Math.min(Math.max(e,t),n)}function O(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,o=void 0===r?["/"]:r,s=t.initialIndex,l=t.keyLength,a=void 0===l?6:l,h=p();function c(e){(0,i.A)(y,e),y.length=y.entries.length,h.notifyListeners(y.location,y.action)}function f(){return Math.random().toString(36).substr(2,a)}var g=A(void 0===s?0:s,0,o.length-1),m=o.map(function(e){return"string"==typeof e?d(e,void 0,f()):d(e,void 0,e.key||f())});function v(e){var t=A(y.index+e,0,y.entries.length-1),i=y.entries[t];h.confirmTransitionTo(i,"POP",n,function(e){e?c({action:"POP",location:i,index:t}):c()})}var y={length:m.length,action:"POP",location:m[g],index:g,entries:m,createHref:u,push:function(e,t){var i="PUSH",r=d(e,t,f(),y.location);h.confirmTransitionTo(r,i,n,function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),c({action:i,location:r,index:t,entries:n})}})},replace:function(e,t){var i="REPLACE",r=d(e,t,f(),y.location);h.confirmTransitionTo(r,i,n,function(e){e&&(y.entries[y.index]=r,c({action:i,location:r}))})},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&(e=!1),h.setPrompt(e)},listen:function(e){return h.appendListener(e)}};return y}},784541:(e,t,n)=>{var i=n(127375),r=n(378777),o=n(826509),s=n(257816),l=n(91089),a=n(360087),h=Math.min;e.exports=function(e,t,n){for(var c=n?o:r,u=e[0].length,d=e.length,f=d,p=Array(d),g=1/0,m=[];f--;){var v=e[f];f&&t&&(v=s(v,l(t))),g=h(v.length,g),p[f]=!n&&(t||u>=120&&v.length>=120)?new i(f&&v):void 0}v=e[0];var y=-1,b=p[0];e:for(;++y<u&&m.length<g;){var w=v[y],_=t?t(w):w;if(w=n||0!==w?w:0,!(b?a(b,_):c(m,_,n))){for(f=d;--f;){var x=p[f];if(!(x?a(x,_):c(e[f],_,n)))continue e}b&&b.push(_),m.push(w)}}return m}},778985:(e,t,n)=>{var i=n(599769);e.exports=function(e){return i(e)?e:[]}},73823:(e,t,n)=>{var i=n(410028),r=n(104014);e.exports=function(e,t){return i(r(e,t),1)}},469227:(e,t,n)=>{var i=n(257816),r=n(784541),o=n(228314),s=n(778985),l=o(function(e){var t=i(e,s);return t.length&&t[0]===e[0]?r(t):[]});e.exports=l},77708:(e,t,n)=>{var i=n(754271)("toUpperCase");e.exports=i},575314:()=>{!function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},i={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:i},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:i},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:i.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:i.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],o=i.variable[1].inside,s=0;s<r.length;s++)o[r[s]]=e.languages.bash[r[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash}(Prism)},592302:()=>{Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete Prism.languages.go["class-name"]},17831:()=>{Prism.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:Prism.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},Prism.hooks.add("after-tokenize",function(e){if("graphql"===e.language)for(var t=e.tokens.filter(function(e){return"string"!=typeof e&&"comment"!==e.type&&"scalar"!==e.type}),n=0;n<t.length;){var i=t[n++];if("keyword"===i.type&&"mutation"===i.content){var r=[];if(c(["definition-mutation","punctuation"])&&"("===t[n+1].content){n+=2;var o=u(/^\($/,/^\)$/);if(-1===o)continue;for(;n<o;n++){var s=t[n+0];"variable"===s.type&&(d(s,"variable-input"),r.push(s.content))}n=o+1}if(c(["punctuation","property-query"])&&"{"===t[n+0].content&&(d(t[++n+0],"property-mutation"),r.length>0)){var l=u(/^\{$/,/^\}$/);if(-1===l)continue;for(var a=n;a<l;a++){var h=t[a];"variable"===h.type&&r.indexOf(h.content)>=0&&d(h,"variable-input")}}}}function c(e,i){i=i||0;for(var r=0;r<e.length;r++){var o=t[n+(r+i)];if(!o||o.type!==e[r])return!1}return!0}function u(e,i){for(var r=1,o=n;o<t.length;o++){var s=t[o],l=s.content;if("punctuation"===s.type&&"string"==typeof l){if(e.test(l))r++;else if(i.test(l)&&0==--r)return o}}return -1}function d(e,t){var n=e.alias;n?Array.isArray(n)||(e.alias=n=[n]):e.alias=n=[],n.push(t)}})},490246:()=>{Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json},588635:()=>{!function(e){var t=e.util.clone(e.languages.javascript),n=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,i=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,r=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function o(e,t){return RegExp(e=e.replace(/<S>/g,function(){return n}).replace(/<BRACES>/g,function(){return i}).replace(/<SPREAD>/g,function(){return r}),t)}r=o(r).source,e.languages.jsx=e.languages.extend("markup",t),e.languages.jsx.tag.pattern=o(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),e.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,e.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,e.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,e.languages.jsx.tag.inside.comment=t.comment,e.languages.insertBefore("inside","attr-name",{spread:{pattern:o(/<SPREAD>/.source),inside:e.languages.jsx}},e.languages.jsx.tag),e.languages.insertBefore("inside","special-attr",{script:{pattern:o(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:e.languages.jsx}}},e.languages.jsx.tag);var s=function(e){return e?"string"==typeof e?e:"string"==typeof e.content?e.content:e.content.map(s).join(""):""},l=function(t){for(var n=[],i=0;i<t.length;i++){var r=t[i],o=!1;if("string"!=typeof r&&("tag"===r.type&&r.content[0]&&"tag"===r.content[0].type?"</"===r.content[0].content[0].content?n.length>0&&n[n.length-1].tagName===s(r.content[0].content[1])&&n.pop():"/>"===r.content[r.content.length-1].content||n.push({tagName:s(r.content[0].content[1]),openedBraces:0}):n.length>0&&"punctuation"===r.type&&"{"===r.content?n[n.length-1].openedBraces++:n.length>0&&n[n.length-1].openedBraces>0&&"punctuation"===r.type&&"}"===r.content?n[n.length-1].openedBraces--:o=!0),(o||"string"==typeof r)&&n.length>0&&0===n[n.length-1].openedBraces){var a=s(r);i<t.length-1&&("string"==typeof t[i+1]||"plain-text"===t[i+1].type)&&(a+=s(t[i+1]),t.splice(i+1,1)),i>0&&("string"==typeof t[i-1]||"plain-text"===t[i-1].type)&&(a=s(t[i-1])+a,t.splice(i-1,1),i--),t[i]=new e.Token("plain-text",a,null,a)}r.content&&"string"!=typeof r.content&&l(r.content)}};e.hooks.add("after-tokenize",function(e){("jsx"===e.language||"tsx"===e.language)&&l(e.tokens)})}(Prism)},204493:()=>{!function(e){e.languages.kotlin=e.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete e.languages.kotlin["class-name"];var t={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:e.languages.kotlin}};e.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:t},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:t},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete e.languages.kotlin.string,e.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),e.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),e.languages.kt=e.languages.kotlin,e.languages.kts=e.languages.kotlin}(Prism)},797612:()=>{!function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var n="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",i=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+n+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+i),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+i+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+n),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+n),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(Prism)},673829:()=>{!function(e){var t=e.util.clone(e.languages.typescript);e.languages.tsx=e.languages.extend("jsx",t),delete e.languages.tsx.parameter,delete e.languages.tsx["literal-property"];var n=e.languages.tsx.tag;n.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+n.pattern.source+")",n.pattern.flags),n.lookbehind=!0}(Prism)},66325:(e,t,n)=>{"use strict";n.d(t,{B6:()=>C,Ix:()=>v,W5:()=>D,XZ:()=>m,dO:()=>A,g:()=>M,qh:()=>T,rd:()=>x,tW:()=>_,zy:()=>E});var i=n(149444),r=n(848318),o=n(223108),s=n.n(o),l=n(488412),a=n(258635),h=n(541408),c=n(353719),u=n.n(c);n(53635),n(114227),n(833871);var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},f=r.createContext||function(e,t){var n,o,l,a="__create-react-context-"+(d[n="__global_unique_id__"]=(d[n]||0)+1)+"__",h=function(e){function n(){for(var t,n,i,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).emitter=(n=t.props.value,i=[],{on:function(e){i.push(e)},off:function(e){i=i.filter(function(t){return t!==e})},get:function(){return n},set:function(e,t){n=e,i.forEach(function(e){return e(n,t)})}}),t}(0,i.A)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,i=this.props.value,r=e.value;(i===r?0!==i||1/i==1/r:i!=i&&r!=r)?n=0:0!=(n=("function"==typeof t?t(i,r):0x3fffffff)|0)&&this.emitter.set(e.value,n)}},r.render=function(){return this.props.children},n}(r.Component);h.childContextTypes=((o={})[a]=s().object.isRequired,o);var c=function(t){function n(){for(var e,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){((0|e.observedBits)&n)!=0&&e.setState({value:e.getValue()})},e}(0,i.A)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?0x3fffffff:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?0x3fffffff:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){var e;return(Array.isArray(e=this.props.children)?e[0]:e)(this.state.value)},n}(r.Component);return c.contextTypes=((l={})[a]=s().object,l),{Provider:h,Consumer:c}},p=function(e){var t=f();return t.displayName=e,t},g=p("Router-History"),m=p("Router"),v=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._pendingLocation=e})),n}(0,i.A)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(t){e._isMounted&&e.setState({location:t})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return r.createElement(m.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(g.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);r.Component;var y=function(e){function t(){return e.apply(this,arguments)||this}(0,i.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(r.Component),b={},w=0;function _(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:(function(e){if(b[e])return b[e];var t=u().compile(e);return w<1e4&&(b[e]=t,w++),t})(e)(t,{pretty:!0})}function x(e){var t=e.computedMatch,n=e.to,i=e.push,o=void 0!==i&&i;return r.createElement(m.Consumer,null,function(e){e||(0,a.A)(!1);var i=e.history,s=e.staticContext,c=o?i.push:i.replace,u=(0,l.yJ)(t?"string"==typeof n?_(n,t.params):(0,h.A)({},n,{pathname:_(n.pathname,t.params)}):n);return s?(c(u),null):r.createElement(y,{onMount:function(){c(u)},onUpdate:function(e,t){var n=(0,l.yJ)(t.to);(0,l.Fu)(n,(0,h.A)({},u,{key:n.key}))||c(u)},to:n})})}var k={},S=0;function C(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,o=void 0!==r&&r,s=n.strict,l=void 0!==s&&s,a=n.sensitive,h=void 0!==a&&a;return[].concat(i).reduce(function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=k[n]||(k[n]={});if(i[e])return i[e];var r=[],o={regexp:u()(e,r,t),keys:r};return S<1e4&&(i[e]=o,S++),o}(n,{end:o,strict:l,sensitive:h}),r=i.regexp,s=i.keys,a=r.exec(e);if(!a)return null;var c=a[0],d=a.slice(1),f=e===c;return o&&!f?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:f,params:s.reduce(function(e,t,n){return e[t.name]=d[n],e},{})}},null)}var T=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this;return r.createElement(m.Consumer,null,function(t){t||(0,a.A)(!1);var n,i=e.props.location||t.location,o=e.props.computedMatch?e.props.computedMatch:e.props.path?C(i.pathname,e.props):t.match,s=(0,h.A)({},t,{location:i,match:o}),l=e.props,c=l.children,u=l.component,d=l.render;return Array.isArray(c)&&(n=c,0===r.Children.count(n))&&(c=null),r.createElement(m.Provider,{value:s},s.match?c?"function"==typeof c?c(s):c:u?r.createElement(u,s):d?d(s):null:"function"==typeof c?c(s):null)})},t}(r.Component);r.Component;var A=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this;return r.createElement(m.Consumer,null,function(t){t||(0,a.A)(!1);var n,i,o=e.props.location||t.location;return r.Children.forEach(e.props.children,function(e){if(null==i&&r.isValidElement(e)){n=e;var s=e.props.path||e.props.from;i=s?C(o.pathname,(0,h.A)({},e.props,{path:s})):t.match}}),i?r.cloneElement(n,{location:o,computedMatch:i}):null})},t}(r.Component),O=r.useContext;function E(){return O(m).location}function M(){var e=O(m).match;return e?e.params:{}}function D(e){var t=E(),n=O(m).match;return e?C(t.pathname,e):n}},889276:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var i=n(848318),r=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e},h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}(e,t);throw TypeError("Invalid attempt to destructure non-iterable instance")},c=void 0;"undefined"!=typeof window?c=window:"undefined"!=typeof self?c=self:c=n.g;var u=null,d=null,f=c.clearTimeout,p=c.setTimeout,g=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame,m=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame;null==g||null==m?(u=f,d=function(e){return p(e,20)}):(u=function(e){var t=h(e,2),n=t[0],i=t[1];g(n),f(i)},d=function(e){var t=m(function(){f(n),e()}),n=p(function(){g(t),e()},20);return[t,n]});var v=function(e){function t(){r(this,t);for(var e,n,i,o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.state={height:i.props.defaultHeight||0,width:i.props.defaultWidth||0},i._onResize=function(){var e=i.props,t=e.disableHeight,n=e.disableWidth,r=e.onResize;if(i._parentNode){var o=i._parentNode.offsetHeight||0,s=i._parentNode.offsetWidth||0,l=window.getComputedStyle(i._parentNode)||{},a=parseInt(l.paddingLeft,10)||0,h=parseInt(l.paddingRight,10)||0,c=parseInt(l.paddingTop,10)||0,u=parseInt(l.paddingBottom,10)||0,d=o-c-u,f=s-a-h;(t||i.state.height===d)&&(n||i.state.width===f)||(i.setState({height:o-c-u,width:s-a-h}),r({height:o,width:s}))}},i._setRef=function(e){i._autoSizer=e},a(i,n)}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t=void 0,n=void 0,i=void 0,r=void 0,o=void 0,s=void 0,l=void 0,a="undefined"!=typeof document&&document.attachEvent;if(!a){s=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,i=t.lastElementChild,r=n.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},o=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&0>e.target.className.indexOf("contract-trigger")&&0>e.target.className.indexOf("expand-trigger"))){var t=this;s(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=d(function(){o(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}};var h=!1,f="";i="animationstart";var p="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(h=!0),!1===h){for(var v=0;v<p.length;v++)if(void 0!==m.style[p[v]+"AnimationName"]){f="-"+(0,p[v]).toLowerCase()+"-",i=g[v],h=!0;break}}t="@"+f+"keyframes "+(n="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",r=f+"animation: 1ms "+n+"; "}var y=function(n){if(!n.getElementById("detectElementResize")){var i=(t||"")+".resize-triggers { "+(r||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=n.head||n.getElementsByTagName("head")[0],s=n.createElement("style");s.id="detectElementResize",s.type="text/css",null!=e&&s.setAttribute("nonce",e),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(n.createTextNode(i)),o.appendChild(s)}};return{addResizeListener:function(e,t){if(a)e.attachEvent("onresize",t);else{if(!e.__resizeTriggers__){var r=e.ownerDocument,o=c.getComputedStyle(e);o&&"static"===o.position&&(e.style.position="relative"),y(r),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=r.createElement("div")).className="resize-triggers";var h=r.createElement("div");h.className="expand-trigger",h.appendChild(r.createElement("div"));var u=r.createElement("div");u.className="contract-trigger",e.__resizeTriggers__.appendChild(h),e.__resizeTriggers__.appendChild(u),e.appendChild(e.__resizeTriggers__),s(e),e.addEventListener("scroll",l,!0),i&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName===n&&s(e)},e.__resizeTriggers__.addEventListener(i,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(t)}},removeResizeListener:function(e,t){if(a)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(i,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.disableHeight,o=e.disableWidth,l=e.style,a=this.state,h=a.height,c=a.width,u={overflow:"visible"},d={},f=!1;return r||(0===h&&(f=!0),u.height=0,d.height=h),o||(0===c&&(f=!0),u.width=0,d.width=c),(0,i.createElement)("div",{className:n,ref:this._setRef,style:s({},u,l)},!f&&t(d))}}]),t}(i.PureComponent);v.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};let y=v},788513:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsigSynchronousProvider=t.Layer=t.staticImplements=t.DynamicConfig=t.useUpdateUser=t.useStatsigLogEffect=t.useGateWithExposureLoggingDisabled=t.useGate=t.usePrefetchUsers=t.useLayerWithExposureLoggingDisabled=t.useLayer=t.useExperimentWithExposureLoggingDisabled=t.useExperiment=t.useConfigWithExposureLoggingDisabled=t.useConfig=t.StatsigProvider=t.StatsigContext=t.Statsig=void 0;var r=n(625526);Object.defineProperty(t,"DynamicConfig",{enumerable:!0,get:function(){return r.DynamicConfig}}),Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return r.Layer}});var o=i(n(526606));t.Statsig=o.default;var s=i(n(166155));t.StatsigContext=s.default;var l=i(n(179019));t.StatsigProvider=l.default;var a=n(783528);Object.defineProperty(t,"staticImplements",{enumerable:!0,get:function(){return a.staticImplements}});var h=i(n(383452));t.useConfig=h.default;var c=i(n(685677));t.useExperiment=c.default;var u=i(n(9797));t.useGate=u.default;var d=i(n(124641));t.useLayer=d.default;var f=i(n(522989));t.usePrefetchUsers=f.default;var p=i(n(233332));t.useStatsigLogEffect=p.default;var g=i(n(377680));t.StatsigSynchronousProvider=g.default;var m=i(n(22372));t.useConfigWithExposureLoggingDisabled=m.default;var v=i(n(615415));t.useGateWithExposureLoggingDisabled=v.default;var y=i(n(378031));t.useExperimentWithExposureLoggingDisabled=y.default;var b=i(n(805931));t.useLayerWithExposureLoggingDisabled=b.default;var w=i(n(944364));t.useUpdateUser=w.default},149334:(e,t,n)=>{"use strict";n.d(t,{FB:()=>s,Gw:()=>a,ZN:()=>l});var i=n(256301),r=n(551610);let o=(0,i.XP)();function s(e,t={}){return(0,i.FY)(o),(0,i.I6)(e,3,r.A,t,o).domain}function l(e,t={}){return(0,i.FY)(o),(0,i.I6)(e,4,r.A,t,o).subdomain}function a(e,t={}){return(0,i.FY)(o),(0,i.I6)(e,5,r.A,t,o).domainWithoutSuffix}},939337:function(e,t,n){var i;i=function(){"use strict";var e="function"==typeof Promise,t="object"==typeof self?self:n.g,i="undefined"!=typeof Symbol,r="undefined"!=typeof Map,o="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,l="undefined"!=typeof WeakSet,a="undefined"!=typeof DataView,h=i&&void 0!==Symbol.iterator,c=i&&void 0!==Symbol.toStringTag,u=o&&"function"==typeof Set.prototype.entries,d=r&&"function"==typeof Map.prototype.entries,f=u&&Object.getPrototypeOf(new Set().entries()),p=d&&Object.getPrototypeOf(new Map().entries()),g=h&&"function"==typeof Array.prototype[Symbol.iterator],m=g&&Object.getPrototypeOf([][Symbol.iterator]()),v=h&&"function"==typeof String.prototype[Symbol.iterator],y=v&&Object.getPrototypeOf(""[Symbol.iterator]());return function(n){var i=typeof n;if("object"!==i)return i;if(null===n)return"null";if(n===t)return"global";if(Array.isArray(n)&&(!1===c||!(Symbol.toStringTag in n)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&n===window.location)return"Location";if("object"==typeof window.document&&n===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&n===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&n===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&n instanceof window.HTMLElement){if("BLOCKQUOTE"===n.tagName)return"HTMLQuoteElement";if("TD"===n.tagName)return"HTMLTableDataCellElement";if("TH"===n.tagName)return"HTMLTableHeaderCellElement"}}var h=c&&n[Symbol.toStringTag];if("string"==typeof h)return h;var u=Object.getPrototypeOf(n);return u===RegExp.prototype?"RegExp":u===Date.prototype?"Date":e&&u===Promise.prototype?"Promise":o&&u===Set.prototype?"Set":r&&u===Map.prototype?"Map":l&&u===WeakSet.prototype?"WeakSet":s&&u===WeakMap.prototype?"WeakMap":a&&u===DataView.prototype?"DataView":r&&u===p?"Map Iterator":o&&u===f?"Set Iterator":g&&u===m?"Array Iterator":v&&u===y?"String Iterator":null===u?"Object":Object.prototype.toString.call(n).slice(8,-1)}},e.exports=i()},987701:(e,t,n)=>{"use strict";function i(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}n.d(t,{A:()=>r});let r=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,i){return e(t,n[i])});if("object"==typeof t||"object"==typeof n){var r=i(t),o=i(n);return r!==t||o!==n?e(r,o):Object.keys(Object.assign({},t,n)).every(function(i){return e(t[i],n[i])})}return!1}},576710:(e,t,n)=>{"use strict";n.d(t,{$w:()=>j,Ar:()=>h,Bc:()=>ew,DH:()=>eO,Gw:()=>ea,OO:()=>eT,_5:()=>s,et:()=>a,wm:()=>ep,yU:()=>eC});var i=n(59696),r=n(306947),o=n(401644);class s{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=(0,o.mv)(this.state).resolveInner(this.pos,-1);for(;t&&0>e.indexOf(t.name);)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(d(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function l(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function a(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,i]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)n[i[e]]=!0}let i=l(t)+l(n)+"*$";return[RegExp("^"+i),new RegExp(i)]}(t);return e=>{let r=e.matchBefore(i);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:n}:null}}function h(e,t){return n=>{for(let t=(0,o.mv)(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class c{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function u(e){return e.selection.main.from}function d(e,t){var n;let{source:i}=e,r=t&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}let f=i.YH.define(),p=new WeakMap;function g(e){if(!Array.isArray(e))return e;let t=p.get(e);return t||p.set(e,t=a(e)),t}let m=i.Pe.define(),v=i.Pe.define();class y{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=(0,i.vS)(e,t),r=(0,i.Fh)(n);this.chars.push(n);let o=e.slice(t,t+r),s=o.toUpperCase();this.folded.push((0,i.vS)(s==o?o.toLowerCase():s,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:o,byWord:s}=this;if(1==t.length){let r=(0,i.vS)(e,0),o=(0,i.Fh)(r),s=o==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return null;s+=-200}return this.ret(s,[0,o])}let l=e.indexOf(this.pattern);if(0==l)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,h=0;if(l<0){for(let o=0,s=Math.min(e.length,200);o<s&&h<a;){let s=(0,i.vS)(e,o);(s==t[h]||s==n[h])&&(r[h++]=o),o+=(0,i.Fh)(s)}if(h<a)return null}let c=0,u=0,d=!1,f=0,p=-1,g=-1,m=/[a-z]/.test(e),v=!0;for(let r=0,h=Math.min(e.length,200),y=0;r<h&&u<a;){let h=(0,i.vS)(e,r);l<0&&(c<a&&h==t[c]&&(o[c++]=r),f<a&&(h==t[f]||h==n[f]?(0==f&&(p=r),g=r+1,f++):f=0));let b,w=h<255?h>=48&&h<=57||h>=97&&h<=122?2:h>=65&&h<=90?1:0:(b=(0,i.MK)(h))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!r||1==w&&m||0==y&&0!=w)&&(t[u]==h||n[u]==h&&(d=!0)?s[u++]=r:s.length&&(v=!1)),y=w,r+=(0,i.Fh)(h)}return u==a&&0==s[0]&&v?this.result(-100+(d?-200:0),s,e):f==a&&0==p?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):f==a?this.ret(-900-e.length,[p,g]):u==a?this.result(-100+(d?-200:0)+-700+(v?0:-1100),s,e):2==t.length?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[],o=0;for(let e of t){let t=e+(this.astral?(0,i.Fh)((0,i.vS)(n,e)):1);o&&r[o-1]==e?r[o-1]=t:(r[o++]=e,r[o++]=t)}return this.ret(e-n.length,r)}}class b{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}let w=i.sj.define({combine:e=>(0,i.QR)(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:x,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>_(e(n),t(n)),optionClass:(e,t)=>n=>_(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function _(e,t){return e?t?e+" "+t:e:t}function x(e,t,n,i,o,s){let l=e.textDirection==r.OP.RTL,a=l,h=!1,c="top",u,d,f=t.left-o.left,p=o.right-t.right,g=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(o.top,Math.min(n.top,o.bottom-m))-t.top,d=Math.min(400,a?f:p);else{h=!0,d=Math.min(400,(l?t.right:o.right-t.left)-30);let e=o.bottom-t.bottom;e>=m||e>t.top?u=n.bottom-t.top:(c="bottom",u=t.bottom-n.top)}let v=(t.bottom-t.top)/s.offsetHeight,y=(t.right-t.left)/s.offsetWidth;return{style:`${c}: ${u/v}px; max-width: ${d/y}px`,class:"cm-completionInfo-"+(h?l?"left-narrow":"right-narrow":a?"left":"right")}}function k(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let i=Math.floor((e-t)/n);return{from:e-(i+1)*n,to:e-i*n}}class S{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:o}=i.open,s=e.state.facet(w);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,i){let r=document.createElement("span");r.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let e=0;e<i.length;){let t=i[e++],n=i[e++];t>s&&r.appendChild(document.createTextNode(o.slice(s,t)));let l=r.appendChild(document.createElement("span"));l.appendChild(document.createTextNode(o.slice(t,n))),l.className="cm-completionMatchedText",s=n}return s<o.length&&r.appendChild(document.createTextNode(o.slice(s))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=k(r.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",n=>{let{options:i}=e.state.field(t).open;for(let t=n.target,r;t&&t!=this.dom;t=t.parentNode)if("LI"==t.nodeName&&(r=/-(\d+)$/.exec(t.id))&&+r[1]<i.length){this.applyCompletion(e,i[+r[1]]),n.preventDefault();return}}),this.dom.addEventListener("focusout",t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(w).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:v.of(null)})}),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:r,selected:o,disabled:s}=n.open;i.open&&i.open.options==r||(this.range=k(r.length,o,e.state.facet(w).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),s!=(null===(t=i.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=k(t.options.length,t.selected,this.view.state.facet(w).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let o="string"==typeof i?document.createTextNode(i):i(n);if(!o)return;"then"in o?o.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)}).catch(e=>(0,r.c_)(this.view.state,e,"completion info")):this.addInfoPane(o,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:i}=e;n.appendChild(t),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var t,n;let i,r,o,s=null;for(let t=this.list.firstChild,n=this.range.from;t;t=t.nextSibling,n++)"LI"==t.nodeName&&t.id?n==e?t.hasAttribute("aria-selected")||(t.setAttribute("aria-selected","true"),s=t):t.hasAttribute("aria-selected")&&t.removeAttribute("aria-selected"):n--;return s&&(t=this.list,n=s,i=t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=i.height/t.offsetHeight,r.top<i.top?t.scrollTop-=(i.top-r.top)/o:r.bottom>i.bottom&&(t.scrollTop+=(r.bottom-i.bottom)/o)),s}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let e=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(w).positionInfo(this.view,t,i,n,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:l}=e[o],{section:a}=s;if(a){let e="string"==typeof a?a:a.name;e!=r&&(o>n.from||0==n.from)&&(r=e,"string"!=typeof a&&a.header?i.appendChild(a.header(a)):i.appendChild(document.createElement("completion-section")).textContent=e)}let h=i.appendChild(document.createElement("li"));h.id=t+"-"+o,h.setAttribute("role","option");let c=this.optionClass(s);for(let e of(c&&(h.className=c),this.optionContent)){let t=e(s,this.view.state,this.view,l);t&&h.appendChild(t)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function C(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class T{constructor(e,t,n,i,r,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new T(this.options,M(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,r,o){if(i&&!o&&e.some(e=>e.isPending))return i.setDisabled();let s=function(e,t){let n=[],i=null,r=e=>{n.push(e);let{section:t}=e.completion;if(t){i||(i=[]);let e="string"==typeof t?t:t.name;i.some(t=>t.name==e)||i.push("string"==typeof t?{name:e}:t)}},o=t.facet(w);for(let i of e)if(i.hasResult()){let e=i.result.getMatch;if(!1===i.result.filter)for(let t of i.result.options)r(new c(t,i.source,e?e(t):[],1e9-n.length));else{let n=t.sliceDoc(i.from,i.to),s,l=o.filterStrict?new b(n):new y(n);for(let t of i.result.options)if(s=l.match(t.label)){let n=t.displayLabel?e?e(t,s.matched):[]:s.matched;r(new c(t,i.source,n,s.score+(t.boost||0)))}}}if(i){let e=Object.create(null),t=0;for(let n of i.sort((e,t)=>{var n,i;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(i=t.rank)&&void 0!==i?i:1e9)||(e.name<t.name?-1:1)}))t-=1e5,e[n.name]=t;for(let t of n){let{section:n}=t.completion;n&&(t.score+=e["string"==typeof n?n:n.name])}}let s=[],l=null,a=o.compareCompletions;for(let e of n.sort((e,t)=>t.score-e.score||a(e.completion,t.completion))){let t=e.completion;l&&l.label==t.label&&l.detail==t.detail&&(null==l.type||null==t.type||l.type==t.type)&&l.apply==t.apply&&l.boost==t.boost?C(e.completion)>C(l)&&(s[s.length-1]=e):s.push(e),l=e.completion}return s}(e,t);if(!s.length)return i&&e.some(e=>e.isPending)?i.setDisabled():null;let l=t.facet(w).selectOnOpen?0:-1;if(i&&i.selected!=l&&-1!=i.selected){let e=i.options[i.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){l=t;break}}return new T(s,M(n,l),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:B,above:r.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new T(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new T(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class A{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new A(D,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(w),i=(n.override||t.languageDataAt("autocomplete",u(t)).map(g)).map(t=>(this.active.find(e=>e.source==t)||new N(t,this.active.some(e=>0!=e.state)?1:0)).update(e,n));i.length==this.active.length&&i.every((e,t)=>e==this.active[t])&&(i=this.active);let r=this.open,o=e.effects.some(e=>e.is(R));for(let s of(r&&e.docChanged&&(r=r.map(e.changes)),e.selection||i.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let n=0,i=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;i<t.length&&!t[i].hasResult();)i++;let r=n==e.length,o=i==t.length;if(r||o)return r==o;if(e[n++].result!=t[i++].result)return!1}}(i,this.active)||o?r=T.build(i,t,this.id,r,n,o):r&&r.disabled&&!i.some(e=>e.isPending)&&(r=null),!r&&i.every(e=>!e.isPending)&&i.some(e=>e.hasResult())&&(i=i.map(e=>e.hasResult()?new N(e.source,0):e)),e.effects))s.is(I)&&(r=r&&r.setSelected(s.value,this.id));return i==this.active&&r==this.open?this:new A(i,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?O:E}}let O={"aria-autocomplete":"list"},E={};function M(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}let D=[];function P(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(f);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class N{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let n=P(e,t),i=this;for(let t of((8&n||16&n&&this.touches(e))&&(i=new N(i.source,0)),4&n&&0==i.state&&(i=new N(this.source,1)),i=i.updateFor(e,n),e.effects))if(t.is(m))i=new N(i.source,1,t.value);else if(t.is(v))i=new N(i.source,0);else if(t.is(R))for(let e of t.value)e.source==i.source&&(i=e);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(u(e.state))}}class L extends N{constructor(e,t,n,i,r,o){super(e,3,t),this.limit=n,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=u(e.state);if(l>o||!i||2&t&&(u(e.startState)==this.from||l<this.limit))return new N(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return!function(e,t,n,i){if(!e)return!1;let r=t.sliceDoc(n,i);return"function"==typeof e?e(r,n,i,t):d(e,!0).test(r)}(i.validFor,e.state,r,o)?i.update&&(i=i.update(i,r,o,new s(e.state,l,!1)))?new L(this.source,this.explicit,a,i,i.from,null!==(n=i.to)&&void 0!==n?n:u(e.state)):new N(this.source,1,this.explicit):new L(this.source,this.explicit,a,i,r,o)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new L(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new N(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}let R=i.Pe.define({map:(e,t)=>e.map(e=>e.map(t))}),I=i.Pe.define(),F=i.sU.define({create:()=>A.start(),update:(e,t)=>e.update(t),provide:e=>[r.DK.from(e,e=>e.tooltip),r.Lz.contentAttributes.from(e,e=>e.attrs)]});function z(e,t){let n=t.completion.apply||t.completion.label,r=e.state.field(F).active.find(e=>e.source==t.source);return r instanceof L&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,r){let{main:o}=e.selection,s=n-o.from,l=r-o.from;return Object.assign(Object.assign({},e.changeByRange(a=>{if(a!=o&&n!=r&&e.sliceDoc(a.from+s,a.from+l)!=e.sliceDoc(n,r))return{range:a};let h=e.toText(t);return{changes:{from:a.from+s,to:r==o.from?a.to:a.from+l,insert:h},range:i.OF.cursor(a.from+s+h.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,n,r.from,r.to)),{annotations:f.of(t.completion)})):n(e,t.completion,r.from,r.to),!0)}let B=e=>new S(e,F,z);function W(e,t="option"){return n=>{let i=n.state.field(F,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(w).interactionDelay)return!1;let o=1,s;"page"==t&&(s=(0,r.Eg)(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,a=i.open.selected>-1?i.open.selected+o*(e?1:-1):e?0:l-1;return a<0?a="page"==t?0:l-1:a>=l&&(a="page"==t?l-1:0),n.dispatch({effects:I.of(a)}),!0}}let j=e=>{let t=e.state.field(F,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(w).interactionDelay)&&z(e,t.open.options[t.open.selected])},H=e=>!!e.state.field(F,!1)&&(e.dispatch({effects:m.of(!0)}),!0);class V{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}let U=r.Z9.fromClass(class{constructor(e){for(let t of(this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0,e.state.field(F).active))t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(F),n=e.state.facet(w);if(!e.selectionSet&&!e.docChanged&&e.startState.field(F)==t)return;let i=e.transactions.some(e=>{let t=P(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let n=this.running[t];if(i||n.context.abortOnDocChange&&e.docChanged||n.updates.length+e.transactions.length>50&&Date.now()-n.time>1e3){for(let e of n.context.abortListeners)try{e()}catch(e){(0,r.c_)(this.view.state,e)}n.context.abortListeners=null,this.running.splice(t--,1)}else n.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(m)))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),o):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(F);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(w).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=u(t),i=new s(t,n,e.explicit,this.view),o=new V(e,i);this.running.push(o),Promise.resolve(e.source(i)).then(e=>{o.context.aborted||(o.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:v.of(null)}),(0,r.c_)(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(w).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(w),i=this.view.state.field(F);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(void 0===o.done)continue;if(this.running.splice(r--,1),o.done){let i=u(o.updates.length?o.updates[0].startState:this.view.state),r=Math.min(i,o.done.from+(o.active.explicit?0:1)),s=new L(o.active.source,o.active.explicit,r,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:i);for(let e of o.updates)s=s.update(e,n);if(s.hasResult()){t.push(s);continue}}let s=i.active.find(e=>e.source==o.active.source);if(s&&s.isPending){if(null==o.done){let e=new N(o.active.source,0);for(let t of o.updates)e=e.update(t,n);e.isPending||t.push(e)}else this.startQuery(s)}}(t.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:R.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(F,!1);if(t&&t.tooltip&&this.view.state.facet(w).closeOnBlur){let n=t.open&&(0,r.Eg)(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:v.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:m.of(!1)}),20),this.composing=0}}}),$="object"==typeof navigator&&/Win/.test(navigator.platform),K=i.Nb.highest(r.Lz.domEventHandlers({keydown(e,t){let n=t.state.field(F,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&!($&&e.altKey)||e.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find(e=>e.source==i.source),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&z(t,i),!1}})),q=r.Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Z{constructor(e,t,n,i){this.field=e,this.line=t,this.from=n,this.to=i}}class G{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,i.iR.TrackDel),n=e.mapPos(this.to,1,i.iR.TrackDel);return null==t||null==n?null:new G(this.field,t,n)}}class Y{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],i=[t],r=e.doc.lineAt(t),s=/^\s*/.exec(r.text)[0];for(let r of this.lines){if(n.length){let n=s,l=/^\t*/.exec(r)[0].length;for(let t=0;t<l;t++)n+=e.facet(o.Xt);i.push(t+n.length-l),r=n+r.slice(l)}n.push(r),t+=r.length+1}return{text:n,ranges:this.fieldPositions.map(e=>new G(e.field,i[e.line]+e.from,i[e.line]+e.to))}}static parse(e){let t=[],n=[],i=[],r;for(let o of e.split(/\r\n?|\n/)){for(;r=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let e=r[1]?+r[1]:null,s=r[2]||r[3]||"",l=-1,a=s.replace(/\\[{}]/g,e=>e[1]);for(let n=0;n<t.length;n++)(null!=e?t[n].seq==e:a&&t[n].name==a)&&(l=n);if(l<0){let n=0;for(;n<t.length&&(null==e||null!=t[n].seq&&t[n].seq<e);)n++;for(let r of(t.splice(n,0,{seq:e,name:a}),l=n,i))r.field>=l&&r.field++}i.push(new Z(l,n.length,r.index,r.index+a.length)),o=o.slice(0,r.index)+s+o.slice(r.index+r[0].length)}o=o.replace(/\\([{}])/g,(e,t,r)=>{for(let e of i)e.line==n.length&&e.from>r&&(e.from--,e.to--);return t}),n.push(o)}return new Y(n,i)}}let J=r.NZ.widget({widget:new class extends r.xO{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),X=r.NZ.mark({class:"cm-snippetField"});class Q{constructor(e,t){this.ranges=e,this.active=t,this.deco=r.NZ.set(e.map(e=>(e.from==e.to?J:X).range(e.from,e.to)))}map(e){let t=[];for(let n of this.ranges){let i=n.map(e);if(!i)return null;t.push(i)}return new Q(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}let ee=i.Pe.define({map:(e,t)=>e&&e.map(t)}),et=i.Pe.define(),en=i.sU.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(ee))return n.value;if(n.is(et)&&e)return new Q(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>r.Lz.decorations.from(e,e=>e?e.deco:r.NZ.none)});function ei(e,t){return i.OF.create(e.filter(e=>e.field==t).map(e=>i.OF.range(e.from,e.to)))}function er(e){return({state:t,dispatch:n})=>{let i=t.field(en,!1);if(!i||e<0&&0==i.active)return!1;let r=i.active+e,o=e>0&&!i.ranges.some(t=>t.field==r+e);return n(t.update({selection:ei(i.ranges,r),effects:ee.of(o?null:new Q(i.ranges,r)),scrollIntoView:!0})),!0}}let eo=[{key:"Tab",run:er(1),shift:er(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(en,!1)&&(t(e.update({effects:ee.of(null)})),!0)}],es=i.sj.define({combine:e=>e.length?e[0]:eo}),el=i.Nb.highest(r.w4.compute([es],e=>e.facet(es)));function ea(e,t){let n;return Object.assign(Object.assign({},t),{apply:(n=Y.parse(e),(e,t,r,o)=>{let{text:s,ranges:l}=n.instantiate(e.state,r),{main:a}=e.state.selection,h={changes:{from:r,to:o==a.from?a.to:o,insert:i.EY.of(s)},scrollIntoView:!0,annotations:t?[f.of(t),i.ZX.userEvent.of("input.complete")]:void 0};if(l.length&&(h.selection=ei(l,0)),l.some(e=>e.field>0)){let t=new Q(l,0),n=h.effects=[ee.of(t)];void 0===e.state.field(en,!1)&&n.push(i.Pe.appendConfig.of([en,el,eh,q]))}e.dispatch(e.state.update(h))})})}let eh=r.Lz.domEventHandlers({mousedown(e,t){let n=t.state.field(en,!1),i;if(!n||null==(i=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let r=n.ranges.find(e=>e.from<=i&&e.to>=i);return!!r&&r.field!=n.active&&(t.dispatch({selection:ei(n.ranges,r.field),effects:ee.of(n.ranges.some(e=>e.field>r.field)?new Q(n.ranges,r.field):null),scrollIntoView:!0}),!0)}}),ec={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},eu=i.Pe.define({map(e,t){let n=t.mapPos(e,-1,i.iR.TrackAfter);return null==n?void 0:n}}),ed=new class extends i.FB{};ed.startSide=1,ed.endSide=-1;let ef=i.sU.define({create:()=>i.om.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(eu)&&(e=e.update({add:[ed.range(n.value,n.value+1)]}));return e}});function ep(){return[eb,ef]}let eg="()[]{}<>";function em(e){for(let t=0;t<eg.length;t+=2)if(eg.charCodeAt(t)==e)return eg.charAt(t+1);return(0,i.MK)(e<128?e:e+1)}function ev(e,t){return e.languageDataAt("closeBrackets",t)[0]||ec}let ey="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),eb=r.Lz.inputHandler.of((e,t,n,r)=>{if((ey?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let s=e.state.selection.main;if(r.length>2||2==r.length&&1==(0,i.Fh)((0,i.vS)(r,0))||t!=s.from||n!=s.to)return!1;let l=function(e,t){let n=ev(e,e.selection.main.head),r=n.brackets||ec.brackets;for(let s of r){let l=em((0,i.vS)(s,0));if(t==s)return l==s?function(e,t,n,r){let s=r.stringPrefixes||ec.stringPrefixes,l=null,a=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:eu.of(r.to+t.length),range:i.OF.range(r.anchor+t.length,r.head+t.length)};let a=r.head,h=ex(e.doc,a),c;if(h==t){if(ek(e,a))return{changes:{insert:t+t,from:a},effects:eu.of(a+t.length),range:i.OF.cursor(a+t.length)};if(e_(e,a)){let r=n&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+r.length,insert:r},range:i.OF.cursor(a+r.length)}}}else if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(c=eS(e,a-2*t.length,s))>-1&&ek(e,c))return{changes:{insert:t+t+t+t,from:a},effects:eu.of(a+t.length),range:i.OF.cursor(a+t.length)};else if(e.charCategorizer(a)(h)!=i.Je.Word&&eS(e,a,s)>-1&&!function(e,t,n,i){let r=(0,o.mv)(e).resolveInner(t,-1),s=i.reduce((e,t)=>Math.max(e,t.length),0);for(let o=0;o<5;o++){let o=e.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),l=o.indexOf(n);if(!l||l>-1&&i.indexOf(o.slice(0,l))>-1){let t=r.firstChild;for(;t&&t.from==r.from&&t.to-t.from>n.length+l;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let a=r.to==t&&r.parent;if(!a)break;r=a}return!1}(e,a,t,s))return{changes:{insert:t+t,from:a},effects:eu.of(a+t.length),range:i.OF.cursor(a+t.length)};return{range:l=r}});return l?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}(e,s,r.indexOf(s+s+s)>-1,n):function(e,t,n,r){let o=null,s=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:n,from:s.to}],effects:eu.of(s.to+t.length),range:i.OF.range(s.anchor+t.length,s.head+t.length)};let l=ex(e.doc,s.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:t+n,from:s.head},effects:eu.of(s.head+t.length),range:i.OF.cursor(s.head+t.length)}:{range:o=s}});return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}(e,s,l,n.before||ec.before);if(t==l&&e_(e,e.selection.main.from))return function(e,t,n){let r=null,o=e.changeByRange(t=>t.empty&&ex(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:i.OF.cursor(t.head+n.length)}:r={range:t});return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}(e,0,l)}return null}(e.state,r);return!!l&&(e.dispatch(l),!0)}),ew=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=ev(e,e.selection.main.head).brackets||ec.brackets,r=null,o=e.changeByRange(t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return(0,i.Fh)((0,i.vS)(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let o of n)if(o==r&&ex(e.doc,t.head)==em((0,i.vS)(o,0)))return{changes:{from:t.head-o.length,to:t.head+o.length},range:i.OF.cursor(t.head-o.length)}}return{range:r=t}});return r||t(e.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function e_(e,t){let n=!1;return e.field(ef).between(0,e.doc.length,e=>{e==t&&(n=!0)}),n}function ex(e,t){let n=e.sliceString(t,t+2);return n.slice(0,(0,i.Fh)((0,i.vS)(n,0)))}function ek(e,t){let n=(0,o.mv)(e).resolveInner(t+1);return n.parent&&n.from==t}function eS(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=i.Je.Word)return t;for(let o of n){let n=t-o.length;if(e.sliceDoc(n,t)==o&&r(e.sliceDoc(n-1,n))!=i.Je.Word)return n}return -1}function eC(e={}){return[K,F,w.of(e),U,eA,q]}let eT=[{key:"Ctrl-Space",run:H},{mac:"Alt-`",run:H},{key:"Escape",run:e=>{let t=e.state.field(F,!1);return!!(t&&t.active.some(e=>0!=e.state))&&(e.dispatch({effects:v.of(null)}),!0)},preventDefault:!0,stopPropagation:!0},{key:"ArrowDown",run:W(!0)},{key:"ArrowUp",run:W(!1)},{key:"PageDown",run:W(!0,"page")},{key:"PageUp",run:W(!1,"page")},{key:"Enter",run:j}],eA=i.Nb.highest(r.w4.computeN([w],e=>e.facet(w).defaultKeymap?[eT]:[]));function eO(e){let t=e.field(F,!1);return t&&t.active.some(e=>e.isPending)?"pending":t&&t.active.some(e=>0!=e.state)?"active":null}},85340:(e,t,n)=>{"use strict";n.d(t,{Mg:()=>eA,UY:()=>eT,Yc:()=>eM,b6:()=>y,cL:()=>P,pw:()=>eE});var i=n(59696),r=n(306947),o=n(401644),s=n(579039);function l(e,t){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=e(t,n);return!!r&&(i(n.update(r)),!0)}}let a=l(function(e,t,n=t.selection.ranges){let i=[],r=-1;for(let{from:e,to:o}of n){let n=i.length,s=1e9,l=u(t,e).line;if(l){for(let n=e;n<=o;){let a=t.doc.lineAt(n);if(a.from>r&&(e==o||o>a.from)){r=a.from;let e=/^\s*/.exec(a.text)[0].length,t=e==a.length,n=a.text.slice(e,e+l.length)==l?e:-1;e<a.text.length&&e<s&&(s=e),i.push({line:a,comment:n,token:l,indent:e,empty:t,single:!1})}n=a.to+1}if(s<1e9)for(let e=n;e<i.length;e++)i[e].indent<i[e].line.text.length&&(i[e].indent=s);i.length==n+1&&(i[n].single=!0)}}if(2!=e&&i.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:n,indent:r,empty:o,single:s}of i)(s||!o)&&e.push({from:t.from+r,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&i.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:r}of i)if(n>=0){let i=t.from+n,o=i+r.length;" "==t.text[o-t.from]&&o++,e.push({from:i,to:o})}return{changes:e}}return null},0),h=l(d,0),c=l((e,t)=>d(e,t,function(e){let t=[];for(let n of e.selection.ranges){let i=e.doc.lineAt(n.from),r=n.to<=i.to?i:e.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:e.doc.lineAt(n.to-1));let o=t.length-1;o>=0&&t[o].to>i.from?t[o].to=r.to:t.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return t}(t)),0);function u(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function d(e,t,n=t.selection.ranges){let i=n.map(e=>u(t,e.from).block);if(!i.every(e=>e))return null;let r=n.map((e,n)=>(function(e,{open:t,close:n},i,r){let o,s,l=e.sliceDoc(i-50,i),a=e.sliceDoc(r,r+50),h=/\s*$/.exec(l)[0].length,c=/^\s*/.exec(a)[0].length,u=l.length-h;if(l.slice(u-t.length,u)==t&&a.slice(c,c+n.length)==n)return{open:{pos:i-h,margin:h&&1},close:{pos:r+c,margin:c&&1}};r-i<=100?o=s=e.sliceDoc(i,r):(o=e.sliceDoc(i,i+50),s=e.sliceDoc(r-50,r));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return o.slice(d,d+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:i+d+t.length,margin:/\s/.test(o.charAt(d+t.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null})(t,i[n],e.from,e.to));if(2!=e&&!r.every(e=>e))return{changes:t.changes(n.map((e,t)=>r[t]?[]:[{from:e.from,insert:i[t].open+" "},{from:e.to,insert:" "+i[t].close}]))};if(1!=e&&r.some(e=>e)){let e=[];for(let t=0,n;t<r.length;t++)if(n=r[t]){let r=i[t],{open:o,close:s}=n;e.push({from:o.pos-r.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+r.close.length})}return{changes:e}}return null}let f=i.YH.define(),p=i.YH.define(),g=i.sj.define(),m=i.sj.define({combine:e=>(0,i.QR)(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}),v=i.sU.define({create:()=>D.empty,update(e,t){let n=t.state.facet(m),r=t.annotation(f);if(r){let i=S.fromTransaction(t,r.selection),o=r.side,s=0==o?e.undone:e.done;return s=i?C(s,s.length,n.minDepth,i):O(s,t.startState.selection),new D(0==o?r.rest:s,0==o?s:r.rest)}let o=t.annotation(p);if(("full"==o||"before"==o)&&(e=e.isolate()),!1===t.annotation(i.ZX.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=S.fromTransaction(t),l=t.annotation(i.ZX.time),a=t.annotation(i.ZX.userEvent);return s?e=e.addChanges(s,l,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,l,a,n.newGroupDelay)),("full"==o||"after"==o)&&(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new D(e.done.map(S.fromJSON),e.undone.map(S.fromJSON))});function y(e={}){return[v,m.of(e),r.Lz.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?w:"historyRedo"==e.inputType?_:null;return!!n&&(e.preventDefault(),n(t))}})]}function b(e,t){return function({state:n,dispatch:i}){if(!t&&n.readOnly)return!1;let r=n.field(v,!1);if(!r)return!1;let o=r.pop(e,n,t);return!!o&&(i(o),!0)}}let w=b(0,!1),_=b(1,!1),x=b(0,!0),k=b(1,!0);class S{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new S(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new S(e.changes&&i.VR.fromJSON(e.changes),[],e.mapped&&i.Gu.fromJSON(e.mapped),e.startSelection&&i.OF.fromJSON(e.startSelection),e.selectionsAfter.map(i.OF.fromJSON))}static fromTransaction(e,t){let n=A;for(let t of e.startState.facet(g)){let i=t(e);i.length&&(n=n.concat(i))}return!n.length&&e.changes.empty?null:new S(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,A)}static selection(e){return new S(void 0,A,void 0,void 0,e)}}function C(e,t,n,i){let r=e.slice(t+1>n+20?t-n-1:0,t);return r.push(i),r}function T(e,t){return e.length?t.length?e.concat(t):e:t}let A=[];function O(e,t){if(!e.length)return[S.selection([t])];{let n=e[e.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return i.length&&i[i.length-1].eq(t)?e:(i.push(t),C(e,e.length-1,1e9,n.setSelAfter(i)))}}function E(e,t){if(!e.length)return e;let n=e.length,r=A;for(;n;){let o=function(e,t,n){let r=T(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):A,n);if(!e.changes)return S.selection(r);let o=e.changes.map(t),s=t.mapDesc(e.changes,!0),l=e.mapped?e.mapped.composeDesc(s):s;return new S(o,i.Pe.mapEffects(e.effects,t),l,e.startSelection.map(s),r)}(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let t=e.slice(0,n);return t[n-1]=o,t}t=o.mapped,n--,r=o.selectionsAfter}return r.length?[S.selection(r)]:A}let M=/^(input\.type|delete)($|\.)/;class D{constructor(e,t,n=0,i){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new D(this.done,this.undone):this}addChanges(e,t,n,r,o){var s,l;let a,h,c=this.done,u=c[c.length-1];return new D(c=u&&u.changes&&!u.changes.empty&&e.changes&&(!n||M.test(n))&&(!u.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,(s=u.changes,l=e.changes,a=[],h=!1,s.iterChangedRanges((e,t)=>a.push(e,t)),l.iterChangedRanges((e,t,n,i)=>{for(let e=0;e<a.length;){let t=a[e++],r=a[e++];i>=t&&n<=r&&(h=!0)}}),h))||"input.type.compose"==n)?C(c,c.length-1,r.minDepth,new S(e.changes.compose(u.changes),T(i.Pe.mapEffects(e.effects,u.changes),u.effects),u.mapped,u.startSelection,A)):C(c,c.length,r.minDepth,e),A,t,n)}addSelection(e,t,n,i){var r;let o=this.done.length?this.done[this.done.length-1].selectionsAfter:A;return o.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(r=o[o.length-1]).ranges.length==e.ranges.length&&0===r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length?this:new D(O(this.done,e),this.undone,t,n)}addMapping(e){return new D(E(this.done,e),E(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=0==e?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length){let n,s;return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:f.of({side:e,rest:(n=i[i.length-1],(s=i.slice())[i.length-1]=n.setSelAfter(n.selectionsAfter.slice(0,n.selectionsAfter.length-1)),s),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0})}if(!r.changes)return null;{let n=1==i.length?A:i.slice(0,i.length-1);return r.mapped&&(n=E(n,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:f.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}}}D.empty=new D(A,A);let P=[{key:"Mod-z",run:w,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:_,preventDefault:!0},{linux:"Ctrl-Shift-z",run:_,preventDefault:!0},{key:"Mod-u",run:x,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:k,preventDefault:!0}];function N(e,t){return i.OF.create(e.ranges.map(t),e.mainIndex)}function L(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function R({state:e,dispatch:t},n){let i=N(e.selection,n);return!i.eq(e.selection,!0)&&(t(L(e,i)),!0)}function I(e,t){return i.OF.cursor(t?e.to:e.from)}function F(e,t){return R(e,n=>n.empty?e.moveByChar(n,t):I(n,t))}function z(e){return e.textDirectionAt(e.state.selection.main.head)==r.OP.LTR}let B=e=>F(e,!z(e)),W=e=>F(e,z(e));function j(e,t){return R(e,n=>n.empty?e.moveByGroup(n,t):I(n,t))}function H(e,t,n){let r,l,a=(0,o.mv)(e).resolveInner(t.head),h=n?s.uY.closedBy:s.uY.openedBy;for(let i=t.head;;){let t=n?a.childAfter(i):a.childBefore(i);if(!t)break;!function(e,t,n){if(t.type.prop(n))return!0;let i=t.to-t.from;return i&&(i>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}(e,t,h)?i=n?t.to:t.from:a=t}return l=a.type.prop(h)&&(r=n?(0,o.jU)(e,a.from,1):(0,o.jU)(e,a.to,-1))&&r.matched?n?r.end.to:r.end.from:n?a.to:a.from,i.OF.cursor(l,n?-1:1)}function V(e,t){return R(e,n=>{if(!n.empty)return I(n,t);let i=e.moveVertically(n,t);return i.head!=n.head?i:e.moveToLineBoundary(n,t)})}"undefined"!=typeof Intl&&Intl.Segmenter;let U=e=>V(e,!1),$=e=>V(e,!0);function K(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,i=0,o;if(t){for(let t of e.state.facet(r.Lz.scrollMargins)){let r=t(e);(null==r?void 0:r.top)&&(n=Math.max(null==r?void 0:r.top,n)),(null==r?void 0:r.bottom)&&(i=Math.max(null==r?void 0:r.bottom,i))}o=e.scrollDOM.clientHeight-n-i}else o=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:t,height:Math.max(e.defaultLineHeight,o-5)}}function q(e,t){let n,i=K(e),{state:o}=e,s=N(o.selection,n=>n.empty?e.moveVertically(n,t,i.height):I(n,t));if(s.eq(o.selection))return!1;if(i.selfScroll){let t=e.coordsAtPos(o.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),a=l.top+i.marginTop,h=l.bottom-i.marginBottom;t&&t.top>a&&t.bottom<h&&(n=r.Lz.scrollIntoView(s.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(L(o,s),{effects:n}),!0}let Z=e=>q(e,!1),G=e=>q(e,!0);function Y(e,t,n){let r=e.lineBlockAt(t.head),o=e.moveToLineBoundary(t,n);if(o.head==t.head&&o.head!=(n?r.to:r.from)&&(o=e.moveToLineBoundary(t,n,!1)),!n&&o.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(o=i.OF.cursor(r.from+n))}return o}function J(e,t){let n=N(e.state.selection,e=>{let n=t(e);return i.OF.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(L(e.state,n)),!0)}function X(e,t){return J(e,n=>e.moveByChar(n,t))}let Q=e=>X(e,!z(e)),ee=e=>X(e,z(e));function et(e,t){return J(e,n=>e.moveByGroup(n,t))}function en(e,t){return J(e,n=>e.moveVertically(n,t))}let ei=e=>en(e,!1),er=e=>en(e,!0);function eo(e,t){return J(e,n=>e.moveVertically(n,t,K(e).height))}let es=e=>eo(e,!1),el=e=>eo(e,!0),ea=({state:e,dispatch:t})=>(t(L(e,{anchor:0})),!0),eh=({state:e,dispatch:t})=>(t(L(e,{anchor:e.doc.length})),!0),ec=({state:e,dispatch:t})=>(t(L(e,{anchor:e.selection.main.anchor,head:0})),!0),eu=({state:e,dispatch:t})=>(t(L(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function ed(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:o}=e,s=o.changeByRange(r=>{let{from:o,to:s}=r;if(o==s){let i=t(r);i<o?(n="delete.backward",i=ef(e,i,!1)):i>o&&(n="delete.forward",i=ef(e,i,!0)),o=Math.min(o,i),s=Math.max(s,i)}else o=ef(e,o,!1),s=ef(e,s,!0);return o==s?{range:r}:{changes:{from:o,to:s},range:i.OF.cursor(o,o<r.head?-1:1)}});return!s.changes.empty&&(e.dispatch(o.update(s,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?r.Lz.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function ef(e,t,n){if(e instanceof r.Lz)for(let i of e.state.facet(r.Lz.atomicRanges).map(t=>t(e)))i.between(t,t,(e,i)=>{e<t&&i>t&&(t=n?i:e)});return t}let ep=(e,t,n)=>ed(e,r=>{let s=r.from,{state:l}=e,a=l.doc.lineAt(s),h,c;if(n&&!t&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(h=a.text.slice(0,s-a.from))){if("	"==h[h.length-1])return s-1;let e=(0,i.y$)(h,l.tabSize)%(0,o.tp)(l)||(0,o.tp)(l);for(let t=0;t<e&&" "==h[h.length-1-t];t++)s--;c=s}else(c=(0,i.zK)(a.text,s-a.from,t,t)+a.from)==s&&a.number!=(t?l.doc.lines:1)?c+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,s-a.from))&&(c=(0,i.zK)(a.text,c-a.from,!1,!1)+a.from);return c}),eg=e=>ep(e,!1,!0),em=e=>ep(e,!0,!1),ev=(e,t)=>ed(e,n=>{let r=n.head,{state:o}=e,s=o.doc.lineAt(r),l=o.charCategorizer(r);for(let e=null;;){if(r==(t?s.to:s.from)){r==n.head&&s.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let a=(0,i.zK)(s.text,r-s.from,t)+s.from,h=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),c=l(h);if(null!=e&&c!=e)break;(" "!=h||r!=n.head)&&(e=c),r=a}return r}),ey=e=>ev(e,!1);function eb(e){let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),o=e.doc.lineAt(i.to);if(i.empty||i.to!=o.from||(o=e.doc.lineAt(i.to-1)),n>=r.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(i)}else t.push({from:r.from,to:o.to,ranges:[i]});n=o.number+1}return t}function ew(e,t,n){if(e.readOnly)return!1;let r=[],o=[];for(let t of eb(e)){if(n?t.to==e.doc.length:0==t.from)continue;let s=e.doc.lineAt(n?t.to+1:t.from-1),l=s.length+1;if(n)for(let n of(r.push({from:t.to,to:s.to},{from:t.from,insert:s.text+e.lineBreak}),t.ranges))o.push(i.OF.range(Math.min(e.doc.length,n.anchor+l),Math.min(e.doc.length,n.head+l)));else for(let n of(r.push({from:s.from,to:t.from},{from:t.to,insert:e.lineBreak+s.text}),t.ranges))o.push(i.OF.range(n.anchor-l,n.head-l))}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:i.OF.create(o,e.selection.mainIndex),userEvent:"move.line"})),!0)}function e_(e,t,n){if(e.readOnly)return!1;let i=[];for(let t of eb(e))n?i.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):i.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}let ex=eS(!1),ek=eS(!0);function eS(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:r,to:l}=n,a=t.doc.lineAt(r),h=!e&&r==l&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=(0,o.mv)(e).resolveInner(t),i=n.childBefore(t),r=n.childAfter(t),l;return i&&r&&i.to<=t&&r.from>=t&&(l=i.type.prop(s.uY.closedBy))&&l.indexOf(r.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(r.from).from&&!/\S/.test(e.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}(t,r);e&&(r=l=(l<=a.to?a:t.doc.lineAt(l)).to);let c=new o.KB(t,{simulateBreak:r,simulateDoubleBreak:!!h}),u=(0,o._v)(c,r);for(null==u&&(u=(0,i.y$)(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));l<a.to&&/\s/.test(a.text[l-a.from]);)l++;h?{from:r,to:l}=h:r>a.from&&r<a.from+100&&!/\S/.test(a.text.slice(0,r))&&(r=a.from);let d=["",(0,o.EI)(t,u)];return h&&d.push((0,o.EI)(t,c.lineIndent(a.from,-1))),{changes:{from:r,to:l,insert:i.EY.of(d)},range:i.OF.cursor(r+1+d[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function eC(e,t){let n=-1;return e.changeByRange(r=>{let o=[];for(let i=r.from;i<=r.to;){let s=e.doc.lineAt(i);s.number>n&&(r.empty||r.to>s.from)&&(t(s,o,r),n=s.number),i=s.to+1}let s=e.changes(o);return{changes:o,range:i.OF.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}let eT=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(eC(e,(t,n)=>{n.push({from:t.from,insert:e.facet(o.Xt)})}),{userEvent:"input.indent"})),!0),eA=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(eC(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=(0,i.y$)(r,e.tabSize),l=0,a=(0,o.EI)(e,Math.max(0,s-(0,o.tp)(e)));for(;l<r.length&&l<a.length&&r.charCodeAt(l)==a.charCodeAt(l);)l++;n.push({from:t.from+l,to:t.from+r.length,insert:a.slice(l)})}),{userEvent:"delete.dedent"})),!0),eO=[{key:"Ctrl-b",run:B,shift:Q,preventDefault:!0},{key:"Ctrl-f",run:W,shift:ee},{key:"Ctrl-p",run:U,shift:ei},{key:"Ctrl-n",run:$,shift:er},{key:"Ctrl-a",run:e=>R(e,t=>i.OF.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>J(e,t=>i.OF.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>R(e,t=>i.OF.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>J(e,t=>i.OF.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:em},{key:"Ctrl-h",run:eg},{key:"Ctrl-k",run:e=>ed(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:ey},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:i.EY.of(["",""])},range:i.OF.cursor(e.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),o=n==r.from?n-1:(0,i.zK)(r.text,n-r.from,!1)+r.from,s=n==r.to?n+1:(0,i.zK)(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:s,insert:e.doc.slice(n,s).append(e.doc.slice(o,n))},range:i.OF.cursor(s)}});return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:G}],eE=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>R(e,t=>H(e.state,t,!z(e))),shift:e=>J(e,t=>H(e.state,t,!z(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>R(e,t=>H(e.state,t,z(e))),shift:e=>J(e,t=>H(e.state,t,z(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>ew(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>e_(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>ew(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>e_(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=i.OF.create([n.main]):n.main.empty||(r=i.OF.create([i.OF.cursor(n.main.head)])),!!r&&(t(L(e,r)),!0)}},{key:"Mod-Enter",run:ek},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=eb(e).map(({from:t,to:n})=>i.OF.range(t,Math.min(n+1,e.doc.length)));return t(e.update({selection:i.OF.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=N(e.selection,t=>{let n=(0,o.mv)(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return i.OF.range(n.to,n.from)}return t});return!n.eq(e.selection)&&(t(L(e,n)),!0)},preventDefault:!0},{key:"Mod-[",run:eA},{key:"Mod-]",run:eT},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),i=new o.KB(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),r=eC(e,(t,r,s)=>{let l=(0,o._v)(i,t.from);if(null==l)return;/\S/.test(t.text)||(l=0);let a=/^\s*/.exec(t.text)[0],h=(0,o.EI)(e,l);(a!=h||s.from<t.from+a.length)&&(n[t.from]=l,r.push({from:t.from,to:t.from+a.length,insert:h}))});return r.changes.empty||t(e.update(r,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(eb(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),i=N(t.selection,t=>{let n;if(e.lineWrapping){let i=e.lineBlockAt(t.head),r=e.coordsAtPos(t.head,t.assoc||1);r&&(n=i.bottom+e.documentTop-r.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>(function(e,t,n){let r=!1,s=N(e.selection,t=>{let s=(0,o.jU)(e,t.head,-1)||(0,o.jU)(e,t.head,1)||t.head>0&&(0,o.jU)(e,t.head-1,1)||t.head<e.doc.length&&(0,o.jU)(e,t.head+1,-1);if(!s||!s.end)return t;r=!0;let l=s.start.from==t.head?s.end.to:s.end.from;return n?i.OF.range(t.anchor,l):i.OF.cursor(l)});return!!r&&(t(L(e,s)),!0)})(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),i=u(e.state,n.from);return i.line?a(e):!!i.block&&c(e)},preventDefault:!0,stopPropagation:!0},{key:"Alt-A",run:h},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:B,shift:Q,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>j(e,!z(e)),shift:e=>et(e,!z(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>R(e,t=>Y(e,t,!z(e))),shift:e=>J(e,t=>Y(e,t,!z(e))),preventDefault:!0},{key:"ArrowRight",run:W,shift:ee,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>j(e,z(e)),shift:e=>et(e,z(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>R(e,t=>Y(e,t,z(e))),shift:e=>J(e,t=>Y(e,t,z(e))),preventDefault:!0},{key:"ArrowUp",run:U,shift:ei,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ea,shift:ec},{mac:"Ctrl-ArrowUp",run:Z,shift:es},{key:"ArrowDown",run:$,shift:er,preventDefault:!0},{mac:"Cmd-ArrowDown",run:eh,shift:eu},{mac:"Ctrl-ArrowDown",run:G,shift:el},{key:"PageUp",run:Z,shift:es},{key:"PageDown",run:G,shift:el},{key:"Home",run:e=>R(e,t=>Y(e,t,!1)),shift:e=>J(e,t=>Y(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:ea,shift:ec},{key:"End",run:e=>R(e,t=>Y(e,t,!0)),shift:e=>J(e,t=>Y(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:eh,shift:eu},{key:"Enter",run:ex,shift:ex},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:eg,shift:eg},{key:"Delete",run:em},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ey},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>ev(e,!0)},{mac:"Mod-Backspace",run:e=>ed(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)})},{mac:"Mod-Delete",run:e=>ed(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})}].concat(eO.map(e=>({mac:e.key,run:e.run,shift:e.shift})))),eM={key:"Tab",run:eT,shift:eA}},548481:(e,t,n)=>{"use strict";n.d(t,{$w:()=>y,bu:()=>_});var i=n(306947),r=n(59696),o=n(235093);class s{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class l{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let o=e,s=n.facet(w).markerFilter;s&&(o=s(o,n));let h=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),c=new r.vB,u=[],d=0;for(let e=0;;){let t,r,o=e==h.length?null:h[e];if(!o&&!u.length)break;for(u.length?(t=d,r=u.reduce((e,t)=>Math.min(e,t.to),o&&o.from>t?o.from:1e8)):(t=o.from,r=o.to,u.push(o),e++);e<h.length;){let n=h[e];if(n.from==t&&(n.to>n.from||n.to==t))u.push(n),e++,r=Math.min(n.to,r);else{r=Math.min(n.from,r);break}}let s=E(u);if(u.some(e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from))c.add(t,t,i.NZ.widget({widget:new S(s),diagnostics:u.slice()}));else{let e=u.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");c.add(t,r,i.NZ.mark({class:"cm-lintRange cm-lintRange-"+s+e,diagnostics:u.slice(),inclusiveEnd:u.some(e=>e.to>r)}))}d=r;for(let e=0;e<u.length;e++)u[e].to<=d&&u.splice(e--,1)}let f=c.finish();return new l(f,t,a(f))}}function a(e,t=null,n=0){let i=null;return e.between(n,1e9,(e,n,{spec:r})=>{if(!(t&&0>r.diagnostics.indexOf(t))){if(i){if(0>r.diagnostics.indexOf(i.diagnostic))return!1;i=new s(i.from,n,i.diagnostic)}else i=new s(e,n,t||r.diagnostics[0])}}),i}function h(e,t){let n=t.pos,i=t.end||n,r=e.state.facet(w).hideOn(e,n,i);if(null!=r)return r;let o=e.startState.doc.lineAt(t.pos);return!!(e.effects.some(e=>e.is(u))||e.changes.touchesRange(o.from,Math.max(o.to,i)))}function c(e,t){return e.field(p,!1)?t:t.concat(r.Pe.appendConfig.of(N))}let u=r.Pe.define(),d=r.Pe.define(),f=r.Pe.define(),p=r.sU.define({create:()=>new l(i.NZ.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),i=null,r=e.panel;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);i=a(n,e.selected.diagnostic,r)||a(n,null,r)}!n.size&&r&&t.state.facet(w).autoPanel&&(r=null),e=new l(n,r,i)}for(let n of t.effects)if(n.is(u)){let i=t.state.facet(w).autoPanel?n.value.length?T.open:null:e.panel;e=l.init(n.value,i,t.state)}else n.is(d)?e=new l(e.diagnostics,n.value?T.open:null,e.selected):n.is(f)&&(e=new l(e.diagnostics,e.panel,n.value));return e},provide:e=>[i.S7.from(e,e=>e.panel),i.Lz.decorations.from(e,e=>e.diagnostics)]}),g=i.NZ.mark({class:"cm-lintRange cm-lintRange-active"});function m(e,t){return(0,o.A)("ul",{class:"cm-tooltip-lint"},t.map(t=>k(e,t,!1)))}let v=e=>{let t=e.state.field(p,!1);return!!t&&!!t.panel&&(e.dispatch({effects:d.of(!1)}),!0)},y=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(p,!1);t&&t.panel||e.dispatch({effects:c(e.state,[d.of(!0)])});let n=(0,i.ld)(e,T.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(p,!1);if(!t)return!1;let n=e.state.selection.main,i=t.diagnostics.iter(n.to+1);return(!!i.value||!!(i=t.diagnostics.iter(0)).value&&(i.from!=n.from||i.to!=n.to))&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)}}],b=i.Z9.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(w);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){clearTimeout(this.timeout);let e=Date.now();if(e<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(w);t.length&&function(e,t,n){let i=[],r=-1;for(let o of e)o.then(n=>{i.push(n),clearTimeout(r),i.length==e.length?t(i):r=setTimeout(()=>t(i),200)},n)}(t.map(e=>Promise.resolve(e(this.view))),t=>{if(this.view.state.doc==e.doc){var n,i;this.view.dispatch((n=this.view.state,i=t.reduce((e,t)=>e.concat(t)),{effects:c(n,[u.of(i)])}))}},e=>{(0,i.c_)(this.view.state,e)})}}update(e){let t=e.state.facet(w);(e.docChanged||t!=e.startState.facet(w)||t.needsRefresh&&t.needsRefresh(e))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),w=r.sj.define({combine:e=>Object.assign({sources:e.map(e=>e.source).filter(e=>null!=e)},(0,r.QR)(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))});function _(e,t={}){return[w.of({source:e,config:t}),b,N]}function x(e){let t=[];if(e)t:for(let{name:n}of e){for(let e=0;e<n.length;e++){let i=n[e];if(/[a-zA-Z]/.test(i)&&!t.some(e=>e.toLowerCase()==i.toLowerCase())){t.push(i);continue t}}t.push("")}return t}function k(e,t,n){var i;let r=n?x(t.actions):[];return(0,o.A)("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},(0,o.A)("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(i=t.actions)||void 0===i?void 0:i.map((n,i)=>{let s=!1,l=i=>{if(i.preventDefault(),s)return;s=!0;let r=a(e.state.field(p).diagnostics,t);r&&n.apply(e,r.from,r.to)},{name:h}=n,c=r[i]?h.indexOf(r[i]):-1,u=c<0?h:[h.slice(0,c),(0,o.A)("u",h.slice(c,c+1)),h.slice(c+1)];return(0,o.A)("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${h}${c<0?"":` (access key "${r[i]})"`}.`},u)}),t.source&&(0,o.A)("div",{class:"cm-diagnosticSource"},t.source))}class S extends i.xO{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return(0,o.A)("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class C{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(0xffffffff*Math.random()).toString(16),this.dom=k(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class T{constructor(e){this.view=e,this.items=[],this.list=(0,o.A)("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)v(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65)||!(t.keyCode<=90)||!(this.selectedIndex>=0))return;let{diagnostic:n}=this.items[this.selectedIndex],i=x(n.actions);for(let r=0;r<i.length;r++)if(i[r].toUpperCase().charCodeAt(0)==t.keyCode){let t=a(this.view.state.field(p).diagnostics,n);t&&n.actions[r].apply(e,t.from,t.to)}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=(0,o.A)("div",{class:"cm-panel-lint"},this.list,(0,o.A)("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>v(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(p).selected;if(!e)return -1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return -1}update(){let{diagnostics:e,selected:t}=this.view.state.field(p),n=0,i=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(e,s,{spec:l})=>{for(let e of l.diagnostics){if(o.has(e))continue;o.add(e);let s=-1,l;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==e){s=t;break}s<0?(l=new C(this.view,e),this.items.splice(n,0,l),i=!0):(l=this.items[s],s>n&&(this.items.splice(n,s-n),i=!0)),t&&l.diagnostic==t.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),r=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new C(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let n=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/n:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=a(this.view.state.field(p).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:f.of(t)})}static open(e){return new T(e)}}function A(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}let O=i.Lz.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:A("#d11")},".cm-lintRange-warning":{backgroundImage:A("orange")},".cm-lintRange-info":{backgroundImage:A("#999")},".cm-lintRange-hint":{backgroundImage:A("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function E(e){let t="hint",n=1;for(let r of e){var i;let e="error"==(i=r.severity)?4:"warning"==i?3:"info"==i?2:1;e>n&&(n=e,t=r.severity)}return t}class M extends i.wJ{constructor(e){super(),this.diagnostics=e,this.severity=E(e)}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let n=this.diagnostics,i=e.state.facet(L).tooltipFilter;return i&&(n=i(n,e.state)),n.length&&(t.onmouseover=()=>(function(e,t,n){function i(){let i,r=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(r.from)&&e.dispatch({effects:D.of({pos:r.from,above:!1,clip:!1,create:()=>({dom:m(e,n),getCoords:()=>t.getBoundingClientRect()})})}),t.onmouseout=t.onmousemove=null,i=n=>{let r=t.getBoundingClientRect();if(!(n.clientX>r.left-10)||!(n.clientX<r.right+10)||!(n.clientY>r.top-10)||!(n.clientY<r.bottom+10)){for(let e=n.target;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",i),e.state.field(P)&&e.dispatch({effects:D.of(null)})}},window.addEventListener("mousemove",i)}let{hoverTime:r}=e.state.facet(L),o=setTimeout(i,r);t.onmouseout=()=>{clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(o),o=setTimeout(i,r)}})(e,t,n)),t}}let D=r.Pe.define(),P=r.sU.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=h(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce((e,t)=>t.is(D)?t.value:e,e)),provide:e=>i.DK.from(e)}),N=[p,i.Lz.decorations.compute([p],e=>{let{selected:t,panel:n}=e.field(p);return t&&n&&t.from!=t.to?i.NZ.set([g.range(t.from,t.to)]):i.NZ.none}),(0,i.Ux)(function(e,t,n){let{diagnostics:i}=e.state.field(p),r,o=-1,s=-1;i.between(t-(n<0?1:0),t+(n>0?1:0),(e,i,{spec:l})=>{if(t>=e&&t<=i&&(e==i||(t>e||n>0)&&(t<i||n<0)))return r=l.diagnostics,o=e,s=i,!1});let l=e.state.facet(w).tooltipFilter;return(r&&l&&(r=l(r,e.state)),r)?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:m(e,r)})}:null},{hideOn:h}),O],L=r.sj.define({combine:e=>(0,r.QR)(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})})},616405:(e,t,n)=>{"use strict";n.d(t,{$P:()=>E,Aw:()=>G,Eo:()=>ei,Hg:()=>K,L0:()=>M,Ri:()=>z,gN:()=>_,ve:()=>q,yh:()=>Y});var i=n(306947),r=n(59696),o=n(235093);let s="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class l{constructor(e,t,n=0,i=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?e=>r(s(e)):s,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return -1;this.bufferPos=0,this.buffer=this.iter.value}return(0,r.vS)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=(0,r.MK)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=(0,r.Fh)(e);let i=this.normalize(t);if(i.length)for(let e=0,r=n;;e++){let o=i.charCodeAt(e),s=this.match(o,r,this.bufferPos+this.bufferStart);if(e==i.length-1){if(s)return this.value=s,this;break}r==n&&e<t.length&&t.charCodeAt(e)==o&&r++}}}match(e,t,n){let i=null;for(let t=0;t<this.matches.length;t+=2){let r=this.matches[t],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[t+1],to:n}:(this.matches[t]++,o=!0)),o||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}"undefined"!=typeof Symbol&&(l.prototype[Symbol.iterator]=function(){return this});let a={from:-1,to:-1,match:/.*/.exec("")},h="gm"+(null==/x/.unicode?"":"u");class c{constructor(e,t,n,i=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=a,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new f(e,t,n,i,r);this.re=new RegExp(t,h+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=p(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=p(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}let u=new WeakMap;class d{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=u.get(e);if(!i||i.from>=n||i.to<=t){let i=new d(t,e.sliceString(t,n));return u.set(e,i),i}if(i.from==t&&i.to==n)return i;let{text:r,from:o}=i;return o>t&&(r=e.sliceString(t,o)+r,o=t),i.to<n&&(r+=e.sliceString(i.to,n)),u.set(e,new d(o,r)),new d(t,r.slice(t-o,n-o))}}class f{constructor(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=a,this.matchPos=p(e,i),this.re=new RegExp(t,h+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=d.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=p(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=d.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function p(e,t){if(t>=e.length)return t;let n=e.lineAt(t),i;for(;t<n.to&&(i=n.text.charCodeAt(t-n.from))>=56320&&i<57344;)t++;return t}function g(e){let t=String(e.state.doc.lineAt(e.state.selection.main.head).number),n=(0,o.A)("input",{class:"cm-textfield",name:"line",value:t});function s(){let t=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!t)return;let{state:o}=e,s=o.doc.lineAt(o.selection.main.head),[,l,a,h,c]=t,u=h?+h.slice(1):0,d=a?+a:s.number;if(a&&c){let e=d/100;l&&(e=e*("-"==l?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*e)}else a&&l&&(d=d*("-"==l?-1:1)+s.number);let f=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),p=r.OF.cursor(f.from+Math.max(0,Math.min(u,f.length)));e.dispatch({effects:[m.of(!1),i.Lz.scrollIntoView(p.from,{y:"center"})],selection:p}),e.focus()}return{dom:(0,o.A)("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:m.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),s())},onsubmit:e=>{e.preventDefault(),s()}},(0,o.A)("label",e.state.phrase("Go to line"),": ",n)," ",(0,o.A)("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(c.prototype[Symbol.iterator]=f.prototype[Symbol.iterator]=function(){return this});let m=r.Pe.define(),v=r.sU.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(m)&&(e=n.value);return e},provide:e=>i.S7.from(e,e=>e?g:null)}),y=i.Lz.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),b={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},w=r.sj.define({combine:e=>(0,r.QR)(e,b,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function _(e){let t=[T,C];return e&&t.push(w.of(e)),t}let x=i.NZ.mark({class:"cm-selectionMatch"}),k=i.NZ.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function S(e,t,n,i){return(0==n||e(t.sliceDoc(n-1,n))!=r.Je.Word)&&(i==t.doc.length||e(t.sliceDoc(i,i+1))!=r.Je.Word)}let C=i.Z9.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(w),{state:n}=e,o=n.selection;if(o.ranges.length>1)return i.NZ.none;let s=o.main,a,h=null;if(s.empty){if(!t.highlightWordAroundCursor)return i.NZ.none;let e=n.wordAt(s.head);if(!e)return i.NZ.none;h=n.charCategorizer(s.head),a=n.sliceDoc(e.from,e.to)}else{let e=s.to-s.from;if(e<t.minSelectionLength||e>200)return i.NZ.none;if(t.wholeWords){var c,u,d;if(a=n.sliceDoc(s.from,s.to),!(S(h=n.charCategorizer(s.head),n,s.from,s.to)&&(c=h,u=s.from,d=s.to,c(n.sliceDoc(u,u+1))==r.Je.Word&&c(n.sliceDoc(d-1,d))==r.Je.Word)))return i.NZ.none}else if(!(a=n.sliceDoc(s.from,s.to)))return i.NZ.none}let f=[];for(let r of e.visibleRanges){let e=new l(n.doc,a,r.from,r.to);for(;!e.next().done;){let{from:r,to:o}=e.value;if((!h||S(h,n,r,o))&&(s.empty&&r<=s.from&&o>=s.to?f.push(k.range(r,o)):(r>=s.to||o<=s.from)&&f.push(x.range(r,o)),f.length>t.maxMatches))return i.NZ.none}}return i.NZ.set(f)}},{decorations:e=>e.decorations}),T=i.Lz.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),A=({state:e,dispatch:t})=>{let{selection:n}=e,i=r.OF.create(n.ranges.map(t=>e.wordAt(t.head)||r.OF.cursor(t.head)),n.mainIndex);return!i.eq(n)&&(t(e.update({selection:i})),!0)},O=r.sj.define({combine:e=>(0,r.QR)(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new er(e),scrollToMatch:e=>i.Lz.scrollIntoView(e)})});function E(e){return e?[O.of(e),eh]:eh}class M{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,h),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new F(this):new N(this)}getCursor(e,t=0,n){let i=e.doc?e:r.$t.create({doc:e});return null==n&&(n=i.doc.length),this.regexp?L(this,i,t,n):P(this,i,t,n)}}class D{constructor(e){this.spec=e}}function P(e,t,n,i){var o,s;return new l(t.doc,e.unquoted,n,i,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?(o=t.doc,s=t.charCategorizer(t.selection.main.head),(e,t,n,i)=>((i>e||i+n.length<t)&&(i=Math.max(0,e-2),n=o.sliceString(i,Math.min(o.length,t+2))),(s(R(n,e-i))!=r.Je.Word||s(I(n,e-i))!=r.Je.Word)&&(s(I(n,t-i))!=r.Je.Word||s(R(n,t-i))!=r.Je.Word))):void 0)}class N extends D{constructor(e){super(e)}nextMatch(e,t,n){let i=P(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);i=P(this.spec,e,0,n).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==n?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let n=Math.max(t,i-1e4-this.spec.unquoted.length),r=P(this.spec,e,n,i),o=null;for(;!r.nextOverlapping().done;)o=r.value;if(o)return o;if(n==t)return null;i-=1e4}}prevMatch(e,t,n){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=P(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=P(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function L(e,t,n,i){var o;return new c(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(o=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(o(R(n.input,n.index))!=r.Je.Word||o(I(n.input,n.index))!=r.Je.Word)&&(o(I(n.input,n.index+n[0].length))!=r.Je.Word||o(R(n.input,n.index+n[0].length))!=r.Je.Word)):void 0},n,i)}function R(e,t){return e.slice((0,r.zK)(e,t,!1),t)}function I(e,t){return e.slice(t,(0,r.zK)(e,t))}class F extends D{nextMatch(e,t,n){let i=L(this.spec,e,n,e.doc.length).next();return i.done&&(i=L(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let r=Math.max(t,n-1e4*i),o=L(this.spec,e,r,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(r==t||s.from>r+10))return s;if(r==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if("&"==n)return e.match[0];if("$"==n)return"$";for(let t=n.length;t>0;t--){let i=+n.slice(0,t);if(i>0&&i<e.match.length)return e.match[i]+n.slice(t)}return t})}matchAll(e,t){let n=L(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=L(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}let z=r.Pe.define(),B=r.Pe.define(),W=r.sU.define({create:e=>new j(X(e).create(),null),update(e,t){for(let n of t.effects)n.is(z)?e=new j(n.value.create(),e.panel):n.is(B)&&(e=new j(e.query,n.value?J:null));return e},provide:e=>i.S7.from(e,e=>e.panel)});class j{constructor(e,t){this.query=e,this.panel=t}}let H=i.NZ.mark({class:"cm-searchMatch"}),V=i.NZ.mark({class:"cm-searchMatch cm-searchMatch-selected"}),U=i.Z9.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(W))}update(e){let t=e.state.field(W);(t!=e.startState.field(W)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return i.NZ.none;let{view:n}=this,o=new r.vB;for(let t=0,i=n.visibleRanges,r=i.length;t<r;t++){let{from:s,to:l}=i[t];for(;t<r-1&&l>i[t+1].from-500;)l=i[++t].to;e.highlight(n.state,s,l,(e,t)=>{let i=n.state.selection.ranges.some(n=>n.from==e&&n.to==t);o.add(e,t,i?V:H)})}return o.finish()}},{decorations:e=>e.decorations});function $(e){return t=>{let n=t.state.field(W,!1);return n&&n.query.spec.valid?e(t,n):et(t)}}let K=$((e,{query:t})=>{let{to:n}=e.state.selection.main,i=t.nextMatch(e.state,n,n);if(!i)return!1;let o=r.OF.single(i.from,i.to),s=e.state.facet(O);return e.dispatch({selection:o,effects:[el(e,i),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),ee(e),!0}),q=$((e,{query:t})=>{let{state:n}=e,{from:i}=n.selection.main,o=t.prevMatch(n,i,i);if(!o)return!1;let s=r.OF.single(o.from,o.to),l=e.state.facet(O);return e.dispatch({selection:s,effects:[el(e,o),l.scrollToMatch(s.main,e)],userEvent:"select.search"}),ee(e),!0}),Z=$((e,{query:t})=>{let n=t.matchAll(e.state,1e3);return!!n&&!!n.length&&(e.dispatch({selection:r.OF.create(n.map(e=>r.OF.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),G=$((e,{query:t})=>{let{state:n}=e,{from:o,to:s}=n.selection.main;if(n.readOnly)return!1;let l=t.nextMatch(n,o,o);if(!l)return!1;let a=l,h=[],c,u,d=[];if(a.from==o&&a.to==s&&(u=n.toText(t.getReplacement(a)),h.push({from:a.from,to:a.to,insert:u}),a=t.nextMatch(n,a.from,a.to),d.push(i.Lz.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(o).number)+"."))),a){let t=0==h.length||h[0].from>=l.to?0:l.to-l.from-u.length;c=r.OF.single(a.from-t,a.to-t),d.push(el(e,a)),d.push(n.facet(O).scrollToMatch(c.main,e))}return e.dispatch({changes:h,selection:c,effects:d,userEvent:"input.replace"}),!0}),Y=$((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state,1e9).map(e=>{let{from:n,to:i}=e;return{from:n,to:i,insert:t.getReplacement(e)}});if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:i.Lz.announce.of(r),userEvent:"input.replace.all"}),!0});function J(e){return e.state.facet(O).createPanel(e)}function X(e,t){var n,i,r,o,s;let l=e.selection.main,a=l.empty||l.to>l.from+100?"":e.sliceDoc(l.from,l.to);if(t&&!a)return t;let h=e.facet(O);return new M({search:(null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:h.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==t?void 0:t.caseSensitive)&&void 0!==i?i:h.caseSensitive,literal:null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:h.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:h.regexp,wholeWord:null!==(s=null==t?void 0:t.wholeWord)&&void 0!==s?s:h.wholeWord})}function Q(e){let t=(0,i.ld)(e,J);return t&&t.dom.querySelector("[main-field]")}function ee(e){let t=Q(e);t&&t==e.root.activeElement&&t.select()}let et=e=>{let t=e.state.field(W,!1);if(t&&t.panel){let n=Q(e);if(n&&n!=e.root.activeElement){let i=X(e.state,t.query.spec);i.valid&&e.dispatch({effects:z.of(i)}),n.focus(),n.select()}}else e.dispatch({effects:[B.of(!0),t?z.of(X(e.state,t.query.spec)):r.Pe.appendConfig.of(eh)]});return!0},en=e=>{let t=e.state.field(W,!1);if(!t||!t.panel)return!1;let n=(0,i.ld)(e,J);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:B.of(!1)}),!0},ei=[{key:"Mod-f",run:et,scope:"editor search-panel"},{key:"F3",run:K,shift:q,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:K,shift:q,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:en,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:o}=n.main,s=[],a=0;for(let t=new l(e.doc,e.sliceDoc(i,o));!t.next().done;){if(s.length>1e3)return!1;t.value.from==i&&(a=s.length),s.push(r.OF.range(t.value.from,t.value.to))}return t(e.update({selection:r.OF.create(s,a),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=(0,i.ld)(e,g);if(!t){let n=[m.of(!0)];null==e.state.field(v,!1)&&n.push(r.Pe.appendConfig.of([v,y])),e.dispatch({effects:n}),t=(0,i.ld)(e,g)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some(e=>e.from===e.to))return A({state:e,dispatch:t});let o=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=o))return!1;let s=function(e,t){let{main:n,ranges:i}=e.selection,r=e.wordAt(n.head),o=r&&r.from==n.from&&r.to==n.to;for(let n=!1,r=new l(e.doc,t,i[i.length-1].to);;)if(r.next(),r.done){if(n)return null;r=new l(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),n=!0}else{if(n&&i.some(e=>e.from==r.value.from))continue;if(o){let t=e.wordAt(r.value.from);if(!t||t.from!=r.value.from||t.to!=r.value.to)continue}return r.value}}(e,o);return!!s&&(t(e.update({selection:e.selection.addRange(r.OF.range(s.from,s.to),!1),effects:i.Lz.scrollIntoView(s.to)})),!0)},preventDefault:!0}];class er{constructor(e){this.view=e;let t=this.query=e.state.field(W).query.spec;function n(e,t,n){return(0,o.A)("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=(0,o.A)("input",{value:t.search,placeholder:eo(e,"Find"),"aria-label":eo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=(0,o.A)("input",{value:t.replace,placeholder:eo(e,"Replace"),"aria-label":eo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=(0,o.A)("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=(0,o.A)("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=(0,o.A)("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=(0,o.A)("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",()=>K(e),[eo(e,"next")]),n("prev",()=>q(e),[eo(e,"previous")]),n("select",()=>Z(e),[eo(e,"all")]),(0,o.A)("label",null,[this.caseField,eo(e,"match case")]),(0,o.A)("label",null,[this.reField,eo(e,"regexp")]),(0,o.A)("label",null,[this.wordField,eo(e,"by word")]),...e.state.readOnly?[]:[(0,o.A)("br"),this.replaceField,n("replace",()=>G(e),[eo(e,"replace")]),n("replaceAll",()=>Y(e),[eo(e,"replace all")])],(0,o.A)("button",{name:"close",onclick:()=>en(e),"aria-label":eo(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new M({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:z.of(e)}))}keydown(e){(0,i.TS)(this.view,e,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?q:K)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),G(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(z)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(O).top}}function eo(e,t){return e.state.phrase(t)}let es=/[\s\.,:;?!]/;function el(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),o=e.state.doc.lineAt(n).to,s=Math.max(r.from,t-30),l=Math.min(o,n+30),a=e.state.sliceDoc(s,l);if(s!=r.from){for(let e=0;e<30;e++)if(!es.test(a[e+1])&&es.test(a[e])){a=a.slice(e);break}}if(l!=o){for(let e=a.length-1;e>a.length-30;e--)if(!es.test(a[e-1])&&es.test(a[e])){a=a.slice(0,e);break}}return i.Lz.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}let ea=i.Lz.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),eh=[W,r.Nb.low(U),ea]},306947:(e,t,n)=>{"use strict";let i;n.d(t,{$K:()=>i0,A:()=>nY,D4:()=>io,DK:()=>iw,Eg:()=>iT,HJ:()=>ia,Lz:()=>nv,N$:()=>n6,NZ:()=>er,OP:()=>em,S7:()=>iN,TS:()=>nO,Ux:()=>iC,VH:()=>nW,Wu:()=>i6,Z9:()=>eG,cU:()=>iB,c_:()=>e$,dT:()=>nX,dz:()=>n9,ld:()=>iE,qf:()=>ii,vX:()=>iu,w4:()=>nC,wJ:()=>iL,xO:()=>en});var r=n(59696),o=n(804148),s=n(606678);function l(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function a(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function h(e,t){if(!t.anchorNode)return!1;try{return a(e,t.anchorNode)}catch(e){return!1}}function c(e){return 3==e.nodeType?_(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function u(e,t,n,i){return!!n&&(p(e,t,n,i,-1)||p(e,t,n,i,1))}function d(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function f(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function p(e,t,n,i,r){for(;;){if(e==n&&t==i)return!0;if(t==(r<0?0:g(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=d(e)+(r<0?0:1),e=n}else{if(1!=e.nodeType||1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?g(e):0}}}function g(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function m(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function v(e,t){let n=t.width/e.offsetWidth,i=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||1>Math.abs(t.width-e.offsetWidth))&&(n=1),(i>.995&&i<1.005||!isFinite(i)||1>Math.abs(t.height-e.offsetHeight))&&(i=1),{scaleX:n,scaleY:i}}class y{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?g(t):0),n,Math.min(e.focusOffset,n?g(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let b=null;function w(e){if(e.setActive)return e.setActive();if(b)return e.focus(b);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==b?{get preventScroll(){return b={preventScroll:!0},!0}}:void 0),!b){b=!1;for(let e=0;e<t.length;){let n=t[e++],i=t[e++],r=t[e++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function _(e,t,n=t){let r=i||(i=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function x(e,t,n,i){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,e.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,e.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function k(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function S(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function C(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;i=g(n=n.childNodes[i-1])}else{if(!n.parentNode||f(n))return null;i=d(n),n=n.parentNode}}}function T(e,t){for(let n=e,i=t;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||f(n))return null;i=d(n)+1,n=n.parentNode}}}class A{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new A(e.parentNode,d(e),t)}static after(e,t){return new A(e.parentNode,d(e)+1,t)}}let O=[];class E{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n=this.dom,i=null,r;for(let o of this.children){if(7&o.flags){if(!o.dom&&(r=i?i.nextSibling:n.firstChild)){let e=E.get(r);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&r!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;r&&r!=o.dom;)r=M(r);else n.insertBefore(o.dom,r);i=o.dom}for((r=i?i.nextSibling:n.firstChild)&&t&&t.node==n&&(t.written=!0);r;)r=M(r)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=0==g(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==i&&t.firstChild!=t.lastChild&&(i=e==t.firstChild?-1:1),e=t}n=i<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!E.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let i=this.children[e];if(i.dom==n)return t;t+=i.length+i.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,r=-1,o=-1,s=-1;for(let l=0,a=n,h=n;l<this.children.length;l++){let n=this.children[l],c=a+n.length;if(a<e&&c>t)return n.domBoundsAround(e,t,a);if(c>=e&&-1==i&&(i=l,r=a),a>t&&n.dom.parentNode==this.dom){o=l,s=h;break}h=c,a=c+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=O){this.markDirty();for(let i=e;i<t;i++){let e=this.children[i];e.parent==this&&0>n.indexOf(e)&&e.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new D(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function M(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}E.prototype.breakAfter=0;class D{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function P(e,t,n,i,r,o,s,l,a){let{children:h}=e,c=h.length?h[t]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(t==i&&c&&!s&&!d&&o.length<2&&c.merge(n,r,o.length?u:null,0==n,l,a))){if(i<h.length){let e=h[i];e&&(r<e.length||e.breakAfter&&(null==u?void 0:u.breakAfter))?(t==i&&(e=e.split(r),r=0),!d&&u&&e.merge(0,r,u,!0,0,a)?o[o.length-1]=e:((r||e.children.length&&!e.children[0].length)&&e.merge(0,r,null,!1,0,a),o.push(e))):(null==e?void 0:e.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(c&&(c.breakAfter=s,n>0&&(!s&&o.length&&c.merge(n,c.length,o[0],!1,l,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,l,0),t++));t<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),a=o.length?0:l;else if(h[t].become(o[0]))t++,o.shift(),l=o.length?0:a;else break;!o.length&&t&&i<h.length&&!h[t-1].breakAfter&&h[i].merge(0,0,h[t-1],!1,l,a)&&t--,(t<i||o.length)&&e.replaceChildren(t,i,o)}}function N(e,t,n,i,r,o){let s=e.childCursor(),{i:l,off:a}=s.findPos(n,1),{i:h,off:c}=s.findPos(t,-1),u=t-n;for(let e of i)u+=e.length;e.length+=u,P(e,h,c,l,a,i,0,r,o)}let L="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},R="undefined"!=typeof document?document:{documentElement:{style:{}}},I=/Edge\/(\d+)/.exec(L.userAgent),F=/MSIE \d/.test(L.userAgent),z=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(L.userAgent),B=!!(F||z||I),W=!B&&/gecko\/(\d+)/i.test(L.userAgent),j=!B&&/Chrome\/(\d+)/.exec(L.userAgent),H="webkitFontSmoothing"in R.documentElement.style,V=!B&&/Apple Computer/.test(L.vendor),U=V&&(/Mobile\/\w+/.test(L.userAgent)||L.maxTouchPoints>2);var $={mac:U||/Mac/.test(L.platform),windows:/Win/.test(L.platform),linux:/Linux|X11/.test(L.platform),ie:B,ie_version:F?R.documentMode||6:z?+z[1]:I?+I[1]:0,gecko:W,gecko_version:W?+(/Firefox\/(\d+)/.exec(L.userAgent)||[0,0])[1]:0,chrome:!!j,chrome_version:j?+j[1]:0,ios:U,android:/Android\b/.test(L.userAgent),webkit:H,safari:V,webkit_version:H?+(/\bAppleWebKit\/(\d+)/.exec(L.userAgent)||[0,0])[1]:0,tabSize:null!=R.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class K extends E{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags)&&(!n||n instanceof K&&!(this.length-(t-e)+n.length>256)&&!(8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new K(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new A(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let i=e.nodeValue.length;t>i&&(t=i);let r=t,o=t,s=0;0==t&&n<0||t==i&&n>=0?!($.chrome||$.gecko)&&(t?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let l=_(e,r,o).getClientRects();if(!l.length)return null;let a=l[(s?s<0:n>=0)?0:l.length-1];return $.safari&&!s&&0==a.width&&(a=Array.prototype.find.call(l,e=>e.width)||a),s?m(a,s<0):a||null}(this.dom,e,t)}}class q extends E{constructor(e,t=[],n=0){for(let i of(super(),this.mark=e,this.children=t,this.length=n,t))i.setParent(this)}setAttrs(e){if(k(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,r,o){return(!n||!!(n instanceof q&&n.mark.eq(this.mark))&&(!e||!(r<=0))&&(!(t<this.length)||!(o<=0)))&&(N(this,e,t,n?n.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),i<0&&n>=e&&(i=r),n=s,r++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new q(this.mark,t,o)}domAtPos(e){return Y(this,e)}coordsAt(e,t){return J(this,e,t)}}class Z extends E{static create(e,t,n){return new Z(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=Z.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,r,o){return(!n||n instanceof Z&&!!this.widget.compare(n.widget)&&(!(e>0)||!(r<=0))&&(!(t<this.length)||!(o<=0)))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Z&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return r.EY.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):r.EY.empty}domAtPos(e){return(this.length?0==e:this.side>0)?A.before(this.dom):A.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let t=o?i.length-1:0;r=i[t],e>0?0!=t:t!=i.length-1&&!(r.top<r.bottom);t+=o?-1:1);return m(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class G extends E{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof G&&e.side==this.side}split(){return new G(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?A.before(this.dom):A.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return r.EY.empty}get isHidden(){return!0}}function Y(e,t){let n=e.dom,{children:i}=e,r=0;for(let e=0;r<i.length;r++){let o=i[r],s=e+o.length;if(!(s==e&&0>=o.getSide())){if(t>e&&t<s&&o.dom.parentNode==n)return o.domAtPos(t-e);if(t<=e)break;e=s}}for(let e=r;e>0;e--){let t=i[e-1];if(t.dom.parentNode==n)return t.domAtPos(t.length)}for(let e=r;e<i.length;e++){let t=i[e];if(t.dom.parentNode==n)return t.domAtPos(0)}return new A(n,0)}function J(e,t,n){let i=null,r=-1,o=null,s=-1;!function e(t,l){for(let a=0,h=0;a<t.children.length&&h<=l;a++){let c=t.children[a],u=h+c.length;u>=l&&(c.children.length?e(c,l-h):(!o||o.isHidden&&n>0)&&(u>l||h==u&&c.getSide()>0)?(o=c,s=l-h):(h<l||h==u&&0>c.getSide()&&!c.isHidden)&&(i=c,r=l-h)),h=u}}(e,t);let l=(n<0?i:o)||i||o;return l?l.coordsAt(Math.max(0,l==i?r:s),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=c(t);return n[n.length-1]||null}(e)}function X(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}K.prototype.children=Z.prototype.children=G.prototype.children=O;let Q=Object.create(null);function ee(e,t,n){if(e==t)return!0;e||(e=Q),t||(t=Q);let i=Object.keys(e),r=Object.keys(t);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||e[o]!==t[o]))return!1;return!0}function et(e,t,n){let i=!1;if(t)for(let r in t)n&&r in n||(i=!0,"style"==r?e.style.cssText="":e.removeAttribute(r));if(n)for(let r in n)t&&t[r]==n[r]||(i=!0,"style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i}class en{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ei=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(ei||(ei={}));class er extends r.FB{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new eo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new el(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:r,end:o}=ea(e,t);n=(r?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new el(e,n,i,t,e.widget||null,!0)}static line(e){return new es(e)}static set(e,t=!1){return r.om.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}er.none=r.om.empty;class eo extends er{constructor(e){let{start:t,end:n}=ea(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof eo&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&ee(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw RangeError("Mark decorations may not be empty");return super.range(e,t)}}eo.prototype.point=!1;class es extends er{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof es&&this.spec.class==e.spec.class&&ee(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}es.prototype.mapMode=r.iR.TrackBefore,es.prototype.point=!0;class el extends er{constructor(e,t,n,i,o,s){super(t,n,o,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?r.iR.TrackBefore:r.iR.TrackAfter:r.iR.TrackDel}get type(){return this.startSide!=this.endSide?ei.WidgetRange:this.startSide<=0?ei.WidgetBefore:ei.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){var t,n;return e instanceof el&&((t=this.widget)==(n=e.widget)||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function ea(e,t=!1){let{inclusiveStart:n,inclusiveEnd:i}=e;return null==n&&(n=e.inclusive),null==i&&(i=e.inclusive),{start:null!=n?n:t,end:null!=i?i:t}}function eh(e,t,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=e?n[r]=Math.max(n[r],t):n.push(e,t)}el.prototype.point=!0;class ec extends E{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,r,o){if(n){if(!(n instanceof ec))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),N(this,e,t,n?n.children.slice():[],r,o),!0}split(e){let t=new ec;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ee(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){!function e(t,n,i){let r,{children:o}=t;i>0&&n instanceof q&&o.length&&(r=o[o.length-1])instanceof q&&r.mark.eq(n.mark)?e(r,n.children[0],i-1):(o.push(n),n.setParent(t)),t.length+=n.length}(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=X(t,this.attrs||{})),n&&(this.attrs=X({class:n},this.attrs||{}))}domAtPos(e){return Y(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(k(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(et(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&E.get(i)instanceof q;)i=i.lastChild;if(!i||!this.length||"BR"!=i.nodeName&&(null===(n=E.get(i))||void 0===n?void 0:n.isEditable)==!1&&(!$.ios||!this.children.some(e=>e instanceof K))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof K)||/[^ -~]/.test(n.text))return null;let i=c(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=J(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(2>Math.abs(t-e.lineHeight)&&e.textHeight<t){let i=(t-e.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(e){return e instanceof ec&&0==this.children.length&&0==e.children.length&&ee(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let r=e.children[n],o=i+r.length;if(o>=t){if(r instanceof ec)return r;if(o>t)break}i=o+r.breakAfter}return null}}class eu extends E{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,r,o){return(!n||n instanceof eu&&!!this.widget.compare(n.widget)&&(!(e>0)||!(r<=0))&&(!(t<this.length)||!(o<=0)))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?A.before(this.dom):A.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new eu(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return O}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):r.EY.empty}domBoundsAround(){return null}become(e){return e instanceof eu&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof ed?null:m(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class ed extends en{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ef{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof eu&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ec),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ep(new G(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof eu||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(ep(new K(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof el){if(n.block)throw RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof el){if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new eu(n.widget||eg.block,s,n));else{let o=Z.create(n.widget||eg.inline,s,s?0:n.startSide),l=this.atCursorPos&&!o.isEditable&&r<=i.length&&(e<t||n.startSide>0),a=!o.isEditable&&(e<t||r>i.length||n.startSide<=0),h=this.getLine();2!=this.pendingBuffer||l||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),l&&(h.append(ep(new G(1),i),r),r=i.length+Math.max(0,r-i.length)),h.append(ep(o,i),r),this.atCursorPos=a,this.pendingBuffer=a?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,n,i,o){let s=new ef(e,t,n,o);return s.openEnd=r.om.spans(i,t,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function ep(e,t){for(let n of t)e=new q(n,[e],e.length);return e}class eg extends en{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}eg.inline=new eg("span"),eg.block=new eg("div");var em=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(em||(em={}));let ev=em.LTR,ey=em.RTL;function eb(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}let ew=eb("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),e_=eb("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ex=Object.create(null),ek=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);ex[t]=n,ex[n]=-t}function eS(e){return e<=247?ew[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?e_[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}let eC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class eT{get dir(){return this.level%2?ey:ev}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let r=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<t:s.to>t:e[r].level>s.level))&&(r=o)}}if(r<0)throw RangeError("Index out of range");return r}}let eA=[];function eO(e){return[new eT(0,e,0)]}let eE="",eM=r.sj.define(),eD=r.sj.define(),eP=r.sj.define(),eN=r.sj.define(),eL=r.sj.define(),eR=r.sj.define(),eI=r.sj.define(),eF=r.sj.define(),ez=r.sj.define(),eB=r.sj.define({combine:e=>e.some(e=>e)}),eW=r.sj.define({combine:e=>e.some(e=>e)}),ej=r.sj.define();class eH{constructor(e,t="nearest",n="nearest",i=5,r=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new eH(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new eH(r.OF.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}let eV=r.Pe.define({map:(e,t)=>e.map(t)}),eU=r.Pe.define();function e$(e,t,n){let i=e.facet(eN);i.length?i[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}let eK=r.sj.define({combine:e=>!e.length||e[0]}),eq=0,eZ=r.sj.define();class eG{constructor(e,t,n,i,r){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(e,t){let{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=t||{};return new eG(eq++,e,n,i,e=>{let t=[eZ.of(e)];return o&&t.push(eQ.of(t=>{let n=t.plugin(e);return n?o(n):er.none})),r&&t.push(r(e)),t})}static fromClass(e,t){return eG.define(t=>new e(t),t)}}class eY{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(e$(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){e$(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){e$(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}let eJ=r.sj.define(),eX=r.sj.define(),eQ=r.sj.define(),e0=r.sj.define(),e1=r.sj.define(),e2=r.sj.define();function e5(e,t){let n=e.state.facet(e2);if(!n.length)return n;let i=n.map(t=>t instanceof Function?t(e):t),o=[];return r.om.spans(i,t.from,t.to,{point(){},span(e,n,i,r){let s=e-t.from,l=n-t.from,a=o;for(let e=i.length-1;e>=0;e--,r--){let n=i[e].spec.bidiIsolate,o;if(null==n&&(n=function(e,t,n){for(let i=t;i<n;i++){let t=eS(e.charCodeAt(i));if(1==t)break;if(2==t||4==t)return ey}return ev}(t.text,s,l)),r>0&&a.length&&(o=a[a.length-1]).to==s&&o.direction==n)o.to=l,a=o.inner;else{let e={from:s,to:l,direction:n,inner:[]};a.push(e),a=e.inner}}}}),o}let e6=r.sj.define();function e3(e){let t=0,n=0,i=0,r=0;for(let o of e.state.facet(e6)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:t,right:n,top:i,bottom:r}}let e8=r.sj.define();class e4{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new e4(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let l=i==e.length?null:e[i],a=o-s,h=l?l.fromB:1e9;for(;r<t.length&&t[r]<h;){let e=t[r],i=t[r+1],o=Math.max(s,e),l=Math.min(h,i);if(o<=l&&new e4(o+a,l+a,o,l).addToSet(n),i>h)break;r+=2}if(!l)return n;new e4(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,s=l.toB}}}class e9{constructor(e,t,n){for(let i of(this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=r.VR.empty(this.startState.doc.length),n))this.changes=this.changes.compose(i.changes);let i=[];this.changes.iterChangedRanges((e,t,n,r)=>i.push(new e4(e,t,n,r))),this.changedRanges=i}static create(e,t,n){return new e9(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class e7 extends E{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=er.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ec],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new e4(0,0,0,e.state.doc.length)],0,null)}update(e){var t,n,i,o,s,l;let a,h;let c=e.changedRanges;this.minWidth>0&&c.length&&(c.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let u=-1;!(this.view.inputState.composing>=0)||this.view.observer.editContext||((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?u=this.domChanged.newSel.head:(n=e.changes,i=this.hasComposition,a=!1,i&&n.iterChangedRanges((e,t)=>{e<i.to&&t>i.from&&(a=!0)}),a||e.selectionSet||(u=e.state.selection.main.head)));let d=u>-1?function(e,t,n){let i=te(e,n);if(!i)return null;let{node:r,from:o,to:s}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||e.state.doc.sliceString(i.from,i.to)!=l)return null;let a=t.invertedDesc,h=new e4(a.mapPos(o),a.mapPos(s),o,s),c=[];for(let t=r.parentNode;;t=t.parentNode){let n=E.get(t);if(n instanceof q)c.push({node:t,deco:n.mark});else{if(n instanceof ec||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:h,text:r,marks:c,line:t};if(t==e.contentDOM)return null;c.push({node:t,deco:new eo({inclusive:!0,attributes:function(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];t[i.name]=i.value}return t}(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,u):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:n}=this.hasComposition;c=new e4(t,n,e.changes.mapPos(t,-1),e.changes.mapPos(n,1)).addToSet(c.slice())}this.hasComposition=d?{from:d.range.fromB,to:d.range.toB}:null,($.ie||$.chrome)&&!d&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let f=(o=this.decorations,s=this.updateDeco(),l=e.changes,h=new tt,r.om.compare(o,s,l,h),h.changes);return c=e4.extendWithRanges(c,f),(!!(7&this.flags)||0!=c.length)&&(this.updateInner(c,e.startState.doc.length,d),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=$.chrome||$.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof eu&&e.widget instanceof ed&&r.push(e.dom);i.updateGaps(r)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let e=i.length-1;;e--){let t=e>=0?i[e]:null;if(!t)break;let{fromA:o,toA:s,fromB:l,toB:a}=t,h,c,u,d;if(n&&n.range.fromB<a&&n.range.toB>l){let e=ef.build(this.view.state.doc,l,n.range.fromB,this.decorations,this.dynamicDecorationMap),t=ef.build(this.view.state.doc,n.range.toB,a,this.decorations,this.dynamicDecorationMap);c=e.breakAtStart,u=e.openStart,d=t.openEnd;let i=this.compositionView(n);t.breakAtStart?i.breakAfter=1:t.content.length&&i.merge(i.length,i.length,t.content[0],!1,t.openStart,0)&&(i.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&i.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),h=e.content.concat(i).concat(t.content)}else({content:h,breakAtStart:c,openStart:u,openEnd:d}=ef.build(this.view.state.doc,l,a,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(s,1),{i:g,off:m}=r.findPos(o,-1);P(this,g,m,f,p,h,c,u,d)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){for(let t of(this.editContextFormatting=this.editContextFormatting.map(e.changes),e.transactions))for(let e of t.effects)e.is(eU)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new K(e.text.nodeValue);for(let{deco:n}of(t.flags|=8,e.marks))t=new q(n,[t],t.length);let n=new ec;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some(e=>7&e.flags)?1:0),this.markedForComposition.add(t);let n=E.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(e=!1,t=!1){var n;(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,o=!r&&!(this.view.state.facet(eK)||this.dom.tabIndex>-1)&&h(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||o))return;let s=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),d=a.empty?c:this.moveToLine(this.domAtPos(a.head));if($.gecko&&a.empty&&!this.hasComposition&&1==(n=c).node.nodeType&&n.node.firstChild&&(0==n.offset||"false"==n.node.childNodes[n.offset-1].contentEditable)&&(n.offset==n.node.childNodes.length||"false"==n.node.childNodes[n.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(e,c.node.childNodes[c.offset]||null)),c=d=new A(e,0),s=!0}let f=this.view.observer.selectionRange;!s&&f.focusNode&&(u(c.node,c.offset,f.anchorNode,f.anchorOffset)&&u(d.node,d.offset,f.focusNode,f.focusOffset)||this.suppressWidgetCursorChange(f,a))||(this.view.observer.ignore(()=>{$.android&&$.chrome&&this.dom.contains(f.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=l(this.view.root);if(e){if(a.empty){if($.gecko){var t,n;let e=(t=c.node,n=c.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=(1==e?C:T)(c.node,c.offset);t&&(c=new A(t.node,t.offset))}}e.collapse(c.node,c.offset),null!=a.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=a.bidiLevel)}else if(e.extend){e.collapse(c.node,c.offset);try{e.extend(d.node,d.offset)}catch(e){}}else{let t=document.createRange();a.anchor>a.head&&([c,d]=[d,c]),t.setEnd(d.node,d.offset),t.setStart(c.node,c.offset),e.removeAllRanges(),e.addRange(t)}}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,d)),this.impreciseAnchor=c.precise?null:new A(f.anchorNode,f.anchorOffset),this.impreciseHead=d.precise?null:new A(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=l(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=ec.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(i,r)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let e=E.get(t.childNodes[i]);e instanceof ec&&(n=e.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let e=E.get(t.childNodes[i]);e instanceof ec&&(n=e.domAtPos(e.length))}return n?new A(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let e=E.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof ec)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],l=r-s.breakAfter,a=l-s.length;if(l<e)break;if(a<=e&&(a<e||s.covers(-1))&&(l>e||s.covers(1))&&(!n||s instanceof ec&&!(n instanceof ec&&t>=0)))n=s,i=a;else if(n&&a==e&&l==e&&s instanceof eu&&2>Math.abs(t)){if(s.deco.startSide<0)break;o&&(n=null)}r=a}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof ec))return null;for(;i.children.length;){let{i:e,off:t}=i.childPos(n,1);for(;;e++){if(e==i.children.length)return null;if((i=i.children[e]).length)break}n=t}if(!(i instanceof K))return null;let o=(0,r.zK)(i.text,n);if(o==n)return null;let s=_(i.dom,n,o).getClientRects();for(let e=0;e<s.length;e++){let t=s[e];if(e==s.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==em.LTR;for(let e=0,a=0;a<this.children.length;a++){let h=this.children[a],u=e+h.length;if(u>i)break;if(e>=n){let n=h.dom.getBoundingClientRect();if(t.push(n.height),o){let t=h.dom.lastChild,i=t?c(t):[];if(i.length){let t=i[i.length-1],o=l?t.right-n.left:n.right-t.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?em.RTL:em.LTR}measureTextSize(){for(let e of this.children)if(e instanceof ec){let t=e.measureTextSize();if(t)return t}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=c(e.firstChild)[0];t=e.getBoundingClientRect().height,n=r?r.width/27:7,i=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new D(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(er.replace({widget:new ed(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return er.set(e)}updateDeco(){let e=1,t=this.view.state.facet(eQ).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),n=!1,i=this.view.state.facet(e0).map((e,t)=>{let i="function"==typeof e;return i&&(n=!0),i?e(this.view):e});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(r.om.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=t.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let t of this.view.state.facet(ej))try{if(t(this.view,e.range,e))return!0}catch(e){e$(this.view.state,e,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let r=e3(this.view),o={left:n.left-r.left,top:n.top-r.top,right:n.right+r.right,bottom:n.bottom+r.bottom},{offsetWidth:s,offsetHeight:l}=this.view.scrollDOM;!function(e,t,n,i,r,o,s,l){let a=e.ownerDocument,h=a.defaultView||window;for(let c=e,u=!1;c&&!u;)if(1==c.nodeType){let e,d=c==a.body,f=1,p=1;if(d)e=function(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:f,scaleY:p}=v(c,t)),e={left:t.left,right:t.left+c.clientWidth*f,top:t.top,bottom:t.top+c.clientHeight*p}}let g=0,m=0;if("nearest"==r)t.top<e.top?(m=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+m+s)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+s,n<0&&t.top-m<e.top&&(m=-(e.top+m-t.top+s)));else{let i=t.bottom-t.top,o=e.bottom-e.top;m=("center"==r&&i<=o?t.top+i/2-o/2:"start"==r||"center"==r&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==i?t.left<e.left?(g=-(e.left-t.left+o),n>0&&t.right>e.right+g&&(g=t.right-e.right+g+o)):t.right>e.right&&(g=t.right-e.right+o,n<0&&t.left<e.left+g&&(g=-(e.left+g-t.left+o))):g=("center"==i?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==i==l?t.left-o:t.right-(e.right-e.left)+o)-e.left,g||m){if(d)h.scrollBy(g,m);else{let e=0,n=0;if(m){let e=c.scrollTop;c.scrollTop+=m/p,n=(c.scrollTop-e)*p}if(g){let t=c.scrollLeft;c.scrollLeft+=g/f,e=(c.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&1>Math.abs(e-g)&&(i="nearest"),n&&1>Math.abs(n-m)&&(r="nearest")}}if(d)break;c=c.assignedSlot||c.parentNode}else if(11==c.nodeType)c=c.host;else break}(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==em.LTR)}}function te(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let i=C(n.focusNode,n.focusOffset),r=T(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let t=E.get(r.node);if(!t||t instanceof K&&t.text!=r.node.nodeValue)o=r;else if(e.docView.lastCompositionAfterCursor){let e=E.get(i.node);!e||e instanceof K&&e.text!=i.node.nodeValue||(o=r)}}if(e.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let tt=class{constructor(){this.changes=[]}compareRange(e,t){eh(e,t,this.changes)}comparePoint(e,t){eh(e,t,this.changes)}boundChange(e){eh(e,e,this.changes)}};function tn(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function ti(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function tr(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function to(e,t,n){let i=e.nodeValue.length,r=-1,o=1e9,s=0;for(let l=0;l<i;l++){let i=_(e,l,l+1).getClientRects();for(let a=0;a<i.length;a++){let h=i[a];if(h.top==h.bottom)continue;s||(s=t-h.left);let c=(h.top>n?h.top-n:n-h.bottom)-1;if(h.left-1<=t&&h.right+1>=t&&c<o){let n=t>=(h.left+h.right)/2,i=n;if(($.chrome||$.gecko)&&_(e,l).getBoundingClientRect().left==h.right&&(i=!n),c<=0)return{node:e,offset:l+(i?1:0)};r=l+(i?1:0),o=c}}}return{node:e,offset:r>-1?r:s>0?e.nodeValue.length:0}}function ts(e,t,n,i=-1){var r,o;let s=e.contentDOM.getBoundingClientRect(),l=s.top+e.viewState.paddingTop,a,{docHeight:h}=e.viewState,{x:u,y:d}=t,f=d-l;if(f<0)return 0;if(f>h)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,r=!1;(a=e.elementAtHeight(f)).type!=ei.Text;)for(;!((f=i>0?a.bottom+t:a.top-t)>=0)||!(f<=h);){if(r)return n?null:0;r=!0,i=-i}d=l+f;let p=a.from;if(p<e.viewport.from)return 0==e.viewport.from?0:n?null:tl(e,s,a,u,d);if(p>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:tl(e,s,a,u,d);let m=e.dom.ownerDocument,v=e.root.elementFromPoint?e.root:m,y=v.elementFromPoint(u,d);y&&!e.contentDOM.contains(y)&&(y=null),!y&&(u=Math.max(s.left+1,Math.min(s.right-1,u)),(y=v.elementFromPoint(u,d))&&!e.contentDOM.contains(y)&&(y=null));let b,w=-1;if(y&&(null===(r=e.docView.nearest(y))||void 0===r?void 0:r.isEditable)!=!1){if(m.caretPositionFromPoint){let e=m.caretPositionFromPoint(u,d);e&&({offsetNode:b,offset:w}=e)}else if(m.caretRangeFromPoint){let t=m.caretRangeFromPoint(u,d);t&&({startContainer:b,startOffset:w}=t,(!e.contentDOM.contains(b)||$.safari&&function(e,t,n){let i;if(3!=e.nodeType||t!=(i=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return _(e,i-1,i).getBoundingClientRect().left>n}(b,w,u)||$.chrome&&function(e,t,n){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return n-(1==e.nodeType?e.getBoundingClientRect():_(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(b,w,u))&&(b=void 0))}b&&(w=Math.min(g(b),w))}if(!b||!e.docView.dom.contains(b)){let t=ec.find(e.docView,p);if(!t)return f>a.top+a.height/2?a.to:a.from;({node:b,offset:w}=function e(t,n,i){let r,o,s,l,a,h,u,d,f=!1;for(let m=t.firstChild;m;m=m.nextSibling){let t=c(m);for(let c=0;c<t.length;c++){var p,g;let v=t[c];h&&tn(h,v)&&(v=ti(tr(v,h.bottom),h.top));let y=(p=v).left>n?p.left-n:Math.max(0,n-p.right),b=(g=v).top>i?g.top-i:Math.max(0,i-g.bottom);if(0==y&&0==b)return 3==m.nodeType?to(m,n,i):e(m,n,i);if(!a||d>b||d==b&&u>y){a=m,h=v,u=y,d=b;let e=b?i<v.top?-1:1:y?n<v.left?-1:1:0;f=!e||(e>0?c<t.length-1:c>0)}0==y?i>v.bottom&&(!s||s.bottom<v.bottom)?(r=m,s=v):i<v.top&&(!l||l.top>v.top)&&(o=m,l=v):s&&tn(s,v)?s=tr(s,v.bottom):l&&tn(l,v)&&(l=ti(l,v.top))}}if(s&&s.bottom>=i?(a=r,h=s):l&&l.top<=i&&(a=o,h=l),!a)return{node:t,offset:0};let m=Math.max(h.left,Math.min(h.right,n));if(3==a.nodeType)return to(a,m,i);if(f&&"false"!=a.contentEditable)return e(a,m,i);let v=Array.prototype.indexOf.call(t.childNodes,a)+(n>=(h.left+h.right)/2?1:0);return{node:t,offset:v}}(t.dom,u,d))}let x=e.docView.nearest(b);if(!x)return null;if(!x.isWidget||(null===(o=x.dom)||void 0===o?void 0:o.nodeType)!=1)return x.localPosFromDOM(b,w)+x.posAtStart;{let e=x.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?x.posAtStart:x.posAtEnd}}function tl(e,t,n,i,o){let s=Math.round((i-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;s+=Math.floor((o-n.top-(e.defaultLineHeight-t)*.5)/t)*e.viewState.heightOracle.lineLength}let l=e.state.sliceDoc(n.from,n.to);return n.from+(0,r.kn)(l,s,e.state.tabSize)}function ta(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type)){for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==ei.Text))return e}return n}function th(e,t,n,i){let o=e.state.doc.lineAt(t.head),s=e.bidiSpans(o),l=e.textDirectionAt(o.from);for(let a=t,h=null;;){let t=function(e,t,n,i,o){var s;let l=i.head-e.from,a=eT.find(t,l,null!==(s=i.bidiLevel)&&void 0!==s?s:-1,i.assoc),h=t[a],c=h.side(o,n);if(l==c){let e=a+=o?1:-1;if(e<0||e>=t.length)return null;l=(h=t[a=e]).side(!o,n),c=h.side(o,n)}let u=(0,r.zK)(e.text,l,h.forward(o,n));(u<h.from||u>h.to)&&(u=c),eE=e.text.slice(Math.min(l,u),Math.max(l,u));let d=a==(o?t.length-1:0)?null:t[a+(o?1:-1)];return d&&u==c&&d.level+(o?0:1)<h.level?r.OF.cursor(d.side(!o,n)+e.from,d.forward(o,n)?1:-1,d.level):r.OF.cursor(u+e.from,h.forward(o,n)?-1:1,h.level)}(o,s,l,a,n),c=eE;if(!t){if(o.number==(n?e.state.doc.lines:1))return a;c="\n",o=e.state.doc.line(o.number+(n?1:-1)),s=e.bidiSpans(o),t=e.visualLineSide(o,!n)}if(h){if(!h(c))return a}else{if(!i)return t;h=i(c)}a=t}}function tc(e,t,n){for(;;){let i=0;for(let r of e)r.between(t-1,t+1,(e,r,o)=>{if(t>e&&t<r){let o=i||n||(t-e<r-t?-1:1);t=o<0?e:r,i=o}});if(!i)return t}}function tu(e,t,n){let i=tc(e.state.facet(e1).map(t=>t(e)),n.from,t.head>n.from?-1:1);return i==n.from?n:r.OF.cursor(i,i<n.from?1:-1)}class td{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(r.$t.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="\uFFFF"}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let e=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==t)break;let o=E.get(i),s=E.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:f(i))||f(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>e)&&this.lineBreak(),i=r}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,s;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(s=i.exec(t))&&(r=s.index,o=s[0].length),this.append(t.slice(n,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);n=r+o}}readNode(e){if(e.cmIgnore)return;let t=E.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(!function(e,t,n){for(;;){if(!t||n<g(t))return!1;if(t==e)return!0;n=d(t)+1,t=t.parentNode}}(e,n.node,n.offset)?0:t))}}class tf{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class tp{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=o||s?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=e.observer.selectionRange;return n&&(t.push(new tf(n,i)),(r!=n||o!=i)&&t.push(new tf(r,o))),t}(e),n=new td(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,i=2==e.length?e[1].pos:n;return n>-1&&i>-1?r.OF.single(n+t,i+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=o&&o.node==t.focusNode&&o.offset==t.focusOffset||!a(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),i=s&&s.node==t.anchorNode&&s.offset==t.anchorOffset||!a(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),l=e.viewport;if(($.ios||$.chrome)&&e.state.selection.main.empty&&n!=i&&(l.from>0||l.to<e.state.doc.length)){let t=Math.min(n,i),r=Math.max(n,i),o=l.from-t,s=l.to-r;(0==o||1==o||0==t)&&(0==s||-1==s||r==e.state.doc.length)&&(n=0,i=e.state.doc.length)}this.newSel=r.OF.single(i,n)}}}function tg(e,t){let n;let{newSel:i}=t,o=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:i,to:l}=t.bounds,a=o.from,h=null;(8===s||$.android&&t.text.length<l-i)&&(a=o.to,h="end");let c=function(e,t,n,i){let r=Math.min(e.length,t.length),o=0;for(;o<r&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&e.length==t.length)return null;let s=e.length,l=t.length;for(;s>0&&l>0&&e.charCodeAt(s-1)==t.charCodeAt(l-1);)s--,l--;if("end"==i){let e=Math.max(0,o-Math.min(s,l));n-=s+e-o}if(s<o&&e.length<t.length){let e=n<=o&&n>=s?o-n:0;o-=e,l=o+(l-s),s=o}else if(l<o){let e=n<=o&&n>=l?o-n:0;o-=e,s=o+(s-l),l=o}return{from:o,toA:s,toB:l}}(e.state.doc.sliceString(i,l,"\uFFFF"),t.text,a-i,h);c&&($.chrome&&13==s&&c.toB==c.from+2&&"\uFFFF\uFFFF"==t.text.slice(c.from,c.toB)&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:r.EY.of(t.text.slice(c.from,c.toB).split("\uFFFF"))})}else i&&(!e.hasFocus&&e.state.facet(eK)||i.main.eq(o))&&(i=null);if(!n&&!i)return!1;if(!n&&t.typeOver&&!o.empty&&i&&i.main.empty?n={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,o.to)}:($.mac||$.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=r.OF.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:r.EY.of([n.insert.toString().replace("."," ")])}):n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,o.to))}:$.chrome&&n&&n.from==n.to&&n.from==o.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(i&&(i=r.OF.single(i.main.anchor-1,i.main.head-1)),n={from:o.from,to:o.to,insert:r.EY.of([" "])}),n)return tm(e,n,i,s);if(!i||i.main.eq(o))return!1;{let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:i,scrollIntoView:t,userEvent:n}),!0}}function tm(e,t,n,i=-1){let o;if($.ios&&e.inputState.flushIOSKey(t))return!0;let s=e.state.selection.main;if($.android&&(t.to==s.to&&(t.from==s.from||t.from==s.from-1&&" "==e.state.sliceDoc(t.from,s.from))&&1==t.insert.length&&2==t.insert.lines&&x(e.contentDOM,"Enter",13)||(t.from==s.from-1&&t.to==s.to&&0==t.insert.length||8==i&&t.insert.length<t.to-t.from&&t.to>s.head)&&x(e.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&0==t.insert.length&&x(e.contentDOM,"Delete",46)))return!0;let l=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>o||(o=function(e,t,n){let i,o=e.state,s=o.selection.main;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=s.from<t.from?o.sliceDoc(s.from,t.from):"",r=s.to>t.to?o.sliceDoc(t.to,s.to):"";i=o.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+r))}else{let l=o.changes(t),a=n&&n.main.to<=l.newLength?n.main:void 0;if(o.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let h=e.state.sliceDoc(t.from,t.to),c,u=n&&te(e,n.main.head);if(u){let e=t.insert.length-(t.to-t.from);c={from:u.from,to:u.to-e}}else c=e.state.doc.lineAt(s.head);let d=s.to-t.to,f=s.to-s.from;i=o.changeByRange(n=>{if(n.from==s.from&&n.to==s.to)return{changes:l,range:a||n.map(l)};let i=n.to-d,u=i-h.length;if(n.to-n.from!=f||e.state.sliceDoc(u,i)!=h||n.to>=c.from&&n.from<=c.to)return{range:n};let p=o.changes({from:u,to:i,insert:t.insert}),g=n.to-s.to;return{changes:p,range:a?r.OF.range(Math.max(0,a.anchor+g),Math.max(0,a.head+g)):n.map(p)}})}else i={changes:l,selection:a&&o.selection.replaceRange(a)}}let l="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,l+=".compose",e.inputState.compositionFirstChange&&(l+=".start",e.inputState.compositionFirstChange=!1)),o.update(i,{userEvent:l,scrollIntoView:!0})}(e,t,n));return e.state.facet(eR).some(n=>n(e,t.from,t.to,l,a))||e.dispatch(a()),!0}class tv{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,$.safari&&e.contentDOM.addEventListener("input",()=>null),$.gecko&&function(e){tH.has(e)||(tH.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){!(!function(e,t){if(!t.bubbles)return!0;for(let n=t.target,i;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=E.get(n))&&i.ignoreEvent(t))return!1;return!0}(this.view,e)||this.ignoreDuringComposition(e))&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=function(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec;if(e&&e.domEventHandlers)for(let i in e.domEventHandlers){let r=e.domEventHandlers[i];r&&n(i).handlers.push(ty(t.value,r))}if(e&&e.domEventObservers)for(let i in e.domEventObservers){let r=e.domEventObservers[i];r&&n(i).observers.push(ty(t.value,r))}}for(let e in tS)n(e).handlers.push(tS[e]);for(let e in tC)n(e).observers.push(tC[e]);return t}(e),n=this.handlers,i=this.view.contentDOM;for(let e in t)if("scroll"!=e){let r=!t[e].handlers.length,o=n[e];o&&!o.handlers.length!=r&&(i.removeEventListener(e,this.handleEvent),o=null),o||i.addEventListener(e,this.handleEvent,{passive:r})}for(let e in n)"scroll"==e||t[e]||i.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){let t;return this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),!!(9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))||((this.tabFocusMode>0&&27!=e.keyCode&&0>t_.indexOf(e.keyCode)&&(this.tabFocusMode=-1),$.android&&$.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))?(this.view.observer.delayAndroidKey(e.key,e.keyCode),!0):$.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=tb.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||tw.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=e.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(e){let t=this.pendingIOSKey;return!(!t||"Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,x(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!($.safari&&!$.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ty(e,t){return(n,i)=>{try{return t.call(e,i,n)}catch(e){e$(n.state,e)}}}let tb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tw="dthko",t_=[16,17,18,20,91,92,224,225];function tx(e){return .7*Math.max(0,e)+8}class tk{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t=e.ownerDocument,n,i;for(let r=e.parentNode;r&&r!=t.body&&(!n||!i);)if(1==r.nodeType)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(11==r.nodeType)r=r.host;else break;return{x:n,y:i}}(e.contentDOM),this.atoms=e.state.facet(e1).map(t=>t(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(r.$t.allowMultipleSelections)&&function(e,t){let n=e.state.facet(eM);return n.length?n[0](t):$.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let i=l(e.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let e=0;e<r.length;e++){let n=r[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)&&1==tI(t)&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var t;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>Math.max(Math.abs((t=this.startEvent).clientX-e.clientX),Math.abs(t.clientY-e.clientY)))return;this.select(this.lastEvent=e);let n=0,i=0,r=0,o=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=e3(this.view);e.clientX-a.left<=r+6?n=-tx(r-e.clientX):e.clientX+a.right>=s-6&&(n=tx(e.clientX-s)),e.clientY-a.top<=o+6?i=-tx(o-e.clientY):e.clientY+a.bottom>=l-6&&(i=tx(e.clientY-l)),this.setScrollSpeed(n,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],o=null;if(i.empty){let e=tc(this.atoms,i.from,0);e!=i.from&&(o=r.OF.cursor(e,-1))}else{let e=tc(this.atoms,i.from,-1),t=tc(this.atoms,i.to,1);(e!=i.from||t!=i.to)&&(o=r.OF.range(i.from==i.anchor?e:t,i.from==i.head?e:t))}o&&(t||(t=e.ranges.slice()),t[n]=o)}return t?r.OF.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,!1===this.dragging))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}let tS=Object.create(null),tC=Object.create(null),tT=$.ie&&$.ie_version<15||$.ios&&$.webkit_version<604;function tA(e,t,n){for(let i of e.facet(t))n=i(n,e);return n}function tO(e,t){t=tA(e.state,eF,t);let{state:n}=e,i,o=1,s=n.toText(t),l=s.lines==n.selection.ranges.length;if(null!=tz&&n.selection.ranges.every(e=>e.empty)&&tz==s.toString()){let e=-1;i=n.changeByRange(i=>{let a=n.doc.lineAt(i.from);if(a.from==e)return{range:i};e=a.from;let h=n.toText((l?s.line(o++).text:t)+n.lineBreak);return{changes:{from:a.from,insert:h},range:r.OF.cursor(i.from+h.length)}})}else i=l?n.changeByRange(e=>{let t=s.line(o++);return{changes:{from:e.from,to:e.to,insert:t.text},range:r.OF.cursor(e.from+t.length)}}):n.replaceSelection(s);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function tE(e,t,n,i){if(1==i)return r.OF.cursor(t,n);if(2==i)return function(e,t,n=1){let i=e.charCategorizer(t),o=e.doc.lineAt(t),s=t-o.from;if(0==o.length)return r.OF.cursor(t);0==s?n=1:s==o.length&&(n=-1);let l=s,a=s;n<0?l=(0,r.zK)(o.text,s,!1):a=(0,r.zK)(o.text,s);let h=i(o.text.slice(l,a));for(;l>0;){let e=(0,r.zK)(o.text,l,!1);if(i(o.text.slice(e,l))!=h)break;l=e}for(;a<o.length;){let e=(0,r.zK)(o.text,a);if(i(o.text.slice(a,e))!=h)break;a=e}return r.OF.range(l+o.from,a+o.from)}(e.state,t,n);{let n=ec.find(e.docView,t),i=e.state.doc.lineAt(n?n.posAtEnd:t),o=n?n.posAtStart:i.from,s=n?n.posAtEnd:i.to;return s<e.state.doc.length&&s==i.to&&s++,r.OF.range(o,s)}}tC.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},tS.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),tC.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},tC.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},tS.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of e.state.facet(eP))if(n=i(e,t))break;if(n||0!=t.button||(n=function(e,t){let n=tD(e,t),i=tI(t),o=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),o=o.map(e.changes))},get(t,s,l){let a=tD(e,t),h,c=tE(e,a.pos,a.bias,i);if(n.pos!=a.pos&&!s){let t=tE(e,n.pos,n.bias,i),o=Math.min(t.from,c.from),s=Math.max(t.to,c.to);c=o<c.from?r.OF.range(o,s):r.OF.range(s,o)}return s?o.replaceRange(o.main.extend(c.from,c.to)):l&&1==i&&o.ranges.length>1&&(h=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:i,to:o}=e.ranges[n];if(i<=t&&o>=t)return r.OF.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(o,a.pos))?h:l?o.addRange(c):r.OF.create([c])}}}(e,t)),n){let i=!e.hasFocus;e.inputState.startMouseSelection(new tk(e,t,n,i)),i&&e.observer.ignore(()=>{w(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let r=e.inputState.mouseSelection;if(r)return r.start(t),!1===r.dragging}return!1};let tM=(e,t,n)=>t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right;function tD(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:function(e,t,n,i){let r=ec.find(e.docView,t);if(!r)return 1;let o=t-r.posAtStart;if(0==o)return 1;if(o==r.length)return -1;let s=r.coordsAt(o,-1);if(s&&tM(n,i,s))return -1;let l=r.coordsAt(o,1);return l&&tM(n,i,l)?1:s&&s.bottom>=i?-1:1}(e,n,t.clientX,t.clientY)}}let tP=$.ie&&$.ie_version<=11,tN=null,tL=0,tR=0;function tI(e){if(!tP)return e.detail;let t=tN,n=tR;return tN=e,tR=Date.now(),tL=!t||n>Date.now()-400&&2>Math.abs(t.clientX-e.clientX)&&2>Math.abs(t.clientY-e.clientY)?(tL+1)%3:1}function tF(e,t,n,i){let r;if(!(n=tA(e.state,eF,n)))return;let o=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,l=i&&s&&((r=e.state.facet(eD)).length?r[0](t):$.mac?!t.altKey:!t.ctrlKey)?{from:s.from,to:s.to}:null,a={from:o,insert:n},h=e.state.changes(l?[l,a]:a);e.focus(),e.dispatch({changes:h,selection:{anchor:h.mapPos(o,-1),head:h.mapPos(o,1)},userEvent:l?"move.drop":"input.drop"}),e.inputState.draggedContent=null}tS.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let i=e.docView.nearest(t.target);if(i&&i.isWidget){let e=i.posAtStart,t=e+i.length;(e>=n.to||t<=n.from)&&(n=r.OF.range(e,t))}}let{inputState:i}=e;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",tA(e.state,ez,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},tS.dragend=e=>(e.inputState.draggedContent=null,!1),tS.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&tF(e,t,i.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(i[e]=t.result),o()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return tF(e,t,n,!0),!0}return!1},tS.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=tT?null:t.clipboardData;return n?(tO(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),tO(e,n.value)},50)}(e),!1)};let tz=null;tS.copy=tS.cut=(e,t)=>{let{text:n,ranges:i,linewise:r}=function(e){let t=[],n=[],i=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),n.push(i));if(!t.length){let r=-1;for(let{from:i}of e.selection.ranges){let o=e.doc.lineAt(i);o.number>r&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),r=o.number}i=!0}return{text:tA(e,ez,t.join(e.lineBreak)),ranges:n,linewise:i}}(e.state);if(!n&&!r)return!1;tz=r?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=tT?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(!function(e,t){let n=e.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=t,i.focus(),i.selectionEnd=t.length,i.selectionStart=0,setTimeout(()=>{i.remove(),e.focus()},50)}(e,n),!1)};let tB=r.YH.define();function tW(e,t){let n=[];for(let i of e.facet(eI)){let r=i(e,t);r&&n.push(r)}return n?e.update({effects:n,annotations:tB.of(!0)}):null}function tj(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=tW(e.state,t);n?e.dispatch(n):e.update([])}},10)}tC.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),tj(e)},tC.blur=e=>{e.observer.clearSelectionRange(),tj(e)},tC.compositionstart=tC.compositionupdate=e=>{!e.observer.editContext&&(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},tC.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,$.chrome&&$.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},tC.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},tS.beforeinput=(e,t)=>{var n,i;let r;if("insertReplacementText"==t.inputType&&e.observer.editContext){let i=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=t.getTargetRanges();if(i&&r.length){let t=r[0],n=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return tm(e,{from:n,to:o,insert:e.state.toText(i)},null),!0}}if($.chrome&&$.android&&(r=tb.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return $.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),$.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>tC.compositionend(e,t),20),!1};let tH=new Set,tV=["pre-wrap","normal","pre-line","break-spaces"],tU=!1;class t${constructor(e){this.lineWrapping=e,this.doc=r.EY.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return tV.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,n,i,r,o){let s=tV.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,l){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return l}}class tK{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class tq{constructor(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?ei.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof el?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new tq(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var tZ=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(tZ||(tZ={}));class tG{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>.001&&(tU=!0),this.height=e)}replace(e,t,n){return tG.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:a,fromB:h,toB:c}=i[s],u=r.lineAt(l,tZ.ByPosNoHeight,n.setDoc(t),0,0),d=u.to>=a?u:r.lineAt(a,tZ.ByPosNoHeight,n,0,0);for(c+=d.to-a,a=d.to;s>0&&u.from<=i[s-1].toA;)l=i[s-1].fromA,h=i[s-1].fromB,s--,l<u.from&&(u=r.lineAt(l,tZ.ByPosNoHeight,n,0,0));h+=u.from-l,l=u.from;let f=t2.build(n.setDoc(o),e,h,c);r=tY(r,r.replace(l,a,f))}return r.updateHeight(n,0)}static empty(){return new tX(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,i=0,r=0;for(;;)if(t==n){if(i>2*r){let r=e[t-1];r.break?e.splice(--t,1,r.left,null,r.right):e.splice(--t,1,r.left,r.right),n+=1+r.break,i-=r.size}else if(r>2*i){let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,r-=t.size}else break}else if(i<r){let n=e[t++];n&&(i+=n.size)}else{let t=e[--n];t&&(r+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new t0(tG.of(e.slice(0,t)),o,tG.of(e.slice(n)))}}function tY(e,t){return e==t?e:(e.constructor!=t.constructor&&(tU=!0),t)}tG.prototype.size=1;class tJ extends tG{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new tq(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(e,t,n,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,n,i,r))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class tX extends tJ{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new tq(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return 1==n.length&&(i instanceof tX||i instanceof tQ&&4&i.flags)&&10>Math.abs(this.length-i.length)?(i instanceof tQ?i=new tX(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):tG.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class tQ extends tG{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,r=i-n+1,o,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*r);o=t/r,this.length>r+1&&(s=(this.height-t)/(this.length-r-1))}else o=this.height/r;return{firstLine:n,lastLine:i,perLine:o,perChar:s}}blockAt(e,t,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let r=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),o=t.doc.lineAt(r),a=s+o.length*l,h=Math.max(n,e-a/2);return new tq(o.from,o.length,h,a,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((e-n)/s))),{from:l,length:a}=t.doc.line(r+i);return new tq(l,a,n+s*i,s,0)}}lineAt(e,t,n,i,r){if(t==tZ.ByHeight)return this.blockAt(e,n,i,r);if(t==tZ.ByPosNoHeight){let{from:t,to:i}=n.doc.lineAt(e);return new tq(t,i-t,0,0,0)}let{firstLine:o,perLine:s,perChar:l}=this.heightMetrics(n,r),a=n.doc.lineAt(e),h=s+a.length*l,c=a.number-o,u=i+s*c+l*(a.from-r-c);return new tq(a.from,a.length,Math.max(i,Math.min(u,i+this.height-h)),h,0)}forEachLine(e,t,n,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:s,perLine:l,perChar:a}=this.heightMetrics(n,r);for(let h=e,c=i;h<=t;){let t=n.doc.lineAt(h);if(h==e){let n=t.number-s;c+=l*n+a*(e-r-n)}let i=l+a*t.length;o(new tq(t.from,t.length,c,i,0)),c+=i,h=t.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let e=n[n.length-1];e instanceof tQ?n[n.length-1]=new tQ(e.length+i):n.push(null,new tQ(i-1))}if(e>0){let t=n[0];t instanceof tQ?n[0]=new tQ(e+t.length):n.unshift(new tQ(e-1),null)}return tG.of(n)}decomposeLeft(e,t){t.push(new tQ(e-1),null)}decomposeRight(e,t){t.push(null,new tQ(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let n=[],o=Math.max(t,i.from),s=-1;for(i.from>t&&n.push(new tQ(i.from-t-1).updateHeight(e,t));o<=r&&i.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=.001&&(s=-2);let l=new tX(t,r);l.outdated=!1,n.push(l),o+=t+1}o<=r&&n.push(null,new tQ(r-o).updateHeight(e,o));let l=tG.of(n);return(s<0||Math.abs(l.height-this.height)>=.001||Math.abs(s-this.heightMetrics(e,t).perLine)>=.001)&&(tU=!0),tY(this,l)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class t0 extends tG{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,i){let r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,l=t==tZ.ByHeight?e<o:e<s,a=l?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,o,s);if(this.break||(l?a.to<s:a.from>s))return a;let h=t==tZ.ByPosNoHeight?tZ.ByPosNoHeight:tZ.ByPos;return l?a.join(this.right.lineAt(s,h,n,o,s)):this.left.lineAt(s,h,n,i,r).join(a)}forEachLine(e,t,n,i,r,o){let s=i+this.left.height,l=r+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,i,r,o),t>=l&&this.right.forEachLine(e,t,n,s,l,o);else{let a=this.lineAt(l,tZ.ByPos,n,i,r);e<a.from&&this.left.forEachLine(e,a.from-1,n,i,r,o),a.to>=e&&a.from<=t&&o(a),t>a.to&&this.right.forEachLine(a.to+1,t,n,s,l,o)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let e of n)r.push(e);if(e>0&&t1(r,o-1),t<this.length){let e=r.length;this.decomposeRight(t,r),t1(r,e)}return tG.of(r)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++n&&t.push(null),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?tG.of(this.break?[e,null,t]:[e,t]):(this.left=tY(this.left,e),this.right=tY(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:r,right:o}=this,s=t+r.length+this.break,l=null;return(i&&i.from<=t+r.length&&i.more?l=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=s+o.length&&i.more?l=o=o.updateHeight(e,s,n,i):o.updateHeight(e,s,n),l)?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function t1(e,t){let n,i;null==e[t]&&(n=e[t-1])instanceof tQ&&(i=e[t+1])instanceof tQ&&e.splice(t-1,3,new tQ(n.length+1+i.length))}class t2{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof tX?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new tX(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new tJ(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new tX(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new tQ(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof tX)return e;let t=new tX(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof tX||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new tX(0,-1));let n=e;for(let e of this.nodes)e instanceof tX&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,i){let o=new t2(n,e);return r.om.spans(t,n,i,o,0),o.finish(n)}}class t5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&eh(e,t,this.changes,5)}}class t6{constructor(e,t,n,i){this.from=e,this.to=t,this.size=n,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return er.replace({widget:new t3(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class t3 extends en{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class t8{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ne,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=em.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(eX).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new t$(t),this.stateDeco=e.facet(eQ).filter(e=>"function"!=typeof e),this.heightMap=tG.empty().applyChanges(this.stateDeco,r.EY.empty,this.heightOracle.setDoc(e.doc),[new e4(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=er.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:e,to:t})=>i>=e&&i<=t)){let{from:t,to:n}=this.lineBlockAt(i);e.push(new t4(t,n))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ne:new nt(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(nn(e,this.scaler))})}update(e,t=null){var n,i;let o;this.state=e.state;let s=this.stateDeco;this.stateDeco=this.state.facet(eQ).filter(e=>"function"!=typeof e);let l=e.changedRanges,a=e4.extendWithRanges(l,(n=this.stateDeco,i=e?e.changes:r.VR.empty(this.state.doc.length),o=new t5,r.om.compare(s,n,i,o,0),o.changes)),h=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);tU=!1,this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=h||tU)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let u=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let d=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(d||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(eW)&&(this.mustEnforceCursorAssoc=!0)}measure(e){var t;let n,i,o=e.contentDOM,s=window.getComputedStyle(o),l=this.heightOracle,a=s.whiteSpace;this.defaultTextDirection="rtl"==s.direction?em.RTL:em.LTR;let h=this.heightOracle.mustRefreshForWrapping(a),c=o.getBoundingClientRect(),u=h||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,f=0;if(c.width&&c.height){let{scaleX:e,scaleY:t}=v(o,c);(e>.005&&Math.abs(this.scaleX-e)>.005||t>.005&&Math.abs(this.scaleY-t)>.005)&&(this.scaleX=e,this.scaleY=t,d|=16,h=u=!0)}let p=(parseInt(s.paddingTop)||0)*this.scaleY,g=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(l.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=S(e.scrollDOM);let y=(this.printing?function(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}:function(e,t){let n=e.getBoundingClientRect(),i=e.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=i.body;)if(1==t.nodeType){let n=t,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),l=Math.max(l,i.top),a=Math.min(t==e.parentNode?r.innerHeight:a,i.bottom)}t="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else if(11==t.nodeType)t=t.host;else break;return{left:o-n.left,right:Math.max(o,s)-n.left,top:l-(n.top+t),bottom:Math.max(l,a)-(n.top+t)}})(o,this.paddingTop),b=y.top-this.pixelViewport.top,w=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(u=!0)),!this.inView&&!this.scrollTarget&&(n=(t=e.dom).getBoundingClientRect(),i=t.ownerDocument.defaultView||window,!(n.left<i.innerWidth)||!(n.right>0)||!(n.top<i.innerHeight)||!(n.bottom>0)))return 0;let x=c.width;if((this.contentDOMWidth!=x||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),u){let t=e.docView.measureVisibleLineHeights(this.viewport);if(l.mustRefreshForHeights(t)&&(h=!0),h||l.lineWrapping&&Math.abs(x-this.contentDOMWidth)>l.charWidth){let{lineHeight:n,charWidth:i,textHeight:r}=e.docView.measureTextSize();(h=n>0&&l.refresh(a,n,i,r,x/i,t))&&(e.docView.minWidth=0,d|=16)}for(let n of(b>0&&w>0?f=Math.max(b,w):b<0&&w<0&&(f=Math.min(b,w)),tU=!1,this.viewports)){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(h?tG.empty().applyChanges(this.stateDeco,r.EY.empty,this.heightOracle,[new e4(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(l,0,h,new tK(n.from,i))}tU&&(d|=2)}let k=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(2&d&&(d|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),d|=this.updateForViewport()),(2&d||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(h?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,l=new t4(i.lineAt(o-1e3*n,tZ.ByHeight,r,0,0).from,i.lineAt(s+(1-n)*1e3,tZ.ByHeight,r,0,0).to);if(t){let{head:e}=t.range;if(e<l.from||e>l.to){let n=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=i.lineAt(e,tZ.ByPos,r,0,0),s;s="center"==t.y?(o.top+o.bottom)/2-n/2:"start"==t.y||"nearest"==t.y&&e<l.from?o.top:o.bottom-n,l=new t4(i.lineAt(s-500,tZ.ByHeight,r,0,0).from,i.lineAt(s+n+500,tZ.ByHeight,r,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new t4(this.heightMap.lineAt(n,tZ.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,tZ.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,tZ.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,tZ.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||i<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new t6(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,o=i>>1,s=i<<1;if(this.defaultTextDirection!=em.LTR&&!n)return[];let l=[],a=(i,s,h,c)=>{if(s-i<o)return;let u=this.state.selection.main,d=[u.from];for(let e of(u.empty||d.push(u.to),d))if(e>i&&e<s){a(i,e-10,h,c),a(e+10,s,h,c);return}let f=function(e,t){for(let n of e)if(t(n))return n}(e,e=>e.from>=h.from&&e.to<=h.to&&Math.abs(e.from-i)<o&&Math.abs(e.to-s)<o&&!d.some(t=>e.from<t&&e.to>t));if(!f){if(s<h.to&&t&&n&&t.visibleRanges.some(e=>e.from<=s&&e.to>=s)){let e=t.moveToLineBoundary(r.OF.cursor(s),!1,!0).head;e>i&&(s=e)}let e=this.gapSize(h,i,s,c),o=n||e<2e6?e:2e6;f=new t6(i,s,e,o)}l.push(f)},h=t=>{var o,l,h;let c,u,d,f,p;if(t.length<s||t.type!=ei.Text)return;let g=(o=t.from,l=t.to,h=this.stateDeco,d=[],f=o,p=0,r.om.spans(h,o,l,{span(){},point(e,t){e>f&&(d.push({from:f,to:e}),p+=e-f),f=t}},20),f<l&&(d.push({from:f,to:l}),p+=l-f),{total:p,ranges:d});if(g.total<s)return;let m=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let e,n,r=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=m){let i=t7(g,m),o=((this.visibleBottom-this.visibleTop)/2+r)/t.height;e=i-o,n=i+o}else e=(this.visibleTop-t.top-r)/t.height,n=(this.visibleBottom-t.top+r)/t.height;c=t9(g,e),u=t9(g,n)}else{let n,r,o=g.total*this.heightOracle.charWidth,s=i*this.heightOracle.charWidth,l=0;if(o>2e6)for(let n of e)n.from>=t.from&&n.from<t.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+l<this.pixelViewport.left&&(l=n.size-n.displaySize);let a=this.pixelViewport.left+l,h=this.pixelViewport.right+l;if(null!=m){let e=t7(g,m),t=((h-a)/2+s)/o;n=e-t,r=e+t}else n=(a-s)/o,r=(h+s)/o;c=t9(g,n),u=t9(g,r)}c>t.from&&a(t.from,c,t,g),u<t.to&&a(u,t.to,t,g)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(h):h(e);return l}gapSize(e,t,n,i){let r=t7(i,n)-t7(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){t6.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=er.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];r.om.spans(t,this.viewport.from,this.viewport.to,{span(e,t){n.push({from:e,to:t})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let t=0;t<n.length&&!(8&i);t++){let r=this.visibleRanges[t],o=n[t];r.from==o.from&&r.to==o.to||(i|=4,e&&e.mapPos(r.from,-1)==o.from&&e.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||nn(this.heightMap.lineAt(e,tZ.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||nn(this.heightMap.lineAt(this.scaler.fromDOM(e),tZ.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return nn(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class t4{constructor(e,t){this.from=e,this.to=t}}function t9({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let i=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:r}=t[e],o=r-n;if(i<=o)return n+i;i-=o}}function t7(e,t){let n=0;for(let{from:i,to:r}of e.ranges){if(t<=r){n+=t-i;break}n+=r-i}return n/e.total}let ne={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class nt{constructor(e,t,n){let i=0,r=0,o=0;for(let s of(this.viewports=n.map(({from:n,to:r})=>{let o=t.lineAt(n,tZ.ByPos,e,0,0).top,s=t.lineAt(r,tZ.ByPos,e,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i),this.viewports))s.domTop=o+(s.top-r)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),r=s.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}}eq(e){return e instanceof nt&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to)}}function nn(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),i=t.toDOM(e.bottom);return new tq(e.from,e.length,n,i-n,Array.isArray(e._content)?e._content.map(e=>nn(e,t)):e._content)}let ni=r.sj.define({combine:e=>e.join(" ")}),nr=r.sj.define({combine:e=>e.indexOf(!0)>-1}),no=o.G.newName(),ns=o.G.newName(),nl=o.G.newName(),na={"&light":"."+ns,"&dark":"."+nl};function nh(e,t,n){return new o.G(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!n||!n[t])throw RangeError(`Unsupported selector: ${t}`);return n[t]}):e+" "+t})}let nc=nh("."+no,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},na),nu={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nd=$.ie&&$.ie_version<=11;class nf{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new y,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);($.ie&&$.ie_version<=11||$.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&!1!==e.constructor.EDIT_CONTEXT&&!($.chrome&&$.chrome_version<126)&&(this.editContext=new nm(e),e.state.facet(eK)&&(e.contentDOM.editContext=this.editContext.editContext)),nd&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){for(let t of(this.gapIntersection.disconnect(),e))this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(eK)?n.root.activeElement!=this.dom:!h(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}($.ie&&$.ie_version<=11||$.android&&$.chrome)&&!n.state.selection.main.empty&&i.focusNode&&u(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=l(e.root);if(!t)return!1;let n=$.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return ng(e,n)}let n=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),n?ng(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=h(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,i=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=i)return!1;for(i=Math.min(i,g(n));;)if(i){if(1!=n.nodeType)return!1;let e=n.childNodes[i-1];"false"==e.contentEditable?i--:i=g(n=e)}else{if(n==e)return!0;i=d(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(11==n.nodeType)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,nu),nd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&x(this.dom,e.key,e.keyCode))})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let r of e){let e=this.readMutation(r);e&&(e.typeOver&&(i=!0),-1==t?{from:t,to:n}=e:(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&h(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new tp(this.view,e,t,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=tg(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=np(t,e.previousSibling||e.target.previousSibling,-1),i=np(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(eK)!=e.state.facet(eK)&&(e.view.contentDOM.editContext=e.state.facet(eK)?this.editContext.editContext:null))}destroy(){var e,t,n;for(let i of(this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),this.scrollTargets))i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function np(e,t,n){for(;t;){let i=E.get(t);if(i&&i.parent==e)return i;let r=t.parentNode;t=r!=e.dom?r:n>0?t.nextSibling:t.previousSibling}return null}function ng(e,t){let n=t.startContainer,i=t.startOffset,r=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return u(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class nm{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});for(let n in this.handlers.textupdate=t=>{let n=e.state.selection.main,{anchor:i,head:o}=n,s=this.toEditorPos(t.updateRangeStart),l=this.toEditorPos(t.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:t.updateRangeStart,editorBase:s,drifted:!1});let a={from:s,to:l,insert:r.EY.of(t.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from==a.to&&!a.insert.length){let i=r.OF.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd));i.main.eq(n)||e.dispatch({selection:i,userEvent:"select"});return}if(($.mac||$.android)&&a.from==o-1&&/^\. ?$/.test(t.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(a={from:s,to:l,insert:r.EY.of([t.text.replace("."," ")])}),this.pendingContextChange=a,!e.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);tm(e,a,r.OF.single(this.toEditorPos(t.selectionStart,n),this.toEditorPos(t.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let t=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);t<o;t++){let n=e.coordsForChar(t);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,i=e.underlineThickness;if("None"!=t&&"None"!=i){let r=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(r<o){let e=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==i?1:2}px`;n.push(er.mark({attributes:{style:e}}).range(r,o))}}}e.dispatch({effects:eU.of(er.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}},this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=l(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((r,o,s,l,a)=>{if(n)return;let h=a.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(a)){i=this.pendingContextChange=null,t+=h,this.to+=h;return}i=null,this.revertPending(e.state)}if(r+=t,(o+=t)<=this.from)this.from+=h,this.to+=h;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+a.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),a.toString()),this.to+=h}t+=h}),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class nv{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;for(let t of(this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach(e=>n(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new t8(e.state||r.$t.create(e)),e.scrollTo&&e.scrollTo.is(eV)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(eZ).map(e=>new eY(e)),this.plugins))t.update(this);this.observer=new nf(this),this.inputState=new tv(this),this.inputState.ensureHandlers(this.plugins),this.docView=new e7(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof r.ZX?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,o=this.state;for(let t of e){if(t.startState!=o)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=t.state}if(this.destroyed){this.viewState.state=o;return}let s=this.hasFocus,l=0,a=null;e.some(e=>e.annotation(tB))?(this.inputState.notifiedFocused=s,l=1):s==this.inputState.notifiedFocused||(this.inputState.notifiedFocused=s,(a=tW(o,s))||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),((c=this.observer.readChange())&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(r.$t.phrases)!=this.state.facet(r.$t.phrases))return this.setState(o);i=e9.create(this,o,e),i.flags|=l;let u=this.viewState.scrollTarget;try{for(let t of(this.updateState=2,e)){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new eH(e.empty?e:r.OF.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(eV)&&(u=e.value.clip(this.state))}this.viewState.update(i,u),this.bidiCache=nw.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(e8)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(ni)!=i.state.facet(ni)&&(this.viewState.mustMeasureContent=!0),(t||n||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let e of this.state.facet(eL))try{e(i)}catch(e){e$(this.state,e,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!tg(this,c)&&h.force&&x(this.contentDOM,h.key,h.keyCode)})}setState(e){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);for(let t of(this.viewState=new t8(e),this.plugins=e.facet(eZ).map(e=>new eY(e)),this.pluginMap.clear(),this.plugins))t.update(this);this.docView.destroy(),this.docView=new e7(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(eZ),n=e.state.facet(eZ);if(t!=n){let i=[];for(let r of n){let n=t.indexOf(r);if(n<0)i.push(new eY(r));else{let t=this.plugins[n];t.mustUpdate=e,i.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){e$(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0){if(S(n))r=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(i);r=e.from,o=e.top}}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];4&s||([this.measureRequests,l]=[l,this.measureRequests]);let a=l.map(e=>{try{return e.read(this)}catch(e){return e$(this.state,e),nb}}),h=e9.create(this,this.state,[]),c=!1;h.flags|=s,t?t.flags|=s:t=h,this.updateState=2,!h.empty&&(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),(c=this.docView.update(h))&&this.docViewUpdate());for(let e=0;e<l.length;e++)if(a[e]!=nb)try{let t=l[e];t.write&&t.write(a[e],this)}catch(e){e$(this.state,e)}if(c&&this.docView.updateSelection(!0),!h.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(e>1||e<-1){i+=e,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(eL))e(t)}get themeClasses(){return no+" "+(this.state.facet(nr)?nl:ns)+" "+this.state.facet(ni)}updateAttrs(){let e=n_(this,eJ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(eK)?"true":"false",class:"cm-content",style:`${$.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),n_(this,eX,t);let n=this.observer.ignore(()=>{let n=et(this.contentDOM,this.contentAttrs,t),i=et(this.dom,this.editorAttrs,e);return n||i});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)e.is(nv.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(e8);let e=this.state.facet(nv.cspNonce);o.G.mount(this.root,this.styleModules.concat(nc).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e&&!(this.measureRequests.indexOf(e)>-1)){if(null!=e.key){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return tu(this,e,th(this,e,t,n))}moveByGroup(e,t){return tu(this,e,th(this,e,t,t=>{var n;let i,o;return n=e.head,o=(i=this.state.charCategorizer(n))(t),e=>{let t=i(e);return o==r.Je.Space&&(o=t),o==t}}))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=n[t?n.length-1:0];return r.OF.cursor(o.side(t,i)+e.from,o.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return function(e,t,n,i){let o=ta(e,t.head),s=i&&o.type==ei.Text&&(e.lineWrapping||o.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>o.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),i=e.textDirectionAt(o.from),l=e.posAtCoords({x:n==(i==em.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=l)return r.OF.cursor(l,n?-1:1)}return r.OF.cursor(n?o.to:o.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return tu(this,e,function(e,t,n,i){let o=t.head,s=n?1:-1;if(o==(n?e.state.doc.length:0))return r.OF.cursor(o,t.assoc);let l=t.goalColumn,a,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(o,t.assoc||-1),u=e.documentTop;if(c)null==l&&(l=c.left-h.left),a=s<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(o);null==l&&(l=Math.min(h.right-h.left,e.defaultCharacterWidth*(o-t.from))),a=(s<0?t.top:t.bottom)+u}let d=h.left+l,f=null!=i?i:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let n=a+(f+t)*s,i=ts(e,{x:d,y:n},!1,s);if(n<h.top||n>h.bottom||(s<0?i<o:i>o)){let t=e.docView.coordsForChar(i),o=!t||n<t.top?-1:1;return r.OF.cursor(i,o,void 0,l)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),ts(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i);return m(n,r[eT.find(r,e-i.from,-1,t)].dir==em.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(eB)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ny)return eO(e.length);let t=this.textDirectionAt(e.from),n;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t&&(i.fresh||function e(t,n){if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(r.from!=o.from||r.to!=o.to||r.direction!=o.direction||!e(r.inner,o.inner))return!1}return!0}(i.isolates,n=e5(this,e))))return i.order;n||(n=e5(this,e));let i=function(e,t,n){if(!e)return[new eT(0,0,t==ey?1:0)];if(t==ev&&!n.length&&!eC.test(e))return eO(e.length);if(n.length)for(;e.length>eA.length;)eA[eA.length]=256;let i=[],r=t==ev?0:1;return function e(t,n,i,r,o,s,l){let a=n%2?2:1;(function(e,t,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:t,l=o<i.length?i[o].from:n,a=o?256:r;for(let t=s,n=a,i=a;t<l;t++){let r=eS(e.charCodeAt(t));512==r?r=n:8==r&&4==i&&(r=16),eA[t]=4==r?2:r,7&r&&(i=r),n=r}for(let e=s,t=a,i=a;e<l;e++){let r=eA[e];if(128==r)e<l-1&&t==eA[e+1]&&24&t?r=eA[e]=t:eA[e]=256;else if(64==r){let r=e+1;for(;r<l&&64==eA[r];)r++;let o=e&&8==t||r<n&&8==eA[r]?1==i?1:8:256;for(let t=e;t<r;t++)eA[t]=o;e=r-1}else 8==r&&1==i&&(eA[e]=1);t=r,7&r&&(i=r)}}})(t,o,s,r,a),function(e,t,n,i,r){let o=1==r?2:1;for(let s=0,l=0,a=0;s<=i.length;s++){let h=s?i[s-1].to:t,c=s<i.length?i[s].from:n;for(let t=h,n,i,s;t<c;t++)if(i=ex[n=e.charCodeAt(t)]){if(i<0){for(let e=l-3;e>=0;e-=3)if(ek[e+1]==-i){let n=ek[e+2],i=2&n?r:4&n?1&n?o:r:0;i&&(eA[t]=eA[ek[e]]=i),l=e;break}}else if(189==ek.length)break;else ek[l++]=t,ek[l++]=n,ek[l++]=a}else if(2==(s=eA[t])||1==s){let e=s==r;a=e?0:1;for(let t=l-3;t>=0;t-=3){let n=ek[t+2];if(2&n)break;if(e)ek[t+2]|=2;else{if(4&n)break;ek[t+2]|=4}}}}}(t,o,s,r,a),function(e,t,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:e,l=r<n.length?n[r].from:t;for(let a=s;a<l;){let s=eA[a];if(256==s){let s=a+1;for(;;)if(s==l){if(r==n.length)break;s=n[r++].to,l=r<n.length?n[r].from:t}else if(256==eA[s])s++;else break;let h=1==o,c=h==((s<t?eA[s]:i)==1)?h?1:2:i;for(let t=s,i=r,o=i?n[i-1].to:e;t>a;)t==o&&(t=n[--i].from,o=i?n[i-1].to:e),eA[--t]=c;a=s}else o=s,a++}}}(o,s,r,a),function t(n,i,r,o,s,l,a){let h=o%2?2:1;if(o%2==s%2)for(let c=i,u=0;c<r;){let i=!0,d=!1;if(u==l.length||c<l[u].from){let e=eA[c];e!=h&&(i=!1,d=16==e)}let f=i||1!=h?null:[],p=i?o:o+1,g=c;n:for(;;)if(u<l.length&&g==l[u].from){if(d)break;let t=l[u];if(!i)for(let e=t.to,n=u+1;;){if(e==r)break n;if(n<l.length&&l[n].from==e)e=l[n++].to;else if(eA[e]==h)break n;else break}u++,f?f.push(t):(t.from>c&&a.push(new eT(c,t.from,p)),e(n,t.direction==ev!=!(p%2)?o+1:o,s,t.inner,t.from,t.to,a),c=t.to),g=t.to}else if(g==r||(i?eA[g]!=h:eA[g]==h))break;else g++;f?t(n,c,g,o+1,s,f,a):c<g&&a.push(new eT(c,g,p)),c=g}else for(let c=r,u=l.length;c>i;){let r=!0,d=!1;if(!u||c>l[u-1].to){let e=eA[c-1];e!=h&&(r=!1,d=16==e)}let f=r||1!=h?null:[],p=r?o:o+1,g=c;n:for(;;)if(u&&g==l[u-1].to){if(d)break;let t=l[--u];if(!r)for(let e=t.from,n=u;;){if(e==i)break n;if(n&&l[n-1].to==e)e=l[--n].from;else if(eA[e-1]==h)break n;else break}f?f.push(t):(t.to<c&&a.push(new eT(t.to,c,p)),e(n,t.direction==ev!=!(p%2)?o+1:o,s,t.inner,t.from,t.to,a),c=t.from),g=t.from}else if(g==i||(r?eA[g-1]!=h:eA[g-1]==h))break;else g--;f?t(n,g,c,o+1,s,f,a):g<c&&a.push(new eT(g,c,p)),c=g}}(t,o,s,n,i,r,l)}(e,r,r,n,0,e.length,i),i}(e.text,t,n);return this.bidiCache.push(new nw(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||$.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{w(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of(this.root.activeElement==this.contentDOM&&this.contentDOM.blur(),this.plugins))e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return eV.of(new eH("number"==typeof e?r.OF.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return eV.of(new eH(r.OF.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return eG.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return eG.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=o.G.newName(),i=[ni.of(n),e8.of(nh(`.${n}`,e))];return t&&t.dark&&i.push(nr.of(!0)),i}static baseTheme(e){return r.Nb.lowest(e8.of(nh("."+no,e,na)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&E.get(n)||E.get(e);return(null===(t=null==i?void 0:i.rootView)||void 0===t?void 0:t.view)||null}}nv.styleModule=e8,nv.inputHandler=eR,nv.clipboardInputFilter=eF,nv.clipboardOutputFilter=ez,nv.scrollHandler=ej,nv.focusChangeEffect=eI,nv.perLineTextDirection=eB,nv.exceptionSink=eN,nv.updateListener=eL,nv.editable=eK,nv.mouseSelectionStyle=eP,nv.dragMovesSelection=eD,nv.clickAddsSelectionRange=eM,nv.decorations=eQ,nv.outerDecorations=e0,nv.atomicRanges=e1,nv.bidiIsolatedRanges=e2,nv.scrollMargins=e6,nv.darkTheme=nr,nv.cspNonce=r.sj.define({combine:e=>e.length?e[0]:""}),nv.contentAttributes=eX,nv.editorAttributes=eJ,nv.lineWrapping=nv.contentAttributes.of({class:"cm-lineWrapping"}),nv.announce=r.Pe.define();let ny=4096,nb={};class nw{constructor(e,t,n,i,r,o){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:em.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir!=i||t.touchesRange(o.from,o.to)||n.push(new nw(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function n_(e,t,n){for(let i=e.state.facet(t),r=i.length-1;r>=0;r--){let t=i[r],o="function"==typeof t?t(e):t;o&&X(o,n)}return n}let nx=$.mac?"mac":$.windows?"win":$.linux?"linux":"key";function nk(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}let nS=r.Nb.default(nv.domEventHandlers({keydown:(e,t)=>nD(nA(t.state),e,t,"editor")})),nC=r.sj.define({enables:nS}),nT=new WeakMap;function nA(e){let t=e.facet(nC),n=nT.get(t);return n||nT.set(t,n=function(e,t=nx){let n=Object.create(null),i=Object.create(null),r=(e,t)=>{let n=i[e];if(null==n)i[e]=t;else if(n!=t)throw Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,i,o,s,l)=>{var a,h;let c=n[e]||(n[e]=Object.create(null)),u=i.split(/ (?!$)/).map(e=>(function(e,t){let n,i,r,o;let s=e.split(/-(?!$)/),l=s[s.length-1];"Space"==l&&(l=" ");for(let e=0;e<s.length-1;++e){let l=s[e];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))"mac"==t?o=!0:i=!0;else throw Error("Unrecognized modifier name: "+l)}return n&&(l="Alt-"+l),i&&(l="Ctrl-"+l),o&&(l="Meta-"+l),r&&(l="Shift-"+l),l})(e,t));for(let t=1;t<u.length;t++){let n=u.slice(0,t).join(" ");r(n,!0),c[n]||(c[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let i=nE={view:t,prefix:n,scope:e};return setTimeout(()=>{nE==i&&(nE=null)},4e3),!0}]})}let d=u.join(" ");r(d,!1);let f=c[d]||(c[d]={preventDefault:!1,stopPropagation:!1,run:(null===(h=null===(a=c._any)||void 0===a?void 0:a.run)||void 0===h?void 0:h.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),l&&(f.stopPropagation=!0)};for(let i of e){let e=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=i;for(let t in e)e[t].run.push(e=>r(e,nM))}let r=i[t]||i.key;if(r)for(let t of e)o(t,r,i.run,i.preventDefault,i.stopPropagation),i.shift&&o(t,"Shift-"+r,i.shift,i.preventDefault,i.stopPropagation)}return n}(t.reduce((e,t)=>e.concat(t),[]))),n}function nO(e,t,n){return nD(nA(e.state),t,e,n)}let nE=null,nM=null;function nD(e,t,n,i){nM=t;let o=(0,s.xT)(t),l=(0,r.vS)(o,0),a=(0,r.Fh)(l)==o.length&&" "!=o,h="",c=!1,u=!1,d=!1;nE&&nE.view==n&&nE.scope==i&&(h=nE.prefix+" ",0>t_.indexOf(t.keyCode)&&(u=!0,nE=null));let f=new Set,p=e=>{if(e){for(let t of e.run)if(!f.has(t)&&(f.add(t),t(n)))return e.stopPropagation&&(d=!0),!0;e.preventDefault&&(e.stopPropagation&&(d=!0),u=!0)}return!1},g=e[i],m,v;return g&&(p(g[h+nk(o,t,!a)])?c=!0:a&&(t.altKey||t.metaKey||t.ctrlKey)&&!($.windows&&t.ctrlKey&&t.altKey)&&(m=s.E3[t.keyCode])&&m!=o?p(g[h+nk(m,t,!0)])?c=!0:t.shiftKey&&(v=s.BN[t.keyCode])!=o&&v!=m&&p(g[h+nk(v,t,!1)])&&(c=!0):a&&t.shiftKey&&p(g[h+nk(o,t,!0)])&&(c=!0),!c&&p(g._any)&&(c=!0)),u&&(c=!0),c&&d&&t.stopPropagation(),nM=null,c}class nP{constructor(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(!n.empty)return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let i=Math.max(n.from,e.viewport.from),r=Math.min(n.to,e.viewport.to),o=e.textDirection==em.LTR,s=e.contentDOM,l=s.getBoundingClientRect(),a=nN(e),h=s.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=l.right-(c?parseInt(c.paddingRight):0),f=ta(e,i),p=ta(e,r),g=f.type==ei.Text?f:null,m=p.type==ei.Text?p:null;if(g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=nL(e,i,1,g)),m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=nL(e,r,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return y(b(n.from,n.to,g));{let t=g?b(n.from,null,g):w(f,!1),i=m?b(null,n.to,m):w(p,!0),r=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<i.top?r.push(v(u,t.bottom,d,i.top)):t.bottom<i.top&&e.elementAtHeight((t.bottom+i.top)/2).type==ei.Text&&(t.bottom=i.top=(t.bottom+i.top)/2),y(t).concat(r).concat(y(i))}function v(e,n,i,r){return new nP(t,e-a.left,n-a.top,i-e,r-n)}function y({top:e,bottom:t,horizontal:n}){let i=[];for(let r=0;r<n.length;r+=2)i.push(v(n[r],e,n[r+1],t));return i}function b(t,n,i){let r=1e9,s=-1e9,l=[];function a(t,n,a,h,c){let f=e.coordsAtPos(t,t==i.to?-2:2),p=e.coordsAtPos(a,a==i.from?2:-2);f&&p&&(r=Math.min(f.top,p.top,r),s=Math.max(f.bottom,p.bottom,s),c==em.LTR?l.push(o&&n?u:f.left,o&&h?d:p.right):l.push(!o&&h?u:p.left,!o&&n?d:f.right))}let h=null!=t?t:i.from,c=null!=n?n:i.to;for(let i of e.visibleRanges)if(i.to>h&&i.from<c)for(let r=Math.max(i.from,h),o=Math.min(i.to,c);;){let i=e.state.doc.lineAt(r);for(let s of e.bidiSpans(i)){let e=s.from+i.from,l=s.to+i.from;if(e>=o)break;l>r&&a(Math.max(e,r),null==t&&e<=h,Math.min(l,o),null==n&&l>=c,s.dir)}if((r=i.to+1)>=o)break}return 0==l.length&&a(h,null==t,c,null==n,e.textDirection),{top:r,bottom:s,horizontal:l}}function w(e,t){let n=l.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n);{let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=nN(e);return[new nP(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}}}function nN(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==em.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function nL(e,t,n,i){let r=e.coordsAtPos(t,2*n);if(!r)return i;let o=e.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,l=e.posAtCoords({x:o.left+1,y:s}),a=e.posAtCoords({x:o.right-1,y:s});return null==l||null==a?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}class nR{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(nI)!=e.state.facet(nI)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(nI);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>{var n;return n=this.drawn[t],!(e.constructor==n.constructor&&e.eq(n))})){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}let nI=r.sj.define();function nF(e){return[eG.define(t=>new nR(t,e)),nI.of(e)]}let nz=!($.ios&&$.webkit&&$.webkit_version<534),nB=r.sj.define({combine:e=>(0,r.QR)(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function nW(e={}){return[nB.of(e),nH,nU,nK,eW.of(!0)]}function nj(e){return e.startState.facet(nB)!=e.state.facet(nB)}let nH=nF({above:!0,markers(e){let{state:t}=e,n=t.facet(nB),i=[];for(let o of t.selection.ranges){let s=o==t.selection.main;if(o.empty?!s||nz:n.drawRangeCursor){let t=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=o.empty?o:r.OF.cursor(o.head,o.head>o.anchor?-1:1);for(let r of nP.forRange(e,t,n))i.push(r)}}return i},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=nj(e);return n&&nV(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){nV(t.state,e)},class:"cm-cursorLayer"});function nV(e,t){t.style.animationDuration=e.facet(nB).cursorBlinkRate+"ms"}let nU=nF({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:nP.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||nj(e),class:"cm-selectionLayer"}),n$={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};nz&&(n$[".cm-line"].caretColor=n$[".cm-content"].caretColor="transparent !important");let nK=r.Nb.highest(nv.theme(n$)),nq=r.Pe.define({map:(e,t)=>null==e?null:t.mapPos(e)}),nZ=r.sU.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(nq)?t.value:e,e))}),nG=eG.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(nZ);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(nZ)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(nZ),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let i=e.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-i.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(nZ)!=e&&this.view.dispatch({effects:nq.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function nY(){return[nZ,nG]}function nJ(e,t,n,i,r){t.lastIndex=0;for(let o=e.iterRange(n,i),s=n,l;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;l=t.exec(o.value);)r(s+l.index,l)}class nX{constructor(e){let{regexp:t,decoration:n,decorate:i,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(e,t,n,r)=>i(r,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,i,r)=>{let o=n(e,t,i);o&&r(i,i+e[0].length,o)};else if(n)this.addMatch=(e,t,i,r)=>r(i,i+e[0].length,n);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new r.vB,n=t.add.bind(t);for(let{from:t,to:i}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let i=[];for(let{from:r,to:o}of n)r=Math.max(e.state.doc.lineAt(r).from,r-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}(e,this.maxLength))nJ(e.state.doc,this.regexp,t,i,(t,i)=>this.addMatch(i,e,t,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return(e.docChanged&&e.changes.iterChanges((t,r,o,s)=>{s>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(s,i))}),e.viewportMoved||i-n>1e3)?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let r of e.visibleRanges){let o=Math.max(r.from,n),s=Math.min(r.to,i);if(s>o){let n=e.state.doc.lineAt(o),i=n.to<s?e.state.doc.lineAt(s):n,l=Math.max(r.from,n.from),a=Math.min(r.to,i.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){l=o;break}for(;s<i.to;s++)if(this.boundary.test(i.text[s-i.from])){a=s;break}}let h=[],c,u=(e,t,n)=>h.push(n.range(e,t));if(n==i)for(this.regexp.lastIndex=l-n.from;(c=this.regexp.exec(n.text))&&c.index<a-n.from;)this.addMatch(c,e,c.index+n.from,u);else nJ(e.state.doc,this.regexp,l,a,(t,n)=>this.addMatch(n,e,t,u));t=t.update({filterFrom:l,filterTo:a,filter:(e,t)=>e<l||t>a,add:h})}}return t}}let nQ=null!=/x/.unicode?"gu":"g",n0=RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]",nQ),n1={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},n2=null,n5=r.sj.define({combine(e){let t=(0,r.QR)(e,{render:null,specialChars:n0,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==n2&&"undefined"!=typeof document&&document.body){let t=document.body.style;n2=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)!=null}return n2||!1}())&&(t.specialChars=RegExp("	|"+t.specialChars.source,nQ)),t.addSpecialChars&&(t.specialChars=RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,nQ)),t}});function n6(e={}){return[n5.of(e),n3||(n3=eG.fromClass(class{constructor(e){this.view=e,this.decorations=er.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(n5)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new nX({regexp:e.specialChars,decoration:(t,n,i)=>{let{doc:o}=n.state,s=(0,r.vS)(t[0],0);if(9==s){let e=o.lineAt(i),t=n.state.tabSize,s=(0,r.y$)(e.text,t,i-e.from);return er.replace({widget:new n4((t-s%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=er.replace({widget:new n8(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(n5);e.startState.facet(n5)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let n3=null;class n8 extends en{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){var t;let n=(t=this.code)>=32?"\u2022":10==t?"\u2424":String.fromCharCode(9216+t),i=e.state.phrase("Control character")+" "+(n1[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let o=document.createElement("span");return o.textContent=n,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class n4 extends en{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function n9(){return ie}let n7=er.line({class:"cm-activeLine"}),ie=eG.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let i of e.state.selection.ranges){let r=e.lineBlockAt(i.head);r.from>t&&(n.push(n7.range(r.from)),t=r.from)}return er.set(n)}},{decorations:e=>e.decorations});class it extends en{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?c(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=m(t[0],"rtl"!=n.direction),r=parseInt(n.lineHeight);return i.bottom-i.top>1.5*r?{left:i.left,right:i.right,top:i.top,bottom:i.top+r}:i}ignoreEvent(){return!1}}function ii(e){return eG.fromClass(class{constructor(t){this.view=t,this.placeholder=e?er.set([er.widget({widget:new it(e),side:1}).range(0)]):er.none}get decorations(){return this.view.state.doc.length?er.none:this.placeholder}},{decorations:e=>e.decorations})}function ir(e,t){var n;let i,o=e.posAtCoords({x:t.clientX,y:t.clientY},!1),s=e.state.doc.lineAt(o),l=o-s.from,a=l>2e3?-1:l==s.length?(n=t.clientX,(i=e.coordsAtPos(e.viewport.from))?Math.round(Math.abs((i.left-n)/e.defaultCharacterWidth)):-1):(0,r.y$)(s.text,e.state.tabSize,o-s.from);return{line:s.number,col:a,off:l}}function io(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return nv.mouseSelectionStyle.of((e,n)=>{let i,o;return t(n)?(i=ir(e,n),o=e.state.selection,i?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(i.line).from),n=e.state.doc.lineAt(t);i={line:n.number,col:i.col,off:Math.min(i.off,n.length)},o=o.map(e.changes)}},get(t,n,s){let l=ir(e,t);if(!l)return o;let a=function(e,t,n){let i=Math.min(t.line,n.line),o=Math.max(t.line,n.line),s=[];if(t.off>2e3||n.off>2e3||t.col<0||n.col<0){let l=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=i;t<=o;t++){let n=e.doc.line(t);n.length<=a&&s.push(r.OF.range(n.from+l,n.to+a))}}else{let l=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=i;t<=o;t++){let n=e.doc.line(t),i=(0,r.kn)(n.text,l,e.tabSize,!0);if(i<0)s.push(r.OF.cursor(n.to));else{let t=(0,r.kn)(n.text,a,e.tabSize);s.push(r.OF.range(n.from+i,n.from+t))}}}return s}(e.state,i,l);return a.length?s?r.OF.create(a.concat(o.ranges)):r.OF.create(a):o}}:null):null})}let is={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},il={style:"cursor: crosshair"};function ia(e={}){let[t,n]=is[e.key||"Alt"],i=eG.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[i,nv.contentAttributes.of(e=>{var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.isDown)?il:null})]}let ih="-10000px";class ic{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let r=null;this.tooltipViews=this.tooltips.map(e=>r=n(e,r))}update(e,t){var n;let i=e.state.facet(this.facet),r=i.filter(e=>e);if(i===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let n=0;n<r.length;n++){let i=r[n],l=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(l=e)}if(l<0)o[n]=this.createTooltipView(i,n?o[n-1]:null),s&&(s[n]=!!i.above);else{let i=o[n]=this.tooltipViews[l];s&&(s[n]=t[l]),i.update&&i.update(e)}}}for(let e of this.tooltipViews)0>o.indexOf(e)&&(this.removeTooltipView(e),null===(n=e.destroy)||void 0===n||n.call(e));return t&&(s.forEach((e,n)=>t[n]=e),t.length=s.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function iu(e={}){return ip.of(e)}function id(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}let ip=r.sj.define({combine:e=>{var t,n,i;return{position:$.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find(e=>e.parent))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=e.find(e=>e.tooltipSpace))||void 0===i?void 0:i.tooltipSpace)||id}}}),ig=new WeakMap,im=eG.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(ip);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ic(e,iw,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let e of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(e.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,i=e.state.facet(ip);if(i.position!=this.position&&!this.madeAbsolute){for(let e of(this.position=i.position,this.manager.tooltipViews))e.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){for(let e of(this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),i=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=ih,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;for(let t of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if($.gecko)n=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==ih&&"0px"==e.style.left){let t=e.getBoundingClientRect();n=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(n||"absolute"==this.position){if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState)}let i=this.view.scrollDOM.getBoundingClientRect(),r=e3(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(ip).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(e){var t;if(e.makeAbsolute)for(let e of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))e.dom.style.position="absolute";let{visible:n,space:i,scaleX:r,scaleY:o}=e,s=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=e.pos[l],d=e.size[l];if(!u||!1!==a.clip&&(u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1)){c.style.top=ih;continue}let f=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(t=ig.get(h))&&void 0!==t?t:d.bottom-d.top,v=h.offset||ib,y=this.view.textDirection==em.LTR,b=d.width>i.right-i.left?y?i.left:i.right-d.width:y?Math.max(i.left,Math.min(u.left-(f?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,u.left-g+(f?14:0)-v.x),i.right-g),w=this.above[l];!a.strictSide&&(w?u.top-m-p-v.y<i.top:u.bottom+m+p+v.y>i.bottom)&&w==i.bottom-u.bottom>u.top-i.top&&(w=this.above[l]=!w);let _=(w?u.top-i.top:i.bottom-u.bottom)-p;if(_<m&&!1!==h.resize){if(_<this.view.defaultLineHeight){c.style.top=ih;continue}ig.set(h,m),c.style.height=(m=_)/o+"px"}else c.style.height&&(c.style.height="");let x=w?u.top-m-p-v.y:u.bottom+p+v.y,k=b+g;if(!0!==h.overlap)for(let e of s)e.left<k&&e.right>b&&e.top<x+m&&e.bottom>x&&(x=w?e.top-m-2-p:e.bottom+p+2);if("absolute"==this.position?(c.style.top=(x-e.parent.top)/o+"px",iv(c,(b-e.parent.left)/r)):(c.style.top=x/o+"px",iv(c,b/r)),f){let e=u.left+(y?v.x:-v.x)-(b+14-7);f.style.left=e/r+"px"}!0!==h.overlap&&s.push({left:b,top:x,right:k,bottom:x+m}),c.classList.toggle("cm-tooltip-above",w),c.classList.toggle("cm-tooltip-below",!w),h.positioned&&h.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=ih}},{eventObservers:{scroll(){this.maybeMeasure()}}});function iv(e,t){let n=parseInt(e.style.left,10);(isNaN(n)||Math.abs(t-n)>1)&&(e.style.left=t+"px")}let iy=nv.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ib={x:0,y:0},iw=r.sj.define({enables:[im,iy]}),i_=r.sj.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class ix{static create(e){return new ix(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ic(e,i_,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(void 0!==i){if(void 0===t)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}let ik=iw.compute([i_],e=>{let t=e.facet(i_);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos})),create:ix.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class iS{constructor(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,r=1;if(n instanceof Z)i=n.posAtStart;else{if(null==(i=e.posAtCoords(t)))return;let n=e.coordsAtPos(i);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(i)).find(e=>e.from<=i&&e.to>=i),s=o&&o.dir==em.RTL?-1:1;r=t.x<n.left?-s:s}let o=this.source(e,i,r);if(null==o?void 0:o.then){let t=this.pending={pos:i};o.then(n=>{this.pending==t&&(this.pending=null,n&&!(Array.isArray(n)&&!n.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))},t=>e$(e.state,t,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(im),t=e?e.manager.tooltips.findIndex(e=>e.create==ix.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!function(e,t){let{left:n,right:i,top:r,bottom:o}=e.getBoundingClientRect(),s;if(s=e.querySelector(".cm-tooltip-arrow")){let e=s.getBoundingClientRect();r=Math.min(e.top,r),o=Math.max(e.bottom,o)}return t.clientX>=n-4&&t.clientX<=i+4&&t.clientY>=r-4&&t.clientY<=o+4}(r.dom,e)||this.pending){let{pos:r}=i[0]||this.pending,o=null!==(n=null===(t=i[0])||void 0===t?void 0:t.end)&&void 0!==n?n:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!function(e,t,n,i,r,o){let s=e.scrollDOM.getBoundingClientRect(),l=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>i||s.right<i||s.top>r||Math.min(s.bottom,l)<r)return!1;let a=e.posAtCoords({x:i,y:r},!1);return a>=t&&a<=n}(this.view,r,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function iC(e,t={}){let n=r.Pe.define(),i=r.sU.define({create:()=>[],update(e,i){if(e.length&&(t.hideOnChange&&(i.docChanged||i.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(i,e))),i.docChanged)){let t=[];for(let n of e){let e=i.changes.mapPos(n.pos,-1,r.iR.TrackDel);if(null!=e){let r=Object.assign(Object.create(null),n);r.pos=e,null!=r.end&&(r.end=i.changes.mapPos(r.end)),t.push(r)}}e=t}for(let t of i.effects)t.is(n)&&(e=t.value),t.is(iA)&&(e=[]);return e},provide:e=>i_.from(e)});return{active:i,extension:[i,eG.define(r=>new iS(r,e,i,n,t.hoverTime||300)),ik]}}function iT(e,t){let n=e.plugin(im);if(!n)return null;let i=n.manager.tooltips.indexOf(t);return i<0?null:n.manager.tooltipViews[i]}let iA=r.Pe.define(),iO=r.sj.define({combine(e){let t,n;for(let i of e)t=t||i.topContainer,n=n||i.bottomContainer;return{topContainer:t,bottomContainer:n}}});function iE(e,t){let n=e.plugin(iM),i=n?n.specs.indexOf(t):-1;return i>-1?n.panels[i]:null}let iM=eG.fromClass(class{constructor(e){this.input=e.state.facet(iN),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(iO);for(let n of(this.top=new iD(e,!0,t.topContainer),this.bottom=new iD(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top)),this.panels))n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(iO);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new iD(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new iD(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(iN);if(n!=this.input){let t=n.filter(e=>e),i=[],r=[],o=[],s=[];for(let n of t){let t=this.specs.indexOf(n),l;t<0?(l=n(e.view),s.push(l)):(l=this.panels[t]).update&&l.update(e),i.push(l),(l.top?r:o).push(l)}for(let e of(this.specs=t,this.panels=i,this.top.sync(r),this.bottom.sync(o),s))e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>nv.scrollMargins.of(t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class iD{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&0>e.indexOf(t)&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=iP(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=iP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function iP(e){let t=e.nextSibling;return e.remove(),t}let iN=r.sj.define({enables:iM});class iL extends r.FB{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}iL.prototype.elementClass="",iL.prototype.toDOM=void 0,iL.prototype.mapMode=r.iR.TrackBefore,iL.prototype.startSide=iL.prototype.endSide=-1,iL.prototype.point=!0;let iR=r.sj.define(),iI=r.sj.define(),iF={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>r.om.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},iz=r.sj.define();function iB(e){return[ij(),iz.of(Object.assign(Object.assign({},iF),e))]}let iW=r.sj.define({combine:e=>e.some(e=>e)});function ij(e){let t=[iH];return e&&!1===e.fixed&&t.push(iW.of(!0)),t}let iH=eG.fromClass(class{constructor(e){for(let t of(this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(iz).map(t=>new iK(e,t)),this.gutters))this.dom.appendChild(t.dom);this.fixed=!e.state.facet(iW),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,i=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(iW)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=r.om.iter(this.view.state.facet(iR),this.view.viewport.from),i=[],o=this.gutters.map(e=>new i$(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(e.type)){let t=!0;for(let r of e.type)if(r.type==ei.Text&&t){for(let e of(iU(n,i,r.from),o))e.line(this.view,r,i);t=!1}else if(r.widget)for(let e of o)e.widget(this.view,r)}else if(e.type==ei.Text)for(let t of(iU(n,i,e.from),o))t.line(this.view,e,i);else if(e.widget)for(let t of o)t.widget(this.view,e);for(let e of o)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(iz),n=e.state.facet(iz),i=e.docChanged||e.heightChanged||e.viewportChanged||!r.om.eq(e.startState.facet(iR),e.state.facet(iR),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(i=!0);else{i=!0;let r=[];for(let i of n){let n=t.indexOf(i);n<0?r.push(new iK(this.view,i)):(this.gutters[n].update(e),r.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),0>r.indexOf(e)&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return i}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>nv.scrollMargins.of(t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==em.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null})});function iV(e){return Array.isArray(e)?e:[e]}function iU(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class i${constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=r.om.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let t=new iq(e,o,r,n);i.elements.push(t),i.dom.appendChild(t.dom)}else i.elements[this.i].update(e,o,r,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];iU(this.cursor,i,t.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),i=n?[n]:null;for(let n of e.state.facet(iI)){let r=n(e,t.widget,t);r&&(i||(i=[])).push(r)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class iK{constructor(e,t){for(let n in this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)this.dom.addEventListener(n,i=>{let r=i.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let e=r.getBoundingClientRect();o=(e.top+e.bottom)/2}else o=i.clientY;let s=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,s,i)&&i.preventDefault()});this.markers=iV(t.markers(e)),t.initialSpacer&&(this.spacer=new iq(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=iV(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!r.om.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class iq{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,i)&&this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let s=o,l=r<t.length?t[r++]:null,a=!1;if(l){let e=l.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(l)){s=e,a=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(i);let t=i.nextSibling;i.remove(),i=t}}if(!l)break;l.toDOM&&(a?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),a&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}let iZ=r.sj.define(),iG=r.sj.define(),iY=r.sj.define({combine:e=>(0,r.QR)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let i=n[e],r=t[e];n[e]=i?(e,t,n)=>i(e,t,n)||r(e,t,n):r}return n}})});class iJ extends iL{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function iX(e,t){return e.state.facet(iY).formatNumber(t,e.state)}let iQ=iz.compute([iY],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(iZ),lineMarker:(e,t,n)=>n.some(e=>e.toDOM)?null:new iJ(iX(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,n)=>{for(let i of e.state.facet(iG)){let r=i(e,t,n);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(iY)!=e.state.facet(iY),initialSpacer:e=>new iJ(iX(e,i1(e.state.doc.lines))),updateSpacer(e,t){let n=iX(t.view,i1(t.view.state.doc.lines));return n==e.number?e:new iJ(n)},domEventHandlers:e.facet(iY).domEventHandlers}));function i0(e={}){return[iY.of(e),ij(),iQ]}function i1(e){let t=9;for(;t<e;)t=10*t+9;return t}let i2=new class extends iL{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},i5=iR.compute(["selection"],e=>{let t=[],n=-1;for(let i of e.selection.ranges){let r=e.doc.lineAt(i.head).from;r>n&&(n=r,t.push(i2.range(r)))}return r.om.of(t)});function i6(){return i5}},491721:(e,t,n)=>{"use strict";n.d(t,{Db:()=>s,FJ:()=>h,hx:()=>f,k_:()=>c,yW:()=>d,zA:()=>a});var i=n(425002),r=n(408361);let o=new Set(["http:","https:","mailto:","sms:","tel:"]);class s extends r.fG{static getType(){return"link"}static clone(e){return new s(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e,t={},n){super(n);let{target:i=null,rel:r=null,title:o=null}=t;this.__url=e,this.__target=i,this.__rel=r,this.__title=o}createDOM(e){let t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),null!==this.__target&&(t.target=this.__target),null!==this.__rel&&(t.rel=this.__rel),null!==this.__title&&(t.title=this.__title),(0,i.ZB)(t,e.theme.link),t}updateDOM(e,t,n){if(t instanceof HTMLAnchorElement){let n=this.__url,i=this.__target,r=this.__rel,o=this.__title;n!==e.__url&&(t.href=n),i!==e.__target&&(i?t.target=i:t.removeAttribute("target")),r!==e.__rel&&(r?t.rel=r:t.removeAttribute("rel")),o!==e.__title&&(o?t.title=o:t.removeAttribute("title"))}return!1}static importDOM(){return{a:e=>({conversion:l,priority:1})}}static importJSON(e){let t=a(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}sanitizeUrl(e){try{let t=new URL(e);if(!o.has(t.protocol))return"about:blank"}catch(e){}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}getTitle(){return this.getLatest().__title}setTitle(e){this.getWritable().__title=e}insertNewAfter(e,t=!0){let n=a(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!(0,r.I2)(t))return!1;let i=t.anchor.getNode(),o=t.focus.getNode();return this.isParentOf(i)&&this.isParentOf(o)&&t.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function l(e){let t=null;if((0,r.nY)(e)){let n=e.textContent;(null!==n&&""!==n||e.children.length>0)&&(t=a(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function a(e,t){return(0,r.pT)(new s(e,t))}function h(e){return e instanceof s}class c extends s{constructor(e,t={},n){super(e,t,n),this.__isUnlinked=void 0!==t.isUnlinked&&null!==t.isUnlinked&&t.isUnlinked}static getType(){return"autolink"}static clone(e){return new c(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){let t=this.getWritable();return t.__isUnlinked=e,t}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,t,n){return super.updateDOM(e,t,n)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){let t=u(e.url,{isUnlinked:e.isUnlinked,rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked,type:"autolink",version:1}}insertNewAfter(e,t=!0){let n=this.getParentOrThrow().insertNewAfter(e,t);if((0,r.ff)(n)){let e=u(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(e),e}return null}}function u(e,t){return(0,r.pT)(new c(e,t))}let d=(0,r.gu)("TOGGLE_LINK_COMMAND");function f(e,t={}){let{target:n,title:o}=t,s=void 0===t.rel?"noreferrer":t.rel,l=(0,r.vJ)();if(!(0,r.I2)(l))return;let u=l.extract();if(null===e)u.forEach(e=>{let t=(0,i.Bt)(e,e=>!(e instanceof c)&&h(e));if(t){let e=t.getChildren();for(let n=0;n<e.length;n++)t.insertBefore(e[n]);t.remove()}});else{if(1===u.length){let t=function(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}(u[0],h);if(null!==t)return t.setURL(e),void 0!==n&&t.setTarget(n),null!==s&&t.setRel(s),void(void 0!==o&&t.setTitle(o))}let t=null,i=null;u.forEach(l=>{let c=l.getParent();if(c!==i&&null!==c&&(!(0,r.ff)(l)||l.isInline())){if(h(c))return i=c,c.setURL(e),void 0!==n&&c.setTarget(n),null!==s&&i.setRel(s),void(void 0!==o&&i.setTitle(o));if(c.is(t)||(t=c,i=a(e,{rel:s,target:n,title:o}),h(c)?null===l.getPreviousSibling()?c.insertBefore(i):c.insertAfter(i):l.insertBefore(i)),h(l)){if(l.is(i))return;if(null!==i){let e=l.getChildren();for(let t=0;t<e.length;t++)i.append(e[t])}l.remove()}else null!==i&&i.append(l)}})}}},693164:(e,t,n)=>{"use strict";n.d(t,{Eg:()=>X,NB:()=>$,Pi:()=>Y,Rm:()=>et,Sq:()=>V,TB:()=>j,Up:()=>K,WY:()=>J,Wn:()=>en,bk:()=>ei,d7:()=>G,eA:()=>q,gW:()=>Q,gb:()=>Z,iM:()=>A,jA:()=>H,mK:()=>U,ps:()=>ee});var i=n(408361),r=n(231521),o=n(871930),s=n(425002),l=n(858260),a=n(491721);function h(e,t){let n={};for(let i of e){let e=t(i);e&&(n[e]?n[e].push(i):n[e]=[i])}return n}function c(e){let t=h(e,e=>e.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}let u=/[!-/:-@[-`{-~\s]/,d=/^\s{0,3}$/;function f(e){if(!(0,i.bS)(e))return!1;let t=e.getFirstChild();return null==t||1===e.getChildrenSize()&&(0,i.kF)(t)&&d.test(t.getTextContent())}function p(e,t,n){let r=[],o=e.getChildren();i:for(let e of o){for(let i of n){if(!i.export)continue;let o=i.export(e,e=>p(e,t,n),(e,n)=>g(e,n,t));if(null!=o){r.push(o);continue i}}(0,i.wH)(e)?r.push("\n"):(0,i.kF)(e)?r.push(g(e,e.getTextContent(),t)):(0,i.ff)(e)?r.push(p(e,t,n)):(0,i.Cy)(e)&&r.push(e.getTextContent())}return r.join("")}function g(e,t,n){let i=t.trim(),r=i,o=new Set;for(let t of n){let n=t.format[0],i=t.tag;v(e,n)&&!o.has(n)&&(o.add(n),v(m(e,!0),n)||(r=i+r),v(m(e,!1),n)||(r+=i))}return t.replace(i,()=>r)}function m(e,t){let n=t?e.getPreviousSibling():e.getNextSibling();if(!n){let i=e.getParentOrThrow();i.isInline()&&(n=t?i.getPreviousSibling():i.getNextSibling())}for(;n;){if((0,i.ff)(n)){if(!n.isInline())break;let e=t?n.getLastDescendant():n.getFirstDescendant();if((0,i.kF)(e))return e;n=t?n.getPreviousSibling():n.getNextSibling()}if((0,i.kF)(n))return n;if(!(0,i.ff)(n))break}return null}function v(e,t){return(0,i.kF)(e)&&e.hasFormat(t)}let y="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,b=y&&"documentMode"in document?document.documentMode:null;y&&"InputEvent"in window&&!b&&new window.InputEvent("input");let w=y&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),_=y&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,x=y&&/^(?=.*Chrome).*/i.test(navigator.userAgent),k=y&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!x;var S=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function C(e,t,n){let i=n.length;for(let r=t;r>=i;r--){let t=r-i;if(T(e,t,n,0,i)&&" "!==e[t+i])return t}return -1}function T(e,t,n,i,r){for(let o=0;o<r;o++)if(e[t+o]!==n[i+o])return!1;return!0}function A(e,t=et){let n=c(t),r=h(n.textFormat,({tag:e})=>e[e.length-1]),o=h(n.textMatch,({trigger:e})=>e);for(let n of t){let t=n.type;if("element"===t||"text-match"===t||"multiline-element"===t)for(let t of n.dependencies)e.hasNode(t)||S(173,t.getType())}let s=(e,t,s)=>{(function(e,t,n,r){let o=e.getParent();if(!(0,i.Iq)(o)||e.getFirstChild()!==t)return!1;let s=t.getTextContent();if(" "!==s[n-1])return!1;for(let{regExp:i,replace:o}of r){let r=s.match(i);if(r&&r[0].length===(r[0].endsWith(" ")?n:n-1)){let i=t.getNextSiblings(),[s,l]=t.splitText(n);if(s.remove(),!1!==o(e,l?[l,...i]:i,r,!1))return!0}}return!1})(e,t,s,n.element)||function(e,t,n,r){let o=e.getParent();if(!(0,i.Iq)(o)||e.getFirstChild()!==t)return!1;let s=t.getTextContent();if(" "!==s[n-1])return!1;for(let{regExpStart:i,replace:o,regExpEnd:l}of r){if(l&&!("optional"in l)||l&&"optional"in l&&!l.optional)continue;let r=s.match(i);if(r&&r[0].length===(r[0].endsWith(" ")?n:n-1)){let i=t.getNextSiblings(),[s,l]=t.splitText(n);if(s.remove(),!1!==o(e,l?[l,...i]:i,r,null,null,!1))return!0}}return!1}(e,t,s,n.multilineElement)||function(e,t,n){let i=e.getTextContent(),r=n[i[t-1]];if(null==r)return!1;for(let n of(t<i.length&&(i=i.slice(0,t)),r)){let t;if(!n.replace||!n.regExp)continue;let r=i.match(n.regExp);if(null===r)continue;let o=r.index||0,s=o+r[0].length;return 0===o?[t]=e.splitText(s):[,t]=e.splitText(o,s),t.selectNext(0,0),n.replace(t,r),!0}return!1}(t,s,o)||function(e,t,n){let r=e.getTextContent(),o=t-1,s=r[o],l=n[s];if(l)for(let t of l){let{tag:n}=t,l=n.length,a=o-l+1;if(l>1&&!T(r,a,n,0,l)||" "===r[a-1])continue;let h=r[o+1];if(!1===t.intraword&&h&&!u.test(h))continue;let c=e,d=C(r,a,n),f=c;for(;d<0&&(f=f.getPreviousSibling())&&!(0,i.wH)(f);)if((0,i.kF)(f)){let e=f.getTextContent();c=f,d=C(e,e.length,n)}if(d<0||c===e&&d+l===a)continue;let p=c.getTextContent();if(d>0&&p[d-1]===s)continue;let g=p[d-1];if(!1===t.intraword&&g&&!u.test(g))continue;let m=e.getTextContent(),v=m.slice(0,a)+m.slice(o+1);e.setTextContent(v);let y=c===e?v:p;c.setTextContent(y.slice(0,d)+y.slice(d+l));let b=(0,i.vJ)(),w=(0,i.uT)();(0,i.n1)(w);let _=o-l*(c===e?2:1)+1;for(let n of(w.anchor.set(c.__key,d,"text"),w.focus.set(e.__key,_,"text"),t.format))w.hasFormat(n)||w.formatText(n);for(let e of(w.anchor.set(w.focus.key,w.focus.offset,w.focus.type),t.format))w.hasFormat(e)&&w.toggleFormat(e);return(0,i.I2)(b)&&(w.format=b.format),!0}}(t,s,r)};return e.registerUpdateListener(({tags:t,dirtyLeaves:n,editorState:r,prevEditorState:o})=>{if(t.has("collaboration")||t.has("historic")||e.isComposing())return;let a=r.read(i.vJ),h=o.read(i.vJ);if(!(0,i.I2)(h)||!(0,i.I2)(a)||!a.isCollapsed())return;let c=a.anchor.key,u=a.anchor.offset,d=r._nodeMap.get(c);(0,i.kF)(d)&&n.has(c)&&(1===u||!(u>h.anchor.offset+1))&&e.update(()=>{if(d.hasFormat("code"))return;let e=d.getParent();null===e||(0,l.a5)(e)||s(e,d,a.anchor.offset)})})}let O=/^(\s*)(\d{1,})\.\s/,E=/^(\s*)[-*+]\s/,M=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,D=/^(#{1,6})\s/,P=/^>\s/,N=/^[ \t]*```(\w+)?/,L=/[ \t]*```$/,R=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,I=/^(?:\|)(.+)(?:\|)\s?$/,F=/^(\| ?:?-*:? ?)+\|\s?$/,z=e=>(t,n,i)=>{let r=e(i);r.append(...n),t.replace(r),r.select(0,0)},B=e=>(t,n,i)=>{let o=t.getPreviousSibling(),s=t.getNextSibling(),l=(0,r.i)("check"===e?"x"===i[3]:void 0);if((0,r.HY)(s)&&s.getListType()===e){let e=s.getFirstChild();null!==e?e.insertBefore(l):s.append(l),t.remove()}else if((0,r.HY)(o)&&o.getListType()===e)o.append(l),t.remove();else{let n=(0,r.DE)(e,"number"===e?Number(i[2]):void 0);n.append(l),t.replace(n)}l.append(...n),l.select(0,0);let a=function(e){let t=e.match(/\t/g),n=e.match(/ /g),i=0;return t&&(i+=t.length),n&&(i+=Math.floor(n.length/4)),i}(i[1]);a&&l.setIndent(a)},W=(e,t,n)=>{let i=[],o=e.getChildren(),s=0;for(let l of o)if((0,r.Mz)(l)){if(1===l.getChildrenSize()){let e=l.getFirstChild();if((0,r.HY)(e)){i.push(W(e,t,n+1));continue}}let o=" ".repeat(4*n),a=e.getListType(),h="number"===a?`${e.getStart()+s}. `:"check"===a?`- [${l.getChecked()?"x":" "}] `:"- ";i.push(o+h+t(l)),s++}return i.join("\n")},j={dependencies:[o.jL],export:(e,t)=>{if(!(0,o.Pi)(e))return null;let n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:D,replace:z(e=>{let t="h"+e[1].length;return(0,o.fi)(t)}),type:"element"},H={dependencies:[o.dJ],export:(e,t)=>{if(!(0,o.jd)(e))return null;let n=t(e).split("\n"),i=[];for(let e of n)i.push("> "+e);return i.join("\n")},regExp:P,replace:(e,t,n,r)=>{if(r){let n=e.getPreviousSibling();if((0,o.jd)(n))return n.splice(n.getChildrenSize(),0,[(0,i.WK)(),...t]),n.select(0,0),void e.remove()}let s=(0,o.xi)();s.append(...t),e.replace(s),s.select(0,0)},type:"element"},V={dependencies:[l.iK],export:e=>{if(!(0,l.a5)(e))return null;let t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?"\n"+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:L},regExpStart:N,replace:(e,t,n,r,o,s)=>{let a,h;if(!t&&o){if(1===o.length)r?(a=(0,l.QC)(),h=n[1]+o[0]):(a=(0,l.QC)(n[1]),h=o[0].startsWith(" ")?o[0].slice(1):o[0]);else{if(a=(0,l.QC)(n[1]),0===o[0].trim().length)for(;o.length>0&&!o[0].length;)o.shift();else o[0]=o[0].startsWith(" ")?o[0].slice(1):o[0];for(;o.length>0&&!o[o.length-1].length;)o.pop();h=o.join("\n")}let t=(0,i.sT)(h);a.append(t),e.append(a)}else t&&z(e=>(0,l.QC)(e?e[1]:void 0))(e,t,n,s)},type:"multiline-element"},U={dependencies:[r.v5,r.YW],export:(e,t)=>(0,r.HY)(e)?W(e,t,0):null,regExp:E,replace:B("bullet"),type:"element"},$=(r.v5,r.YW,B("check"),{dependencies:[r.v5,r.YW],export:(e,t)=>(0,r.HY)(e)?W(e,t,0):null,regExp:O,replace:B("number"),type:"element"}),K={format:["code"],tag:"`",type:"text-format"},q={format:["bold","italic"],tag:"***",type:"text-format"},Z={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},G={format:["bold"],tag:"**",type:"text-format"},Y={format:["bold"],intraword:!1,tag:"__",type:"text-format"},J={format:["strikethrough"],tag:"~~",type:"text-format"},X={format:["italic"],tag:"*",type:"text-format"},Q={format:["italic"],intraword:!1,tag:"_",type:"text-format"},ee={dependencies:[a.Db],export:(e,t,n)=>{if(!(0,a.FJ)(e))return null;let r=e.getTitle(),o=r?`[${e.getTextContent()}](${e.getURL()} "${r}")`:`[${e.getTextContent()}](${e.getURL()})`,s=e.getFirstChild();return 1===e.getChildrenSize()&&(0,i.kF)(s)?n(s,o):o},importRegExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{let[,n,r,o]=t,s=(0,a.zA)(r,{title:o}),l=(0,i.sT)(n);l.setFormat(e.getFormat()),s.append(l),e.replace(s)},trigger:")",type:"text-match"},et=[j,H,U,$,V,K,q,Z,G,Y,{format:["highlight"],tag:"==",type:"text-format"},X,Q,J,ee];function en(e,t=et,n,l=!1,a=!1){let h=l?e:function(e,t=!1){let n=e.split("\n"),i=!1,r=[];for(let e=0;e<n.length;e++){let o=n[e],s=r[r.length-1];R.test(o)?r.push(o):N.test(o)||L.test(o)?(i=!i,r.push(o)):i||""===o||""===s||!s||D.test(s)||D.test(o)||P.test(o)||O.test(o)||E.test(o)||M.test(o)||I.test(o)||F.test(o)||!t?r.push(o):r[r.length-1]=s+o}return r.join("\n")}(e,a);return(function(e,t=!1){let n=c(e),l=function(e){let t={},n={},i=[];for(let r of e){let{tag:e}=r;t[e]=r;let o=e.replace(/(\*|\^|\+)/g,"\\$1");i.push(o),n[e]=w||_||k?RegExp(`(${o})(?![${o}\\s])(.*?[^${o}\\s])${o}(?!${o})`):RegExp(`(?<![\\\\${o}])(${o})((\\\\${o})?.*?[^${o}\\s](\\\\${o})?)((?<!\\\\)|(?<=\\\\\\\\))(${o})(?![\\\\${o}])`)}return{fullMatchRegExpByTag:n,openTagsRegExp:RegExp((w||_||k?"":"(?<![\\\\])")+"("+i.join("|")+")","g"),transformersByTag:t}}(n.textFormat);return(e,a)=>{let h=e.split("\n"),c=h.length,d=a||(0,i.Ni)();d.clear();for(let e=0;e<c;e++){let t=h[e],[a,c]=function(e,t,n,i){for(let{regExpStart:r,regExpEnd:o,replace:s}of n){let n=e[t].match(r);if(!n)continue;let l="object"==typeof o&&"regExp"in o?o.regExp:o,a=o&&"object"==typeof o&&"optional"in o?o.optional:!o,h=t,c=e.length;for(;h<c;){let r=l?e[h].match(l):null;if(!r&&(!a||a&&h<c-1)||r&&t===h&&r.index===n.index){h++;continue}let o=[];if(r&&t===h)o.push(e[t].slice(n[0].length,-r[0].length));else for(let i=t;i<=h;i++)if(i===t){let t=e[i].slice(n[0].length);o.push(t)}else if(i===h&&r){let t=e[i].slice(0,-r[0].length);o.push(t)}else o.push(e[i]);if(!1!==s(i,null,n,r,o,!0))return[!0,h];break}}return[!1,t]}(h,e,n.multilineElement,d);a?e=c:function(e,t,n,l,a){let h=(0,i.sT)(e),c=(0,i.lJ)();for(let{regExp:i,replace:r}of(c.append(h),t.append(c),n)){let t=e.match(i);if(t&&(h.setTextContent(e.slice(t[0].length)),!1!==r(c,[h],t,!0)))break}if(function e(t,n,i){let r,o,s;let l=t.getTextContent(),a=function(e,t){let n=e.match(t.openTagsRegExp);if(null==n)return null;for(let i of n){let n=i.replace(/^\s/,""),r=t.fullMatchRegExpByTag[n];if(null==r)continue;let o=e.match(r),s=t.transformersByTag[n];if(null!=o&&null!=s){if(!1!==s.intraword)return o;let{index:t=0}=o,n=e[t-1],i=e[t+o[0].length];if((!n||u.test(n))&&(!i||u.test(i)))return o}}return null}(l,n);if(!a)return void function e(t,n){let i=t;i:for(;i;){for(let t of n){let r,o;if(!t.replace||!t.importRegExp)continue;let s=i.getTextContent().match(t.importRegExp);if(!s)continue;let l=s.index||0,a=l+s[0].length;0===l?[r,i]=i.splitText(a):[,r,o]=i.splitText(l,a),o&&e(o,n),t.replace(r,s);continue i}break}}(t,i);if(a[0]===l)r=t;else{let e=a.index||0,n=e+a[0].length;0===e?[r,o]=t.splitText(n):[s,r,o]=t.splitText(e,n)}r.setTextContent(a[2]);let h=n.transformersByTag[a[1]];if(h)for(let e of h.format)r.hasFormat(e)||r.toggleFormat(e);r.hasFormat("code")||e(r,n,i),s&&e(s,n,i),o&&e(o,n,i)}(h,l,a),c.isAttached()&&e.length>0){let e=c.getPreviousSibling();if((0,i.bS)(e)||(0,o.jd)(e)||(0,r.HY)(e)){let t=e;if((0,r.HY)(e)){let n=e.getLastDescendant();t=null==n?null:(0,s.Bt)(n,r.Mz)}null!=t&&t.getTextContentSize()>0&&(t.splice(t.getChildrenSize(),0,[(0,i.WK)(),...c.getChildren()]),c.remove())}}}(t,d,n.element,l,n.textMatch)}for(let e of d.getChildren())!t&&f(e)&&d.getChildrenSize()>1&&e.remove();null!==(0,i.vJ)()&&d.selectStart()}})(t,l)(h,n)}function ei(e=et,t,n=!1){return(function(e,t=!1){let n=c(e),r=[...n.multilineElement,...n.element],o=!t,s=n.textFormat.filter(e=>1===e.format.length);return e=>{let t=[],l=(e||(0,i.Ni)()).getChildren();for(let e=0;e<l.length;e++){let a=l[e],h=function(e,t,n,r){for(let i of t){if(!i.export)continue;let t=i.export(e,e=>p(e,n,r));if(null!=t)return t}return(0,i.ff)(e)?p(e,n,r):(0,i.Cy)(e)?e.getTextContent():null}(a,r,s,n.textMatch);null!=h&&t.push(o&&e>0&&!f(a)&&!f(l[e-1])?"\n".concat(h):h)}return t.join("\n")}})(e,n)(t)}},478111:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,R:()=>a});var i=n(848318),r=n(749214);function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s={error:null},l=function(e){function t(){for(var t,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state=s,t.resetErrorBoundary=function(){for(var e,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];null==t.props.onReset||(e=t.props).onReset.apply(e,i),t.reset()},t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(s)},n.componentDidCatch=function(e,t){var n,i;null==(n=(i=this.props).onError)||n.call(i,e,t)},n.componentDidUpdate=function(e,t){var n,i,r,o,s=this.state.error,l=this.props.resetKeys;null!==s&&null!==t.error&&(void 0===(r=e.resetKeys)&&(r=[]),void 0===(o=l)&&(o=[]),r.length!==o.length||r.some(function(e,t){return!Object.is(e,o[t])}))&&(null==(n=(i=this.props).onResetKeysChange)||n.call(i,e.resetKeys,l),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,r=t.FallbackComponent,o=t.fallback;if(null!==e){var s={error:e,resetErrorBoundary:this.resetErrorBoundary};if(i.isValidElement(o))return o;if("function"==typeof n)return n(s);if(r)return i.createElement(r,s);throw Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(i.Component);function a({children:e,onError:t}){return(0,r.jsx)(l,{fallback:(0,r.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}},279343:(e,t,n)=>{"use strict";n.d(t,{AO:()=>a,Ox:()=>c,T6:()=>l,YV:()=>u,vp:()=>s});var i=n(211375),r=n(558916),o=function(e){return e},s=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),i=[],r=t;r<=n;r++)i.push(r);return i},l=function(e,t){var n=e.scrollElement;if(n){var i=function(e){t({width:Math.round(e.width),height:Math.round(e.height)})};i(n.getBoundingClientRect());var r=new ResizeObserver(function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r){i({width:r.inlineSize,height:r.blockSize});return}}i(n.getBoundingClientRect())});return r.observe(n,{box:"border-box"}),function(){r.unobserve(n)}}},a=function(e,t){var n=e.scrollElement;if(n){var i=function(){t(n[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),n.addEventListener("scroll",i,{passive:!0}),function(){n.removeEventListener("scroll",i)}}},h=function(e,t,n){if(null!=t&&t.borderBoxSize){var i=t.borderBoxSize[0];if(i)return Math.round(i[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},c=function(e,t,n){var i,r,o=t.adjustments,s=t.behavior;null==(i=n.scrollElement)||null==i.scrollTo||i.scrollTo(((r={})[n.options.horizontal?"left":"top"]=e+(void 0===o?0:o),r.behavior=s,r))},u=function(e){var t,n,l=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,n=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver(function(e){e.forEach(function(e){l._measureElement(e.target,e)})}):null)},{disconnect:function(){var e;return null==(e=n())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=n())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=n())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach(function(t){var n=t[0];void 0===t[1]&&delete e[n]}),l.options=(0,i._)({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:o,rangeExtractor:s,onChange:function(){},measureElement:h,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==l.options.onChange||l.options.onChange(l)},this.cleanup=function(){l.unsubs.filter(Boolean).forEach(function(e){return e()}),l.unsubs=[],l.scrollElement=null},this._didMount=function(){return l.measureElementCache.forEach(l.observer.observe),function(){l.observer.disconnect(),l.cleanup()}},this._willUpdate=function(){var e=l.options.getScrollElement();l.scrollElement!==e&&(l.cleanup(),l.scrollElement=e,l._scrollToOffset(l.scrollOffset,{adjustments:void 0,behavior:void 0}),l.unsubs.push(l.options.observeElementRect(l,function(e){var t=l.scrollRect;l.scrollRect=e,(l.options.horizontal?e.width!==t.width:e.height!==t.height)&&l.maybeNotify()})),l.unsubs.push(l.options.observeElementOffset(l,function(e){l.scrollAdjustments=0,l.scrollOffset!==e&&(null!==l.isScrollingTimeoutId&&(clearTimeout(l.isScrollingTimeoutId),l.isScrollingTimeoutId=null),l.isScrolling=!0,l.scrollDirection=l.scrollOffset<e?"forward":"backward",l.scrollOffset=e,l.maybeNotify(),l.isScrollingTimeoutId=setTimeout(function(){l.isScrollingTimeoutId=null,l.isScrolling=!1,l.scrollDirection=null,l.maybeNotify()},l.options.scrollingDelay))})))},this.getSize=function(){return l.scrollRect[l.options.horizontal?"width":"height"]},this.memoOptions=(0,r.ph)(function(){return[l.options.count,l.options.paddingStart,l.options.scrollMargin,l.options.getItemKey]},function(e,t,n,i){return l.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:i}},{key:!1}),this.getFurthestMeasurement=function(e,t){for(var n=new Map,i=new Map,r=t-1;r>=0;r--){var o=e[r];if(!n.has(o.lane)){var s=i.get(o.lane);if(null==s||o.end>s.end?i.set(o.lane,o):o.end<s.end&&n.set(o.lane,!0),n.size===l.options.lanes)break}}return i.size===l.options.lanes?Array.from(i.values()).sort(function(e,t){return e.end-t.end})[0]:void 0},this.getMeasurements=(0,r.ph)(function(){return[l.memoOptions(),l.itemSizeCache]},function(e,t){var n=e.count,i=e.paddingStart,r=e.scrollMargin,o=e.getItemKey,s=l.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,l.pendingMeasuredCacheIndexes):0;l.pendingMeasuredCacheIndexes=[];for(var a=l.measurementsCache.slice(0,s),h=s;h<n;h++){var c=o(h),u=1===l.options.lanes?a[h-1]:l.getFurthestMeasurement(a,h),d=u?u.end:i+r,f=t.get(c),p="number"==typeof f?f:l.options.estimateSize(h),g=d+p,m=u?u.lane:h%l.options.lanes;a[h]={index:h,start:d,size:p,end:g,key:c,lane:m}}return l.measurementsCache=a,a},{key:!1,debug:function(){return l.options.debug}}),this.calculateRange=(0,r.ph)(function(){return[l.getMeasurements(),l.getSize(),l.scrollOffset]},function(e,t,n){return l.range=function(e){for(var t=e.measurements,n=e.outerSize,i=e.scrollOffset,r=t.length-1,o=d(0,r,function(e){return t[e].start},i),s=o;s<r&&t[s].end<i+n;)s++;return{startIndex:o,endIndex:s}}({measurements:e,outerSize:t,scrollOffset:n})},{key:!1,debug:function(){return l.options.debug}}),this.maybeNotify=(0,r.ph)(function(){var e=l.calculateRange();return[e.startIndex,e.endIndex,l.isScrolling]},function(){l.notify()},{key:!1,debug:function(){return l.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=(0,r.ph)(function(){return[l.options.rangeExtractor,l.calculateRange(),l.options.overscan,l.options.count]},function(e,t,n,r){return e((0,i._)({},t,{overscan:n,count:r}))},{key:!1,debug:function(){return l.options.debug}}),this.indexFromElement=function(e){var t=l.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var n,i=l.indexFromElement(e),r=l.measurementsCache[i];if(r){var o=l.measureElementCache.get(r.key);if(!e.isConnected){l.observer.unobserve(e),e===o&&l.measureElementCache.delete(r.key);return}o!==e&&(o&&l.observer.unobserve(o),l.observer.observe(e),l.measureElementCache.set(r.key,e));var s=l.options.measureElement(e,t,l),a=s-(null!=(n=l.itemSizeCache.get(r.key))?n:r.size);0!==a&&(r.start<l.scrollOffset&&l._scrollToOffset(l.scrollOffset,{adjustments:l.scrollAdjustments+=a,behavior:void 0}),l.pendingMeasuredCacheIndexes.push(i),l.itemSizeCache=new Map(l.itemSizeCache.set(r.key,s)),l.notify())}},this.measureElement=function(e){e&&l._measureElement(e,void 0)},this.getVirtualItems=(0,r.ph)(function(){return[l.getIndexes(),l.getMeasurements()]},function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=t[e[i]];n.push(o)}return n},{key:!1,debug:function(){return l.options.debug}}),this.getVirtualItemForOffset=function(e){var t=l.getMeasurements();return(0,r.q3)(t[d(0,t.length-1,function(e){return(0,r.q3)(t[e]).start},e)])},this.getOffsetForAlignment=function(e,t){var n=l.getSize();"auto"===t&&(t=e<=l.scrollOffset?"start":e>=l.scrollOffset+n?"end":"start"),"start"===t||("end"===t?e-=n:"center"===t&&(e-=n/2));var i=l.options.horizontal?"scrollWidth":"scrollHeight";return Math.max(Math.min((l.scrollElement?"document"in l.scrollElement?l.scrollElement.document.documentElement[i]:l.scrollElement[i]:0)-l.getSize(),e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,l.options.count-1));var n=(0,r.q3)(l.getMeasurements()[e]);if("auto"===t){if(n.end>=l.scrollOffset+l.getSize()-l.options.scrollPaddingEnd)t="end";else{if(!(n.start<=l.scrollOffset+l.options.scrollPaddingStart))return[l.scrollOffset,t];t="start"}}var i="end"===t?n.end+l.options.scrollPaddingEnd:n.start-l.options.scrollPaddingStart;return[l.getOffsetForAlignment(i,t),t]},this.isDynamicMode=function(){return l.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==l.scrollToIndexTimeoutId&&(clearTimeout(l.scrollToIndexTimeoutId),l.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var n=void 0===t?{}:t,i=n.align,r=n.behavior;l.cancelScrollToIndex(),"smooth"===r&&l.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),l._scrollToOffset(l.getOffsetForAlignment(e,void 0===i?"start":i),{adjustments:void 0,behavior:r})},this.scrollToIndex=function(e,t){var n=void 0===t?{}:t,i=n.align,o=n.behavior;e=Math.max(0,Math.min(e,l.options.count-1)),l.cancelScrollToIndex(),"smooth"===o&&l.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var s=l.getOffsetForIndex(e,void 0===i?"auto":i),a=s[0],h=s[1];l._scrollToOffset(a,{adjustments:void 0,behavior:o}),"smooth"!==o&&l.isDynamicMode()&&(l.scrollToIndexTimeoutId=setTimeout(function(){if(l.scrollToIndexTimeoutId=null,l.measureElementCache.has(l.options.getItemKey(e))){var t=l.getOffsetForIndex(e,h)[0];(0,r.L0)(t,l.scrollOffset)||l.scrollToIndex(e,{align:h,behavior:o})}else l.scrollToIndex(e,{align:h,behavior:o})}))},this.scrollBy=function(e,t){var n=(void 0===t?{}:t).behavior;l.cancelScrollToIndex(),"smooth"===n&&l.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),l._scrollToOffset(l.scrollOffset+e,{adjustments:void 0,behavior:n})},this.getTotalSize=function(){var e;return((null==(e=l.getMeasurements()[l.options.count-1])?void 0:e.end)||l.options.paddingStart)-l.options.scrollMargin+l.options.paddingEnd},this._scrollToOffset=function(e,t){var n=t.adjustments,i=t.behavior;l.options.scrollToFn(e,{behavior:i,adjustments:n},l)},this.measure=function(){l.itemSizeCache=new Map,l.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(e){l.itemSizeCache.set(e.key,e.size)}),this.maybeNotify()},d=function(e,t,n,i){for(;e<=t;){var r=(e+t)/2|0,o=n(r);if(o<i)e=r+1;else{if(!(o>i))return r;t=r-1}}return e>0?e-1:0}},408361:(e,t,n)=>{"use strict";function i(e){return{}}n.d(t,{$7:()=>K,$e:()=>d,A7:()=>iG,AX:()=>_,Ac:()=>i1,B$:()=>ta,BE:()=>tD,C:()=>eM,Ck:()=>n3,Cy:()=>iU,Ey:()=>nR,FE:()=>a,GM:()=>iD,H2:()=>ip,HY:()=>j,I2:()=>n1,Iq:()=>tg,JM:()=>b,Jj:()=>i2,K8:()=>tk,Kf:()=>$,Kp:()=>iV,LY:()=>eR,MK:()=>nZ,Mv:()=>r,Ni:()=>eX,OX:()=>M,Pi:()=>P,Q$:()=>O,R1:()=>y,RT:()=>n5,SK:()=>H,Sr:()=>L,Tg:()=>I,UD:()=>k,V3:()=>v,VS:()=>W,WK:()=>nT,WW:()=>U,Wg:()=>i5,Wu:()=>l,XK:()=>h,YW:()=>D,Z$:()=>eL,ZK:()=>m,_O:()=>tS,a9:()=>tC,bM:()=>c,bS:()=>iQ,bb:()=>S,cq:()=>Z,d:()=>i6,d8:()=>s,e1:()=>tr,ev:()=>nq,fG:()=>iW,fU:()=>R,ff:()=>ij,gC:()=>A,gu:()=>i,hV:()=>iK,hi:()=>f,i0:()=>tO,ie:()=>i8,if:()=>C,jG:()=>eH,jZ:()=>i0,kF:()=>nU,lJ:()=>iX,mB:()=>g,n1:()=>e0,nY:()=>t_,ns:()=>eq,oq:()=>o,pF:()=>q,pT:()=>tm,rU:()=>io,ri:()=>F,sT:()=>nV,sb:()=>tx,si:()=>N,t5:()=>V,u5:()=>B,uT:()=>ir,vJ:()=>il,vi:()=>p,w:()=>u,w$:()=>E,wH:()=>nA,xL:()=>eG,y6:()=>it});let r={},o={},s={},l={},a={},h={},c={},u={},d={},f={},p={},g={},m={},v={},y={},b={},w={},_={},x={},k={},S={},C={},T={},A={},O={},E={},M={},D={},P={},N={},L={},R={},I={},F={},z={},B={},W={},j={},H={},V={},U={},$={},K={},q={},Z={},G="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Y=G&&"documentMode"in document?document.documentMode:null,J=G&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),X=G&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Q=!(!G||!("InputEvent"in window)||Y)&&"getTargetRanges"in new window.InputEvent("input"),ee=G&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),et=G&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,en=G&&/Android/.test(navigator.userAgent),ei=G&&/^(?=.*Chrome).*/i.test(navigator.userAgent),er=G&&en&&ei,eo=G&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!ei,es=ee||et||eo?"\xa0":"\u200B",el=X?"\xa0":es,ea="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",eh="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",ec=RegExp("^[^"+eh+"]*["+ea+"]"),eu=RegExp("^[^"+ea+"]*["+eh+"]"),ed={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},ef={directionless:1,unmergeable:2},ep={center:2,end:6,justify:4,left:1,right:3,start:5},eg={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},em={normal:0,segmented:2,token:1},ev={0:"normal",2:"segmented",1:"token"};var ey=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(e){let t=new URLSearchParams;t.append("code",e);for(let e=1;e<arguments.length;e++)t.append("v",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});function eb(...e){let t=[];for(let n of e)if(n&&"string"==typeof n)for(let[e]of n.matchAll(/\S+/g))t.push(e);return t}let ew=!1,e_=0;function ex(e){e_=e.timeStamp}function ek(e,t,n){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${n._key}`]}function eS(e,t,n){ew=!0;let i=performance.now()-e_>100;try{iB(e,()=>{let r=il()||e.getEditorState().read(()=>{let e=il();return null!==e?e.clone():null}),o=new Map,s=e.getRootElement(),l=e._editorState,a=e._blockCursorElement,h=!1,c="";for(let n=0;n<t.length;n++){let u=t[n],d=u.type,f=u.target,p=eG(f,l);if(!(null===p&&f!==s||iU(p))){if("characterData"===d)i&&nU(p)&&function(e,t,n){if(n1(e)){let t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return 3===t.nodeType&&n.isAttached()}(r,f,p)&&function(e,t,n){let i=tw(n._window),r=null,o=null;null!==i&&i.anchorNode===e&&(r=i.anchorOffset,o=i.focusOffset);let s=e.nodeValue;null!==s&&e9(t,s,r,o,!1)}(f,p,e);else if("childList"===d){h=!0;let t=u.addedNodes;for(let n=0;n<t.length;n++){let i=t[n],r=eZ(i),o=i.parentNode;if(null!=o&&i!==a&&null===r&&("BR"!==i.nodeName||!ek(i,o,e))){if(X){let e=i.innerText||i.nodeValue;e&&(c+=e)}o.removeChild(i)}}let n=u.removedNodes,i=n.length;if(i>0){let t=0;for(let r=0;r<i;r++){let i=n[r];("BR"===i.nodeName&&ek(i,f,e)||a===i)&&(f.appendChild(i),t++)}i!==t&&(f===s&&(p=eQ(l)),o.set(f,p))}}}}if(o.size>0)for(let[t,n]of o)if(ij(n)){let i=n.getChildrenKeys(),r=t.firstChild;for(let n=0;n<i.length;n++){let o=i[n],s=e.getElementByKey(o);null!==s&&(null==r?(t.appendChild(s),r=s):r!==s&&t.replaceChild(s,r),r=r.nextSibling)}}else nU(n)&&n.markDirty();let u=n.takeRecords();if(u.length>0){for(let t=0;t<u.length;t++){let n=u[t],i=n.addedNodes,r=n.target;for(let t=0;t<i.length;t++){let n=i[t],o=n.parentNode;null==o||"BR"!==n.nodeName||ek(n,r,e)||o.removeChild(n)}}n.takeRecords()}null!==r&&(h&&(r.dirty=!0,e0(r)),X&&th(e)&&r.insertRawText(c))})}finally{ew=!1}}function eC(e){let t=e._observer;null!==t&&eS(e,t.takeRecords(),t)}function eT(e){0===e_&&tp(e).addEventListener("textInput",ex,!0),e._observer=new MutationObserver((t,n)=>{eS(e,t,n)})}function eA(e,t){let n=e.__mode,i=e.__format,r=e.__style,o=t.__mode,s=t.__format,l=t.__style;return!(null!==n&&n!==o||null!==i&&i!==s||null!==r&&r!==l)}function eO(e,t){let n=e.mergeWithSibling(t),i=iT()._normalizedNodes;return i.add(e.__key),i.add(t.__key),n}function eE(e){let t,n,i=e;if(""!==i.__text||!i.isSimpleText()||i.isUnmergeable()){for(;null!==(t=i.getPreviousSibling())&&nU(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){eA(t,i)&&(i=eO(t,i));break}t.remove()}for(;null!==(n=i.getNextSibling())&&nU(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){eA(i,n)&&(i=eO(i,n));break}n.remove()}}else i.remove()}function eM(e){return eD(e.anchor),eD(e.focus),e}function eD(e){for(;"element"===e.type;){let t,n;let i=e.getNode(),r=e.offset;if(r===i.getChildrenSize()?(t=i.getChildAtIndex(r-1),n=!0):(t=i.getChildAtIndex(r),n=!1),nU(t)){e.set(t.__key,n?t.getTextContentSize():0,"text");break}if(!ij(t))break;e.set(t.__key,n?t.getChildrenSize():0,"element")}}let eP=1,eN="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function eL(e){let t=document.activeElement;if(null===t)return!1;let n=t.nodeName;return iU(eG(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==ez(t))}function eR(e,t,n){let i=e.getRootElement();try{return null!==i&&i.contains(t)&&i.contains(n)&&null!==t&&!eL(t)&&eF(t)===e}catch(e){return!1}}function eI(e){return e instanceof i4}function eF(e){let t=e;for(;null!=t;){let e=ez(t);if(eI(e))return e;t=td(t)}return null}function ez(e){return e?e.__lexicalEditor:null}function eB(e){return e.isToken()||e.isSegmented()}function eW(e){let t=e;for(;null!=t;){if(3===t.nodeType)return t;t=t.firstChild}return null}function ej(e,t,n){let i=ed[t];if(null!==n&&(e&i)==(n&i))return e;let r=e^i;return"subscript"===t?r&=~ed.superscript:"superscript"===t&&(r&=~ed.subscript),r}function eH(e){return nU(e)||nA(e)||iU(e)}function eV(e){let t=e.getParent();if(null!==t){let n=e.getWritable(),i=t.getWritable(),r=e.getPreviousSibling(),o=e.getNextSibling();if(null===r){if(null!==o){let e=o.getWritable();i.__first=o.__key,e.__prev=null}else i.__first=null}else{let e=r.getWritable();if(null!==o){let t=o.getWritable();t.__prev=e.__key,e.__next=t.__key}else e.__next=null;n.__prev=null}if(null===o){if(null!==r){let e=r.getWritable();i.__last=r.__key,e.__next=null}else i.__last=null}else{let e=o.getWritable();if(null!==r){let t=r.getWritable();t.__next=e.__key,e.__prev=t.__key}else e.__prev=null;n.__next=null}i.__size--,n.__parent=null}}function eU(e){iS();let t=e.getLatest(),n=t.__parent,i=iC(),r=iT(),o=i._nodeMap,s=r._dirtyElements;null!==n&&function(e,t,n){let i=e;for(;null!==i;){if(n.has(i))return;let e=t.get(i);if(void 0===e)break;n.set(i,!1),i=e.__parent}}(n,o,s);let l=t.__key;r._dirtyType=1,ij(e)?s.set(l,!0):r._dirtyLeaves.add(l)}function e$(e){ik();let t=iT(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){let e=eq(n);null!==e&&e.getWritable()}if(null!==e){let t=eq(e);null!==t&&t.getWritable()}}}function eK(){return ix()?null:iT()._compositionKey}function eq(e,t){let n=(t||iC())._nodeMap.get(e);return void 0===n?null:n}function eZ(e,t){let n=e[`__lexicalKey_${iT()._key}`];return void 0!==n?eq(n,t):null}function eG(e,t){let n=e;for(;null!=n;){let e=eZ(n,t);if(null!==e)return e;n=td(n)}return null}function eY(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function eJ(e){return e.read(()=>eX().getTextContent())}function eX(){return eQ(iC())}function eQ(e){return e._nodeMap.get("root")}function e0(e){ik();let t=iC();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function e1(e){let t=iT(),n=function(e,t){let n=e;for(;null!=n;){let e=n[`__lexicalKey_${t._key}`];if(void 0!==e)return e;n=td(n)}return null}(e,t);return null===n?e===t.getRootElement()?eq("root"):null:eq(n)}function e2(e,t){return t?e.getTextContentSize():0}function e5(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function e6(e){let t=[],n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function e3(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function e8(e){return 3===e.nodeType?e.nodeValue:null}function e4(e,t,n){let i=tw(t._window);if(null===i)return;let r=i.anchorNode,{anchorOffset:o,focusOffset:s}=i;if(null!==r){let t=e8(r),i=eG(r);if(null!==t&&nU(i)){if(t===es&&n){let e=n.length;t=n,o=e,s=e}null!==t&&e9(i,t,o,s,e)}}}function e9(e,t,n,i,r){let o=e;if(o.isAttached()&&(r||!o.isDirty())){let s=o.isComposing(),l=t;(s||r)&&t[t.length-1]===es&&(l=t.slice(0,-1));let a=o.getTextContent();if(r||l!==a){if(""===l){if(e$(null),ee||et||eo)o.remove();else{let e=iT();setTimeout(()=>{e.update(()=>{o.isAttached()&&o.remove()})},20)}return}let t=o.getParent(),r=ia(),a=o.getTextContentSize(),h=eK(),c=o.getKey();if(o.isToken()||null!==h&&c===h&&!s||n1(r)&&(null!==t&&!t.canInsertTextBefore()&&0===r.anchor.offset||r.anchor.key===e.__key&&0===r.anchor.offset&&!o.canInsertTextBefore()&&!s||r.focus.key===e.__key&&r.focus.offset===a&&!o.canInsertTextAfter()&&!s))return void o.markDirty();let u=il();if(!n1(u)||null===n||null===i)return void o.setTextContent(l);if(u.setTextNodeRange(o,n,o,i),o.isSegmented()){let e=nV(o.getTextContent());o.replace(e),o=e}o.setTextContent(l)}}}function e7(e){return"ArrowLeft"===e}function te(e){return"ArrowRight"===e}function tt(e){return"Backspace"===e}function tn(e){return"Delete"===e}function ti(e,t,n){return"a"===e.toLowerCase()&&(J?t:n)}function tr(){let e=eX();e0(eM(e.select(0,e.getChildrenSize())))}function to(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let n=e.__lexicalClassNameCache,i=n[t];if(void 0!==i)return i;let r=e[t];if("string"==typeof r){let e=eb(r);return n[t]=e,e}return r}function ts(e,t,n,i,r){if(0===n.size)return;let o=i.__type,s=i.__key,l=t.get(o);void 0===l&&ey(33,o);let a=l.klass,h=e.get(a);void 0===h&&(h=new Map,e.set(a,h));let c=h.get(s),u="destroyed"===c&&"created"===r;(void 0===c||u)&&h.set(s,u?"updated":r)}function tl(e,t,n){let i=e.getParent(),r=n,o=e;return null!==i&&(t&&0===n?(r=o.getIndexWithinParent(),o=i):t||n!==o.getChildrenSize()||(r=o.getIndexWithinParent()+1,o=i)),o.getChildAtIndex(t?r-1:r)}function ta(e,t){let n=e.offset;if("element"===e.type)return tl(e.getNode(),t,n);{let i=e.getNode();if(t&&0===n||!t&&n===i.getTextContentSize()){let e=t?i.getPreviousSibling():i.getNextSibling();return null===e?tl(i.getParentOrThrow(),t,i.getIndexWithinParent()+(t?0:1)):e}}return null}function th(e){let t=tp(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function tc(e){return!iK(e)&&!e.isLastChild()&&!e.isInline()}function tu(e,t){let n=e._keyToDOMMap.get(t);return void 0===n&&ey(75,t),n}function td(e){let t=e.assignedSlot||e.parentElement;return null!==t&&11===t.nodeType?t.host:t}function tf(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function tp(e){let t=e._window;return null===t&&ey(78),t}function tg(e){return iK(e)||ij(e)&&e.isShadowRoot()}function tm(e){let t=iT(),n=e.constructor.getType(),i=t._nodes.get(n);void 0===i&&ey(200,e.constructor.name,n);let{replace:r,replaceWithKlass:o}=i;if(null!==r){let t=r(e),i=t.constructor;return null!==o?t instanceof o||ey(201,o.name,o.getType(),i.name,i.getType(),e.constructor.name,n):t instanceof e.constructor&&i!==e.constructor||ey(202,i.name,i.getType(),e.constructor.name,n),t.__key===e.__key&&ey(203,e.constructor.name,n,i.name,i.getType()),t}return e}function tv(e,t){!iK(e.getParent())||ij(t)||iU(t)||ey(99)}function ty(e){return(iU(e)||ij(e)&&!e.canBeEmpty())&&!e.isInline()}function tb(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;let i=e.parentElement;null!==i&&i.removeChild(e)}function tw(e){return G?(e||window).getSelection():null}function t_(e){return tx(e)&&"A"===e.tagName}function tx(e){return 1===e.nodeType}function tk(e){return 11===e.nodeType}function tS(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function tC(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function tT(e){if(iU(e)&&!e.isInline())return!0;if(!ij(e)||tg(e))return!1;let t=e.getFirstChild(),n=null===t||nA(t)||nU(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}function tA(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}function tO(){return iT()}let tE=new WeakMap,tM=new Map;function tD(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}let tP,tN,tL,tR,tI,tF,tz,tB,tW,tj,tH="",tV="",tU=null,t$="",tK="",tq=!1,tZ=!1,tG=null;function tY(e,t){let n=tz.get(e);if(null!==t){let n=t7(e);n.parentNode===t&&t.removeChild(n)}if(tB.has(e)||tN._keyToDOMMap.delete(e),ij(n)){let e=t8(n,tz);tJ(e,0,e.length-1,null)}void 0!==n&&ts(tj,tL,tR,n,"destroyed")}function tJ(e,t,n,i){let r=t;for(;r<=n;++r){let t=e[r];void 0!==t&&tY(t,i)}}function tX(e,t){e.setProperty("text-align",t)}function tQ(e,t){let n=tP.theme.indent;if("string"==typeof n){let i=e.classList.contains(n);t>0&&!i?e.classList.add(n):t<1&&i&&e.classList.remove(n)}let i=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${i})`)}function t0(e,t){let n=e.style;0===t?tX(n,""):1===t?tX(n,"left"):2===t?tX(n,"center"):3===t?tX(n,"right"):4===t?tX(n,"justify"):5===t?tX(n,"start"):6===t&&tX(n,"end")}function t1(e,t,n){let i=tB.get(e);void 0===i&&ey(60);let r=i.createDOM(tP,tN);if(function(e,t,n){let i=n._keyToDOMMap;t["__lexicalKey_"+n._key]=e,i.set(e,t)}(e,r,tN),nU(i)?r.setAttribute("data-lexical-text","true"):iU(i)&&r.setAttribute("data-lexical-decorator","true"),ij(i)){let e=i.__indent,t=i.__size;0!==e&&tQ(r,e),0!==t&&function(e,t,n,i){let r=tV;tV="",t2(e,n,0,t,i,null),t3(n,i),tV=r}(t8(i,tB),t-1,i,r);let n=i.__format;0!==n&&t0(r,n),i.isInline()||t6(null,i,r),tc(i)&&(tH+="\n\n",tK+="\n\n")}else{let t=i.getTextContent();if(iU(i)){let t=i.decorate(tN,tP);null!==t&&t4(e,t),r.contentEditable="false"}else nU(i)&&(i.isDirectionless()||(tV+=t));tH+=t,tK+=t}if(null!==t){if(null!=n)t.insertBefore(r,n);else{let e=t.__lexicalLineBreak;null!=e?t.insertBefore(r,e):t.appendChild(r)}}return ts(tj,tL,tR,i,"created"),r}function t2(e,t,n,i,r,o){let s=tH;tH="";let l=n;for(;l<=i;++l){t1(e[l],r,o);let t=tB.get(e[l]);null!==t&&nU(t)&&(null===tU&&(tU=t.getFormat()),""===t$&&(t$=t.getStyle()))}tc(t)&&(tH+="\n\n"),r.__lexicalTextContent=tH,tH=s+tH}function t5(e,t){let n=t.get(e);return nA(n)||iU(n)&&n.isInline()}function t6(e,t,n){let i=null!==e&&(0===e.__size||t5(e.__last,tz)),r=0===t.__size||t5(t.__last,tB);if(i){if(!r){let e=n.__lexicalLineBreak;if(null!=e)try{n.removeChild(e)}catch(t){if("object"==typeof t&&null!=t)throw Error(`${t.toString()} Parent: ${n.tagName}, child: ${e.tagName}.`);throw t}n.__lexicalLineBreak=null}}else if(r){let e=document.createElement("br");n.__lexicalLineBreak=e,n.appendChild(e)}}function t3(e,t){var n;let i=t.__lexicalDirTextContent,r=t.__lexicalDir;if(i!==tV||r!==tG){let i=""===tV,o=i?tG:(n=tV,ec.test(n)?"rtl":eu.test(n)?"ltr":null);if(o!==r){let n=t.classList,s=tP.theme,l=null!==r?s[r]:void 0,a=null!==o?s[o]:void 0;if(void 0!==l){if("string"==typeof l){let e=eb(l);l=s[r]=e}n.remove(...l)}if(null===o||i&&"ltr"===o)t.removeAttribute("dir");else{if(void 0!==a){if("string"==typeof a){let e=eb(a);a=s[o]=e}void 0!==a&&n.add(...a)}t.dir=o}tZ||(e.getWritable().__dir=o)}tG=o,t.__lexicalDirTextContent=tV,t.__lexicalDir=o}}function t8(e,t){let n=[],i=e.__first;for(;null!==i;){let e=t.get(i);void 0===e&&ey(101),n.push(i),i=e.__next}return n}function t4(e,t){let n=tN._pendingDecorators,i=tN._decorators;if(null===n){if(i[e]===t)return;n=eY(tN)}n[e]=t}function t9(e){let t=e.nextSibling;return null!==t&&t===tN._blockCursorElement&&(t=t.nextSibling),t}function t7(e){let t=tW.get(e);return void 0===t&&ey(75,e),t}let ne=Object.freeze({}),nt=[["keydown",function(e,t){if(nn=e.timeStamp,ni=e.key,t.isComposing())return;let{key:n,shiftKey:i,ctrlKey:r,metaKey:o,altKey:s}=e;!iI(t,y,e)&&null!=n&&(!te(n)||r||o||s?te(n)&&!s&&!i&&(r||o)?iI(t,w,e):!e7(n)||r||o||s?e7(n)&&!s&&!i&&(r||o)?iI(t,x,e):"ArrowUp"!==n||r||o?"ArrowDown"!==n||r||o?"Enter"===n&&i?(nh=!0,iI(t,C,e)):" "===n?iI(t,T,e):J&&r&&"o"===n.toLowerCase()?(e.preventDefault(),nh=!0,iI(t,a,!0)):"Enter"!==n||i?(J?!s&&!o&&(tt(n)||"h"===n.toLowerCase()&&r):!(r||s||o)&&tt(n))?tt(n)?iI(t,A,e):(e.preventDefault(),iI(t,l,!0)):"Escape"===n?iI(t,O,e):(J?!(i||s||o)&&(tn(n)||"d"===n.toLowerCase()&&r):!(r||s||o)&&tn(n))?tn(n)?iI(t,E,e):(e.preventDefault(),iI(t,l,!1)):tt(n)&&(J?s:r)?(e.preventDefault(),iI(t,f,!0)):tn(n)&&(J?s:r)?(e.preventDefault(),iI(t,f,!1)):J&&o&&tt(n)?(e.preventDefault(),iI(t,p,!0)):J&&o&&tn(n)?(e.preventDefault(),iI(t,p,!1)):"b"===n.toLowerCase()&&!s&&(J?o:r)?(e.preventDefault(),iI(t,g,"bold")):"u"===n.toLowerCase()&&!s&&(J?o:r)?(e.preventDefault(),iI(t,g,"underline")):"i"===n.toLowerCase()&&!s&&(J?o:r)?(e.preventDefault(),iI(t,g,"italic")):"Tab"!==n||s||r||o?"z"===n.toLowerCase()&&!i&&(J?o:r)?(e.preventDefault(),iI(t,m,void 0)):(J?"z"===n.toLowerCase()&&o&&i:"y"===n.toLowerCase()&&r||"z"===n.toLowerCase()&&r&&i)?(e.preventDefault(),iI(t,v,void 0)):n5(t._editorState._selection)?!i&&"c"===n.toLowerCase()&&(J?o:r)?(e.preventDefault(),iI(t,B,e)):!i&&"x"===n.toLowerCase()&&(J?o:r)?(e.preventDefault(),iI(t,W,e)):ti(n,o,r)&&(e.preventDefault(),iI(t,j,e)):!X&&ti(n,o,r)&&(e.preventDefault(),iI(t,j,e)):iI(t,M,e):(nh=!1,iI(t,C,e)):iI(t,S,e):iI(t,k,e):iI(t,_,e):iI(t,b,e),(r||i||s||o)&&iI(t,Z,e))}],["pointerdown",function(e,t){let n=e.target,i=e.pointerType;n instanceof Node&&"touch"!==i&&iB(t,()=>{iU(eG(n))||(na=!0)})}],["compositionstart",function(e,t){iB(t,()=>{let n=il();if(n1(n)&&!t.isComposing()){let i=n.anchor,r=n.anchor.getNode();e$(i.key),(e.timeStamp<nn+30||"element"===i.type||!n.isCollapsed()||r.getFormat()!==n.format||nU(r)&&r.getStyle()!==n.style)&&iI(t,c,el)}})}],["compositionend",function(e,t){X?nc=!0:iB(t,()=>{nm(t,e.data)})}],["input",function(e,t){e.stopPropagation(),iB(t,()=>{let n=il(),i=e.data,r=ng(e);if(null!=i&&n1(n)&&nd(n,r,i,e.timeStamp,!1)){nc&&(nm(t,i),nc=!1);let r=n.anchor.getNode(),o=tw(t._window);if(null===o)return;let s=n.isBackward(),l=s?n.anchor.offset:n.focus.offset,a=s?n.focus.offset:n.anchor.offset;Q&&!n.isCollapsed()&&nU(r)&&null!==o.anchorNode&&r.getTextContent().slice(0,l)+i+r.getTextContent().slice(l+a)===e8(o.anchorNode)||iI(t,c,i);let h=i.length;X&&h>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=h),ee||et||eo||!t.isComposing()||(nn=0,e$(null))}else e4(!1,t,null!==i?i:void 0),nc&&(nm(t,i||void 0),nc=!1);ik(),eC(iT())}),no=null}],["click",function(e,t){iB(t,()=>{let n=il(),i=tw(t._window),r=ia();if(i){if(n1(n)){let t=n.anchor,o=t.getNode();"element"===t.type&&0===t.offset&&n.isCollapsed()&&!iK(o)&&1===eX().getChildrenSize()&&o.getTopLevelElementOrThrow().isEmpty()&&null!==r&&n.is(r)?(i.removeAllRanges(),n.dirty=!0):3!==e.detail||n.isCollapsed()||o===n.focus.getNode()||(ij(o)?o.select(0):o.getParentOrThrow().select(0))}else if("touch"===e.pointerType){let n=i.anchorNode;if(null!==n){let o=n.nodeType;(1===o||3===o)&&e0(is(r,i,t,e))}}}iI(t,s,e)})}],["cut",ne],["copy",ne],["dragstart",ne],["dragover",ne],["dragend",ne],["paste",ne],["focus",ne],["blur",ne],["drop",ne]];Q&&nt.push(["beforeinput",(e,t)=>(function(e,t){let n=e.inputType,i=ng(e);"deleteCompositionText"===n||X&&th(t)||"insertCompositionText"===n||iB(t,()=>{var r;let o=il();if("deleteContentBackward"===n){if(null===o){let e=ia();if(!n1(e))return;e0(e.clone())}if(n1(o)){let n=o.anchor.key===o.focus.key;if(r=e.timeStamp,"MediaLast"===ni&&r<nn+30&&t.isComposing()&&n){if(e$(null),nn=0,setTimeout(()=>{iB(t,()=>{e$(null)})},30),n1(o)){let e=o.anchor.getNode();e.markDirty(),o.format=e.getFormat(),nU(e)||ey(142),o.style=e.getStyle()}}else{e$(null),e.preventDefault();let i=o.anchor.getNode().getTextContent(),r=0===o.anchor.offset&&o.focus.offset===i.length;er&&n&&!r||iI(t,l,!0)}return}}if(!n1(o))return;let s=e.data;null!==no&&e4(!1,t,no),o.dirty&&null===no||!o.isCollapsed()||iK(o.anchor.getNode())||null===i||o.applyDOMRange(i),no=null;let y=o.anchor,b=o.focus,w=y.getNode(),_=b.getNode();if("insertText"!==n&&"insertTranspose"!==n)switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":iI(t,c,e);break;case"insertFromComposition":e$(null),iI(t,c,e);break;case"insertLineBreak":e$(null),iI(t,a,!1);break;case"insertParagraph":e$(null),nh&&!et?(nh=!1,iI(t,a,!1)):iI(t,h,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":iI(t,u,e);break;case"deleteByComposition":(w!==_||ij(w)||ij(_)||!w.isToken()||!_.isToken())&&iI(t,d,e);break;case"deleteByDrag":case"deleteByCut":iI(t,d,e);break;case"deleteContent":iI(t,l,!1);break;case"deleteWordBackward":iI(t,f,!0);break;case"deleteWordForward":iI(t,f,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":iI(t,p,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":iI(t,p,!1);break;case"formatStrikeThrough":iI(t,g,"strikethrough");break;case"formatBold":iI(t,g,"bold");break;case"formatItalic":iI(t,g,"italic");break;case"formatUnderline":iI(t,g,"underline");break;case"historyUndo":iI(t,m,void 0);break;case"historyRedo":iI(t,v,void 0)}else{if("\n"===s)e.preventDefault(),iI(t,a,!1);else if("\n\n"===s)e.preventDefault(),iI(t,h,void 0);else if(null==s&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),o.insertRawText(t)}else null!=s&&nd(o,i,s,e.timeStamp,!0)?(e.preventDefault(),iI(t,c,s)):no=s;nr=e.timeStamp}})})(e,t)]);let nn=0,ni=null,nr=0,no=null,ns=new WeakMap,nl=!1,na=!1,nh=!1,nc=!1,nu=[0,"",0,"root",0];function nd(e,t,n,i,r){let o=e.anchor,s=e.focus,l=o.getNode(),a=iT(),h=tw(a._window),c=null!==h?h.anchorNode:null,u=o.key,d=a.getElementByKey(u),f=n.length;return u!==s.key||!nU(l)||(!r&&(!Q||nr<i+50)||l.isDirty()&&f<2||e5(n))&&o.offset!==s.offset&&!l.isComposing()||eB(l)||l.isDirty()&&f>1||(r||!Q)&&null!==d&&!l.isComposing()&&c!==eW(d)||null!==h&&null!==t&&(!t.collapsed||t.startContainer!==h.anchorNode||t.startOffset!==h.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let n=e.anchor.offset,i=t.getParentOrThrow(),r=t.isToken();return 0===n?!t.canInsertTextBefore()||!i.canInsertTextBefore()&&!t.isComposing()||r||function(e){let t=e.getPreviousSibling();return(nU(t)||ij(t)&&t.isInline())&&!t.canInsertTextAfter()}(t):n===t.getTextContentSize()&&(!t.canInsertTextAfter()||!i.canInsertTextAfter()&&!t.isComposing()||r)}(e,l)}function nf(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function np(e,t,n){let{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:l}=e;nl&&(nl=!1,nf(i,o)&&nf(s,l))||iB(t,()=>{if(!n)return void e0(null);if(!eR(t,i,s))return;let a=il();if(n1(a)){let n=a.anchor,i=n.getNode();if(a.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(a.dirty=!0);let r=tp(t).event,o=r?r.timeStamp:performance.now(),[s,l,h,c,u]=nu,d=eX(),f=!1===t.isComposing()&&""===d.getTextContent();if(o<u+200&&n.offset===h&&n.key===c)a.format=s,a.style=l;else if("text"===n.type)nU(i)||ey(141),a.format=i.getFormat(),a.style=i.getStyle();else if("element"===n.type&&!f){let e=n.getNode();a.style="",e instanceof iY&&0===e.getChildrenSize()?(a.format=e.getTextFormat(),a.style=e.getTextStyle()):a.format=0}}else{let e=n.key,t=a.focus.key,i=a.getNodes(),r=i.length,s=a.isBackward(),h=s?l:o,c=s?o:l,u=s?t:e,d=s?e:t,f=255,p=!1;for(let e=0;e<r;e++){let t=i[e],n=t.getTextContentSize();if(nU(t)&&0!==n&&!(0===e&&t.__key===u&&h===n||e===r-1&&t.__key===d&&0===c)&&(p=!0,0==(f&=t.getFormat())))break}a.format=p?f:0}}iI(t,r,void 0)})}function ng(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function nm(e,t){let n=e._compositionKey;if(e$(null),null!==n&&null!=t){if(""===t){let t=eq(n),i=eW(e.getElementByKey(n));return void(null!==i&&null!==i.nodeValue&&nU(t)&&e9(t,i.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=il();if(n1(t)){let n=t.focus;return t.anchor.set(n.key,n.offset,n.type),void iI(e,C,null)}}}e4(!0,e,t)}function nv(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let ny=new Map;function nb(e){let t=e.target,n=tw(null==t?null:9===t.nodeType?t.defaultView:t.ownerDocument.defaultView);if(null===n)return;let i=eF(n.anchorNode);if(null===i)return;na&&(na=!1,iB(i,()=>{let t=ia(),r=n.anchorNode;if(null===r)return;let o=r.nodeType;(1===o||3===o)&&e0(is(t,n,i,e))}));let r=e6(i),o=r[r.length-1],s=o._key,l=ny.get(s),a=l||o;a!==i&&np(n,a,!1),np(n,i,!0),i!==o?ny.set(s,i):l&&ny.delete(s)}function nw(e){e._lexicalHandled=!0}function n_(e){return!0===e._lexicalHandled}function nx(e,t,n){ik();let i=e.__key,r=e.getParent();if(null===r)return;let o=function(e){let t=il();if(!n1(t)||!ij(e))return t;let{anchor:n,focus:i}=t,r=n.getNode(),o=i.getNode();return tf(r,e)&&n.set(e.__key,0,"element"),tf(o,e)&&i.set(e.__key,0,"element"),t}(e),s=!1;if(n1(o)&&t){let t=o.anchor,n=o.focus;t.key===i&&(iu(t,e,r,e.getPreviousSibling(),e.getNextSibling()),s=!0),n.key===i&&(iu(n,e,r,e.getPreviousSibling(),e.getNextSibling()),s=!0)}else n5(o)&&t&&e.isSelected()&&e.selectPrevious();if(n1(o)&&t&&!s){let t=e.getIndexWithinParent();eV(e),ih(o,r,t,-1)}else eV(e);n||tg(r)||r.canBeEmpty()||!r.isEmpty()||nx(r,t),t&&iK(r)&&r.isEmpty()&&r.selectEnd()}class nk{static getType(){ey(64,this.name)}static clone(e){ey(65,this.name)}afterCloneFrom(e){this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,function(e,t){if(null!=t)return void(e.__key=t);ik(),iS();let n=iT(),i=iC(),r=""+eP++;i._nodeMap.set(r,e),ij(e)?n._dirtyElements.set(r,!0):n._dirtyLeaves.add(r),n._cloneNotNeeded.add(r),n._dirtyType=1,e.__key=r}(this,e)}getType(){return this.__type}isInline(){ey(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=eq(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||il();if(null==t)return!1;let n=t.getNodes().some(e=>e.__key===this.__key);if(nU(this))return n;if(n1(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(iU(this)&&this.isInline()&&e){let n=t.isBackward()?t.focus:t.anchor,i=n.getNode();if(n.offset===i.getChildrenSize()&&i.is(e)&&i.getLastChildOrThrow().is(this))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:eq(e)}getParentOrThrow(){let e=this.getParent();return null===e&&ey(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(tg(t))return ij(e)||e===this&&iU(e)||ey(194),e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&ey(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:eq(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:eq(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=this.getParents(),n=e.getParents();ij(this)&&t.unshift(this),ij(e)&&n.unshift(e);let i=t.length,r=n.length;if(0===i||0===r||t[i-1]!==n[r-1])return null;let o=new Set(n);for(let e=0;e<i;e++){let n=t[e];if(o.has(n))return n}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;let t=this.getCommonAncestor(e),n=0,i=0,r=this;for(;;){let e=r.getParentOrThrow();if(e===t){n=r.getIndexWithinParent();break}r=e}for(r=e;;){let e=r.getParentOrThrow();if(e===t){i=r.getIndexWithinParent();break}r=e}return n<i}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;let n=e;for(;null!==n;){if(n.__key===t)return!0;n=n.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),n=[],i=new Set,r=this;for(;null!==r;){let o=r.__key;if(i.has(o)||(i.add(o),n.push(r)),r===e)break;let s=ij(r)?t?r.getFirstChild():r.getLastChild():null;if(null!==s){r=s;continue}let l=t?r.getNextSibling():r.getPreviousSibling();if(null!==l){r=l;continue}let a=r.getParentOrThrow();if(i.has(a.__key)||n.push(a),a===e)break;let h=null,c=a;do{if(null===c&&ey(68),h=t?c.getNextSibling():c.getPreviousSibling(),null===(c=c.getParent()))break;null!==h||i.has(c.__key)||n.push(c)}while(null===h)r=h}return t||n.reverse(),n}isDirty(){let e=iT()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=eq(this.__key);return null===e&&ey(113),e}getWritable(){ik();let e=iC(),t=iT(),n=e._nodeMap,i=this.__key,r=this.getLatest(),o=t._cloneNotNeeded,s=il();if(null!==s&&s.setCachedNodes(null),o.has(i))return eU(r),r;let l=tD(r);return o.add(i),eU(l),n.set(i,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){ey(70)}updateDOM(e,t,n){ey(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){ey(72)}static importJSON(e){ey(18,this.name)}static transform(){return null}remove(e){nx(this,!0,e)}replace(e,t){ik();let n=il();null!==n&&(n=n.clone()),tv(this,e);let i=this.getLatest(),r=this.__key,o=e.__key,s=e.getWritable(),l=this.getParentOrThrow().getWritable(),a=l.__size;eV(s);let h=i.getPreviousSibling(),c=i.getNextSibling(),u=i.__prev,d=i.__next,f=i.__parent;if((nx(i,!1,!0),null===h)?l.__first=o:h.getWritable().__next=o,(s.__prev=u,null===c)?l.__last=o:c.getWritable().__prev=o,s.__next=d,s.__parent=f,l.__size=a,t&&(ij(this)&&ij(s)||ey(139),this.getChildren().forEach(e=>{s.append(e)})),n1(n)){e0(n);let e=n.anchor,t=n.focus;e.key===r&&nX(e,s),t.key===r&&nX(t,s)}return eK()===r&&e$(o),s}insertAfter(e,t=!0){ik(),tv(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.getParent(),o=il(),s=!1,l=!1;if(null!==r){let t=e.getIndexWithinParent();if(eV(i),n1(o)){let e=r.__key,n=o.anchor,i=o.focus;s="element"===n.type&&n.key===e&&n.offset===t+1,l="element"===i.type&&i.key===e&&i.offset===t+1}}let a=this.getNextSibling(),h=this.getParentOrThrow().getWritable(),c=i.__key,u=n.__next;if(null===a?h.__last=c:a.getWritable().__prev=c,h.__size++,n.__next=c,i.__next=u,i.__prev=n.__key,i.__parent=n.__parent,t&&n1(o)){let e=this.getIndexWithinParent();ih(o,h,e+1);let t=h.__key;s&&o.anchor.set(t,e+2,"element"),l&&o.focus.set(t,e+2,"element")}return e}insertBefore(e,t=!0){ik(),tv(this,e);let n=this.getWritable(),i=e.getWritable(),r=i.__key;eV(i);let o=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,a=this.getIndexWithinParent();null===o?s.__first=r:o.getWritable().__next=r,s.__size++,n.__prev=r,i.__prev=l,i.__next=n.__key,i.__parent=n.__parent;let h=il();return t&&n1(h)&&ih(h,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return iX()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){ik();let n=this.getPreviousSibling(),i=this.getParentOrThrow();if(null===n)return i.select(0,0);if(ij(n))return n.select();if(!nU(n)){let e=n.getIndexWithinParent()+1;return i.select(e,e)}return n.select(e,t)}selectNext(e,t){ik();let n=this.getNextSibling(),i=this.getParentOrThrow();if(null===n)return i.select();if(ij(n))return n.select(0,0);if(!nU(n)){let e=n.getIndexWithinParent();return i.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}}class nS extends nk{static getType(){return"linebreak"}static clone(e){return new nS(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&tC(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&nO(n)){let n=t.lastChild;if(n===e||n.previousSibling===e&&nO(n))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&tC(t)){let n=t.firstChild;if(n===e||n.nextSibling===e&&nO(n))return!1;let i=t.lastChild;if(i===e||i.previousSibling===e&&nO(i))return!0}return!1}(e)?null:{conversion:nC,priority:0}}}static importJSON(e){return nT()}exportJSON(){return{type:"linebreak",version:1}}}function nC(e){return{node:nT()}}function nT(){return tm(new nS)}function nA(e){return e instanceof nS}function nO(e){return 3===e.nodeType&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function nE(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function nM(e,t){return 1&t?"strong":2&t?"em":"span"}function nD(e,t,n,i,r){let o=i.classList,s=to(r,"base");void 0!==s&&o.add(...s);let l=!1,a=8&t&&4&t;for(let e in void 0!==(s=to(r,"underlineStrikethrough"))&&(8&n&&4&n?(l=!0,a||o.add(...s)):a&&o.remove(...s)),ed){let i=ed[e];if(void 0!==(s=to(r,e))){if(n&i){if(l&&("underline"===e||"strikethrough"===e)){t&i&&o.remove(...s);continue}t&i&&(!a||"underline"!==e)&&"strikethrough"!==e||o.add(...s)}else t&i&&o.remove(...s)}}}function nP(e,t,n){let i=t.firstChild,r=n.isComposing(),o=e+(r?es:"");if(null==i)t.textContent=o;else{let e=i.nodeValue;if(e!==o){if(r||X){let[t,n,r]=function(e,t){let n=e.length,i=t.length,r=0,o=0;for(;r<n&&r<i&&e[r]===t[r];)r++;for(;o+r<n&&o+r<i&&e[n-o-1]===t[i-o-1];)o++;return[r,n-r-o,t.slice(r,i-o)]}(e,o);0!==n&&i.deleteData(t,n),i.insertData(t,r)}else i.nodeValue=o}}}function nN(e,t,n,i,r,o){nP(r,e,t);let s=o.theme.text;void 0!==s&&nD(0,0,i,e,s)}function nL(e,t){let n=document.createElement(t);return n.appendChild(e),n}class nR extends nk{static getType(){return"text"}static clone(e){return new nR(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return ev[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===eK()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=ed[e];return!!(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return ej(this.getLatest().__format,e,t)}canHaveFormat(){return!0}createDOM(e,t){let n=this.__format,i=nE(0,n),r=nM(0,n),o=null===i?r:i,s=document.createElement(o),l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==i&&(l=document.createElement(r),s.appendChild(l)),nN(l,this,0,n,this.__text,e);let a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(e,t,n){let i=this.__text,r=e.__format,o=this.__format,s=nE(0,r),l=nE(0,o),a=nM(0,r),h=nM(0,o);if((null===s?a:s)!==(null===l?h:l))return!0;if(s===l&&a!==h){let e=t.firstChild;null==e&&ey(48);let r=document.createElement(h);return nN(r,this,0,o,i,n),t.replaceChild(r,e),!1}let c=t;null!==l&&null!==s&&null==(c=t.firstChild)&&ey(49),nP(i,c,this);let u=n.theme.text;void 0!==u&&r!==o&&nD(0,r,o,c,u);let d=e.__style,f=this.__style;return d!==f&&(t.style.cssText=f),!1}static importDOM(){return{"#text":()=>({conversion:nB,priority:0}),b:()=>({conversion:nF,priority:0}),code:()=>({conversion:nH,priority:0}),em:()=>({conversion:nH,priority:0}),i:()=>({conversion:nH,priority:0}),s:()=>({conversion:nH,priority:0}),span:()=>({conversion:nI,priority:0}),strong:()=>({conversion:nH,priority:0}),sub:()=>({conversion:nH,priority:0}),sup:()=>({conversion:nH,priority:0}),u:()=>({conversion:nH,priority:0})}}static importJSON(e){let t=nV(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){let{element:t}=super.exportDOM(e);return null!==t&&tx(t)||ey(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=nL(t,"b")),this.hasFormat("italic")&&(t=nL(t,"i")),this.hasFormat("strikethrough")&&(t=nL(t,"s")),this.hasFormat("underline")&&(t=nL(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?ed[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?ef[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=ej(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=em[e];if(this.__mode===t)return this;let n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){ik();let n=e,i=t,r=il(),o=this.getTextContent(),s=this.__key;if("string"==typeof o){let e=o.length;void 0===n&&(n=e),void 0===i&&(i=e)}else n=0,i=0;if(!n1(r))return ii(s,n,s,i,"text","text");{let e=eK();e!==r.anchor.key&&e!==r.focus.key||e$(s),r.setTextNodeRange(this,n,this,i)}return r}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,i){let r=this.getWritable(),o=r.__text,s=n.length,l=e;l<0&&(l=s+l)<0&&(l=0);let a=il();if(i&&n1(a)){let t=e+s;a.setTextNodeRange(r,t,r,t)}let h=o.slice(0,l)+n+o.slice(l+t);return r.__text=h,r}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){let t;ik();let n=this.getLatest(),i=n.getTextContent(),r=n.__key,o=eK(),s=new Set(e),l=[],a=i.length,h="";for(let e=0;e<a;e++)""!==h&&s.has(e)&&(l.push(h),h=""),h+=i[e];""!==h&&l.push(h);let c=l.length;if(0===c)return[];if(l[0]===i)return[n];let u=l[0],d=n.getParent(),f=n.getFormat(),p=n.getStyle(),g=n.__detail,m=!1;n.isSegmented()?((t=nV(u)).__format=f,t.__style=p,t.__detail=g,m=!0):(t=n.getWritable()).__text=u;let v=il(),y=[t],b=u.length;for(let e=1;e<c;e++){let t=l[e],n=t.length,i=nV(t).getWritable();i.__format=f,i.__style=p,i.__detail=g;let s=i.__key,a=b+n;if(n1(v)){let e=v.anchor,t=v.focus;e.key===r&&"text"===e.type&&e.offset>b&&e.offset<=a&&(e.key=s,e.offset-=b,v.dirty=!0),t.key===r&&"text"===t.type&&t.offset>b&&t.offset<=a&&(t.key=s,t.offset-=b,v.dirty=!0)}o===r&&e$(s),b=a,y.push(i)}if(null!==d){!function(e){let t=e.getPreviousSibling(),n=e.getNextSibling();null!==t&&eU(t),null!==n&&eU(n)}(this);let e=d.getWritable(),t=this.getIndexWithinParent();m?(e.splice(t,0,y),this.remove()):e.splice(t,1,y),n1(v)&&ih(v,d,t,c-1)}return y}mergeWithSibling(e){let t=e===this.getPreviousSibling();t||e===this.getNextSibling()||ey(50);let n=this.__key,i=e.__key,r=this.__text,o=r.length;eK()===i&&e$(n);let s=il();if(n1(s)){let r=s.anchor,l=s.focus;null!==r&&r.key===i&&(id(r,t,n,e,o),s.dirty=!0),null!==l&&l.key===i&&(id(l,t,n,e,o),s.dirty=!0)}let l=e.__text,a=t?l+r:r+l;this.setTextContent(a);let h=this.getWritable();return e.remove(),h}isTextEntity(){return!1}}function nI(e){return{forChild:n$(e.style),node:null}}function nF(e){let t="normal"===e.style.fontWeight;return{forChild:n$(e.style,t?void 0:"bold"),node:null}}let nz=new WeakMap;function nB(e){null===e.parentElement&&ey(129);let t=e.textContent||"";if(null!==function(e){var t;let n,i=e.parentNode,r=[e];for(;null!==i&&void 0===(n=nz.get(i))&&!("PRE"===(t=i).nodeName||1===t.nodeType&&void 0!==t.style&&void 0!==t.style.whiteSpace&&t.style.whiteSpace.startsWith("pre"));)r.push(i),i=i.parentNode;let o=void 0===n?i:n;for(let e=0;e<r.length;e++)nz.set(r[e],o);return o}(e)){let e=t.split(/(\r?\n|\t)/),n=[],i=e.length;for(let t=0;t<i;t++){let i=e[t];"\n"===i||"\r\n"===i?n.push(nT()):"	"===i?n.push(nq()):""!==i&&n.push(nV(i))}return{node:n}}if(""===(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===t[0]){let n=e,i=!0;for(;null!==n&&null!==(n=nW(n,!1));){let e=n.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(t=t.slice(1)),i=!1;break}}i&&(t=t.slice(1))}if(" "===t[t.length-1]){let n=e,i=!0;for(;null!==n&&null!==(n=nW(n,!0));)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(t=t.slice(0,t.length-1))}return""===t?{node:null}:{node:nV(t)}}function nW(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){let e=n.parentElement;if(null===e)return null;n=e}if(1===(n=e).nodeType){let e=n.style.display;if(""===e&&!tS(n)||""!==e&&!e.startsWith("inline"))return null}let i=n;for(;null!==(i=t?n.firstChild:n.lastChild);)n=i;if(3===n.nodeType)return n;if("BR"===n.nodeName)return null}}let nj={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function nH(e){let t=nj[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:n$(e.style,t),node:null}}function nV(e=""){return tm(new nR(e))}function nU(e){return e instanceof nR}function n$(e,t){let n=e.fontWeight,i=e.textDecoration.split(" "),r="700"===n||"bold"===n,o=i.includes("line-through"),s="italic"===e.fontStyle,l=i.includes("underline"),a=e.verticalAlign;return e=>(nU(e)&&(r&&!e.hasFormat("bold")&&e.toggleFormat("bold"),o&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),s&&!e.hasFormat("italic")&&e.toggleFormat("italic"),l&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class nK extends nR{static getType(){return"tab"}static clone(e){return new nK(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}static importJSON(e){let t=nq();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(e){ey(126)}setDetail(e){ey(127)}setMode(e){ey(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function nq(){return tm(new nK)}function nZ(e){return e instanceof nK}class nG{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode(),i=this.offset,r=e.offset;if(ij(t)){let e=t.getDescendantByIndex(i);t=null!=e?e:t}if(ij(n)){let e=n.getDescendantByIndex(r);n=null!=e?e:n}return t===n?i<r:t.isBefore(n)}getNode(){let e=eq(this.key);return null===e&&ey(20),e}set(e,t,n){let i=this._selection,r=this.key;this.key=e,this.offset=t,this.type=n,ix()||(eK()===r&&e$(e),null!==i&&(i.setCachedNodes(null),i.dirty=!0))}}function nY(e,t,n){return new nG(e,t,n)}function nJ(e,t){let n=t.__key,i=e.offset,r="element";if(nU(t)){r="text";let e=t.getTextContentSize();i>e&&(i=e)}else if(!ij(t)){let e=t.getNextSibling();if(nU(e))n=e.__key,i=0,r="text";else{let e=t.getParent();e&&(n=e.__key,i=t.getIndexWithinParent()+1)}}e.set(n,i,r)}function nX(e,t){if(ij(t)){let n=t.getLastDescendant();ij(n)||nU(n)?nJ(e,n):nJ(e,t)}else nJ(e,t)}function nQ(e,t,n,i){e.key=t,e.offset=n,e.type=i}class n0{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!n5(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every(e=>n.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new n0(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t;let n=this.getNodes(),i=n.length,r=n[i-1];if(nU(r))t=r.select();else{let e=r.getIndexWithinParent()+1;t=r.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<i;e++)n[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,n=[];for(let e of t){let t=eq(e);null!==t&&n.push(t)}return ix()||(this._cachedNodes=n),n}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function n1(e){return e instanceof n2}class n2{constructor(e,t,n,i){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!n1(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e;let t=this._cachedNodes;if(null!==t)return t;let n=this.anchor,i=this.focus,r=n.isBefore(i),o=r?n:i,s=r?i:n,l=o.getNode(),a=s.getNode(),h=o.offset,c=s.offset;if(ij(l)){let e=l.getDescendantByIndex(h);l=null!=e?e:l}if(ij(a)){let e=a.getDescendantByIndex(c);null!==e&&e!==l&&a.getChildAtIndex(c)===e&&(e=e.getPreviousSibling()),a=null!=e?e:a}return e=l.is(a)?ij(l)&&l.getChildrenSize()>0?[]:[l]:l.getNodesBetween(a),ix()||(this._cachedNodes=e),e}setTextNodeRange(e,t,n,i){nQ(this.anchor,e.__key,t,"text"),nQ(this.focus,n.__key,i,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],i=this.anchor,r=this.focus,o=i.isBefore(r),[s,l]=n3(this),a="",h=!0;for(let c=0;c<e.length;c++){let u=e[c];if(ij(u)&&!u.isInline())h||(a+="\n"),h=!u.isEmpty();else if(h=!1,nU(u)){let e=u.getTextContent();u===t?u===n?"element"===i.type&&"element"===r.type&&r.offset!==i.offset||(e=s<l?e.slice(s,l):e.slice(l,s)):e=o?e.slice(s):e.slice(l):u===n&&(e=o?e.slice(0,l):e.slice(0,s)),a+=e}else!iU(u)&&!nA(u)||u===n&&this.isCollapsed()||(a+=u.getTextContent())}return a}applyDOMRange(e){let t=iT(),n=t.getEditorState()._selection,i=ie(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===i)return;let[r,o]=i;nQ(this.anchor,r.key,r.offset,r.type),nQ(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}clone(){let e=this.anchor,t=this.focus;return new n2(nY(e.key,e.offset,e.type),nY(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=ej(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=ed[e];return!!(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),n=[],i=t.length;for(let e=0;e<i;e++){let i=t[e];"\n"===i||"\r\n"===i?n.push(nT()):"	"===i?n.push(nq()):n.push(nV(i))}this.insertNodes(n)}insertText(e){let t=this.anchor,n=this.focus,i=this.format,r=this.style,o=t,s=n;!this.isCollapsed()&&n.isBefore(t)&&(o=n,s=t),"element"===o.type&&function(e,t,n,i){let r=e.getNode(),o=r.getChildAtIndex(e.offset),s=nV(),l=iK(r)?iX().append(s):s;s.setFormat(n),s.setStyle(i),null===o?r.append(l):o.insertBefore(l),e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}(o,s,i,r);let l=o.offset,a=s.offset,h=this.getNodes(),c=h.length,u=h[0];nU(u)||ey(26);let d=u.getTextContent().length,f=u.getParentOrThrow(),p=h[c-1];if(1===c&&"element"===s.type&&(a=d,s.set(o.key,a,"text")),this.isCollapsed()&&l===d&&(u.isSegmented()||u.isToken()||!u.canInsertTextAfter()||!f.canInsertTextAfter()&&null===u.getNextSibling())){let t=u.getNextSibling();if(nU(t)&&t.canInsertTextBefore()&&!eB(t)||((t=nV()).setFormat(i),t.setStyle(r),f.canInsertTextAfter()?u.insertAfter(t):f.insertAfter(t)),t.select(0,0),u=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===l&&(u.isSegmented()||u.isToken()||!u.canInsertTextBefore()||!f.canInsertTextBefore()&&null===u.getPreviousSibling())){let t=u.getPreviousSibling();if(nU(t)&&!eB(t)||((t=nV()).setFormat(i),f.canInsertTextBefore()?u.insertBefore(t):f.insertBefore(t)),t.select(),u=t,""!==e)return void this.insertText(e)}else if(u.isSegmented()&&l!==d){let e=nV(u.getTextContent());e.setFormat(i),u.replace(e),u=e}else if(!this.isCollapsed()&&""!==e){let t=p.getParent();if(!f.canInsertTextBefore()||!f.canInsertTextAfter()||ij(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),n7(this.anchor,this.focus,null),void this.insertText(e)}if(1===c){if(u.isToken()){let t=nV(e);return t.select(),void u.replace(t)}let t=u.getFormat(),n=u.getStyle();if(l!==a||t===i&&n===r){if(nZ(u)){let t=nV(e);return t.setFormat(i),t.setStyle(r),t.select(),void u.replace(t)}}else{if(""!==u.getTextContent()){let t=nV(e);if(t.setFormat(i),t.setStyle(r),t.select(),0===l)u.insertBefore(t,!1);else{let[e]=u.splitText(l);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}u.setFormat(i),u.setStyle(r)}let o=a-l;""===(u=u.spliceText(l,o,e,!0)).getTextContent()?u.remove():"text"===this.anchor.type&&(u.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{let t=new Set([...u.getParentKeys(),...p.getParentKeys()]),n=ij(u)?u:u.getParentOrThrow(),i=ij(p)?p:p.getParentOrThrow(),r=p;if(!n.is(i)&&i.isInline())do r=i,i=i.getParentOrThrow();while(i.isInline())if("text"===s.type&&(0!==a||""===p.getTextContent())||"element"===s.type&&p.getIndexWithinParent()<a){if(nU(p)&&!p.isToken()&&a!==p.getTextContentSize()){if(p.isSegmented()){let e=nV(p.getTextContent());p.replace(e),p=e}iK(s.getNode())||"text"!==s.type||(p=p.spliceText(0,a,"")),t.add(p.__key)}else{let e=p.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?p.remove():e.remove()}}else t.add(p.__key);let o=i.getChildren(),f=new Set(h),g=n.is(i),m=n.isInline()&&null===u.getNextSibling()?n:u;for(let e=o.length-1;e>=0;e--){let t=o[e];if(t.is(u)||ij(t)&&t.isParentOf(u))break;t.isAttached()&&(!f.has(t)||t.is(r)?g||m.insertAfter(t,!1):t.remove())}if(!g){let e=i,n=null;for(;null!==e;){let i=e.getChildren(),r=i.length;(0===r||i[r-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(u.isToken()){if(l===d)u.select();else{let t=nV(e);t.select(),u.replace(t)}}else""===(u=u.spliceText(l,d-l,e,!0)).getTextContent()?u.remove():u.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<c;e++){let n=h[e],i=n.__key;t.has(i)||n.remove()}}}removeText(){if(this.isCollapsed())return;let{anchor:e,focus:t}=this,n=this.getNodes(),i=this.isBackward()?t:e,r=this.isBackward()?e:t,o=i.getNode(),s=r.getNode(),l=tA(o,tT),a=tA(s,tT);n.forEach(e=>{tf(o,e)||tf(s,e)||e.getKey()===o.getKey()||e.getKey()===s.getKey()||e.remove()});let h=(e,t)=>{if(""===e.getTextContent())e.remove();else if(0!==t&&eB(e)){let t=nV(e.getTextContent());return t.setFormat(e.getFormat()),t.setStyle(e.getStyle()),e.replace(t)}};if(o===s&&nU(o)){let n=Math.abs(t.offset-e.offset);return o.spliceText(i.offset,n,"",!0),void h(o,n)}if(nU(o)){let e=o.getTextContentSize()-i.offset;o.spliceText(i.offset,e,""),o=h(o,e)||o}nU(s)&&(s.spliceText(0,r.offset,""),s=h(s,r.offset)||s),o.isAttached()&&nU(o)?o.selectEnd():s.isAttached()&&nU(s)&&s.selectStart(),ij(l)&&ij(a)&&l!==a&&(l.append(...a.getChildren()),a.remove(),r.set(i.key,i.offset,i.type))}formatText(e,t=null){if(this.isCollapsed())return this.toggleFormat(e),void e$(null);let n=this.getNodes(),i=[];for(let e of n)nU(e)&&i.push(e);let r=i.length;if(0===r)return this.toggleFormat(e),void e$(null);let o=this.anchor,s=this.focus,l=this.isBackward(),a=l?s:o,h=l?o:s,c=0,u=i[0],d="element"===a.type?0:a.offset;if("text"===a.type&&d===u.getTextContentSize()&&(c=1,u=i[1],d=0),null==u)return;let f=u.getFormatFlags(e,t);n.forEach(t=>{if(iQ(t)){let n=t.getFormatFlags(e,f);t.setTextFormat(n)}});let p=r-1,g=i[p],m="text"===h.type?h.offset:g.getTextContentSize();if(u.is(g)){if(d===m)return;if(eB(u)||0===d&&m===u.getTextContentSize())u.setFormat(f);else{let e=u.splitText(d,m),t=0===d?e[0]:e[1];t.setFormat(f),"text"===a.type&&a.set(t.__key,0,"text"),"text"===h.type&&h.set(t.__key,m-d,"text")}return void(this.format=f)}0===d||eB(u)||([,u]=u.splitText(d),d=0),u.setFormat(f);let v=g.getFormatFlags(e,f);m>0&&(m===g.getTextContentSize()||eB(g)||([g]=g.splitText(m)),g.setFormat(v));for(let t=c+1;t<p;t++){let n=i[t],r=n.getFormatFlags(e,v);n.setFormat(r)}"text"===a.type&&a.set(u.__key,d,"text"),"text"===h.type&&h.set(g.__key,m,"text"),this.format=f|v}insertNodes(e){var t;if(0===e.length)return;if("root"===this.anchor.key){this.insertParagraph();let t=il();return n1(t)||ey(134),t.insertNodes(e)}let n=tA((this.isBackward()?this.focus:this.anchor).getNode(),tT),i=e[e.length-1];if("__language"in n&&ij(n)){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=ig(this);n.splice(t,0,e),i.selectEnd()}return}if(!e.some(e=>(ij(e)||iU(e))&&!e.isInline())){ij(n)||ey(135);let t=ig(this);return n.splice(t,0,e),void i.selectEnd()}let r=function(e){let t=iX(),n=null;for(let i=0;i<e.length;i++){let r=e[i],o=nA(r);if(o||iU(r)&&r.isInline()||ij(r)&&r.isInline()||nU(r)||r.isParentRequired()){if(null===n&&(n=r.createParentElementNode(),t.append(n),o))continue;null!==n&&n.append(r)}else t.append(r),n=null}return t}(e),o=r.getLastDescendant(),s=r.getChildren(),l=ij(n)&&n.isEmpty()?null:this.insertParagraph(),a=s[s.length-1],h=s[0];ij(t=h)&&tT(t)&&!t.isEmpty()&&ij(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(ij(n)||ey(135),n.append(...h.getChildren()),h=s[1]),h&&function(e,t,n){let i=t.getParentOrThrow().getLastChild(),r=t,o=[t];for(;r!==i;)r.getNextSibling()||ey(140),o.push(r=r.getNextSibling());let s=e;for(let e of o)s=s.insertAfter(e)}(n,h);let c=tA(o,tT);l&&ij(c)&&(l.canMergeWhenEmpty()||tT(a))&&(c.append(...l.getChildren()),l.remove()),ij(n)&&n.isEmpty()&&n.remove(),o.selectEnd();let u=ij(n)?n.getLastChild():null;nA(u)&&c!==n&&u.remove()}insertParagraph(){if("root"===this.anchor.key){let e=iX();return eX().splice(this.anchor.offset,0,[e]),e.select(),e}let e=ig(this),t=tA(this.anchor.getNode(),tT);ij(t)||ey(136);let n=t.getChildAtIndex(e),i=n?[n,...n.getNextSiblings()]:[],r=t.insertNewAfter(this,!1);return r?(r.append(...i),r.selectStart(),r):null}insertLineBreak(e){let t=nT();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){let e=this.getNodes(),t=e.length,n=t-1,i=this.anchor,r=this.focus,o=e[0],s=e[n],[l,a]=n3(this);if(0===t)return[];if(1===t){if(nU(o)&&!this.isCollapsed()){let e=l>a?a:l,t=o.splitText(e,l>a?l:a),n=0===e?t[0]:t[1];return null!=n?[n]:[]}return[o]}let h=i.isBefore(r);if(nU(o)){let t=h?l:a;t===o.getTextContentSize()?e.shift():0!==t&&([,o]=o.splitText(t),e[0]=o)}if(nU(s)){let t=s.getTextContent().length,i=h?a:l;0===i?e.pop():i!==t&&([s]=s.splitText(i),e[n]=s)}return e}modify(e,t,n){let i=this.focus,r=this.anchor,o="move"===e,s=ta(i,t);if(iU(s)&&!s.isIsolated()){if(o&&s.isKeyboardSelectable()){let e=io();return e.add(s.__key),void e0(e)}let e=t?s.getPreviousSibling():s.getNextSibling();if(nU(e)){let n=e.__key,s=t?e.getTextContent().length:0;return i.set(n,s,"text"),void(o&&r.set(n,s,"text"))}{let n,l;let a=s.getParentOrThrow();return ij(e)?(l=e.__key,n=t?e.getChildrenSize():0):(n=s.getIndexWithinParent(),l=a.__key,t||n++),i.set(l,n,"element"),void(o&&r.set(l,n,"element"))}}let l=iT(),a=tw(l._window);if(!a)return;let h=l._blockCursorElement,c=l._rootElement;if(null===c||null===h||!ij(s)||s.isInline()||s.canBeEmpty()||tb(h,l,c),function(e,t,n,i){e.modify(t,n,i)}(a,e,t?"backward":"forward",n),a.rangeCount>0){let e=a.getRangeAt(0),n=this.anchor.getNode(),i=iK(n)?n:function(e){let t=e.getParentOrThrow();for(;null!==t&&!tg(t);)t=t.getParentOrThrow();return t}(n);if(this.applyDOMRange(e),this.dirty=!0,!o){let n=this.getNodes(),r=[],o=!1;for(let e=0;e<n.length;e++){let t=n[e];tf(t,i)?r.push(t):o=!0}if(o&&r.length>0){if(t){let e=r[0];ij(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=r[r.length-1];ij(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}}a.anchorNode===e.startContainer&&a.anchorOffset===e.startOffset||function(e){let t=e.focus,n=e.anchor,i=n.key,r=n.offset,o=n.type;nQ(n,t.key,t.offset,t.type),nQ(t,i,r,o),e._cachedNodes=null}(this)}}}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&ij(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(ij(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;let i=this.focus,o=ta(i,e);if(iU(o)&&!o.isIsolated()){if(o.isKeyboardSelectable()&&ij(n)&&0===n.getChildrenSize()){n.remove();let e=io();e.add(o.__key),e0(e)}else o.remove(),iT().dispatchCommand(r,void 0);return}if(!e&&ij(o)&&ij(n)&&n.isEmpty())return n.remove(),void o.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&("element"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}else{let r="text"===i.type?i.getNode():null;if(n="text"===t.type?t.getNode():null,null!==r&&r.isSegmented()){let t=i.offset,o=r.getTextContentSize();if(r.is(n)||e&&t!==o||!e&&0!==t)return void n8(r,e,t)}else if(null!==n&&n.isSegmented()){let i=t.offset,o=n.getTextContentSize();if(n.is(r)||e&&0!==i||!e&&i!==o)return void n8(n,e,i)}!function(e,t){let n=e.anchor,i=e.focus,r=n.getNode();if(r===i.getNode()&&"text"===n.type&&"text"===i.type){let e=n.offset,o=i.offset,s=e<o,l=s?e:o,a=s?o:e,h=a-1;l!==h&&(e5(r.getTextContent().slice(l,a))||(t?i.offset=h:n.offset=h))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&iK(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this)}}deleteLine(e){if(this.isCollapsed()){let t="element"===this.anchor.type;if(t&&this.insertText(" "),this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character"),t){let t=e?this.anchor:this.focus;t.set(t.key,t.offset+1,t.type)}}this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function n5(e){return e instanceof n0}function n6(e){let t=e.offset;if("text"===e.type)return t;let n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function n3(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[n,i]=t;return"element"===n.type&&"element"===i.type&&n.key===i.key&&n.offset===i.offset?[0,0]:[n6(n),n6(i)]}function n8(e,t,n){let i=e.getTextContent().split(/(?=\s)/g),r=i.length,o=0,s=0;for(let e=0;e<r;e++){let l=e===r-1;if(s=o,o+=i[e].length,t&&o===n||o>n||l){i.splice(e,1),l&&(s=void 0);break}}let l=i.join("").trim();""===l?e.remove():(e.setTextContent(l),e.select(s,s))}function n4(e,t,n,i){let r,o=t;if(1===e.nodeType){let s=!1,l=e.childNodes,a=l.length,h=i._blockCursorElement;o===a&&(s=!0,o=a-1);let c=l[o],u=!1;if(c===h)c=l[o+1],u=!0;else if(null!==h){let n=h.parentNode;e===n&&t>Array.prototype.indexOf.call(n.children,h)&&o--}if(nU(r=e1(c)))o=e2(r,s);else{let i=e1(e);if(null===i)return null;if(ij(i)){o=Math.min(i.getChildrenSize(),o);let e=i.getChildAtIndex(o);if(ij(e)&&function(e,t,n){let i=e.getParent();return null===n||null===i||!i.canBeEmpty()||i!==n.getNode()}(e,0,n)){let t=s?e.getLastDescendant():e.getFirstDescendant();i=null===t?e:ij(e=t)?e:e.getParentOrThrow(),o=0}nU(e)?(r=e,i=null,o=e2(e,s)):e!==i&&s&&!u&&o++}else{let n=i.getIndexWithinParent();o=0===t&&iU(i)&&e1(e)===i?n:n+1,i=i.getParentOrThrow()}if(ij(i))return nY(i.__key,o,"element")}}else r=e1(e);return nU(r)?nY(r.__key,o,"text"):null}function n9(e,t,n){let i=e.offset,r=e.getNode();if(0===i){let i=r.getPreviousSibling(),o=r.getParent();if(t){if((n||!t)&&null===i&&ij(o)&&o.isInline()){let t=o.getPreviousSibling();nU(t)&&(e.key=t.__key,e.offset=t.getTextContent().length)}}else ij(i)&&!n&&i.isInline()?(e.key=i.__key,e.offset=i.getChildrenSize(),e.type="element"):nU(i)&&(e.key=i.__key,e.offset=i.getTextContent().length)}else if(i===r.getTextContent().length){let i=r.getNextSibling(),o=r.getParent();if(t&&ij(i)&&i.isInline())e.key=i.__key,e.offset=0,e.type="element";else if((n||t)&&null===i&&ij(o)&&o.isInline()&&!o.canInsertTextAfter()){let t=o.getNextSibling();nU(t)&&(e.key=t.__key,e.offset=0)}}}function n7(e,t,n){if("text"===e.type&&"text"===t.type){let i=e.isBefore(t),r=e.is(t);n9(e,i,r),n9(t,!i,r),r&&(t.key=e.key,t.offset=e.offset,t.type=e.type);let o=iT();if(o.isComposing()&&o._compositionKey!==e.key&&n1(n)){let i=n.anchor,r=n.focus;nQ(e,i.key,i.offset,i.type),nQ(t,r.key,r.offset,r.type)}}}function ie(e,t,n,i,r,o){if(null===e||null===n||!eR(r,e,n))return null;let s=n4(e,t,n1(o)?o.anchor:null,r);if(null===s)return null;let l=n4(n,i,n1(o)?o.focus:null,r);if(null===l)return null;if("element"===s.type&&"element"===l.type){let t=e1(e),i=e1(n);if(iU(t)&&iU(i))return null}return n7(s,l,o),[s,l]}function it(e){return ij(e)&&!e.isInline()}function ii(e,t,n,i,r,o){let s=iC(),l=new n2(nY(e,t,r),nY(n,i,o),0,"");return l.dirty=!0,s._selection=l,l}function ir(){return new n2(nY("root",0,"element"),nY("root",0,"element"),0,"")}function io(){return new n0(new Set)}function is(e,t,n,i){let r,o,s,l;let a=n._window;if(null===a)return null;let h=i||a.event,c=h?h.type:void 0,u="selectionchange"===c,d=!ew&&(u||"beforeinput"===c||"compositionstart"===c||"compositionend"===c||"click"===c&&h&&3===h.detail||"drop"===c||void 0===c);if(n1(e)&&!d)return e.clone();if(null===t)return null;if(r=t.anchorNode,o=t.focusNode,s=t.anchorOffset,l=t.focusOffset,u&&n1(e)&&!eR(n,r,o))return e.clone();let f=ie(r,s,o,l,n,e);if(null===f)return null;let[p,g]=f;return new n2(p,g,n1(e)?e.format:0,n1(e)?e.style:"")}function il(){return iC()._selection}function ia(){return iT()._editorState._selection}function ih(e,t,n,i=1){let r=e.anchor,o=e.focus,s=r.getNode(),l=o.getNode();if(!t.is(s)&&!t.is(l))return;let a=t.__key;if(e.isCollapsed()){let t=r.offset;if(n<=t&&i>0||n<t&&i<0){let n=Math.max(0,t+i);r.set(a,n,"element"),o.set(a,n,"element"),ic(e)}}else{let s=e.isBackward(),l=s?o:r,h=l.getNode(),c=s?r:o,u=c.getNode();if(t.is(h)){let e=l.offset;(n<=e&&i>0||n<e&&i<0)&&l.set(a,Math.max(0,e+i),"element")}if(t.is(u)){let e=c.offset;(n<=e&&i>0||n<e&&i<0)&&c.set(a,Math.max(0,e+i),"element")}}ic(e)}function ic(e){let t=e.anchor,n=t.offset,i=e.focus,r=i.offset,o=t.getNode(),s=i.getNode();if(e.isCollapsed()){if(!ij(o))return;let e=o.getChildrenSize(),r=n>=e,s=r?o.getChildAtIndex(e-1):o.getChildAtIndex(n);if(nU(s)){let e=0;r&&(e=s.getTextContentSize()),t.set(s.__key,e,"text"),i.set(s.__key,e,"text")}}else{if(ij(o)){let e=o.getChildrenSize(),i=n>=e,r=i?o.getChildAtIndex(e-1):o.getChildAtIndex(n);if(nU(r)){let e=0;i&&(e=r.getTextContentSize()),t.set(r.__key,e,"text")}}if(ij(s)){let e=s.getChildrenSize(),t=r>=e,n=t?s.getChildAtIndex(e-1):s.getChildAtIndex(r);if(nU(n)){let e=0;t&&(e=n.getTextContentSize()),i.set(n.__key,e,"text")}}}}function iu(e,t,n,i,r){let o=null,s=0,l=null;null!==i?(o=i.__key,nU(i)?(s=i.getTextContentSize(),l="text"):ij(i)&&(s=i.getChildrenSize(),l="element")):null!==r&&(o=r.__key,nU(r)?l="text":ij(r)&&(l="element")),null!==o&&null!==l?e.set(o,s,l):(-1===(s=t.getIndexWithinParent())&&(s=n.getChildrenSize()),e.set(n.__key,s,"element"))}function id(e,t,n,i,r){"text"===e.type?(e.key=n,t||(e.offset+=r)):e.offset>i.getIndexWithinParent()&&(e.offset-=1)}function ip(e){let t=il()||ia();null===t&&(t=eX().selectEnd()),t.insertNodes(e)}function ig(e){let t=e;e.isCollapsed()||t.removeText();let n=il();n1(n)&&(t=n),n1(t)||ey(161);let i=t.anchor,r=i.getNode(),o=i.offset;for(;!tT(r);)[r,o]=function(e,t){let n=e.getParent();if(!n){let e=iX();return eX().append(e),e.select(),[eX(),0]}if(nU(e)){let i=e.splitText(t);if(0===i.length)return[n,e.getIndexWithinParent()];let r=0===t?0:1;return[n,i[0].getIndexWithinParent()+r]}if(!ij(e)||0===t)return[n,e.getIndexWithinParent()];let i=e.getChildAtIndex(t);if(i){let n=new n2(nY(e.__key,t,"element"),nY(e.__key,t,"element"),0,""),r=e.insertNewAfter(n);r&&r.append(i,...i.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}(r,o);return o}let im=null,iv=null,iy=!1,ib=!1,iw=0,i_={characterData:!0,childList:!0,subtree:!0};function ix(){return iy||null!==im&&im._readOnly}function ik(){iy&&ey(13)}function iS(){iw>99&&ey(14)}function iC(){return null===im&&ey(195,iA()),im}function iT(){return null===iv&&ey(196,iA()),iv}function iA(){let e=0,t=new Set,n=i4.version;if("undefined"!=typeof window)for(let i of document.querySelectorAll("[contenteditable]")){let r=ez(i);if(eI(r))e++;else if(r){let e=String(r.constructor.version||"<0.17.1");e===n&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let i=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(i+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),i}function iO(e,t,n){let i=t.__type,r=function(e,t){let n=e._nodes.get(t);return void 0===n&&ey(30,t),n}(e,i),o=n.get(i);void 0===o&&(o=Array.from(r.transforms),n.set(i,o));let s=o.length;for(let e=0;e<s&&(o[e](t),t.isAttached());e++);}function iE(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function iM(e,t){if(!t)return;let n=e._updateTags,i=t;for(let e of(Array.isArray(t)||(i=[t]),i))n.add(e)}function iD(e){return iP(e,iT()._nodes)}function iP(e,t){let n=e.type,i=t.get(n);void 0===i&&ey(17,n);let r=i.klass;e.type!==r.getType()&&ey(18,r.name);let o=r.importJSON(e),s=e.children;if(ij(o)&&Array.isArray(s))for(let e=0;e<s.length;e++){let n=iP(s[e],t);o.append(n)}return o}function iN(e,t,n){let i=im,r=iy,o=iv;im=t,iy=!0,iv=e;try{return n()}finally{im=i,iy=r,iv=o}}function iL(e,t){let n=e._pendingEditorState,i=e._rootElement,o=e._headless||null===i;if(null===n)return;let s=e._editorState,l=s._selection,a=n._selection,h=0!==e._dirtyType,c=im,u=iy,d=iv,f=e._updating,p=e._observer,g=null;if(e._pendingEditorState=null,e._editorState=n,!o&&h&&null!==p){iv=e,im=n,iy=!1,e._updating=!0;try{let t=e._dirtyType,i=e._dirtyElements,r=e._dirtyLeaves;p.disconnect(),g=function(e,t,n,i,r,o){tH="",tK="",tV="",tq=2===i,tG=null,tN=n,tP=n._config,tL=n._nodes,tR=tN._listeners.mutation,tI=r,tF=o,tz=e._nodeMap,tB=t._nodeMap,tZ=t._readOnly,tW=new Map(n._keyToDOMMap);let s=new Map;return tj=s,function e(t,n){let i=tz.get(t),r=tB.get(t);void 0!==i&&void 0!==r||ey(61);let o=tq||tF.has(t)||tI.has(t),s=tu(tN,t);if(i===r&&!o){if(ij(i)){let e=s.__lexicalTextContent;void 0!==e&&(tH+=e,tK+=e);let t=s.__lexicalDirTextContent;void 0!==t&&(tV+=t)}else{let e=i.getTextContent();nU(i)&&!i.isDirectionless()&&(tV+=e),tK+=e,tH+=e}return s}if(i!==r&&o&&ts(tj,tL,tR,r,"updated"),r.updateDOM(i,s,tP)){let e=t1(t,null,null);return null===n&&ey(62),n.replaceChild(e,s),tY(t,null),e}if(ij(i)&&ij(r)){let t=r.__indent;t!==i.__indent&&tQ(s,t);let n=r.__format;n!==i.__format&&t0(s,n),o&&(function(t,n,i){let r=tV;tV="",tU=null,t$="",function(t,n,i){let r=tH,o=t.__size,s=n.__size;if(tH="",1===o&&1===s){let r=t.__first,o=n.__first;if(r===o)e(r,i);else{let e=t7(r),t=t1(o,null,null);try{i.replaceChild(t,e)}catch(n){if("object"==typeof n&&null!=n)throw Error(`${n.toString()} Parent: ${i.tagName}, new child: {tag: ${t.tagName} key: ${o}}, old child: {tag: ${e.tagName}, key: ${r}}.`);throw n}tY(r,null)}let s=tB.get(o);nU(s)&&(null===tU&&(tU=s.getFormat()),""===t$&&(t$=s.getStyle()))}else{let r=t8(t,tz),l=t8(n,tB);if(0===o)0!==s&&t2(l,n,0,s-1,i,null);else if(0===s){if(0!==o){let e=null==i.__lexicalLineBreak;tJ(r,0,o-1,e?null:i),e&&(i.textContent="")}}else!function(t,n,i,r,o,s){let l=r-1,a=o-1,h,c,u=s.firstChild,d=0,f=0;for(;d<=l&&f<=a;){let t=n[d],r=i[f];if(t===r)u=t9(e(r,s)),d++,f++;else{void 0===h&&(h=new Set(n)),void 0===c&&(c=new Set(i));let o=c.has(t),l=h.has(r);if(o){if(l){let t=tu(tN,r);t===u?u=t9(e(r,s)):(null!=u?s.insertBefore(t,u):s.appendChild(t),e(r,s)),d++,f++}else t1(r,s,u),f++}else u=t9(t7(t)),tY(t,s),d++}let o=tB.get(r);null!==o&&nU(o)&&(null===tU&&(tU=o.getFormat()),""===t$&&(t$=o.getStyle()))}let p=d>l,g=f>a;if(p&&!g){let e=i[a+1];t2(i,t,f,a,s,void 0===e?null:tN.getElementByKey(e))}else g&&!p&&tJ(n,d,l,s)}(n,r,l,o,s,i)}tc(n)&&(tH+="\n\n"),i.__lexicalTextContent=tH,tH=r+tH}(t,n,i),t3(n,i),iQ(n)&&null!=tU&&tU!==n.__textFormat&&!tZ&&(n.setTextFormat(tU),n.setTextStyle(t$)),iQ(n)&&""!==t$&&t$!==n.__textStyle&&!tZ&&n.setTextStyle(t$),tV=r}(i,r,s),iK(r)||r.isInline()||t6(i,r,s)),tc(r)&&(tH+="\n\n",tK+="\n\n")}else{let e=r.getTextContent();if(iU(r)){let e=r.decorate(tN,tP);null!==e&&t4(t,e)}else nU(r)&&!r.isDirectionless()&&(tV+=e);tH+=e,tK+=e}if(!tZ&&iK(r)&&r.__cachedText!==tK){let e=r.getWritable();e.__cachedText=tK,r=e}return s}("root",null),tN=void 0,tL=void 0,tI=void 0,tF=void 0,tz=void 0,tB=void 0,tP=void 0,tW=void 0,tj=void 0,s}(s,n,e,t,i,r)}catch(t){if(t instanceof Error&&e._onError(t),ib)throw t;return i3(e,null,i,n),eT(e),e._dirtyType=2,ib=!0,iL(e,s),void(ib=!1)}finally{p.observe(i,i_),e._updating=f,im=c,iy=u,iv=d}}n._readOnly||(n._readOnly=!0);let m=e._dirtyLeaves,v=e._dirtyElements,y=e._normalizedNodes,b=e._updateTags,w=e._deferred;h&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let n;let i=e._decorators,r=e._pendingDecorators||i,o=t._nodeMap;for(n in r)o.has(n)||(r===i&&(r=eY(e)),delete r[n])}(e,n);let _=o?null:tw(e._window);if(e._editable&&null!==_&&(h||null===a||a.dirty)){iv=e,im=n;try{if(null!==p&&p.disconnect(),h||null===a||a.dirty){let t=e._blockCursorElement;null!==t&&tb(t,e,i),function(e,t,n,i,r,o,s){let l=i.anchorNode,a=i.focusNode,h=i.anchorOffset,c=i.focusOffset,u=document.activeElement;if(r.has("collaboration")&&u!==o||null!==u&&eL(u))return;if(!n1(t))return void(null!==e&&eR(n,l,a)&&i.removeAllRanges());let d=t.anchor,f=t.focus,p=d.key,g=f.key,m=tu(n,p),v=tu(n,g),y=d.offset,b=f.offset,w=t.format,_=t.style,x=t.isCollapsed(),k=m,S=v,C=!1;if("text"===d.type){k=eW(m);let e=d.getNode();C=e.getFormat()!==w||e.getStyle()!==_}else n1(e)&&"text"===e.anchor.type&&(C=!0);if("text"===f.type&&(S=eW(v)),null!==k&&null!==S&&(x&&(null===e||C||n1(e)&&(e.format!==w||e.style!==_))&&(nu=[w,_,y,p,performance.now()]),h!==y||c!==b||l!==k||a!==S||"Range"===i.type&&x||(null!==u&&o.contains(u)||o.focus({preventScroll:!0}),"element"===d.type))){try{i.setBaseAndExtent(k,y,S,b)}catch(e){}if(!r.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==o&&o===document.activeElement){let e=t instanceof n2&&"element"===t.anchor.type?k.childNodes[y]||null:i.rangeCount>0?i.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){let i=n.ownerDocument,r=i.defaultView;if(null===r)return;let{top:o,bottom:s}=t,l=0,a=0,h=n;for(;null!==h;){let t=h===i.body;if(t)l=0,a=tp(e).innerHeight;else{let e=h.getBoundingClientRect();l=e.top,a=e.bottom}let n=0;if(o<l?n=-(l-o):s>a&&(n=s-a),0!==n){if(t)r.scrollBy(0,n);else{let e=h.scrollTop;h.scrollTop+=n;let t=h.scrollTop-e;o-=t,s-=t}}if(t)break;h=td(h)}}(n,t,o)}}nl=!0}}(l,a,e,_,b,i)}(function(e,t,n){let i=e._blockCursorElement;if(n1(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){let r=n.anchor,o=r.getNode(),s=r.offset,l=!1,a=null;if(s===o.getChildrenSize())ty(o.getChildAtIndex(s-1))&&(l=!0);else{let t=o.getChildAtIndex(s);if(ty(t)){let n=t.getPreviousSibling();(null===n||ty(n))&&(l=!0,a=e.getElementByKey(t.__key))}}if(l){let n=e.getElementByKey(o.__key);return null===i&&(e._blockCursorElement=i=function(e){let t=e.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let i=t.blockCursor;if(void 0!==i){if("string"==typeof i){let e=eb(i);i=t.blockCursor=e}void 0!==i&&n.classList.add(...i)}return n}(e._config)),t.style.caretColor="transparent",void(null===a?n.appendChild(i):n.insertBefore(i,a))}}null!==i&&tb(i,e,t)})(e,i,a),null!==p&&p.observe(i,i_)}finally{iv=d,im=c}}null!==g&&function(e,t,n,i,r){let o=Array.from(e._listeners.mutation),s=o.length;for(let e=0;e<s;e++){let[s,l]=o[e],a=t.get(l);void 0!==a&&s(a,{dirtyLeaves:i,prevEditorState:r,updateTags:n})}}(e,g,b,m,s),n1(a)||null===a||null!==l&&l.is(a)||e.dispatchCommand(r,void 0);let x=e._pendingDecorators;null!==x&&(e._decorators=x,e._pendingDecorators=null,iR("decorator",e,!0,x)),function(e,t,n){let i=eJ(t),r=eJ(n);i!==r&&iR("textcontent",e,!0,r)}(e,t||s,n),iR("update",e,!0,{dirtyElements:v,dirtyLeaves:m,editorState:n,normalizedNodes:y,prevEditorState:t||s,tags:b}),function(e,t){if(e._deferred=[],0!==t.length){let n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,w),function(e){let t=e._updates;if(0!==t.length){let n=t.shift();if(n){let[t,i]=n;iz(e,t,i)}}}(e)}function iR(e,t,n,...i){let r=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,i)}finally{t._updating=r}}function iI(e,t,n){if(!1===e._updating||iv!==e){let i=!1;return e.update(()=>{i=iI(e,t,n)}),i}let i=e6(e);for(let r=4;r>=0;r--)for(let o=0;o<i.length;o++){let s=i[o]._commands.get(t);if(void 0!==s){let t=s[r];if(void 0!==t){let i=Array.from(t),r=i.length;for(let t=0;t<r;t++)if(!0===i[t](n,e))return!0}}}return!1}function iF(e,t){let n=e._updates,i=t||!1;for(;0!==n.length;){let t=n.shift();if(t){let n;let[r,o]=t;if(void 0!==o){if(n=o.onUpdate,o.skipTransforms&&(i=!0),o.discrete){let t=e._pendingEditorState;null===t&&ey(191),t._flushSync=!0}n&&e._deferred.push(n),iM(e,o.tag)}r()}}return i}function iz(e,t,n){let i=e._updateTags,r,o=!1,s=!1;void 0!==n&&(r=n.onUpdate,iM(e,n.tag),o=n.skipTransforms||!1,s=n.discrete||!1),r&&e._deferred.push(r);let l=e._editorState,a=e._pendingEditorState,h=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=new iZ(new Map((a||l)._nodeMap)),h=!0),a._flushSync=s;let c=im,u=iy,d=iv,f=e._updating;im=a,iy=!1,e._updating=!0,iv=e;try{h&&(e._headless?null!==l._selection&&(a._selection=l._selection.clone()):a._selection=function(e){let t=e.getEditorState()._selection,n=tw(e._window);return n1(t)||null==t?is(t,n,e,null):t.clone()}(e));let n=e._compositionKey;t(),o=iF(e,o),function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(n1(i)){let e;let t=i.anchor,r=i.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(n,i),"text"===r.type){let t=r.getNode();e!==t&&t.selectionTransform(n,i)}}}(a,e),0!==e._dirtyType&&(o?function(e,t){let n=t._dirtyLeaves,i=e._nodeMap;for(let e of n){let t=i.get(e);nU(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&eE(t)}}(a,e):function(e,t){let n=t._dirtyLeaves,i=t._dirtyElements,r=e._nodeMap,o=eK(),s=new Map,l=n,a=l.size,h=i,c=h.size;for(;a>0||c>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,l)){let i=r.get(e);nU(i)&&i.isAttached()&&i.isSimpleText()&&!i.isUnmergeable()&&eE(i),void 0!==i&&iE(i,o)&&iO(t,i,s),n.add(e)}if((a=(l=t._dirtyLeaves).size)>0){iw++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,h)){let n=e[0],l=e[1];if("root"!==n&&!l)continue;let a=r.get(n);void 0!==a&&iE(a,o)&&iO(t,a,s),i.set(n,l)}a=(l=t._dirtyLeaves).size,c=(h=t._dirtyElements).size,iw++}t._dirtyLeaves=n,t._dirtyElements=i}(a,e),iF(e),function(e,t,n,i){let r=e._nodeMap,o=t._nodeMap,s=[];for(let[e]of i){let t=o.get(e);void 0!==t&&(t.isAttached()||(ij(t)&&function e(t,n,i,r,o,s){let l=t.getFirstChild();for(;null!==l;){let t=l.__key;l.__parent===n&&(ij(l)&&e(l,t,i,r,o,s),i.has(t)||s.delete(t),o.push(t)),l=l.getNextSibling()}}(t,e,r,o,s,i),r.has(e)||i.delete(e),s.push(e)))}for(let e of s)o.delete(e);for(let e of n){let t=o.get(e);void 0===t||t.isAttached()||(r.has(e)||n.delete(e),o.delete(e))}}(l,a,e._dirtyLeaves,e._dirtyElements)),n!==e._compositionKey&&(a._flushSync=!0);let i=a._selection;if(n1(i)){let e=a._nodeMap,t=i.anchor.key,n=i.focus.key;void 0!==e.get(t)&&void 0!==e.get(n)||ey(19)}else n5(i)&&0===i._nodes.size&&(a._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=l,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void iL(e)}finally{im=c,iy=u,iv=d,e._updating=f,iw=0}0!==e._dirtyType||function(e,t){let n=t.getEditorState()._selection,i=e._selection;if(null!==i){if(i.dirty||!i.is(n))return!0}else if(null!==n)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,iL(e)):h&&eN(()=>{iL(e)}):(a._flushSync=!1,h&&(i.clear(),e._deferred=[],e._pendingEditorState=null))}function iB(e,t,n){e._updating?e._updates.push([t,n]):iz(e,t,n)}class iW extends nk{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null}afterCloneFrom(e){super.afterCloneFrom(e),this.__first=e.__first,this.__last=e.__last,this.__size=e.__size,this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir}getFormat(){return this.getLatest().__format}getFormatType(){return eg[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=iT()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(nU(t)&&e.push(t),ij(t)){let n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;ij(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;ij(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;if(e>=n){let e=t[n-1];return ij(e)&&e.getLastDescendant()||e||null}let i=t[e];return ij(i)&&i.getFirstDescendant()||i||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:eq(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&ey(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:eq(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&ey(96,this.__key),e}getChildAtIndex(e){let t,n;let i=this.getChildrenSize();if(e<i/2){for(t=this.getFirstChild(),n=0;null!==t&&n<=e;){if(n===e)return t;t=t.getNextSibling(),n++}return null}for(t=this.getLastChild(),n=i-1;null!==t&&n>=e;){if(n===e)return t;t=t.getPreviousSibling(),n--}return null}getTextContent(){let e="",t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContent(),ij(r)&&i!==n-1&&!r.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),n=t.length;for(let i=0;i<n;i++){let r=t[i];e+=r.getTextContentSize(),ij(r)&&i!==n-1&&!r.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){if(""!==e){let t=ep[e];return!!(this.getFormat()&t)}return!1}select(e,t){ik();let n=il(),i=e,r=t,o=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(nU(e)||ij(e))return e.select(0,0)}else if(!(void 0!==e&&e!==o||void 0!==t&&t!==o)){let e=this.getLastChild();if(nU(e)||ij(e))return e.select()}}void 0===i&&(i=o),void 0===r&&(r=o);let s=this.__key;return n1(n)?(n.anchor.set(s,i,"element"),n.focus.set(s,r,"element"),n.dirty=!0,n):ii(s,i,s,r,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?ep[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){let i=n.length,r=this.getChildrenSize(),o=this.getWritable(),s=o.__key,l=[],a=[],h=this.getChildAtIndex(e+t),c=null,u=r-t+i;if(0!==e){if(e===r)c=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(c=t.getPreviousSibling())}}if(t>0){let e=null===c?this.getFirstChild():c.getNextSibling();for(let n=0;n<t;n++){null===e&&ey(100);let t=e.getNextSibling(),n=e.__key;eV(e.getWritable()),a.push(n),e=t}}let d=c;for(let e=0;e<i;e++){let t=n[e];null!==d&&t.is(d)&&(c=d=d.getPreviousSibling());let i=t.getWritable();i.__parent===s&&u--,eV(i);let r=t.__key;if(null===d)o.__first=r,i.__prev=null;else{let e=d.getWritable();e.__next=r,i.__prev=e.__key}t.__key===s&&ey(76),i.__parent=s,l.push(r),d=t}if(e+t===r)null!==d&&(d.getWritable().__next=null,o.__last=d.__key);else if(null!==h){let e=h.getWritable();if(null!==d){let t=d.getWritable();e.__prev=d.__key,t.__next=h.__key}else e.__prev=null}if(o.__size=u,a.length){let e=il();if(n1(e)){let t=new Set(a),n=new Set(l),{anchor:i,focus:r}=e;iH(i,t,n)&&iu(i,i.getNode(),this,c,h),iH(r,t,n)&&iu(r,r.getNode(),this,c,h),0!==u||this.canBeEmpty()||tg(this)||this.remove()}}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}canMergeWhenEmpty(){return!1}}function ij(e){return e instanceof iW}function iH(e,t,n){let i=e.getNode();for(;i;){let e=i.__key;if(t.has(e)&&!n.has(e))return!0;i=i.getParent()}return!1}class iV extends nk{constructor(e){super(e)}decorate(e,t){ey(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function iU(e){return e instanceof iV}class i$ extends iW{static getType(){return"root"}static clone(){return new i$}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){ey(51)}getTextContent(){let e=this.__cachedText;return(ix()||0===iT()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){ey(52)}replace(e){ey(53)}insertBefore(e){ey(54)}insertAfter(e){ey(55)}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){let n=e[t];ij(n)||iU(n)||ey(56)}return super.append(...e)}static importJSON(e){let t=eX();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function iK(e){return e instanceof i$}function iq(){return new iZ(new Map([["root",new i$]]))}class iZ{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return iN(t&&t.editor||null,this,e)}clone(e){let t=new iZ(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return iN(null,this,()=>({root:function e(t){let n=t.exportJSON(),i=t.constructor;if(n.type!==i.getType()&&ey(130,i.name),ij(t)){let r=n.children;Array.isArray(r)||ey(59,i.name);let o=t.getChildren();for(let t=0;t<o.length;t++){let n=e(o[t]);r.push(n)}}return n}(eX())}))}}class iG extends iW{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class iY extends iW{constructor(e){super(e),this.__textFormat=0,this.__textStyle=""}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}hasTextFormat(e){let t=ed[e];return!!(this.getTextFormat()&t)}getFormatFlags(e,t){return ej(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}static clone(e){return new iY(e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}createDOM(e){let t=document.createElement("p"),n=to(e.theme,"paragraph");return void 0!==n&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:iJ,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(t&&tx(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();t.style.textAlign=e;let n=this.getDirection();n&&(t.dir=n);let i=this.getIndent();i>0&&(t.style.textIndent=20*i+"px")}return{element:t}}static importJSON(e){let t=iX();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t.setTextFormat(e.textFormat),t}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle(),type:"paragraph",version:1}}insertNewAfter(e,t){let n=iX();n.setTextFormat(e.format),n.setTextStyle(e.style);let i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getTextStyle()),this.insertAfter(n,t),n}collapseAtStart(){let e=this.getChildren();if(0===e.length||nU(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function iJ(e){let t=iX();if(e.style){t.setFormat(e.style.textAlign);let n=parseInt(e.style.textIndent,10)/20;n>0&&t.setIndent(n)}return{node:t}}function iX(){return tm(new iY)}function iQ(e){return e instanceof iY}let i0=0,i1=1,i2=2,i5=3,i6=4;function i3(e,t,n,i){let r=e._keyToDOMMap;r.clear(),e._editorState=iq(),e._pendingEditorState=i,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let o=e._observer;null!==o&&(o.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",r.set("root",n))}function i8(e){let t;let n=e||{},i=iv,r=n.theme||{},o=void 0===e?i:n.parentEditor||null,s=n.disableEvents||!1,l=iq(),a=n.namespace||(null!==o?o._config.namespace:e3()),h=n.editorState,c=[i$,nR,nS,nK,iY,iG,...n.nodes||[]],{onError:u,html:d}=n,f=void 0===n.editable||n.editable;if(void 0===e&&null!==i)t=i._nodes;else{t=new Map;for(let e=0;e<c.length;e++){let n=c[e],i=null,r=null;if("function"!=typeof n){let e=n;n=e.replace,i=e.with,r=e.withKlass||null}let o=n.getType(),s=n.transform(),l=new Set;null!==s&&l.add(s),t.set(o,{exportDOM:d&&d.export?d.export.get(n):void 0,klass:n,replace:i,replaceWithKlass:r,transforms:l})}}let p=new i4(l,o,t,{disableEvents:s,namespace:a,theme:r},u||console.error,function(e,t){let n=new Map,i=new Set,r=e=>{Object.keys(e).forEach(t=>{let i=n.get(t);void 0===i&&(i=[],n.set(t,i)),i.push(e[t])})};return e.forEach(e=>{let t=e.klass.importDOM;if(null==t||i.has(t))return;i.add(t);let n=t.call(e.klass);null!==n&&r(n)}),t&&r(t),n}(t,d?d.import:void 0),f);return void 0!==h&&(p._pendingEditorState=h,p._dirtyType=2),p}class i4{constructor(e,t,n,i,r,o,s){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=e3(),this._onError=r,this._htmlConversions=o,this._editable=s,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&ey(35);let i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);let r=i.get(e);void 0===r&&ey(36,String(e));let o=r[n];return o.add(t),()=>{o.delete(t),r.every(e=>0===e.size)&&i.delete(e)}}registerMutationListener(e,t,n){let i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,r=this._listeners.mutation;r.set(t,i);let o=n&&n.skipInitialization;return void 0===o||o||this.initializeMutationListener(t,i),()=>{r.delete(t)}}getRegisteredNode(e){let t=this._nodes.get(e.getType());return void 0===t&&ey(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let n=this._editorState,i=(function(e){if(!e._readOnly&&e.isEmpty())return tM;e._readOnly||ey(192);let t=tE.get(e);if(!t)for(let[n,i]of(t=new Map,tE.set(e,t),e._nodeMap)){let e=i.__type,r=t.get(e);r||(r=new Map,t.set(e,r)),r.set(n,i)}return t})(n).get(t.getType());if(!i)return;let r=new Map;for(let e of i.keys())r.set(e,"created");r.size>0&&e(r,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let n=this.getRegisteredNode(e);return n.transforms.add(t),n}registerNodeTransform(e,t){var n;let i=this.registerNodeTransformToKlass(e,t),r=[i],o=i.replaceWithKlass;if(null!=o){let e=this.registerNodeTransformToKlass(o,t);r.push(e)}return n=e.getType(),iB(this,()=>{let e=iC();if(!e.isEmpty()){if("root"===n)return void eX().markDirty();for(let[,t]of e._nodeMap)t.markDirty()}},null===this._pendingEditorState?{tag:"history-merge"}:void 0),()=>{r.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return iI(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let n=to(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,i3(this,t,e,i),null!==t&&(this._config.disableEvents||function(e){let t=e.ownerDocument,n=ns.get(t);void 0===n&&ey(162);let i=n-1;i>=0||ey(164),ns.set(t,i),0===i&&t.removeEventListener("selectionchange",nb);let r=ez(e);eI(r)?(function(e){if(null!==e._parentEditor){let t=e6(e),n=t[t.length-1]._key;ny.get(n)===e&&ny.delete(n)}else ny.delete(e._key)}(r),e.__lexicalEditor=null):r&&ey(198);let o=nv(e);for(let e=0;e<o.length;e++)o[e]();e.__lexicalEventHandles=[]}(t),null!=n&&t.classList.remove(...n)),null!==e){let t=function(e){let t=e.ownerDocument;return t&&t.defaultView||null}(e),i=e.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,eT(this),this._updateTags.add("history-merge"),iL(this),this._config.disableEvents||function(e,t){let n=e.ownerDocument,i=ns.get(n);(void 0===i||i<1)&&n.addEventListener("selectionchange",nb),ns.set(n,(i||0)+1),e.__lexicalEditor=t;let r=nv(e);for(let n=0;n<nt.length;n++){let[i,o]=nt[n],s="function"==typeof o?e=>{n_(e)||(nw(e),(t.isEditable()||"click"===i)&&o(e,t))}:e=>{if(n_(e))return;nw(e);let n=t.isEditable();switch(i){case"cut":return n&&iI(t,W,e);case"copy":return iI(t,B,e);case"paste":return n&&iI(t,u,e);case"dragstart":return n&&iI(t,I,e);case"dragover":return n&&iI(t,F,e);case"dragend":return n&&iI(t,z,e);case"focus":return n&&iI(t,K,e);case"blur":return n&&iI(t,q,e);case"drop":return n&&iI(t,L,e)}};e.addEventListener(i,s),r.push(()=>{e.removeEventListener(i,s)})}}(e,this),null!=n&&e.classList.add(...n)}else this._editorState=i,this._pendingEditorState=null,this._window=null;iR("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&ey(38),eC(this);let n=this._pendingEditorState,i=this._updateTags,r=void 0!==t?t.tag:null;null===n||n.isEmpty()||(null!=r&&i.add(r),iL(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=r&&i.add(r),iL(this)}parseEditorState(e,t){return function(e,t,n){let i=iq(),r=im,o=iy,s=iv,l=t._dirtyElements,a=t._dirtyLeaves,h=t._cloneNotNeeded,c=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,im=i,iy=!1,iv=t;try{let r=t._nodes;iP(e.root,r),n&&n(),i._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=l,t._dirtyLeaves=a,t._cloneNotNeeded=h,t._dirtyType=c,im=r,iy=o,iv=s}return i}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return iL(this),this.getEditorState().read(e,{editor:this})}update(e,t){iB(this,e,t)}focus(e,t={}){let n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),iB(this,()=>{let e=il(),n=eX();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())},{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=tw(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,iR("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}i4.version="0.18.0+prod.esm"},794973:(e,t,n)=>{"use strict";let i,r,o,s,l;function a(e){let t=e.length;for(;--t>=0;)e[t]=0}n.d(t,{wS:()=>t$});let h=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=Array(576);a(f);let p=Array(60);a(p);let g=Array(512);a(g);let m=Array(256);a(m);let v=Array(29);a(v);let y=Array(30);function b(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}a(y);let _=e=>e<256?g[e]:g[256+(e>>>7)],x=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},k=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},S=(e,t,n)=>{k(e,n[2*t],n[2*t+1])},C=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0)return n>>>1},T=e=>{16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},A=(e,t)=>{let n,i,r,o,s,l;let a=t.dyn_tree,h=t.max_code,c=t.stat_desc.static_tree,u=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(a[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=a[2*a[2*(i=e.heap[n])+1]+1]+1)>p&&(o=p,g++),a[2*i+1]=o,!(i>h)&&(e.bl_count[o]++,s=0,i>=f&&(s=d[i-f]),l=a[2*i],e.opt_len+=l*(o+s),u&&(e.static_len+=l*(c[2*i+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0)for(o=p;0!==o;o--)for(i=e.bl_count[o];0!==i;)!((r=e.heap[--n])>h)&&(a[2*r+1]!==o&&(e.opt_len+=(o-a[2*r+1])*a[2*r],a[2*r+1]=o),i--)}},O=(e,t,n)=>{let i,r;let o=Array(16),s=0;for(i=1;i<=15;i++)s=s+n[i-1]<<1,o[i]=s;for(r=0;r<=t;r++){let t=e[2*r+1];0!==t&&(e[2*r]=C(o[t]++,t))}},E=()=>{let e,t,n,s,l;let a=Array(16);for(s=0,n=0;s<28;s++)for(e=0,v[s]=n;e<1<<h[s];e++)m[n++]=s;for(m[n-1]=s,l=0,s=0;s<16;s++)for(e=0,y[s]=l;e<1<<c[s];e++)g[l++]=s;for(l>>=7;s<30;s++)for(e=0,y[s]=l<<7;e<1<<c[s]-7;e++)g[256+l++]=s;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,a[8]++;for(;e<=255;)f[2*e+1]=9,e++,a[9]++;for(;e<=279;)f[2*e+1]=7,e++,a[7]++;for(;e<=287;)f[2*e+1]=8,e++,a[8]++;for(O(f,287,a),e=0;e<30;e++)p[2*e+1]=5,p[2*e]=C(e,5);i=new b(f,h,257,286,15),r=new b(p,c,0,30,15),o=new b([],u,0,19,7)},M=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},D=e=>{e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},P=(e,t,n,i)=>{let r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]},N=(e,t,n)=>{let i=e.heap[n],r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&P(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!P(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},L=(e,t,n)=>{let i,r,o,s;let l=0;if(0!==e.sym_next)do i=(255&e.pending_buf[e.sym_buf+l++])+((255&e.pending_buf[e.sym_buf+l++])<<8),r=e.pending_buf[e.sym_buf+l++],0===i?S(e,r,t):(S(e,(o=m[r])+256+1,t),0!==(s=h[o])&&k(e,r-=v[o],s),S(e,o=_(--i),n),0!==(s=c[o])&&k(e,i-=y[o],s));while(l<e.sym_next)S(e,256,t)},R=(e,t)=>{let n,i,r;let o=t.dyn_tree,s=t.stat_desc.static_tree,l=t.stat_desc.has_stree,a=t.stat_desc.elems,h=-1;for(n=0,e.heap_len=0,e.heap_max=573;n<a;n++)0!==o[2*n]?(e.heap[++e.heap_len]=h=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[r]=0,e.opt_len--,l&&(e.static_len-=s[2*r+1]);for(t.max_code=h,n=e.heap_len>>1;n>=1;n--)N(e,o,n);r=a;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],N(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,N(e,o,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],A(e,t),O(o,h,e.bl_count)},I=(e,t,n)=>{let i,r;let o=-1,s=t[1],l=0,a=7,h=4;for(0===s&&(a=138,h=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)r=s,s=t[(i+1)*2+1],++l<a&&r===s||(l<h?e.bl_tree[2*r]+=l:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,o=r,0===s?(a=138,h=3):r===s?(a=6,h=3):(a=7,h=4))},F=(e,t,n)=>{let i,r;let o=-1,s=t[1],l=0,a=7,h=4;for(0===s&&(a=138,h=3),i=0;i<=n;i++)if(r=s,s=t[(i+1)*2+1],!(++l<a)||r!==s){if(l<h)do S(e,r,e.bl_tree);while(0!=--l)else 0!==r?(r!==o&&(S(e,r,e.bl_tree),l--),S(e,16,e.bl_tree),k(e,l-3,2)):l<=10?(S(e,17,e.bl_tree),k(e,l-3,3)):(S(e,18,e.bl_tree),k(e,l-11,7));l=0,o=r,0===s?(a=138,h=3):r===s?(a=6,h=3):(a=7,h=4)}},z=e=>{let t;for(I(e,e.dyn_ltree,e.l_desc.max_code),I(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},B=(e,t,n,i)=>{let r;for(k(e,t-257,5),k(e,n-1,5),k(e,i-4,4),r=0;r<i;r++)k(e,e.bl_tree[2*d[r]+1],3);F(e,e.dyn_ltree,t-1),F(e,e.dyn_dtree,n-1)},W=e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0},j=!1,H=(e,t,n,i)=>{k(e,0+(i?1:0),3),D(e),x(e,n),x(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var V={_tr_init:e=>{j||(E(),j=!0),e.l_desc=new w(e.dyn_ltree,i),e.d_desc=new w(e.dyn_dtree,r),e.bl_desc=new w(e.bl_tree,o),e.bi_buf=0,e.bi_valid=0,M(e)},_tr_stored_block:H,_tr_flush_block:(e,t,n,i)=>{let r,o;let s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=W(e)),R(e,e.l_desc),R(e,e.d_desc),s=z(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?H(e,t,n,i):4===e.strategy||o===r?(k(e,2+(i?1:0),3),L(e,f,p)):(k(e,4+(i?1:0),3),B(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),L(e,e.dyn_ltree,e.dyn_dtree)),M(e),i&&D(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(m[n]+256+1)*2]++,e.dyn_dtree[2*_(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{k(e,2,3),S(e,256,f),T(e)}},U=(e,t,n,i)=>{let r=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do o=o+(r=r+t[i++]|0)|0;while(--s)r%=65521,o%=65521}return r|o<<16|0};let $=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var K=(e,t,n,i)=>{let r=i+n;e^=-1;for(let n=i;n<r;n++)e=e>>>8^$[(e^t[n])&255];return -1^e},q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Z={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:G,_tr_stored_block:Y,_tr_flush_block:J,_tr_tally:X,_tr_align:Q}=V,{Z_NO_FLUSH:ee,Z_PARTIAL_FLUSH:et,Z_FULL_FLUSH:en,Z_FINISH:ei,Z_BLOCK:er,Z_OK:eo,Z_STREAM_END:es,Z_STREAM_ERROR:el,Z_DATA_ERROR:ea,Z_BUF_ERROR:eh,Z_DEFAULT_COMPRESSION:ec,Z_FILTERED:eu,Z_HUFFMAN_ONLY:ed,Z_RLE:ef,Z_FIXED:ep,Z_DEFAULT_STRATEGY:eg,Z_UNKNOWN:em,Z_DEFLATED:ev}=Z,ey=(e,t)=>(e.msg=q[t],t),eb=e=>2*e-(e>4?9:0),ew=e=>{let t=e.length;for(;--t>=0;)e[t]=0},e_=e=>{let t,n,i;let r=e.w_size;i=t=e.hash_size;do n=e.head[--i],e.head[i]=n>=r?n-r:0;while(--t)i=t=r;do n=e.prev[--i],e.prev[i]=n>=r?n-r:0;while(--t)},ex=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ek=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},eS=(e,t)=>{J(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ek(e.strm)},eC=(e,t)=>{e.pending_buf[e.pending++]=t},eT=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eA=(e,t,n,i)=>{let r=e.avail_in;return(r>i&&(r=i),0===r)?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=U(e.adler,t,r,n):2===e.state.wrap&&(e.adler=K(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},eO=(e,t)=>{let n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,l=e.nice_match,a=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,h=e.window,c=e.w_mask,u=e.prev,d=e.strstart+258,f=h[o+s-1],p=h[o+s];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do{if(h[(n=t)+s]!==p||h[n+s-1]!==f||h[n]!==h[o]||h[++n]!==h[o+1])continue;o+=2,n++;do;while(h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&h[++o]===h[++n]&&o<d)if(i=258-(d-o),o=d-258,i>s){if(e.match_start=t,s=i,i>=l)break;f=h[o+s-1],p=h[o+s]}}while((t=u[t&c])>a&&0!=--r)return s<=e.lookahead?s:e.lookahead},eE=e=>{let t,n,i;let r=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-262)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),e_(e),n+=r),0===e.strm.avail_in)break;if(t=eA(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=ex(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=ex(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eM=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,r,o,s=0,l=e.strm.avail_in;do{if(i=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i>(r=e.strstart-e.block_start)+e.strm.avail_in&&(i=r+e.strm.avail_in),i>o&&(i=o),i<n&&(0===i&&t!==ei||t===ee||i!==r+e.strm.avail_in)))break;s=t===ei&&i===r+e.strm.avail_in?1:0,Y(e,0,0,s),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,ek(e.strm),r&&(r>i&&(r=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,i-=r),i&&(eA(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===s)return((l-=e.strm.avail_in)&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?4:t!==ee&&t!==ei&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(eA(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,n=(o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o)>e.w_size?e.w_size:o,((r=e.strstart-e.block_start)>=n||(r||t===ei)&&t!==ee&&0===e.strm.avail_in&&r<=o)&&(i=r>o?o:r,s=t===ei&&0===e.strm.avail_in&&i===r?1:0,Y(e,e.block_start,i,s),e.block_start+=i,ek(e.strm)),s?3:1)},eD=(e,t)=>{let n,i;for(;;){if(e.lookahead<262){if(eE(e),e.lookahead<262&&t===ee)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ex(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=eO(e,n)),e.match_length>=3){if(i=X(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=ex(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ex(e,e.ins_h,e.window[e.strstart+1])}else i=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(eS(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===ei)?(eS(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eS(e,!1),0===e.strm.avail_out)?1:2},eP=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<262){if(eE(e),e.lookahead<262&&t===ee)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ex(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=eO(e,n),e.match_length<=5&&(e.strategy===eu||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=X(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=ex(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,i&&(eS(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=X(e,0,e.window[e.strstart-1]))&&eS(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(i=X(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ei)?(eS(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eS(e,!1),0===e.strm.avail_out)?1:2},eN=(e,t)=>{let n,i,r,o;let s=e.window;for(;;){if(e.lookahead<=258){if(eE(e),e.lookahead<=258&&t===ee)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=e.strstart+258;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o)e.match_length=258-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=X(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(eS(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ei)?(eS(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eS(e,!1),0===e.strm.avail_out)?1:2},eL=(e,t)=>{let n;for(;;){if(0===e.lookahead&&(eE(e),0===e.lookahead)){if(t===ee)return 1;break}if(e.match_length=0,n=X(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(eS(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ei)?(eS(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eS(e,!1),0===e.strm.avail_out)?1:2};function eR(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}let eI=[new eR(0,0,0,0,eM),new eR(4,4,8,4,eD),new eR(4,5,16,8,eD),new eR(4,6,32,32,eD),new eR(4,4,16,16,eP),new eR(8,16,32,32,eP),new eR(8,16,128,128,eP),new eR(8,32,128,256,eP),new eR(32,128,258,1024,eP),new eR(32,258,258,4096,eP)],eF=e=>{e.window_size=2*e.w_size,ew(e.head),e.max_lazy_match=eI[e.level].max_lazy,e.good_match=eI[e.level].good_length,e.nice_match=eI[e.level].nice_length,e.max_chain_length=eI[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0};function ez(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ev,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ew(this.dyn_ltree),ew(this.dyn_dtree),ew(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ew(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ew(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let eB=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},eW=e=>{if(eB(e))return ey(e,el);e.total_in=e.total_out=0,e.data_type=em;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,G(t),eo},ej=e=>{let t=eW(e);return t===eo&&eF(e.state),t};var eH={deflateInit2:(e,t,n,i,r,o)=>{if(!e)return el;let s=1;if(t===ec&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==ev||i<8||i>15||t<0||t>9||o<0||o>ep||8===i&&1!==s)return ey(e,el);8===i&&(i=9);let l=new ez;return e.state=l,l.strm=e,l.status=42,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=o,l.method=n,ej(e)},deflateSetHeader:(e,t)=>eB(e)||2!==e.state.wrap?el:(e.state.gzhead=t,eo),deflate:(e,t)=>{if(eB(e)||t>er||t<0)return e?ey(e,el):el;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==ei)return ey(e,0===e.avail_out?eh:el);let i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ek(e),0===e.avail_out)return n.last_flush=-1,eo}else if(0===e.avail_in&&eb(t)<=eb(i)&&t!==ei)return ey(e,eh);if(666===n.status&&0!==e.avail_in)return ey(e,eh);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=ev+(n.w_bits-8<<4)<<8;if(t|=(n.strategy>=ed||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),eT(n,t+=31-t%31),0!==n.strstart&&(eT(n,e.adler>>>16),eT(n,65535&e.adler)),e.adler=1,n.status=113,ek(e),0!==n.pending)return n.last_flush=-1,eo}if(57===n.status){if(e.adler=0,eC(n,31),eC(n,139),eC(n,8),n.gzhead)eC(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),eC(n,255&n.gzhead.time),eC(n,n.gzhead.time>>8&255),eC(n,n.gzhead.time>>16&255),eC(n,n.gzhead.time>>24&255),eC(n,9===n.level?2:n.strategy>=ed||n.level<2?4:0),eC(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(eC(n,255&n.gzhead.extra.length),eC(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=K(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(eC(n,0),eC(n,0),eC(n,0),eC(n,0),eC(n,0),eC(n,9===n.level?2:n.strategy>=ed||n.level<2?4:0),eC(n,3),n.status=113,ek(e),0!==n.pending)return n.last_flush=-1,eo}if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=K(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,ek(e),0!==n.pending)return n.last_flush=-1,eo;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=K(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=K(e.adler,n.pending_buf,n.pending-i,i)),ek(e),0!==n.pending)return n.last_flush=-1,eo;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,eC(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>i&&(e.adler=K(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=K(e.adler,n.pending_buf,n.pending-i,i)),ek(e),0!==n.pending)return n.last_flush=-1,eo;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,eC(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>i&&(e.adler=K(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ek(e),0!==n.pending))return n.last_flush=-1,eo;eC(n,255&e.adler),eC(n,e.adler>>8&255),e.adler=0}if(n.status=113,ek(e),0!==n.pending)return n.last_flush=-1,eo}if(0!==e.avail_in||0!==n.lookahead||t!==ee&&666!==n.status){let i=0===n.level?eM(n,t):n.strategy===ed?eL(n,t):n.strategy===ef?eN(n,t):eI[n.level].func(n,t);if((3===i||4===i)&&(n.status=666),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),eo;if(2===i&&(t===et?Q(n):t!==er&&(Y(n,0,0,!1),t===en&&(ew(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ek(e),0===e.avail_out))return n.last_flush=-1,eo}return t!==ei?eo:n.wrap<=0?es:(2===n.wrap?(eC(n,255&e.adler),eC(n,e.adler>>8&255),eC(n,e.adler>>16&255),eC(n,e.adler>>24&255),eC(n,255&e.total_in),eC(n,e.total_in>>8&255),eC(n,e.total_in>>16&255),eC(n,e.total_in>>24&255)):(eT(n,e.adler>>>16),eT(n,65535&e.adler)),ek(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?eo:es)},deflateEnd:e=>{if(eB(e))return el;let t=e.state.status;return e.state=null,113===t?ey(e,ea):eo},deflateSetDictionary:(e,t)=>{let n=t.length;if(eB(e))return el;let i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return el;if(1===r&&(e.adler=U(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(ew(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}let o=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,eE(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do i.ins_h=ex(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++;while(--t)i.strstart=e,i.lookahead=2,eE(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=s,e.input=l,e.avail_in=o,i.wrap=r,eo}};let eV=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var eU={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)eV(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];n.set(r,i),i+=r.length}return n}};let e$=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){e$=!1}let eK=new Uint8Array(256);for(let e=0;e<256;e++)eK[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;eK[254]=eK[254]=1;let eq=(e,t)=>{if(t<65534&&e.subarray&&e$)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var eZ={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,r,o,s=e.length,l=0;for(r=0;r<s;r++)(64512&(n=e.charCodeAt(r)))==55296&&r+1<s&&(64512&(i=e.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),r++),l+=n<128?1:n<2048?2:n<65536?3:4;for(o=0,t=new Uint8Array(l),r=0;o<l;r++)(64512&(n=e.charCodeAt(r)))==55296&&r+1<s&&(64512&(i=e.charCodeAt(r+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},buf2string:(e,t)=>{let n,i;let r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let o=Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){o[i++]=t;continue}let s=eK[t];if(s>4){o[i++]=65533,n+=s-1;continue}for(t&=2===s?31:3===s?15:7;s>1&&n<r;)t=t<<6|63&e[n++],s--;if(s>1){o[i++]=65533;continue}t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}return eq(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+eK[e[n]]>t?n:t}},eG=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let eY=Object.prototype.toString,{Z_NO_FLUSH:eJ,Z_SYNC_FLUSH:eX,Z_FULL_FLUSH:eQ,Z_FINISH:e0,Z_OK:e1,Z_STREAM_END:e2,Z_DEFAULT_COMPRESSION:e5,Z_DEFAULT_STRATEGY:e6,Z_DEFLATED:e3}=Z;function e8(e){this.options=eU.assign({level:e5,method:e3,chunkSize:16384,windowBits:15,memLevel:8,strategy:e6},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eG,this.strm.avail_out=0;let n=eH.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==e1)throw Error(q[n]);if(t.header&&eH.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?eZ.string2buf(t.dictionary):"[object ArrayBuffer]"===eY.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=eH.deflateSetDictionary(this.strm,e))!==e1)throw Error(q[n]);this._dict_set=!0}}function e4(e,t){let n=new e8(t);if(n.push(e,!0),n.err)throw n.msg||q[n.err];return n.result}e8.prototype.push=function(e,t){let n,i;let r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(i=t===~~t?t:!0===t?e0:eJ,"string"==typeof e?r.input=eZ.string2buf(e):"[object ArrayBuffer]"===eY.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),(i===eX||i===eQ)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if((n=eH.deflate(r,i))===e2)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),n=eH.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===e1;if(0===r.avail_out){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(0===r.avail_in)break}return!0},e8.prototype.onData=function(e){this.chunks.push(e)},e8.prototype.onEnd=function(e){e===e1&&(this.result=eU.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var e9=function(e,t){let n,i,r,o,s,l,a,h,c,u,d,f,p,g,m,v,y,b,w,_,x,k,S,C;let T=e.state;n=e.next_in,S=e.input,i=n+(e.avail_in-5),r=e.next_out,C=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),l=T.dmax,a=T.wsize,h=T.whave,c=T.wnext,u=T.window,d=T.hold,f=T.bits,p=T.lencode,g=T.distcode,m=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;r:do for(f<15&&(d+=S[n++]<<f,f+=8,d+=S[n++]<<f,f+=8),y=p[d&m];;){if(d>>>=b=y>>>24,f-=b,0==(b=y>>>16&255))C[r++]=65535&y;else if(16&b)for(w=65535&y,(b&=15)&&(f<b&&(d+=S[n++]<<f,f+=8),w+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=S[n++]<<f,f+=8,d+=S[n++]<<f,f+=8),y=g[d&v];;){if(d>>>=b=y>>>24,f-=b,16&(b=y>>>16&255)){if(_=65535&y,f<(b&=15)&&(d+=S[n++]<<f,(f+=8)<b&&(d+=S[n++]<<f,f+=8)),(_+=d&(1<<b)-1)>l){e.msg="invalid distance too far back",T.mode=16209;break r}if(d>>>=b,f-=b,_>(b=r-o)){if((b=_-b)>h&&T.sane){e.msg="invalid distance too far back",T.mode=16209;break r}if(x=0,k=u,0===c){if(x+=a-b,b<w){w-=b;do C[r++]=u[x++];while(--b)x=r-_,k=C}}else if(c<b){if(x+=a+c-b,(b-=c)<w){w-=b;do C[r++]=u[x++];while(--b)if(x=0,c<w){w-=b=c;do C[r++]=u[x++];while(--b)x=r-_,k=C}}}else if(x+=c-b,b<w){w-=b;do C[r++]=u[x++];while(--b)x=r-_,k=C}for(;w>2;)C[r++]=k[x++],C[r++]=k[x++],C[r++]=k[x++],w-=3;w&&(C[r++]=k[x++],w>1&&(C[r++]=k[x++]))}else{x=r-_;do C[r++]=C[x++],C[r++]=C[x++],C[r++]=C[x++],w-=3;while(w>2)w&&(C[r++]=C[x++],w>1&&(C[r++]=C[x++]))}}else if((64&b)==0){y=g[(65535&y)+(d&(1<<b)-1)];continue}else{e.msg="invalid distance code",T.mode=16209;break r}break}else if((64&b)==0){y=p[(65535&y)+(d&(1<<b)-1)];continue}else if(32&b){T.mode=16191;break r}else{e.msg="invalid literal/length code",T.mode=16209;break r}break}while(n<i&&r<s)n-=w=f>>3,f-=w<<3,d&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=r<s?257+(s-r):257-(r-s),T.hold=d,T.bits=f};let e7=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ti=(e,t,n,i,r,o,s,l)=>{let a,h,c,u,d,f,p,g,m;let v=l.bits,y=0,b=0,w=0,_=0,x=0,k=0,S=0,C=0,T=0,A=0,O=null,E=new Uint16Array(16),M=new Uint16Array(16),D=null;for(y=0;y<=15;y++)E[y]=0;for(b=0;b<i;b++)E[t[n+b]]++;for(_=15,x=v;_>=1&&0===E[_];_--);if(x>_&&(x=_),0===_)return r[o++]=0x1400000,r[o++]=0x1400000,l.bits=1,0;for(w=1;w<_&&0===E[w];w++);for(x<w&&(x=w),C=1,y=1;y<=15;y++)if(C<<=1,(C-=E[y])<0)return -1;if(C>0&&(0===e||1!==_))return -1;for(y=1,M[1]=0;y<15;y++)M[y+1]=M[y]+E[y];for(b=0;b<i;b++)0!==t[n+b]&&(s[M[t[n+b]]++]=b);if(0===e?(O=D=s,f=20):1===e?(O=e7,D=te,f=257):(O=tt,D=tn,f=0),A=0,b=0,y=w,d=o,k=x,S=0,c=-1,u=(T=1<<x)-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){p=y-S,s[b]+1<f?(g=0,m=s[b]):s[b]>=f?(g=D[s[b]-f],m=O[s[b]-f]):(g=96,m=0),a=1<<y-S,w=h=1<<k;do r[d+(A>>S)+(h-=a)]=p<<24|g<<16|m|0;while(0!==h)for(a=1<<y-1;A&a;)a>>=1;if(0!==a?(A&=a-1,A+=a):A=0,b++,0==--E[y]){if(y===_)break;y=t[n+s[b]]}if(y>x&&(A&u)!==c){for(0===S&&(S=x),d+=w,C=1<<(k=y-S);k+S<_&&!((C-=E[k+S])<=0);)k++,C<<=1;if(T+=1<<k,1===e&&T>852||2===e&&T>592)return 1;r[c=A&u]=x<<24|k<<16|d-o|0}}return 0!==A&&(r[d+A]=y-S<<24|4194304),l.bits=x,0};let{Z_FINISH:tr,Z_BLOCK:to,Z_TREES:ts,Z_OK:tl,Z_STREAM_END:ta,Z_NEED_DICT:th,Z_STREAM_ERROR:tc,Z_DATA_ERROR:tu,Z_MEM_ERROR:td,Z_BUF_ERROR:tf,Z_DEFLATED:tp}=Z,tg=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function tm(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let tv=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},ty=e=>{if(tv(e))return tc;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tl},tb=e=>{if(tv(e))return tc;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ty(e)},tw=(e,t)=>{let n;if(tv(e))return tc;let i=e.state;return(t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?tc:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,tb(e))},t_=!0,tx=e=>{if(t_){s=new Int32Array(512),l=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ti(1,e.lens,0,288,s,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ti(2,e.lens,0,32,l,0,e.work,{bits:5}),t_=!1}e.lencode=s,e.lenbits=9,e.distcode=l,e.distbits=5},tk=(e,t,n,i)=>{let r;let o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),o.window.set(t.subarray(n-i,n-i+r),o.wnext),(i-=r)?(o.window.set(t.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var tS={inflateReset:tb,inflateInit2:(e,t)=>{if(!e)return tc;let n=new tm;e.state=n,n.strm=e,n.window=null,n.mode=16180;let i=tw(e,t);return i!==tl&&(e.state=null),i},inflate:(e,t)=>{let n,i,r,o,s,l,a,h,c,u,d,f,p,g,m,v,y,b,w,_,x,k,S,C;let T=0,A=new Uint8Array(4),O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tv(e)||!e.output||!e.input&&0!==e.avail_in)return tc;16191===(n=e.state).mode&&(n.mode=16192),s=e.next_out,r=e.output,a=e.avail_out,o=e.next_in,i=e.input,l=e.avail_in,h=n.hold,c=n.bits,u=l,d=a,k=tl;o:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;c<16;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(2&n.wrap&&35615===h){0===n.wbits&&(n.wbits=15),n.check=0,A[0]=255&h,A[1]=h>>>8&255,n.check=K(n.check,A,2,0),h=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&h)!==tp){e.msg="unknown compression method",n.mode=16209;break}if(h>>>=4,c-=4,x=(15&h)+8,0===n.wbits&&(n.wbits=x),x>15||x>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&h?16189:16191,h=0,c=0;break;case 16181:for(;c<16;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(n.flags=h,(255&n.flags)!==tp){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&4&n.wrap&&(A[0]=255&h,A[1]=h>>>8&255,n.check=K(n.check,A,2,0)),h=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}n.head&&(n.head.time=h),512&n.flags&&4&n.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,n.check=K(n.check,A,4,0)),h=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&4&n.wrap&&(A[0]=255&h,A[1]=h>>>8&255,n.check=K(n.check,A,2,0)),h=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&4&n.wrap&&(A[0]=255&h,A[1]=h>>>8&255,n.check=K(n.check,A,2,0)),h=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((f=n.length)>l&&(f=l),f&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+f),x)),512&n.flags&&4&n.wrap&&(n.check=K(n.check,i,f,o)),l-=f,o+=f,n.length-=f),n.length))break o;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===l)break o;f=0;do x=i[o+f++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x));while(x&&f<l)if(512&n.flags&&4&n.wrap&&(n.check=K(n.check,i,f,o)),l-=f,o+=f,x)break o}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===l)break o;f=0;do x=i[o+f++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x));while(x&&f<l)if(512&n.flags&&4&n.wrap&&(n.check=K(n.check,i,f,o)),l-=f,o+=f,x)break o}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(4&n.wrap&&h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}h=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;c<32;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}e.adler=n.check=tg(h),h=0,c=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=s,e.avail_out=a,e.next_in=o,e.avail_in=l,n.hold=h,n.bits=c,th;e.adler=n.check=1,n.mode=16191;case 16191:if(t===to||t===ts)break o;case 16192:if(n.last){h>>>=7&c,c-=7&c,n.mode=16206;break}for(;c<3;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}switch(n.last=1&h,c-=1,3&(h>>>=1)){case 0:n.mode=16193;break;case 1:if(tx(n),n.mode=16199,t===ts){h>>>=2,c-=2;break o}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}h>>>=2,c-=2;break;case 16193:for(h>>>=7&c,c-=7&c;c<32;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&h,h=0,c=0,n.mode=16194,t===ts)break o;case 16194:n.mode=16195;case 16195:if(f=n.length){if(f>l&&(f=l),f>a&&(f=a),0===f)break o;r.set(i.subarray(o,o+f),s),l-=f,o+=f,a-=f,s+=f,n.length-=f;break}n.mode=16191;break;case 16196:for(;c<14;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(n.nlen=(31&h)+257,h>>>=5,c-=5,n.ndist=(31&h)+1,h>>>=5,c-=5,n.ncode=(15&h)+4,h>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}n.lens[O[n.have++]]=7&h,h>>>=3,c-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},k=ti(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,k){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(T=n.lencode[h&(1<<n.lenbits)-1])>>>24,v=T>>>16&255,y=65535&T,!(m<=c);){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(y<16)h>>>=m,c-=m,n.lens[n.have++]=y;else{if(16===y){for(C=m+2;c<C;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(h>>>=m,c-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}x=n.lens[n.have-1],f=3+(3&h),h>>>=2,c-=2}else if(17===y){for(C=m+3;c<C;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}h>>>=m,c-=m,x=0,f=3+(7&h),h>>>=3,c-=3}else{for(C=m+7;c<C;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}h>>>=m,c-=m,x=0,f=11+(127&h),h>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;f--;)n.lens[n.have++]=x}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,S={bits:n.lenbits},k=ti(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,k){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},k=ti(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,k){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===ts)break o;case 16199:n.mode=16200;case 16200:if(l>=6&&a>=258){e.next_out=s,e.avail_out=a,e.next_in=o,e.avail_in=l,n.hold=h,n.bits=c,e9(e,d),s=e.next_out,r=e.output,a=e.avail_out,o=e.next_in,i=e.input,l=e.avail_in,h=n.hold,c=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;m=(T=n.lencode[h&(1<<n.lenbits)-1])>>>24,v=T>>>16&255,y=65535&T,!(m<=c);){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(v&&(240&v)==0){for(b=m,w=v,_=y;m=(T=n.lencode[_+((h&(1<<b+w)-1)>>b)])>>>24,v=T>>>16&255,y=65535&T,!(b+m<=c);){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}h>>>=b,c-=b,n.back+=b}if(h>>>=m,c-=m,n.back+=m,n.length=y,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=16191;break}if(64&v){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;c<C;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(T=n.distcode[h&(1<<n.distbits)-1])>>>24,v=T>>>16&255,y=65535&T,!(m<=c);){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if((240&v)==0){for(b=m,w=v,_=y;m=(T=n.distcode[_+((h&(1<<b+w)-1)>>b)])>>>24,v=T>>>16&255,y=65535&T,!(b+m<=c);){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}h>>>=b,c-=b,n.back+=b}if(h>>>=m,c-=m,n.back+=m,64&v){e.msg="invalid distance code",n.mode=16209;break}n.offset=y,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;c<C;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===a)break o;if(f=d-a,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=r,p=s-n.offset,f=n.length;f>a&&(f=a),a-=f,n.length-=f;do r[s++]=g[p++];while(--f)0===n.length&&(n.mode=16200);break;case 16205:if(0===a)break o;r[s++]=n.length,a--,n.mode=16200;break;case 16206:if(n.wrap){for(;c<32;){if(0===l)break o;l--,h|=i[o++]<<c,c+=8}if(d-=a,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?K(n.check,r,d,s-d):U(n.check,r,d,s-d)),d=a,4&n.wrap&&(n.flags?h:tg(h))!==n.check){e.msg="incorrect data check",n.mode=16209;break}h=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===l)break o;l--,h+=i[o++]<<c,c+=8}if(4&n.wrap&&h!==(0xffffffff&n.total)){e.msg="incorrect length check",n.mode=16209;break}h=0,c=0}n.mode=16208;case 16208:k=ta;break o;case 16209:k=tu;break o;case 16210:return td;default:return tc}return e.next_out=s,e.avail_out=a,e.next_in=o,e.avail_in=l,n.hold=h,n.bits=c,(n.wsize||d!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==tr))&&tk(e,e.output,e.next_out,d-e.avail_out),u-=e.avail_in,d-=e.avail_out,e.total_in+=u,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?K(n.check,r,d,e.next_out-d):U(n.check,r,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(16191===n.mode?128:0)+(16199===n.mode||16194===n.mode?256:0),(0===u&&0===d||t===tr)&&k===tl&&(k=tf),k},inflateEnd:e=>{if(tv(e))return tc;let t=e.state;return t.window&&(t.window=null),e.state=null,tl},inflateGetHeader:(e,t)=>{if(tv(e))return tc;let n=e.state;return(2&n.wrap)==0?tc:(n.head=t,t.done=!1,tl)},inflateSetDictionary:(e,t)=>{let n;let i=t.length;return tv(e)||0!==(n=e.state).wrap&&16190!==n.mode?tc:16190===n.mode&&U(1,t,i,0)!==n.check?tu:tk(e,t,i,i)?(n.mode=16210,td):(n.havedict=1,tl)}},tC=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tT=Object.prototype.toString,{Z_NO_FLUSH:tA,Z_FINISH:tO,Z_OK:tE,Z_STREAM_END:tM,Z_NEED_DICT:tD,Z_STREAM_ERROR:tP,Z_DATA_ERROR:tN,Z_MEM_ERROR:tL}=Z;function tR(e){this.options=eU.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eG,this.strm.avail_out=0;let n=tS.inflateInit2(this.strm,t.windowBits);if(n!==tE||(this.header=new tC,tS.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=eZ.string2buf(t.dictionary):"[object ArrayBuffer]"===tT.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=tS.inflateSetDictionary(this.strm,t.dictionary))!==tE)))throw Error(q[n])}function tI(e,t){let n=new tR(t);if(n.push(e),n.err)throw n.msg||q[n.err];return n.result}tR.prototype.push=function(e,t){let n,i,r;let o=this.strm,s=this.options.chunkSize,l=this.options.dictionary;if(this.ended)return!1;for(i=t===~~t?t:!0===t?tO:tA,"[object ArrayBuffer]"===tT.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(s),o.next_out=0,o.avail_out=s),(n=tS.inflate(o,i))===tD&&l&&((n=tS.inflateSetDictionary(o,l))===tE?n=tS.inflate(o,i):n===tN&&(n=tD));o.avail_in>0&&n===tM&&o.state.wrap>0&&0!==e[o.next_in];)tS.inflateReset(o),n=tS.inflate(o,i);switch(n){case tP:case tN:case tD:case tL:return this.onEnd(n),this.ended=!0,!1}if(r=o.avail_out,o.next_out&&(0===o.avail_out||n===tM)){if("string"===this.options.to){let e=eZ.utf8border(o.output,o.next_out),t=o.next_out-e,n=eZ.buf2string(o.output,e);o.next_out=t,o.avail_out=s-t,t&&o.output.set(o.output.subarray(e,e+t),0),this.onData(n)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out))}if(n!==tE||0!==r){if(n===tM)return n=tS.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},tR.prototype.onData=function(e){this.chunks.push(e)},tR.prototype.onEnd=function(e){e===tE&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=eU.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:tF,deflate:tz,deflateRaw:tB,gzip:tW}={Deflate:e8,deflate:e4,deflateRaw:function(e,t){return(t=t||{}).raw=!0,e4(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,e4(e,t)},constants:Z},{Inflate:tj,inflate:tH,inflateRaw:tV,ungzip:tU}={Inflate:tR,inflate:tI,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tI(e,t)},ungzip:tI,constants:Z};var t$=tV},56636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>R,__assign:()=>o,__asyncDelegator:()=>C,__asyncGenerator:()=>S,__asyncValues:()=>T,__await:()=>k,__awaiter:()=>p,__classPrivateFieldGet:()=>P,__classPrivateFieldIn:()=>L,__classPrivateFieldSet:()=>N,__createBinding:()=>m,__decorate:()=>l,__disposeResources:()=>F,__esDecorate:()=>h,__exportStar:()=>v,__extends:()=>r,__generator:()=>g,__importDefault:()=>D,__importStar:()=>M,__makeTemplateObject:()=>A,__metadata:()=>f,__param:()=>a,__propKey:()=>u,__read:()=>b,__rest:()=>s,__rewriteRelativeImportExtension:()=>z,__runInitializers:()=>c,__setFunctionName:()=>d,__spread:()=>w,__spreadArray:()=>x,__spreadArrays:()=>_,__values:()=>y,default:()=>B});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function l(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function a(e,t){return function(n,i){t(n,i,e)}}function h(e,t,n,i,r,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var l,a=i.kind,h="getter"===a?"get":"setter"===a?"set":"value",c=!t&&e?i.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,f=n.length-1;f>=0;f--){var p={};for(var g in i)p[g]="access"===g?{}:i[g];for(var g in i.access)p.access[g]=i.access[g];p.addInitializer=function(e){if(d)throw TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,n[f])("accessor"===a?{get:u.get,set:u.set}:u[h],p);if("accessor"===a){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw TypeError("Object expected");(l=s(m.get))&&(u.get=l),(l=s(m.set))&&(u.set=l),(l=s(m.init))&&r.unshift(l)}else(l=s(m))&&("field"===a?r.unshift(l):u[h]=l)}c&&Object.defineProperty(c,i.name,u),d=!0}function c(e,t,n){for(var i=arguments.length>2,r=0;r<t.length;r++)n=i?t[r].call(e,n):t[r].call(e);return i?n:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{a(i.next(e))}catch(e){o(e)}}function l(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,l)}a((i=i.apply(e,t||[])).next())})}function g(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(a){return function(l){if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&l[0]?i.return:l[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,l[1])).done)return r;switch(i=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],i=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}}var m=Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};function v(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||m(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,r++)i[r]=o[s];return i}function x(e,t,n){if(n||2==arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function S(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,i){o.push([e,t,n,i])>1||l(e,t)})},t&&(i[e]=t(i[e])))}function l(e,t){try{var n;(n=r[e](t)).value instanceof k?Promise.resolve(n.value.v).then(a,h):c(o[0][2],n)}catch(e){c(o[0][3],e)}}function a(e){l("next",e)}function h(e){l("throw",e)}function c(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}function C(e){var t,n;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,r){t[i]=e[i]?function(t){return(n=!n)?{value:k(e[i](t)),done:!1}:r?r(t):t}:r}}function T(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,r){!function(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)}(i,r,(t=e[n](t)).done,t.value)})}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},E=function(e){return(E=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)};function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=E(e),i=0;i<n.length;i++)"default"!==n[i]&&m(t,e,n[i]);return O(t,e),t}function D(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n,i){if("a"===n&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function N(e,t,n,i,r){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n}function L(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,n){if(null!=t){var i,r;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(n){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(r=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var I="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var i=Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function F(e){function t(t){e.error=e.hasError?new I(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,i=0;return function r(){for(;n=e.stack.pop();)try{if(!n.async&&1===i)return i=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(r,function(e){return t(e),r()})}else i|=1}catch(e){t(e)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function z(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,i,r,o){return n?t?".jsx":".js":!i||r&&o?i+r+"."+o.toLowerCase()+"js":e}):e}let B={__extends:r,__assign:o,__rest:s,__decorate:l,__param:a,__esDecorate:h,__runInitializers:c,__propKey:u,__setFunctionName:d,__metadata:f,__awaiter:p,__generator:g,__createBinding:m,__exportStar:v,__values:y,__read:b,__spread:w,__spreadArrays:_,__spreadArray:x,__await:k,__asyncGenerator:S,__asyncDelegator:C,__asyncValues:T,__makeTemplateObject:A,__importStar:M,__importDefault:D,__classPrivateFieldGet:P,__classPrivateFieldSet:N,__classPrivateFieldIn:L,__addDisposableResource:R,__disposeResources:F,__rewriteRelativeImportExtension:z}}}]);

//# debugId=07c58035-66a0-5db4-814c-0295a827352e

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/74e8aeee361c7f8e1e8237f5fd8640329e7560fc/vendor-75fe8565fe6afb0e.min.js.map