"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="615b6474-9d29-5034-ad0f-7b53a8f32dfa")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2483],{258539:(e,t,n)=>{n.d(t,{W:()=>u});var i=n(848318),r=n(301168),a=n(410725),o=n(748008),l=n(182317),s=n(337752),d=n(55116);function u(e=!1){let t=(0,r.wA)(),n=i.useMemo(()=>(0,l.g)(),[]),c=(0,a.Rs)(d.gvX,{cacheNonce:n});i.useEffect(()=>{if("loaded"!==c.status)return;let n=(0,o.oA)(c.data.currentUser.notificationExperimentInfo);n&&("exp_notification_catfile"===n.experimentName||"exp_notification_catfic"===n.experimentName)&&("prompt_to_opt_in"===n.type?t((e?s.hU:s.ZI)({userId:n.userId,fileKey:n.fileKey,experimentName:n.experimentName})):t(s.EJ({userId:n.userId,fileKey:n.fileKey,preference:n.preference})))},[t,c,e])}},408742:(e,t,n)=>{n.d(t,{_:()=>u});var i=n(848318),r=n(186606),a=n(720522),o=n(218010),l=n(531288),s=n(601167),d=n(733644);let u=i.memo(function(e){let{nodeId:t}=e,n=i.useRef(null),a=i.useRef(null),o=(0,s._X)({subscribeToUpdates_expensive:!0});return i.useEffect(()=>{let e=(0,l.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){r.glU.removeLoadingEmbed(t);return}a.current=e.position,m(n,o,a)}),i=e.currentNodePosition[t]?.position;return i?(a.current=i,m(n,o,a)):r.glU.removeLoadingEmbed(t),()=>{(0,l.lB)(`loading-embed-${t}`)}},[t,o]),i.createElement("div",{ref:n},i.createElement(c,null))});function c(){return i.createElement("span",{className:"loading_embed_overlay--root--UKqJ8"},i.createElement(a.B,{svg:d.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0}))}function m(e,t,n){if(!e.current||!t||!n.current)return;let i=e.current,r=n.current,a=(0,s.Yb)(t,r),l=28*t.zoomScale;i.style.transform=`translate(${a.x+(a.width-l)/2+t.x}px, ${a.y+(a.height*o.Ao/o.RN-l)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,i.style.transformOrigin="top left",i.style.position="absolute"}},648346:(e,t,n)=>{n.d(t,{xu:()=>i});let i="embedded-prototype-"},397157:(e,t,n)=>{n.d(t,{Pm:()=>i,aF:()=>a});var i=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(i||{}),r=(e=>(e.Light="light",e.Dark="dark",e))(r||{});function a(e){let t,n;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}n="LIGHT"===t?"light":"dark";let i="true"===e.hideBackground;return i&&(n=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(n)),{theme:t,preferredTokenTheme:n,transparentMode:i}}},173811:(e,t,n)=>{n.d(t,{DR:()=>D,E$:()=>L,Wd:()=>U,gD:()=>M,lu:()=>R,wL:()=>A});var i=n(848318),r=n(301168),a=n(773511),o=n(12559),l=n(186606),s=n(320953),d=n(553547),u=n(768618),c=n(580494),m=n(536384),p=n.n(m),f=n(140357),E=n(297638),g=n(967688),v=n(952039),y=n(113752),b=n(899386),I=n(809969),_=n(209595),S=n(125761),h=n(554326),N=n(648346),P=n(385645),w=n(340204),T=n(54462),x=n(708618),O=n(503596);function D(e){let{nodeId:t,setConfigData:n,isReadOnly:a}=e,{isEmbedActive:o,setActiveEmbed:d}=(0,w._)(t),c=!a,m=(0,r.wA)(),p=(0,h.J2)(l.Ez5.flappData().embeddablePrototypeIdPendingInsertion),[f,E]=(0,i.useState)(),I=(0,i.useMemo)(()=>{let t=M(e.configData);if(!t)return;let n=b.hY[t.presetIdentifier],i=t.rotation===l.xOL.CCW_90;return(i?n.imageSize.y:n.imageSize.x)/(i?n.imageSize.x:n.imageSize.y)},[e.configData]);(0,i.useEffect)(()=>{if(!c)return;let e=(0,u.UN)().get(t),n=I??f;e&&n&&s.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,i=Math.floor(t/n);0===e.size.x&&(e.x-=t/2,e.y-=i/2),e.resizeWithConstraints(t,i),e.proportionsConstrained=!0})},[t,I,f,c]),(0,i.useEffect)(()=>{t===p&&(m(v.F.enqueue({type:"slides-embedded-prototype",message:(0,g.t)("slides.inserting_embed.visual_bell"),icon:y.zX.SPINNER,timeoutOverride:1/0})),d(),setTimeout(()=>{t===l.Ez5.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&l.oHM.embeddablePrototypeLoadFailed()},3e4))},[t,p,m,d]),(0,i.useEffect)(()=>{let e=e=>{if(e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==N.xu+t)return;let i=e.data;if("EMBED_PROTO_ASPECT_RATIO"===i.type&&i.data.aspectRatio&&(E(i.data.aspectRatio),t===p&&l.oHM?.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===i.type){let e=i.data.device;c&&e?s.l7.system("set-embed-device-frame-config-data",()=>{n("deviceFrameShown",""!==e.presetIdentifier&&"PRESET"===e.type?"true":"false"),n("deviceFramePreset",e.presetIdentifier),n("deviceFrameRotation",e.rotation)}):c&&s.l7.system("set-embed-device-frame-config-data",()=>{n("deviceFrameShown","false"),n("deviceFramePreset",""),n("deviceFrameRotation","NONE")})}"EMBED_PROTO_FILE_METADATA"===i.type&&c&&s.l7.system("embed-file-metatada",()=>{n("fileName",i.data.fileName),n("pageName",i.data.pageName),i.data.activeStartingPointNodeId&&n("activeStartingPointNodeId",i.data.activeStartingPointNodeId),i.data.startingPointsData&&n("startingPointsData",JSON.stringify(i.data.startingPointsData))})};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,n,m,p,c]);let _=(0,w.s)(t)||!o;return i.createElement(C,{...e,isActive:o,setActive:d,disablePointerEvents:!_})}function L(e){let t=(0,_.mr)(),n=(0,f.hk)(),r=e.nodeId,[a,o]=(0,i.useState)(n?.isActiveSlidesEmbeddedPrototype(r)||!1);(0,f.O5)(n,"activeSlidesPrototypeEmbedChange",e=>{(0,c.k)().slides_iframe_embedded_prototypes_improvements||o(e===r)}),(0,f.O5)(n,"embeddedPrototypeDataChange",e=>{if(!(0,c.k)().slides_iframe_embedded_prototypes_improvements)return;let t=!1;for(let n of e)if(d.dI(n.nodeId)===r){t=!0;break}o(t)});let l=(0,i.useCallback)(e=>{t.isAudienceViewPopout?(0,T.o)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):n?.setActiveSlidesEmbeddedPrototype(e)},[n,t]);return i.createElement(C,{...e,isActive:a,setActive:l})}function C({configData:e,nodeId:t,setConfigData:n,isViewer:r,isActive:a,setActive:o,disablePointerEvents:l,invalidateThumbnail:s}){let d=(0,f.hk)(),u=M(e),m=i.useCallback(e=>{if(t!==e.nodeId)return;let n=k(t);n&&!d?.isPresenterSession()&&n.contentWindow?.postMessage({type:"SET_OBSERVING_SESSION_ID",data:{sessionId:null!=e.presenterSessionId?e.presenterSessionId:-1}},"*")},[t,d]);(0,f.O5)(d,"embeddedPrototypeChange",m);let p=i.useCallback(e=>{let n=k(t);n?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,i.useEffect)(()=>{e.activeStartingPointNodeId&&p(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,p]),(0,i.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==N.xu+t||!d||"EMBEDDED_PROTOTYPE_SESSION_ID"!==e.data.type||d.setEmbeddedPrototypeSession(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[d,t,n,r]),(0,i.useEffect)(()=>()=>{(0,c.k)().slides_iframe_embedded_prototypes_improvements||d?.setEmbeddedPrototypeSession(t,-1)},[d,t]),i.createElement(A,{deviceFrame:u,invalidateThumbnail:s},i.createElement("div",{className:E.s.hFull.wFull.$,style:{pointerEvents:l?"none":"auto"}},a&&e.url?i.createElement(F,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!a&&o?i.createElement(R,{isViewer:r,onClick:()=>o(t)}):null))}let R=i.memo(({isViewer:e,onClick:t})=>e?i.createElement(a.E,{className:p()(O.kg,E.s.cursorPointer.$),onClick:t},i.createElement(o.l,{className:O.uZ})):i.createElement("div",{className:O.kg},i.createElement(o.l,{className:p()(O.uZ,E.s.cursorPointer.$),onClick:t})));function A({deviceFrame:e,children:t,invalidateThumbnail:n}){let r=e?.rotation===l.xOL.CCW_90?{x:e?.size.y??$.size.y,y:e?.size.x??$.size.x}:{x:e?.size.x??$.size.x,y:e?.size.y??$.size.y};return i.createElement("div",{className:p()(O.kL)},i.createElement(P._,{initialViewerSize:r,isDeviceFrameShown:null!=e&&e.type===l.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:n},t))}function F({baseUrl:e,nodeId:t,activeStartingNodeId:n}){let[r,a]=(0,i.useState)(n),o=function(e,t,n){let i;if(!e)return null;try{i=new URL(e)}catch(e){return null}let r=i.searchParams;return(0,x.e)(r,"bare-ui","1"),(0,x.e)(r,"scaling","fit-width"),(0,x.e)(r,"content-scaling","fixed"),(0,x.e)(r,"needsAlpha","1"),(0,x.e)(r,"inline-viewer","1"),(0,x.e)(r,"disable-default-keyboard-nav","1"),t&&(0,x.e)(r,"fuid",t),n&&(0,x.e)(r,"starting-point-node-id",n),i}(e,(0,S.TA)(),r);return i.createElement("div",{className:O.pU},i.createElement("iframe",{id:`${N.xu}${t}`,className:O.pU,loading:"eager",src:o?.toString(),title:(0,g.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"}))}function k(e){return document.getElementById(N.xu+e)}let z=e=>{switch(e){case"NONE":default:return l.xOL.NONE;case"CCW_90":return l.xOL.CCW_90}};function U(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function M(e){return U(e)?function(e){let t=b.hY[e.deviceFramePreset??""];return t?{type:l.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:z(e.deviceFrameRotation)}:null}(e):null}let B=I.eo[0],$={type:l.XQq.PRESET,size:B.framePresetSize,presetIdentifier:B.presetIdentifier,rotation:l.xOL.NONE}},521e3:(e,t,n)=>{n.d(t,{u:()=>w});var i=n(848318),r=n(891627),a=n(186606),o=n(320953),l=n(768618),s=n(580494),d=n(127974),u=n(674128),c=n.n(u),m=n(813321),p=n(989232),f=n(238462),E=n(439952),g=n(531288),v=n(859480),y=n(601167),b=n(355755),I=n(730143),_=n(554326),S=n(880801),h=n(619534),N=n(185006),P=n(846751);function w(){let e=(0,y._X)({subscribeToUpdates_expensive:!0}),t=(0,b.p8)("isReadOnly"),n=(0,b.p8)("topLevelMode")===a.lyf.HISTORY,o=(0,d.k9)(()=>e,[e]),l=document.getElementById("fullscreen-root");if(!l)return null;let s=l.querySelectorAll(".view.container-view");if(0===s.length)return null;let u=s[s.length-1];return u?(0,r.createPortal)(i.createElement(T,{viewportInfo:o,isReadOnly:t||n}),u):null}function T({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:n}){let r=(0,i.useCallback)((e,t)=>{let n=(0,l.UN)().get(e.nodeId),i=n?.containingSlideId,r=n?.containingCanvas;if(n&&e.position&&i)return{guid:e.nodeId,slideId:i,pageId:r,position:t,type:n.interactiveSlideElementType}},[]),o=(0,_.J2)(a.Ez5.flappData().nodeIds),s=(0,g.tB)("Flapps",o,r,{useFlushSyncExpensive:!0}),u=(0,_.J2)(a.Ez5.singleSlideView().focusedNodeId),c=a.Ez5.singleSlideView().isFocusedNodeViewFocused(),m=(0,v.dh)(),p=(0,d.k9)(()=>Object.values(s).filter(e=>e.pageId===m&&(!c||c&&e.slideId===u)),[s,c,u,m]);return(0,h.wj)(S.JT.BOARD_TO_DECK).state===h.qy.RUNNING?null:i.createElement(i.Fragment,null,p.map(r=>i.createElement(x,{key:r.guid,element:r,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:n})))}let x=i.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:n,isReadOnly:r})=>{let o=(0,_.J2)(a.Ez5.flappData().nodeThumbnailEditCount).get(e.guid)??0,[d,u]=(0,i.useState)(0),c=(0,i.useCallback)(()=>u(e=>e+1),[]),[m,p]=(0,i.useState)(null);if(!e||!e.position||!t)return i.createElement(i.Fragment,null);let f=(0,l.UN)().get(e.guid);if(!f)return null;let E=(0,y.Yb)(t,e.position),g="ALIGNMENT"===e.type||"POLL"===e.type||"FACEPILE"===e.type||"EMBED"===e.type&&!(0,s.k)().slides_iframe_embedded_prototypes_improvements;return i.createElement("div",{title:f.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${E.x}px, ${E.y}px) rotate(${e.position.angle}deg) scale(${t.zoomScale})`,transformOrigin:"top left",pointerEvents:r?"none":"auto"}},i.createElement("div",{className:P.U,ref:p},i.createElement(O,{element:e,shouldRenderMobileFlapp:n,isReadOnly:r,invalidateThumbnail:c})),m&&g&&i.createElement(D,{nodeId:e.guid,editCount:o,flappDomElement:m,isReadOnly:r,manualThumbnailInvalidationCount:d}))});function O({element:e,shouldRenderMobileFlapp:t,isReadOnly:n,invalidateThumbnail:r}){if(null===e.type)return null;let{EditorFlapp:a}=t?(0,N.v)(e.type):(0,N.Z)(e.type);return i.createElement(a,{nodeId:e.guid,isReadOnly:n,invalidateThumbnail:r})}function D({nodeId:e,editCount:t,manualThumbnailInvalidationCount:n,flappDomElement:r,isReadOnly:a}){let[s]=(0,m.A)(t,500),[d]=(0,m.A)(n,500),u=(0,I.tS)();return i.useEffect(()=>{var t;if(a)return;let n=(0,l.UN)().get(e);if(!n||"INTERACTIVE_SLIDE_ELEMENT"!==n.type)return;let i=f.lQ;return t=()=>{i=function(e,t,n){let i=t.interactiveSlideElementType,r=t.guid,a=!1;return c().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,E.UD)(new Uint8Array(e),"image/png",`${r}thumbnail`)}).then(e=>{t.isAlive&&!a&&o.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,p.trackEvent)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:r,flappType:i,fileKey:n},{forwardToDatadog:!0})}),()=>{a=!0}}(r,n,u??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),i},[a,e,s,d,r,u]),i.createElement(i.Fragment,null)}}}]);

//# debugId=615b6474-9d29-5034-ad0f-7b53a8f32dfa

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/d28167bb5d5fe13c9f79c301c163810b0d4675c3/2483-c2e0723115960b9e.min.js.map