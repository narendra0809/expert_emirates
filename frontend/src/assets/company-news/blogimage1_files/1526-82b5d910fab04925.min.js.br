"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0e005bd6-3af1-5d3a-b2f7-eb73afebb892")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1526],{933480:(e,t,a)=>{a.d(t,{F:()=>l,HR:()=>c,Io:()=>i,Pn:()=>_,V_:()=>o,dK:()=>d,nM:()=>r,rH:()=>s,sQ:()=>n,ue:()=>m});let o="on_canvas_pill--pillContainer--jvRgr",l="on_canvas_pill--centered--iOUXI",i="on_canvas_pill--pill--fSukI",n="on_canvas_pill--bottom--gwvqA",s="on_canvas_pill--node--xgavI",c="on_canvas_pill--symbol--3Kz9f",r="on_canvas_pill--row--I6QoB",_="on_canvas_pill--pillLargeBorderRadius--9uWP9",d="on_canvas_pill--pillText--ts0Xi ellipsis--ellipsis--Tjyfa",m="on_canvas_pill--iconNodeType--0xm99"},950342:(e,t,a)=>{a.d(t,{N:()=>s,S:()=>c});var o=a(848318),l=a(999667);let i=(0,l.eU)(0),n=(0,l.eU)(e=>e(i)>0);function s({isVisible:e}){let t=(0,l.Xr)(i);(0,o.useLayoutEffect)(()=>{if(e)return t(e=>e+1),()=>t(e=>Math.max(0,e-1))},[e,t])}function c(){return(0,l.md)(n)}},126072:(e,t,a)=>{a.d(t,{d:()=>r});var o=a(848318),l=a(363367),i=a(361964),n=a(730143),s=a(729469),c=a(704371);function r({shouldUseBottomBorder:e}){let t=(0,n.q5)(),a=(0,i.l7)(),r=(0,l.e)(),_=(0,i.ZO)();return t&&t.key&&t.name?o.createElement(c.SZ,{shouldUseBottomBorder:!!e},o.createElement(c.x$,{shouldShowFileMenu:!a&&!r&&!_,recordingKey:c.Fp}),o.createElement(c.l9,null),o.createElement(c.t7,{openFile:t})):o.createElement(c.SZ,{shouldUseBottomBorder:!!e},o.createElement(s.cQ,null),o.createElement(s.EG,null))}},86705:(e,t,a)=>{a.d(t,{MO:()=>O,Tq:()=>b});var o=a(848318),l=a(195124),i=a(179507),n=a(536384),s=a.n(n),c=a(720522),r=a(142896),_=a(601167),d=a(996306),m=a(933480),E=a(108557),u=a(253654),p=a(839808),v=a(787218),N=a(60943),g=a(559949),f=a(372209),I=a(253373),h=a(160761),w=a(939968);let O=o.forwardRef(function(e,t){let{boundingBox:a,isFigmaPurple:l}=e.node,i=function(e,t,a,o){let l=(0,_._X)({subscribeToUpdates_expensive:!0});if(!l)return null;let i={},n=(0,_.Yb)(l,{x:e.x,y:e.y,width:e.w,height:e.h});return i.left=n.x+l.x,i.top=n.y+l.y,t&&(i.left+=n.width/2),a&&(i.top=n.y+l.y+n.height),{containerStyle:i,pillStyle:o&&{maxWidth:o(n.width)},zoomScale:l.zoomScale}}(a,e.centered,e.bottom,e.maxWidth);if(!i)return null;let{containerStyle:n,pillStyle:c}=i;return o.createElement("div",{ref:t,className:s()(r.Dm,m.V_,{[m.F]:e.centered,[m.sQ]:e.bottom}),style:{...n,marginLeft:e.offsetX??0,marginTop:e.offsetY?.(i.zoomScale)??0},"data-testid":e.dataTestId},o.createElement("div",{className:s()(m.Io,l?m.HR:m.rH,e.largeBorderRadius&&m.Pn),style:c},e.children))});function b({node:e}){let t=(0,i.xx)((e,t)=>(0,d.D)(e,t)),a=e?t(e.guid,e.objectsPanelThumbnailId):"",n=a?(0,c.V)(a):function(e){let t=null;switch(e.type){case"TEXT":t=h.A;break;case"FRAME":t=e.isGroup?u.A:e.isStateGroup?f.A:(0,d.GN)({stackMode:e.stackMode,stackCounterAlignItems:e.stackCounterAlignItems});break;case"ROUNDED_RECTANGLE":t=N.A;break;case"ELLIPSE":t=E.A;break;case"STAR":t=g.A;break;case"VECTOR":t=w.A;break;case"GROUP":t=u.A;break;case"INSTANCE":t=p.A;break;case"SYMBOL":t=e.isState?I.A:f.A}return(0,l.oY)(e.type)&&e.hasEnabledStaticImagePaint&&(t=v.A),t}(e);return n?o.createElement(c.B,{className:m.ue,svg:n}):null}},548467:(e,t,a)=>{a.d(t,{s:()=>tb});var o=a(848318),l=a(301168),i=a(979533),n=a(696786),s=a(730143),c=a(125761),r=a(844123),_=a(472287),d=a(641400),m=a(536384),E=a.n(m),u=a(656329),p=a(967688),v=a(355755),N=a(605885),g=a(950342),f=a(17753),I=a(661289),h=a(614892),w=a(749683),O=a(639902),b=a(132424);let T="voice_widget--modal--xsQ2A",A="voice_widget--show--O6ORx voice_widget--modal--xsQ2A",D="voice_widget--icon--wW-wb",y="voice_widget--topRow--O1wj-",R="voice_widget--voiceModalPanel--KD-J1";function k(e){let{fileKey:t}=e;var{userIdsInCall:a}=(0,_.W5)(t);let l=a.size,i=(0,v.aV)(),n=(0,c.iZ)();o.useEffect(()=>{!u.XN&&n?.id&&!a.has(n.id)&&(0,N.w$)(l)},[l,n?.id,a]);let s=!i&&!u.XN;return((0,g.N)({isVisible:s}),s)?o.createElement("div",{className:E()(T,{[A]:!0})},o.createElement(I.m,{role:"region"},o.createElement(h.Id,{className:R},o.createElement("div",{className:y},o.createElement("div",{className:"voice_widget--joinModalCountGroup--zxI6Q"},o.createElement(w.A.HeadphonesIcon,{className:b.QH,size:24}),a.size),o.createElement(O.K,{fileKey:e.fileKey,"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,p.t)("collaboration.voice.join_conversation"),isJoinWidget:!0,"data-onboarding-key":"audio-nux-key"},(0,p.tx)("collaboration.voice.join")))))):o.createElement(o.Fragment,null)}var C=a(658839),S=a(62034),L=a(773511),W=a(124810),U=a(52495),P=a(615233),x=a(295534),M=a(304756),$=a(401970),G=a(453370),B=a(31898),V=a(353231),F=a(797082),H=a(810807),j=a(904749),z=a(125952),X=a(933548),K=a(129170),Y=a(720522),J=a(422444),q=a(511067),Q=a(442022),Z=a(16808);let ee="captions_dialog--showGradient--ZAHRk";var et=a(789982),ea=a(918452);let eo="DROPDOWN_TYPE_CAPTIONS_DIALOG_TYPE_SIZE";function el({caption:e,user:t}){let a=e.userId+"_"+e.timestamp;return o.createElement("div",{className:"captions_dialog--captionRow--pgS-N",key:a},o.createElement("div",null,o.createElement(z.Ro,{className:"captions_dialog--avatar--ISexR",entity:{...t,id:e.userId},size:24}),o.createElement("div",{className:"captions_dialog--name--SmWv6"},t?t.name:e.userId)),e.text.map((e,t)=>o.createElement("div",{className:"captions_dialog--paragraph--SjDQd",key:a+"_"+t},e.map((e,l)=>o.createElement("div",{className:"captions_dialog--sentence--SJkHn",key:a+"_"+t+"_"+l},`${e} `)))))}let ei=()=>({small:{style:"captions_dialog--smallText--aUeBx",label:(0,p.t)("collaboration.voice.small")},medium:{style:"captions_dialog--mediumText--ODxEN",label:(0,p.t)("collaboration.voice.medium")},large:{style:"captions_dialog--largeText---t1d2",label:(0,p.t)("collaboration.voice.large")},x_large:{style:"captions_dialog--xlargeText--C60DA",label:(0,p.t)("collaboration.voice.x_large")}}),en=Date.now();function es({call:e}){let t=ei(),[a,i]=o.useState([]),[n,c]=o.useState(t.small.style),[r,d]=o.useState(!1),[m,E]=o.useState(!1),[u,v]=o.useState(!1),N=(0,s.q5)();if(!N)throw Error("Open file required");let g=(0,l.d4)(e=>e.voice.activeCall[N.key]),I=(0,l.wA)(),[h,w]=o.useState(null),O=(0,q.Um)(),b=o.useRef(null),T=!!(O&&O.type===eo),A=a.reduce((e,t)=>e.add(t.userId),new Set),D=(0,_.bF)(A,N.key).reduce((e,t)=>(e[t.userID]=t,e),{});o.useEffect(()=>{let t=e=>{e&&i(e)};return e.audioCaptionStream.subscribe(t),()=>e.audioCaptionStream.unsubscribe(t)}),o.useEffect(()=>{h&&h.scrollHeight-h.scrollTop-h.clientHeight<150&&en<Date.now()-150&&h.scrollTo({top:h.scrollHeight-h.clientHeight,behavior:"smooth"})}),o.useEffect(()=>{h&&!u&&(h.scrollTop=h.scrollHeight-h.clientHeight)},[h,u]);let y=!u&&g;return o.createElement("div",{className:["captions_dialog--captionsDialog--gOIvh",n].join(" ")},o.createElement("div",{className:["captions_dialog--topDivider--BlM0x captions_dialog--_divider--m8Skg",r?ee:""].join(" ")}),y&&o.createElement("div",{className:"captions_dialog--scrollContainer--WuVOJ",ref:e=>w(e),onScroll:e=>{h&&(E(0!=h.scrollHeight-h.scrollTop-h.clientHeight),d(0!==h.scrollTop))},onWheel:e=>{e.deltaY<0&&(en=Date.now())}},o.createElement("div",{className:"captions_dialog--scrollContainerInner--db2cV"},a.map(e=>o.createElement(el,{key:e.timestamp,caption:e,user:D[e.userId]})))),y&&o.createElement("div",{className:["captions_dialog--bottomDivider--WBbo5 captions_dialog--_divider--m8Skg",m?ee:""].join(" ")}),y&&o.createElement(L.E,{onClick:()=>h.scrollTo({top:h.scrollHeight-h.clientHeight,behavior:"smooth"}),className:`captions_dialog--scrollToBottomButton--SeU-4 ${m?"captions_dialog--showScrollToBottomButton--Lc7Iy":""}`},(0,p.tx)("collaboration.voice.new_transcripts")),o.createElement("div",{className:"captions_dialog--header--SA3Wv",onClick:()=>v(!u)},o.createElement(Y.B,{className:y?"captions_dialog--closedCaptionsIconMaximized--N-lwT":"captions_dialog--closedCaptionsIconMinimized--Ou0WE",svg:et.A}),o.createElement("span",{className:"captions_dialog--label---1DXk"},(0,p.tx)("collaboration.voice.closed_captions")),o.createElement(K.Ex,{text:(0,p.t)("collaboration.voice.beta"),className:"captions_dialog--betaTag--qFyxq",color:K.zE.BRAND}),o.createElement(Z.K0,{svg:ea.A,ref:b,className:"captions_dialog--typeSizeIcon--Xhxj-",onClick:e=>{e.stopPropagation(),I(J.gR({type:eo}))},"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,p.t)("collaboration.voice.text_size")}),b.current&&T&&o.createElement(Q.j,{dispatch:I,items:Object.keys(t).map(e=>({name:e,displayText:t[e].label,className:[t[e].style,"captions_dialog--dropdownTextOptions--ma0Ue"].join(" "),isChecked:t[e].style===n})),showPoint:!0,parentRect:b.current?.getBoundingClientRect(),onSelectItem:e=>{e.name&&c(t[e.name].style)},minWidth:96}),o.createElement("div",{style:{clear:"both"}})))}var ec=a(473694),er=a(232167),e_=a(29188),ed=a(328813),em=a(187782);let eE="voice_warning_icon--icon--NvhIw";var eu=a(619883);let ep=[d.$E.WARNING_RECV_AUDIO_DECODE_FAILED,d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW,d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW,d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW];function ev(e){let t;if((0,ed.Im)(e.activeWarnings))return null;for(let a of ep)if(e.activeWarnings[a]){t=e.activeWarnings[a];break}return t?o.createElement("div",{className:e.className,"data-tooltip-type":f.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50},o.createElement($.U,{className:eE,svg:eu.A},o.createElement(em.e,{className:eE}))):null}function eN(e){switch(e){case d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:return(0,p.t)("collaboration.voice.audio_input_too_low_warning");case d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:return(0,p.t)("collaboration.voice.speaker_volume_too_low_warning");case d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case d.$E.WARNING_RECV_AUDIO_DECODE_FAILED:return(0,p.t)("collaboration.voice.poor_connection_warning");default:return null}}function eg(e){let{callEvent:t,onClick:a,notificationUserId:i}=e.notification,[s,c]=o.useState(null),[_,m]=o.useState(!1),E=o.useRef(),u=o.useRef(t),[v,N]=o.useState(),g=(0,l.d4)(e=>e.multiplayer.allUsers),f=(0,l.d4)(e=>e.voice.voiceUsersById),I=(0,n.GS)(),w=o.useMemo(()=>{if(i){if(i in f)return f[i].name;let e=g.find(e=>e.userID===i);if(e)return e.name}return"User"},[i,f,g]),O=v?.href,b=o.useMemo(()=>O?"a":"div",[O]);if(o.useEffect(()=>()=>{E?.current&&clearTimeout(E.current)},[]),o.useEffect(()=>{let e=()=>{m(!1),c(null)};v?(m(!0),c(null),v.persist||c(setTimeout(()=>{e()},2e3))):e()},[v]),o.useEffect(()=>()=>{s&&clearTimeout(s)},[s]),o.useEffect(()=>{switch(u.current=t,t){case d.$E.CONNECTED:N({msg:(0,p.t)("collaboration.voice.connected"),type:d.w.SUCCESS,icon:I?o.createElement(er.g,null):void 0});break;case d.$E.CONNECTED_WITH_MIC_DISABLED:N({msg:(0,p.t)("collaboration.voice.connected_check_your_microphone_permissions_to_start_chatting"),allowMultiLine:!0,type:d.w.SUCCESS});break;case d.$E.CONNECTING:N({msg:(0,p.t)("collaboration.voice.connecting"),type:d.w.PENDING,persist:!0});break;case d.$E.ERROR:N({msg:(0,p.t)("collaboration.voice.something_went_wrong_try_again"),type:d.w.ERROR,persist:!0});break;case d.$E.CALL_INACTIVE:N({msg:(0,p.t)("collaboration.voice.things_got_quiet_for_awhile_so_we_ended_the_conversation"),type:d.w.PENDING,persist:!1,allowMultiLine:!0});break;case d.$E.TOKEN_WILL_EXPIRE:N({msg:(0,p.t)("collaboration.voice.it_s_been_quiet_for_a_while_so_we_ll_end_the_conversation_in_20_seconds_n_click_to_stay_on"),type:d.w.MESSAGE,persist:!0,onClick:a,allowMultiLine:!0});break;case d.$E.TOKEN_EXPIRED:N({msg:(0,p.t)("collaboration.voice.audio_has_timed_out_click_to_rejoin"),type:d.w.ERROR,persist:!0,onClick:a});break;case d.$E.USER_JOINED:N({truncatedPrefix:w,msg:(0,p.t)("collaboration.voice.joined"),type:d.w.MESSAGE});break;case d.$E.USER_LEFT:N({truncatedPrefix:w,msg:(0,p.t)("collaboration.voice.left"),type:d.w.MESSAGE});break;case d.$E.ERROR_MICROPHONE_PERMISSIONS_DENIED:let e=(0,p.t)("collaboration.voice.enable_mic_access_in_your_browser_to_join");e_.eD&&(e=(0,p.t)("collaboration.voice.enable_mic_access_for_the_figma_app_to_join")),N({msg:e,type:d.w.ERROR,href:r.AM.TROUBLESHOOT});break;case d.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED:N({msg:(0,p.t)("collaboration.voice.want_to_unmute_click_the_mic"),type:d.w.PENDING});break;case d.$E.ERROR_ON_LEAVE:N({msg:(0,p.t)("collaboration.voice.couldn_t_leave_please_try_again"),type:d.w.ERROR});break;case d.$E.SYSTEM_INCOMPATIBLE:N({msg:(0,p.t)("collaboration.voice.figma_audio_won_t_work_on_your_device_learn_why"),type:d.w.ERROR,persist:!0,allowMultiLine:!0,href:r.AM.TROUBLESHOOT});break;case d.$E.DISCONNECTING:case d.$E.RECONNECTING:E.current=setTimeout(()=>{u.current===d.$E.RECONNECTING&&(N({msg:(0,p.t)("collaboration.voice.attempting_to_reconnect"),type:d.w.PENDING,persist:!0}),E.current=void 0)},1500);break;case d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case d.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let l=eN(t);if(!l)break;N({msg:l,type:d.w.WARNING,allowMultiLine:!0})}},[t]),void 0===t)return o.createElement(o.Fragment,null);let T=["expanded"===e.widgetState?"voice_flash_notifications--flashExpandedList--NkNnw voice_flash_notifications--flash--8i3SH":"voice_flash_notifications--flash--8i3SH",_?function(){switch(v?.type){case d.w.ERROR:return"voice_flash_notifications--flashError--6fLPW";case d.w.WARNING:return"voice_flash_notifications--flashWarning--tdCit";case d.w.MESSAGE:return"voice_flash_notifications--flashMessage--lt-k-";case d.w.SUCCESS:return"voice_flash_notifications--flashSuccess--hmpUM";case d.w.PENDING:default:return"voice_flash_notifications--flashPending--Hzt7W"}}():"voice_flash_notifications--flashHidden--uYI96"];return o.createElement(h.kg,{onClick:v?.onClick,className:T.join(" ")},o.createElement(b,{className:v?.allowMultiLine||I?"voice_flash_notifications--flashNotificationMessageWrap--eXghM voice_flash_notifications--flashNotificationMessageBase--wxFPN":"voice_flash_notifications--flashNotificationMessageEllipsis--eBEYX voice_flash_notifications--flashNotificationMessageBase--wxFPN ellipsis--ellipsis--Tjyfa",target:"_blank",rel:"noopener",href:v?.href},v?.truncatedPrefix&&o.createElement("span",{className:"voice_flash_notifications--truncatedPrefix---gMQI ellipsis--ellipsis--Tjyfa"},v?.truncatedPrefix),v?.icon,v?.msg))}var ef=a(461979),eI=a(755534),eh=a(240092),ew=a(755042),eO=a(80024),eb=a(623938);let eT="active_speakers_row--name--LtwVz ellipsis--ellipsis--Tjyfa",eA="active_speakers_row--pos1--88uza active_speakers_row--pos--D59NJ",eD="active_speakers_row--fadeOut--2tZhG",ey="active_speakers_row--willFadeIn--fFCX6",eR="active_speakers_row--activeSpeakerRowAvatar--zKOXb",ek=(e,t)=>e.userID===t.userID,eC=(e,t)=>{let a=e.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID),o=t.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID);if(a.length!==o.length)return!0;for(let e=0;e<a.length;e++)if(a[e]!==o[e])return!0;return!1},eS=(e,t)=>{let a=t.filter(t=>!e.find(e=>ek(e,t))),o=e.filter(e=>!t.find(t=>ek(e,t))),l=e.map(e=>o.indexOf(e)>-1?e:void 0),i=e.map(e=>-1===o.indexOf(e)?e:a.shift()).filter(e=>!!e);return a.length>0&&i.push(...a),t.length>1&&1===e.length&&(l[1]=e[0]),{fadeOut:l,active:i}},eL=(0,l.Ng)((e,t)=>({...t,observingSessionID:e.multiplayer.observingSessionID,presenterSessionID:e.multiplayer.presenterSessionID??null}))(function({user:e,classNames:t,observingSessionID:a,presenterSessionID:l,call:i}){let n;let s=(Array.isArray(t)?[...t,eR]:[t,eR]).join(" "),c=(0,r.eo)(),_=o.createElement(z.Ro,{entity:{...e,id:e.userID},className:"active_speakers_row--activeSpeakerRowAvatarWithoutMultiplayer--W-S0A",size:24,key:e.userID}),m=e=>{e.stopPropagation()};return"sessionID"in e&&(n=`active-speaker-row-voice-avatar-session-${e.sessionID}`,_=o.createElement(ew.vQ,{sessionID:e?.sessionID,observingSessionID:a,presenterSessionID:l??null,nominatedSessionID:null,user:e,showColorIndicators:!0,tooltipProxyId:n}),m=t=>{t.stopPropagation(),t.preventDefault(),c(e)}),o.createElement("div",{className:s},o.createElement("div",{className:"active_speakers_row--avatarObserveClickTarget--T1JH- voice_toolbar--avatarObserveClickTarget--QALFw",onClick:m,"data-tooltip-proxy-element-id":n}),_,o.createElement(eb.i,{userId:e.userID,microphoneStyle:d.bU.FULL,call:i,volumeIconMutedState:eb.S.MINI,className:"active_speakers_row--voiceIndicatorPositioning--YqGFz"}))});function eW({user:e,classNames:t}){return o.createElement("div",{className:eT+" "+(Array.isArray(t)?t.join(" "):t)},e.name)}let eU=["active_speakers_row--pos0--Dc1bB active_speakers_row--pos--D59NJ",eA,"active_speakers_row--pos2--b5pkb active_speakers_row--pos--D59NJ","active_speakers_row--pos3--EAAkN active_speakers_row--pos--D59NJ","active_speakers_row--pos4--R5-5y active_speakers_row--pos--D59NJ","active_speakers_row--pos5--FYPvT active_speakers_row--pos--D59NJ","active_speakers_row--pos6--PTsn8 active_speakers_row--pos--D59NJ","active_speakers_row--pos7--DjtPj active_speakers_row--pos--D59NJ"];class eP extends o.Component{constructor(e){super(e),this.displayString="ActiveSpeakersRow",this.node=null,this.state={active:[],fadeOut:[]}}componentWillMount(){this.setState(eS(this.state.active,this.props.users))}shouldComponentUpdate(e,t){return e===this.props||(eC(this.props.users,e.users)&&this.setState(eS(this.state.active,e.users)),!1)}render(){let e=(e,t)=>`${e.name}-${t}`,t=[],a=eO.h.getInstance();if(!a)return null;if(1===this.state.fadeOut.length&&this.state.fadeOut[0]){let l=this.state.fadeOut[0];t.push(o.createElement(eL,{call:a,key:e(l,"avatar"),user:l,classNames:[eU[0],eD]}),o.createElement(eW,{key:e(l,"name"),user:l,classNames:[eA,eD,eT]}))}else if(2===this.state.fadeOut.length&&!this.state.fadeOut[0]&&this.state.fadeOut[1]){let a=this.state.fadeOut[1];t.push(o.createElement(eW,{key:e(a,"name"),user:a,classNames:[eA,eD,eT]}))}else t.push.apply(t,this.state.fadeOut.map((t,l)=>t&&o.createElement(eL,{call:a,key:e(t,"avatar"),user:t,classNames:[eU[l],eD]})));if(1===this.state.active.length){let l=this.state.active[0];t.push(o.createElement(eL,{call:a,key:e(l,"avatar"),user:l,classNames:[eU[0],ey]}),o.createElement(eW,{key:e(l,"name"),user:l,classNames:[eA,ey,eT]}))}else t.push.apply(t,this.state.active.map((t,l)=>o.createElement(eL,{call:a,key:e(t,"avatar"),user:t,classNames:[eU[l],ey]})));return t.sort((e,t)=>null===e.key||null===t.key?0:e.key>t.key?-1:1),setTimeout(()=>{this.node?.querySelectorAll("."+ey).forEach(e=>e.classList.remove(ey))},10),o.createElement("div",{ref:e=>this.node=e,className:"active_speakers_row--activeSpeakerRow--l5ylB"},t)}}function ex(e){let{call:t,usersInCall:a}=e,l=(0,c.iZ)(),i=(0,j.mt)(t),n=o.useMemo(()=>i?.filter(e=>e!==l?.id)?.slice(0,6).reduce((e,t)=>{let o=a.find(({userID:e})=>e===t);return o?e.concat([o]):e},[])||[],[i,a,l]);return o.createElement(eP,{users:n})}var eM=a(364616),e$=a(844411);function eG(e){let{children:t,headerText:a,collapsedContent:l,theme:i,onToggle:n,collapseStateOverride:s}=e,[c,r]=o.useState(!1),_=s||c;return o.createElement("span",{"data-editor-theme":i},o.createElement(h.fI,{className:_?"voice_collapsible_dropdown--isCollapsed--SwBvz":""},o.createElement("span",{className:"voice_collapsible_dropdown--dropdownSectionTitle--lpt22",onClick:t=>{t.preventDefault(),t.stopPropagation(),n&&!0!==e.hideToggleOption&&n(!_),r(!_)}},_?l:a,!e.hideToggleOption&&o.createElement(Y.B,{svg:_?eM.A:e$.A,className:"voice_collapsible_dropdown--voiceDropdownChevronIcon--JgQxE"}))),!_&&t&&o.createElement(o.Fragment,null,t))}var eB=a(232922);let eV=(0,l.Ng)(e=>({showWidgetParticipantList:e.voice.showWidgetParticipantList}))(function(e){let{showWidgetParticipantList:t}=e,a=(0,c.iZ)(),n=(0,l.wA)(),{userIdsInCall:s}=(0,_.W5)(e.fileKey),m=(0,_.bF)(s,e.fileKey),E=(0,r.eo)(),{usersInCall:u,callMetadata:p}=o.useMemo(()=>({usersInCall:m.filter(e=>e.userID!==a?.id),callMetadata:{microphoneStyle:d.bU.FULL,call:e.call}}),[m,a,e.call]);return o.createElement(o.Fragment,null,o.createElement(ew.sK,null),u.length>0&&o.createElement("div",{className:eB.ev},o.createElement(eG,{headerText:`${e.currentUserInCall?"You and ":""}`+(0,ef.td)(u.length,"person","people")+" in conversation",collapseStateOverride:!t,collapsedContent:o.createElement(ex,{usersInCall:u,call:e.call}),hideToggleOption:u.length<2,onToggle:e=>n(i.yF(!e))},o.createElement(eI.P,{className:eB.YM},u.map(e=>o.createElement(eh.Q,{key:"sessionID"in e?e.sessionID:e.userID,callMetadata:p,user:e,isOverflow:!0,onUserClick:E}))))))});var eF=a(544405),eH=a(179869),ej=a(771194),ez=a(717865),eX=a(749214);let eK=(0,o.memo)(function(e){return(0,eX.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,eX.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 7h10a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1M5 8a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2zm4.5 7a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm4.5-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m-3.5-.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm2.5 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5M7.5 13a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z",clipRule:"evenodd"})})});var eY=a(127974),eJ=a(989232),eq=a(410441),eQ=a(133318),eZ=a(345964),e0=a(952039),e1=a(863270),e5=a(335744),e2=a(120846),e4=a(27776);let e9="device_controls--pointingDropdown--hSJ1h",e3="device_controls--containerWithPadding--IlJeH",e8="device_controls--deviceControlRow--kSC19",e7="device_controls--controlLabel--Yp1lV",e6="device_controls--iconContainer--TuXUt",te="device_controls--dropdownContainer--DfMXW",tt="device_controls--dropdownInput--w72f-",ta="device_controls--dropdownChevron--UBe58",to="device_controls--divider--Z8rM-";var tl=a(598284);let ti="MICROPHONE_CONTROL_DROPDOWN",tn="PLAYBACK_DEVICE_CONTROL_DROPDOWN",ts=(0,eq.jz)(e4.aHA);function tc(e,t,a,i,n,s,c){let r=(0,l.wA)(),[_,d]=(0,o.useState)(null),[m,E]=(0,o.useState)([]),v=(0,l.d4)(e=>e.dropdownShown?.type===i),N=(0,eY.wm)(()=>m.map(e=>e.deviceId),[m]),g=(0,o.useCallback)(async()=>{try{let e=await t(),a=new Set(N);(N.length!==e.length||e.some(e=>!(e.deviceId in a)))&&E(e)}catch{c||r(e0.F.enqueue({message:(0,p.t)("collaboration.voice.error_fetching_devices"),error:!0,type:"voice-device-error"}))}},[N,r,t,c]),f=(0,o.useCallback)(async()=>{try{if(s&&!u.Ay.chrome)return;let t=await e();t.deviceId!==_?.deviceId&&d(t)}catch{}},[s,e,_]),I=(0,o.useCallback)(async e=>{e.deviceId!==_?.deviceId&&d(e);try{await a(e)}catch{r(e0.F.enqueue({message:(0,p.t)("collaboration.voice.error_selecting_device"),error:!0,type:"voice-device-error"})),await f()}},[f,a,r,_]);return(0,o.useEffect)(()=>{(n||v)&&g()},[n,v,g]),(0,o.useEffect)(()=>{f(),g()},[]),[_,m,I]}function tr(e){let[t,a,l]=tc(e.call.currentMicrophone,e.call.getMicrophones,e.call.setMicrophone,ti,e.isOpen,!1,e.microphonePermissionDenied),[i,n,s]=tc(e.call.currentPlaybackDevice,e.call.getPlaybackDevices,e.call.setPlaybackDevice,ti,e.isOpen,!0,e.microphonePermissionDenied),c=e.targetRef.current?.getBoundingClientRect();return e.isOpen?o.createElement(t_,{targetRect:c,currentMicrophone:t,microphoneDevices:a,setMicrophone:l,currentPlaybackDevice:i,playbackDevices:n,setPlaybackDevice:s}):null}function t_(e){let{targetRect:t,currentMicrophone:a,microphoneDevices:i,setMicrophone:s,currentPlaybackDevice:c,playbackDevices:r,setPlaybackDevice:_}=e,d=(0,l.wA)(),m=(0,n.GS)(),[E,v]=(0,o.useState)({type:""}),N=()=>{v({type:""})},g={format:e=>e?.label||"",isEqual:(e,t)=>e.deviceId===t.deviceId},f=m?o.createElement($.U,{svg:tl.A},o.createElement(ej.P,null)):void 0,I=m?o.createElement($.U,{svg:tl.A},o.createElement(ez.L,null)):void 0,O=o.createElement(e2.l6,{chevronClassName:ta,className:te,dispatch:d,dropdownShown:E,formatter:g,icon:f,id:ti,inputClassName:tt,neverConstrain:!0,onChange:e=>{s(e)},onHideDropdownOverride:N,onShowDropdownOverride:()=>v({type:ti}),property:a||{deviceId:"not_found",label:(0,p.t)("collaboration.voice.microphone_not_found"),groupId:"not_found",kind:"audioinput",toJSON:()=>null}},i.map(e=>o.createElement(e2.c$,{key:e.deviceId,value:e},e.label))),b=o.createElement(e2.l6,{chevronClassName:ta,className:te,dispatch:d,dropdownShown:E,formatter:g,icon:I,id:tn,inputClassName:tt,neverConstrain:!0,onChange:e=>{_(e)},onHideDropdownOverride:N,onShowDropdownOverride:()=>v({type:tn}),property:c||{deviceId:"not_found",label:(0,p.t)("collaboration.voice.playback_device_not_found"),groupId:"not_found",kind:"audiooutput",toJSON:()=>null}},r.map(e=>o.createElement(e2.c$,{key:e.deviceId,value:e},e.label))),T=o.createElement(o.Fragment,null,o.createElement("div",{className:to}),!(0,H.WO)()&&o.createElement(tm,null),(0,H.WO)()&&o.createElement(td,null));return m?o.createElement(e5.Cf,{className:e9,targetRect:t,minWidth:ts,propagateCloseClick:!0,lean:"left",leanPadding:52},o.createElement("div",{onClick:e=>e.stopPropagation()},o.createElement("div",{className:"device_controls--header---h3P-"},(0,p.t)("collaboration.voice.audio_settings"),o.createElement(eQ.Jn,{onClick:()=>d(G.oB())})),o.createElement("div",{className:"device_controls--container--VR8KK"},o.createElement(h.fI,{className:e8},o.createElement("span",{className:e7},(0,p.tx)("collaboration.voice.microphone")),O),u.Ay.chrome&&o.createElement(h.fI,{className:e8},o.createElement("span",{className:e7},(0,p.tx)("collaboration.voice.speakers")),b))),(0,H.X0)()&&T):o.createElement(e5.Cf,{showPoint:!!t,targetRect:t,className:e9,minWidth:280,propagateCloseClick:!0},o.createElement("div",{onClick:e=>e.stopPropagation()},o.createElement("div",{className:e3},o.createElement(h.fI,{className:e8},o.createElement("span",{className:e6},o.createElement(w.A.Unmuted,{size:24})),o.createElement("span",{className:e7},(0,p.tx)("collaboration.voice.microphone"))),o.createElement(h.fI,{className:e8},O)),u.Ay.chrome&&o.createElement(o.Fragment,null,o.createElement("div",{className:to}),o.createElement("div",{className:e3},o.createElement(h.fI,{className:e8},o.createElement("span",{className:e6},o.createElement(Y.B,{svg:tl.A})),o.createElement("span",{className:e7},(0,p.tx)("collaboration.voice.speakers"))),o.createElement(h.fI,{className:e8},b))),(0,H.X0)()&&T))}function td(){let e=(0,l.d4)(e=>e.voice.captionsInstallProgress),t=(0,l.d4)(e=>e.voice.showCaptions),a=(0,l.wA)(),i=o.useId(),n=o.createElement($.U,{className:e6,svg:et.A},o.createElement(eK,null)),s=(0,p.tx)("collaboration.voice.closed_captioning"),c=o.createElement(K.Ex,{text:(0,p.t)("collaboration.voice.beta"),className:"device_controls--betaTag---VTFI",color:K.zE.BRAND});return t&&(0,H.Mw)(e)&&(s=(0,p.tx)("collaboration.voice.setting_up_closed_captions_install_progress",{installProgress:e}),n=o.createElement(eZ.kt,{className:"device_controls--captionsLoadingSpinner--ivdGQ"}),c=o.createElement(o.Fragment,null)),o.createElement(eF.J,{className:"device_controls--closedCaptionRow--OdIHt raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19",htmlFor:i},n,o.createElement("span",{className:"device_controls--captionToggleLabel--MjCYn device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},s,c),o.createElement(eH.v,{id:i,checked:t,onChange:(e,{event:t})=>{t.stopPropagation(),(0,eJ.trackEvent)("voice_captions_toggle",{value:e,source:"voice_widget"}),(0,H.HJ)(a,e)}}))}function tm(){let e=r.AM.ACCESSIBILITY;return o.createElement(e1.L0,{target:"_blank",rel:"noopener",href:e,trackingEventName:"Learn more about captioning"},o.createElement(h.fI,{className:"device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19"},o.createElement(Y.B,{className:e6,svg:et.A}),o.createElement("span",{className:"device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},(0,p.tx)("collaboration.voice.learn_how_to_turn_on_closed_captioning"))))}var tE=a(626824),tu=a(662571);let tp=(0,P.ck)("94721b53827c353075273e54a45ea41850ee0284"),tv=(0,P.ck)("d917bf9964749c47b46d367572a5dd28a559bd2f"),tN="DEVICE_CONTROL_DROPDOWN",tg=null,tf=null,tI=null;function th(e){let{call:t,fileKey:a,user:s,callEvent:c,notificationUserId:r,callEventCallback:m}=e,u=(0,l.Pj)(),[v,N]=(0,o.useState)(null),[w,O]=(0,o.useState)(),[b,k]=(0,o.useState)(!1),[P,j]=(0,o.useState)(!1),[z,K]=(0,o.useState)(!1),[Y,J]=(0,o.useState)(!1),q=(0,l.d4)(e=>e.voice.snapWidget),[Q,Z]=(0,o.useState)(!1),[ee,et]=(0,o.useState)(!1),[ea,eo]=(0,o.useState)({}),{userIdsInCall:el}=(0,_.W5)(a);(0,F.W)();let ei=(0,l.d4)(e=>e.voice.showCaptions),en=(0,l.d4)(e=>e.voice.captionsInstallProgress),er=(0,l.d4)(e=>e.dropdownShown?.type===tN),e_=(0,l.d4)(e=>e.voice.activeCall[a]||!1),ed=(0,l.d4)(e=>e.voice.showWidgetParticipantList),em=(0,o.useRef)(null),eE=(0,n.GS)(),eu=(0,l.wA)(),ep={in:()=>{K(!0)},out:()=>(K(!1),new Promise(e=>setTimeout(e,300)))};o.useEffect(()=>{let e=t.getSystemCompatibility();if(N(e),!e){m(d.$E.SYSTEM_INCOMPATIBLE);return}tg||tf||(tf=new Audio(tp),(tg=new Audio(tv)).load(),tf.load(),[tf,tg].forEach(e=>e.volume=.5))},[]),o.useEffect(()=>{!e_&&v&&eh(),window.requestAnimationFrame(()=>ep.in())},[v]),o.useEffect(()=>{let e;switch(c){case d.$E.DISCONNECTED:ee&&(tf?.play(),et(!1)),eu(i.oI({fileKey:a}));break;case d.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT:(function e(a){if(Date.now()>=a){m(d.$E.TOKEN_WILL_EXPIRE);return}if(t.isLocalUserSpeaking()){eO(!1);return}setTimeout(()=>{e(a)},500)})(Date.now()+1e4);break;case d.$E.CONNECTED:case d.$E.CONNECTED_WITH_MIC_DISABLED:Q&&(setTimeout(()=>tg?.play(),400),Z(!1)),eu(i.rO({fileKey:a}));break;case d.$E.CALL_INACTIVE:t.leave();break;case d.$E.TOKEN_WILL_EXPIRE:e=()=>eO(!0);break;case d.$E.TOKEN_EXPIRED:e=eh;break;case d.$E.USER_JOINED:case d.$E.USER_LEFT:if(tI)return;break;case d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case d.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let o=eN(c);if(!o)break;eo({...ea,[c]:o});break;case d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:case d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:case d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:case d.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:let l=function(e){switch(e){case d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:return d.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;case d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:return d.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;case d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:return d.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;case d.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:return d.$E.WARNING_RECV_AUDIO_DECODE_FAILED;default:return null}}(c);if(!l)break;delete ea[l],eo(ea)}void 0!==c&&O({callEvent:c,onClick:e,notificationUserId:r})},[c]),o.useEffect(()=>{J(!0)},[q]),o.useEffect(()=>{Y&&J(!1)},[Y]);let[ef,eI]=(0,o.useState)(!0),eh=async()=>{if(eI(!0),!t.getSystemCompatibility()){eI(!1),m(d.$E.SYSTEM_INCOMPATIBLE);return}k(!0),Z(!0),tI=setTimeout(()=>{tI=null},5e3);try{let{data:e}=await M.Ay.post(`/api/voice/${a}/auth`),o=await (0,x.JL)(e.meta.user_encryption_key),l=await (0,x.We)(o,e.meta.call_user_id);if(l!=l)throw Error(`User ID does not match local user ID.
local: ${l}
remote: ${l}`);await t.join({appId:e.meta.app_id,callId:e.meta.call_id,token:e.meta.auth_token,callUserId:e.meta.call_user_id,userId:l,encryptionKey:e.meta.call_encryption_key,userEncryptionKey:o,setParticipantIdsCallback:ew,callEventCallback:m,store:u,fileKey:a})}catch(e){eI(!1),m(d.$E.ERROR)}k(!1),eI(!1)};function ew(e){eu(i.cb(e))}(0,g.N)({isVisible:z});let eO=async e=>{let{data:o}=await M.Ay.post(`/api/voice/${a}/auth`,{call_user_id:t.uid});await t.renewToken(o.meta.auth_token),e?m(d.$E.CONNECTED):m(d.$E.TOKEN_SILENTLY_RENEWED)},eb=async()=>{k(!0),et(!0);try{await Promise.all([ep.out(),t.leave()]),eu(i.oI({fileKey:a})),tf?.play(),er&&eu(G.oB()),eu(i.Pp(!1))}catch{ep.in(),m(d.$E.ERROR_ON_LEAVE)}k(!1)},eT=async e=>{(0,V.ds)("voice_user_mute_toggle",a,u.getState(),{source:"voice_widget",muted:!e}),e?await t.unmute():await t.mute()},eA=()=>{er?eu(G.oB()):((0,V.ds)("voice_widget_open_settings",a,u.getState()),eu(G.j7({type:tN})))},eD=w?w&&el.size>1&&ed?"expanded":"collapsed":null;ei&&(0,H.nN)(en)&&((0,V.ds)("voice_caption_download_error",a,u.getState(),{error_code:en,source:"voice_widget"}),(0,H.HJ)(eu,!1),eu((0,B.to)({type:X.L,data:{dispatch:eu,installProgress:en}})));let ey=o.createElement("span",{onClick:()=>{(0,V.ds)("voice_widget_minimized_toggle",a,u.getState(),{minimized:!1}),eu(i.Pp(!1))},className:"voice_widget--dismissButtonPosition--eEXoz voice_widget--iconContainer--CuKNM","data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,p.t)("collaboration.voice.minimize")},o.createElement($.U,{className:D,svg:tE.A,fallbackSvg:tE.A},o.createElement(W.A,null))),eR=(0,C.U1)();return o.createElement(I.m,{role:"region"},o.createElement("div",{className:E()("voice_widget--hybridModalWrapper--x9-GE"),ref:eR},o.createElement("div",{className:E()(T,{[A]:z})},o.createElement(h.Id,{className:R},o.createElement("div",{className:y},o.createElement("span",{className:e_||P?"voice_widget--currentUser--L7Z6l":"voice_widget--inactiveCurrentUser--yVaZY voice_widget--currentUser--L7Z6l"},o.createElement(tw,{user:s,call:e.call})),o.createElement(ev,{className:"voice_widget--warningIcon--WJPdH",activeWarnings:ea}),o.createElement(ec.Y,{userId:s.id,onMuteButtonClickCallback:eT,disabled:t.microphonePermissionDenied}),o.createElement(S.d,{"aria-expanded":er,"aria-label":(0,p.t)("collaboration.voice.settings"),ref:em,"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,p.t)("collaboration.voice.settings"),onClick:()=>{eA()},htmlAttributes:{onMouseDown:e=>{e.stopPropagation()}}},o.createElement($.U,{className:D,svg:tu.A,fallbackSvg:tu.A},o.createElement(U.I,null))),o.createElement(L.E,{className:e_||ef?"voice_widget--leaveButton--UUdxH basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd":"voice_widget--joinButton--WvZPr basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:e_||ef?eb:eh,disabled:!v||b,htmlAttributes:{onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1)}},e_||ef?(0,p.tx)("collaboration.voice.leave"):(0,p.tx)("collaboration.voice.join")),!eE&&ey),e_&&o.createElement(eV,{fileKey:a,currentUserInCall:e_,call:t}),(0,H.WO)()&&ei&&o.createElement(es,{call:t})),!eE&&w&&o.createElement(eg,{notification:w,widgetState:eD})),eE&&w&&o.createElement(eg,{notification:w,widgetState:eD}),o.createElement(tr,{isOpen:er,call:t,targetRef:em,microphonePermissionDenied:t.microphonePermissionDenied})))}function tw({user:e,call:t}){return o.createElement(o.Fragment,null,o.createElement(tO,{user:e,call:t}),o.createElement(z.Ro,{entity:e,size:24,className:"voice_widget--undraggableImage--muN9g"}))}function tO({user:e,call:t}){let a=(0,j.Wl)(e.id,t);return!a||a.isMuted?null:o.createElement(eb.i,{userId:e.id,microphoneStyle:d.bU.FULL,className:"voice_widget--avatarVoiceIndicator--zfWwx",volumeIconMutedState:eb.S.NONE,call:t})}function tb(){let e=(0,l.d4)(e=>e.mirror.appModel.showUi),t=(0,s.tS)(),a=(0,c.iZ)(),m=(0,l.d4)(e=>e.voice.showWidget),E=(0,l.d4)(e=>t&&t in e.voice.activeCall),u=(0,l.d4)(e=>t&&!!e.voice.activeCall[t]),{userIdsInCall:p}=(0,_.W5)(t,!0),v=(0,_.bF)(p,t).length,N=(0,r.qr)(),g=(0,l.wA)(),[f,I]=(0,o.useState)(),[h,w]=(0,o.useState)(),O=(0,n.GS)(),b=o.useCallback((e,t)=>{d.GA.has(e)&&g(i.Pp(!0)),t&&w(t),I(e)},[g]),T=(0,l.d4)(e=>e.voice.captionsInstallProgress),A=(0,l.d4)(e=>e.voice.showCaptions);return(o.useEffect(()=>{N&&(N.captionsToggleEnabled=A,N.streamAudioForCaptions(A&&100===T))},[A,T,N]),o.useEffect(()=>{m||(w(void 0),I(void 0))},[m]),o.useEffect(()=>{t&&!E&&v>0?g(i.Zq({fileKey:t})):t&&E&&!u&&0===v&&g(i.a6({fileKey:t}))},[v,t,E,u,g]),e&&t&&a)?O&&E&&!m?o.createElement(k,{fileKey:t}):N&&m?o.createElement(th,{fileKey:t,user:a,call:N,notificationUserId:h,callEvent:f,callEventCallback:b}):o.createElement(o.Fragment,null):o.createElement(o.Fragment,null)}}}]);

//# debugId=0e005bd6-3af1-5d3a-b2f7-eb73afebb892

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/5918dee93e3dda59b6687cd39eeabb36fbd00207/1526-82b5d910fab04925.min.js.map